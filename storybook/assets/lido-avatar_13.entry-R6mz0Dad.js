import{g as rr,r as He,h as K,H as Ue,a as lt}from"./preview-DDemJ4NW.js";import"./iframe-Du-Tyz26.js";const ke="lidoDragSelectedMap",We="lidoSelectedValues",Gn="lidoActivityScore",Wr="lidoActivityEnd",Br="lidoLessonEnd",Jn="lidoNextContainer",$r="lidoActivityChange",Ur="lidoGameCompleted",Hr="lidoElementDrop",zr="lidoElementClick",Gt="dropLength",rt="dropHasDrag";var De;(function(i){i.NoFlow="noFlow",i.ShowFlow="showFlow",i.FreeTrace="freeTrace",i.BlindTracing="blindTracing",i.BlindFreeTrace="blindFreeTrace"})(De||(De={}));class Xr{constructor(){this.rightMoves=0,this.wrongMoves=0,this.finalScore=0}}var qt;(function(i){i.Diagonal="diagonal"})(qt||(qt={}));function Pt(i,d){const h=new CustomEvent(i,{detail:d});window.dispatchEvent(h)}function Yr(i,d,h){Pt(Wr,{index:i,totalIndex:d,score:h})}function Vr(i){Pt(Br,{score:i})}function Gr(){Pt(Jn,{})}function qr(){Pt(Ur,{})}function tr(i){Pt($r,{index:i})}function Jr(i,d,h){Pt(Hr,{dragElement:i,dropElement:d,isCorrect:h,createdAt:new Date().toISOString()})}function nr(i,d){Pt(zr,{element:i,isCorrect:d,createdAt:new Date().toISOString()})}class It{constructor(){}static getInstance(){return It.instance||(It.instance=new It),It.instance}setRiveInstance(d){this.riveInstance=d}getRiveInstance(){return this.riveInstance}}class ot{constructor(){this.audioElement=document.createElement("audio"),this.audioElement.id="audio",document.body.appendChild(this.audioElement)}static getI(){return ot.instance||(ot.instance=new ot),ot.instance}stop(){window!=null&&window.speechSynthesis&&window.speechSynthesis.cancel(),this.audioElement.pause(),this.audioElement.currentTime=0,this.audioElement.src="",document.querySelectorAll(".speaking-highlight").forEach(y=>qn(y));const h=document.querySelector("#play"),p=document.querySelector("#pause");h&&p&&(h.style.visibility="visible",p.style.visibility="hidden")}async play(d){let h=d.getAttribute("audio")||"";if(!h){const p=d.children;for(let y=0;y<p.length;y++){const A=p[y].getAttribute("audio");A&&(h=A)}}if(h){h=at(h),this.audioElement.src=h,console.log("ðŸš€ Playing audio:",this.audioElement.src);try{await this.audioElement.play(),ir(d),await new Promise(p=>{this.audioElement.onended=()=>{qn(d),p()}})}catch(p){console.log("ðŸš€ Audio play error:",p)}}else if(d.textContent)try{ir(d),await lo(d.textContent),qn(d)}catch(p){console.log("ðŸš€ TTS Error:",p)}}}const st=new Xr,In=i=>{i.style.animation="unset";const d=window.getComputedStyle(i).transform;if(d==="none")return 1;{const h=d.match(/matrix\(([^)]+)\)/);if(h){const p=h[1].split(", ");return parseFloat(p[0])}}return 1};function Kr(i){let d=!1,h=!1,p=0,y=0,A=0,S=0;const w=i.parentElement;if(!w){console.error("Parent element not found.");return}const C=u=>{Kt(i),h=!0,u instanceof MouseEvent?(p=u.clientX,y=u.clientY):(p=u.touches[0].clientX,y=u.touches[0].clientY),i.style.opacity="0.8",i.style.cursor="grabbing";const U=window.getComputedStyle(i).transform;if(U!=="none"){const re=U.match(/matrix\(([^)]+)\)/);if(re){const ue=re[1].split(", ");A=parseFloat(ue[4]),S=parseFloat(ue[5])}}else A=0,S=0;w.getBoundingClientRect(),i.getBoundingClientRect(),document.addEventListener("mousemove",k),document.addEventListener("mouseup",D),document.addEventListener("touchmove",k),document.addEventListener("touchend",D)},E=new MutationObserver(u=>{for(const U of u)U.type==="attributes"&&U.attributeName==="style"&&(w.getBoundingClientRect(),i.getBoundingClientRect())}),x={attributes:!0,attributeFilter:["style"]};E.observe(w,x);const k=u=>{if(!h)return;const U=In(w);let re=0,ue=0;u instanceof MouseEvent?(re=(u.clientX-p)/U,ue=(u.clientY-y)/U):(re=(u.touches[0].clientX-p)/U,ue=(u.touches[0].clientY-y)/U);const he=A+re,be=S+ue,V=w.getBoundingClientRect(),H=i.getBoundingClientRect(),N=i.style.transform.match(/-?\d+(\.\d+)?/g).map(Number),we=H.left/U-N[0],ye=H.top-N[1],Ae=H.right/U-N[0],fe=H.bottom-N[1],Ze=V.right-Ae,de=V.left-we,Me=V.top-ye,Le=V.bottom-fe,je=he+we<=V.left?de:Math.min(he,Ze),Ne=be+ye<=V.top?Me:Math.min(be,Le);i.style.transform=`translate(${je}px, ${Ne}px)`;let ne=_n(i,"slide");if(ne&&ne!=i){const ze=i.parentElement,Se=ne.parentElement;if(ze&&Se){const ie=document.createComment("element-placeholder"),Ce=document.createComment("overlapped-placeholder");ze.replaceChild(ie,i),Se.replaceChild(Ce,ne),ze.replaceChild(ne,ie),Se.replaceChild(i,Ce),i.style.transform="translate(0, 0)",p=u instanceof MouseEvent?u.clientX:u.touches[0].clientX,y=u instanceof MouseEvent?u.clientY:u.touches[0].clientY,A=0,S=0,d=!0}}},D=u=>{h=!1,document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",D),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",D),i.style.opacity="",i.style.cursor="move",i.style.transform="translate(0, 0)",d&&(Zr(i),d=!1)};i.style.cursor="move",i.style.transform="translate(0, 0)",i.addEventListener("mousedown",C),i.addEventListener("touchstart",C),i.addEventListener("click",u=>{Zn(i,"drag")})}const Zr=i=>{const d=JSON.parse(localStorage.getItem(We))||[],h=document.querySelectorAll("[type='slide']");let p=0;h.forEach(C=>{d[p++]=C.value}),localStorage.setItem(We,JSON.stringify(d));const A=document.querySelector("#lido-container").objective.split(","),S=d.indexOf(i.value),w=or(i.value,[A[S].trim()]);Ln(w),Pn()};function Qr(i){let d=!1,h=!1,p=0,y=0,A=0,S=0,w=null;const C=document.querySelector("#lido-container");if(!C){console.error('Container with ID "container" not found.');return}ei(i,"drag");let E,x;const k=V=>{var H;if(ot.getI().stop(),Kt(i),d=!0,h=!0,V instanceof MouseEvent?(p=V.clientX,y=V.clientY):(p=V.touches[0].clientX,y=V.touches[0].clientY),i.style.opacity="0.8",i.style.cursor="grabbing",((H=i.getAttribute("dropAttr"))===null||H===void 0?void 0:H.toLowerCase())===qt.Diagonal){const N=window.getComputedStyle(i),we=i.getBoundingClientRect();w||(w=i.cloneNode(!0),w.style.left=`${we.left}px`,w.style.top=`${we.top}px`,w.style.width=`${we.width}px`,w.style.height=`${we.height}px`,w.style.transform=N.transform,w.style.zIndex="0",w.setAttribute("visible","true"),w.classList.add("cloned-element"),document.body.appendChild(w))}const ve=window.getComputedStyle(i).transform;if(ve!=="none"){const N=ve.match(/matrix\(([^)]+)\)/);if(N){const we=N[1].split(", ");A=parseFloat(we[4]),S=parseFloat(we[5])}}else A=0,S=0;document.addEventListener("mousemove",ue),document.addEventListener("mouseup",be),document.addEventListener("touchmove",ue),document.addEventListener("touchend",be)},D=C.getBoundingClientRect(),u=i.getBoundingClientRect();E=D.top-u.top,x=D.left-u.left;const U=new MutationObserver(V=>{for(const H of V)if(H.type==="attributes"&&H.attributeName==="style"){const ve=C.getBoundingClientRect(),N=i.getBoundingClientRect();E=ve.top-N.top,x=ve.left-N.left}}),re={attributes:!0,attributeFilter:["style"]};U.observe(C,re);const ue=V=>{if(!d)return;h=!1,i.style.transition="none";const H=In(C);let ve=0,N=0;V instanceof MouseEvent?(ve=(V.clientX-p)/H,N=(V.clientY-y)/H):(ve=(V.touches[0].clientX-p)/H,N=(V.touches[0].clientY-y)/H);const we=A+ve,ye=S+N,Ae=C.getBoundingClientRect(),fe=i.getBoundingClientRect(),de=i.style.transform.match(/-?\d+(\.\d+)?/g).map(Number),Me=fe.left/H-de[0],Le=fe.top-de[1],je=Ae.width/H-Math.abs(x/H)-fe.width/H,Ne=Ae.left-Me,ne=Ae.top-Le,ze=Ae.height/H-Math.abs(E/H)-fe.height/H,Se=we+Me<=Ae.left?Ne:Math.min(we,je),ie=ye+Le<=Ae.top?ne:Math.min(ye,ze);i.style.transform=`translate(${Se}px, ${ie}px)`;let Ce=_n(i,"drop");document.querySelectorAll("[type='drop']").forEach(Y=>{const pe=JSON.parse(localStorage.getItem(ke))||{};Object.keys(pe).map(Number).includes(Y.tabIndex)?(Y.tagName.toLowerCase()==="lido-text"&&(Y.style.border="",Y.style.backgroundColor="transparent"),Y.tagName.toLowerCase()==="lido-image"&&(Y.style.opacity="0")):(Y.tagName.toLowerCase()==="lido-text"&&(Y.style.border="",Y.style.backgroundColor=""),Y.tagName.toLowerCase()==="lido-image"&&(Y.style.opacity="1"))}),Ce&&(Ce.tagName.toLowerCase()==="lido-text"?(Ce.style.border="2px dashed #ff0000",Ce.style.backgroundColor="rgba(255, 0, 0, 0.1)"):Ce.style.opacity="0.3")};let he=null;const be=V=>{var H;if(d=!1,h)return;document.removeEventListener("mousemove",ue),document.removeEventListener("mouseup",be),document.removeEventListener("touchmove",ue),document.removeEventListener("touchend",be),i.style.opacity="",i.style.cursor="move";const ve=document.querySelectorAll("[type='drop']");ve.forEach(we=>{ve.forEach(ye=>{const Ae=JSON.parse(localStorage.getItem(ke))||{};Object.keys(Ae).map(Number).includes(ye.tabIndex)?(ye.tagName.toLowerCase()==="lido-text"&&(ye.style.border="",ye.style.backgroundColor="transparent"),ye.tagName.toLowerCase()==="lido-image"&&(ye.style.opacity="0")):(ye.tagName.toLowerCase()==="lido-text"&&(ye.style.border="",ye.style.backgroundColor=""),ye.tagName.toLowerCase()==="lido-image"&&(ye.style.opacity="1"))})});let N=_n(i,"drop");An(i,N),((H=i.getAttribute("dropAttr"))===null||H===void 0?void 0:H.toLowerCase())===qt.Diagonal&&(N?i&&(i.classList.add("diagonal-drop"),N.classList.add("diagonal-target"),he=N):(he&&(he.classList.remove("diagonal-target"),he=null),i==null||i.classList.remove("diagonal-drop"),i.style.transform="translate(0, 0)",w&&(w.remove(),w=null)))};i.style.cursor="move",i.style.transform="translate(0, 0)",i.addEventListener("mousedown",k),i.addEventListener("touchstart",k),i.addEventListener("click",V=>{h&&Zn(i,"drag")})}const _n=(i,d)=>{const h=i.getBoundingClientRect(),p=document.querySelectorAll(`[type="${d}"]`);let y=null,A=0;return p.forEach(S=>{if(S===i)return;const w=S.getBoundingClientRect(),C=Math.max(0,Math.min(h.right,w.right)-Math.max(h.left,w.left)),E=Math.max(0,Math.min(h.bottom,w.bottom)-Math.max(h.top,w.top)),x=C*E;if(x!==0)if(d==="slide"){const k=h.width*h.height,D=w.width*w.height,u=Math.min(k,D)*.8;x>=u&&x>A&&(A=x,y=S)}else x>A&&(A=x,y=S)}),y};async function An(i,d){const h=localStorage.getItem(We)||"",p=localStorage.getItem(ke);let y=JSON.parse(localStorage.getItem(rt)||" {}");if(d&&(d.getAttribute("isAllowOnlyOneDrop")==="true"||!d.getAttribute("isAllowOnlyOneDrop"))){const w=Object.values(y).find(E=>document.getElementById(E.drop)===d);if(w?w.isFull=!0:console.warn("No matching drop item found for",d),localStorage.setItem(rt,JSON.stringify(y)),_n(i,"drag")){if(i.style.transform="translate(0,0)",i.style.transition="transform 0.5s ease",p){let x=JSON.parse(p);for(const k in x)x[k].includes(i.value)&&delete x[k];localStorage.setItem(ke,JSON.stringify(x))}document.querySelectorAll("[type='drop']").forEach(x=>{const k=JSON.parse(localStorage.getItem(ke))||{};Object.keys(k).map(Number).includes(x.tabIndex)?(x.tagName.toLowerCase()==="lido-text"&&(x.style.border="",x.style.backgroundColor="transparent"),x.tagName.toLowerCase()==="lido-image"&&(x.style.opacity="0")):(x.tagName.toLowerCase()==="lido-text"&&(x.style.border="",x.style.backgroundColor=""),x.tagName.toLowerCase()==="lido-image"&&(x.style.opacity="1"))});return}}if(!d){i.style.transform="translate(0,0)",i.style.transition="transform 0.5s ease";let w=Sn.get(i);if(w){let E=Object.values(y).find(x=>document.getElementById(x.drop)===w);E&&(E.isFull=!1,localStorage.setItem(rt,JSON.stringify(y))),Sn.delete(i)}if(h){let E=JSON.parse(h);E=E.filter(x=>x!=i.value),localStorage.setItem(We,JSON.stringify(E))}if(p){let E=JSON.parse(p);for(const x in E)E[x].includes(i.value)&&delete E[x];localStorage.setItem(ke,JSON.stringify(E))}document.querySelectorAll("[type='drop']").forEach(E=>{const x=JSON.parse(localStorage.getItem(ke))||{};Object.keys(x).map(Number).includes(E.tabIndex)?(E.tagName.toLowerCase()==="lido-text"&&(E.style.border="",E.style.backgroundColor="transparent"),E.tagName.toLowerCase()==="lido-image"&&(E.style.opacity="0")):(E.tagName.toLowerCase()==="lido-text"&&(E.style.border="",E.style.backgroundColor=""),E.tagName.toLowerCase()==="lido-image"&&(E.style.opacity="1"))}),Pn();return}if(p){let w=Sn.get(i);if(w){let E=Object.values(y).find(x=>document.getElementById(x.drop)===w);E&&(E.isFull=!1,localStorage.setItem(rt,JSON.stringify(y)))}let C=JSON.parse(p);for(const E in C)C[E].includes(i.value)&&delete C[E];localStorage.setItem(ke,JSON.stringify(C))}let A=JSON.parse(localStorage.getItem(Gt))||0;if(A+=1,localStorage.setItem(Gt,JSON.stringify(A)),A===Jt(d.value)){const w=Object.values(y).find(C=>document.getElementById(C.drop)===d);w?w.isFull=!0:console.warn("No matching drop item found for",d),localStorage.setItem(rt,JSON.stringify(y)),A=0,localStorage.setItem(Gt,JSON.stringify(A))}Sn.set(i,d);const S=d.value.includes(i.value);if(Jr(i,d,S),S){const w=d.getAttribute("onCorrect");w&&await $e(w,d,i)}else{const w=d.getAttribute("onInCorrect");await $e(w,d,i)}Ln(S),i.style.opacity="1",await to(i,d)}const $e=async(i,d,h)=>{var p;const y=eo(i);for(let A=0;A<y.length;A++){const S=y[A],w=document.querySelector(S.actor),C=S.actor==="this"?d:S.actor==="element"?h:w||document.getElementById(S.actor);if(C)switch(S.action){case"transform":{const E=window.getComputedStyle(C).transform;C.style.transform=E!=="none"?`${E} ${S.value}`:S.value;break}case"alignMatch":{const E=C,x=h,k=document.querySelector("#lido-container"),D=In(k);x.style.transform="translate(0,0)";const u=E.getBoundingClientRect(),U=x.getBoundingClientRect(),re=u.left+u.width/2,ue=u.top+u.height/2,he=U.left+U.width/2,be=U.top+U.height/2,V=(re-he)/D,H=(ue-be)/D;((p=h.getAttribute("dropAttr"))===null||p===void 0?void 0:p.toLowerCase())===qt.Diagonal?x.style.transform=`translate(${V-90}px, ${H-90}px)`:x.style.transform=`translate(${V}px, ${H}px)`;break}case"removeClone":{document.querySelectorAll(S.value).forEach(x=>x.remove());break}case"addClass":{C.classList.add(S.value);break}case"speak":{await ot.getI().play(C);break}case"stop":{await ot.getI().stop();break}case"sleep":{!isNaN(Number(S.value))&&await new Promise(x=>setTimeout(x,Number(S.value)));break}case"avatarAnimate":{const x=It.getInstance().getRiveInstance();x&&S.value&&x.play(S.value);break}default:{C.style[S.action]=S.value;break}}}},eo=i=>{var d;const h=[];return i&&((d=i.split(";"))===null||d===void 0?void 0:d.map(y=>y.trim())).forEach(y=>{if(y){const[A,S]=y.split("=").map(C=>C.trim()),w=A.lastIndexOf(".");if(w!==-1){const C=A.substring(0,w).trim(),E=A.substring(w+1).trim();h.push({actor:C,action:E,value:S.replace(/['"]/g,"")})}}}),h},or=(i,d)=>{const h=i.split(",").map(A=>A.trim());let p=0,y=new Set;for(const A of h)if(A.startsWith("(")&&A.endsWith(")")){const S=A.slice(1,-1).split("|").map(C=>C.trim()),w=d[p].slice(1,-1).split("|").map(C=>C.trim());if(p>=w.length)return!1;for(let C=0;C<S.length;C++)if(!S.includes(w[C]))return!1;p++}else if(A.includes("|")){const S=A.split("|").map(w=>w.trim());for(const w of S)y.add(w)}else{if(p>=d.length||d[p]!==A)return!1;p++}for(;p<d.length;){if(!y.has(d[p]))return!1;y.delete(d[p]),p++}return p===d.length},Jt=i=>{const d=i.split(",").map(p=>p.trim());let h=0;for(const p of d)p.startsWith("(")&&p.endsWith(")")?p.includes("|")?h+=p.split("|").length:h+=1:h+=p.split("|").length;return h};async function to(i,d){var h;const p=document.querySelector("#lido-container");if(!p)return;if(p.getAttribute("isAllowOnlyCorrect")==="true"&&!d.value.includes(i.value)){i.style.transform="translate(0,0)";return}await $e("this.alignMatch='true'",d,i);let A=JSON.parse((h=localStorage.getItem(ke))!==null&&h!==void 0?h:"{}");const S=d.getAttribute("tabindex");A[S]||(A[S]=[]),A[S].push(i.value),localStorage.setItem(ke,JSON.stringify(A));const C=Object.keys(A).sort((x,k)=>parseInt(x)-parseInt(k)).reduce((x,k)=>{const D=A[k];return D.length>1?x.push(`(${D.join("|")})`):x.push(D[0]),x},[]);localStorage.setItem(We,JSON.stringify(C)),document.querySelectorAll("[type='drop']").forEach(x=>{const k=JSON.parse(localStorage.getItem(ke))||{};Object.keys(k).map(Number).includes(x.tabIndex)?(x.tagName.toLowerCase()==="lido-text"&&(x.style.border="",x.style.backgroundColor="transparent"),x.tagName.toLowerCase()==="lido-image"&&(x.style.opacity="0")):(x.tagName.toLowerCase()==="lido-text"&&(x.style.border="",x.style.backgroundColor=""),x.tagName.toLowerCase()==="lido-image"&&(x.style.opacity="1"))}),Pn()}const Ln=i=>{i?st.rightMoves+=1:st.wrongMoves+=1,console.log("Right Moves : ",st.rightMoves),console.log("Wrong Moves : ",st.wrongMoves)},no=()=>{const i=st.rightMoves,d=st.wrongMoves;let h=Math.floor(i/(i+d)*100);io(h),st.rightMoves=0,st.wrongMoves=0},io=i=>{var d,h,p;const y=document.querySelector("lido-home");if(!y)return;const A=Number((d=y.getAttribute("index"))!==null&&d!==void 0?d:0),S=Number((h=y.getAttribute("totalIndex"))!==null&&h!==void 0?h:0),w=JSON.parse((p=localStorage.getItem(Gn))!==null&&p!==void 0?p:"{}"),C=A.toString();if(w[C]=i,Yr(A,S,i),localStorage.setItem(Gn,JSON.stringify(w)),S-1==A){const E=Object.values(w),x=E.reduce((k,D)=>k+D,0)/E.length;st.finalScore=Math.floor(x),console.log("Total Score : ",st.finalScore),Vr(x),localStorage.removeItem(Gn)}},Pn=()=>{var i;const d=document.querySelector("#lido-container"),h=d.objective,p=(i=localStorage.getItem(We))!==null&&i!==void 0?i:"",y=document.querySelector("#lido-checkButton");if(!p||Jt(p)!==Jt(h)){$e("this.addClass='lido-disable-check-button'",y);return}d.getAttribute("showCheck")=="true"?y.classList.remove("lido-disable-check-button"):Kn()},Kn=async()=>{var i;const d=document.querySelector("#lido-container");if(!d)return;const h=d.objective,p=(i=JSON.parse(localStorage.getItem(We)))!==null&&i!==void 0?i:[];if(or(h,p)){const A=d.getAttribute("onCorrect");A&&await $e(A,d),En()}else{const A=d.getAttribute("onInCorrect");await $e(A,d),d.getAttribute("isContinueOnCorrect")==="true"||En()}await no()},En=()=>{ot.getI().stop(),console.log("ðŸš€ ~ triggerNextContainer ~ event:",event),Gr()},mt=async(i,d)=>{const h=document.querySelector("#lido-container");if(!h)return;const p=i.getAttribute("onEntry");await $e(p,i);const y=h.getAttribute("canplay");if(!(y!=null&&y==="false")){switch(d){case"drag":{Qr(i);break}case"click":{oo(i);break}case"drop":{so(i);break}case"slide":{Kr(i);break}}ro(i)}};function ro(i){if(!i)return;const d=i.getAttribute("onTouch");d&&(i.onclick=async()=>{console.log("ðŸš€ ~ element.onclick= ~ onTouch:",d),d&&await $e(d,i)})}function oo(i){if(ei(i,"click"),i.style.cursor="pointer",!i){console.error("No element provided.");return}const d=async()=>{ot.getI().stop();const h=document.querySelector("#lido-container"),p=h.objective.split(","),y=document.querySelector("#lido-checkButton"),A=h.getAttribute("showCheck")==="true";if(i.getAttribute("id")=="lido-checkButton"){y.classList.add("lido-disable-check-button"),await Kn();return}const S=i.classList.contains("lido-element-selected");let w=JSON.parse(localStorage.getItem(We))||[];if(p.length===1){localStorage.setItem(We,JSON.stringify([i.value]));const C=p.includes(i.value);if(nr(i,C),C){const E=i.getAttribute("onCorrect");i.style.pointerEvents="none",await $e(E,i)}else{const E=i.getAttribute("onInCorrect");await $e(E,i)}Ln(C),Pn();return}if(A&&y.classList.remove("lido-disable-check-button"),S){i.classList.remove("lido-element-selected"),$e(i.getAttribute("onEntry"),i),w=w.filter(k=>k!=i.value),localStorage.setItem(We,JSON.stringify(w));let C=JSON.parse(localStorage.getItem(ke))||{};const E=i.value,x=Object.keys(C).find(k=>C[k].includes(E));if(x){C[x]=C[x].filter(u=>u!==E),C[x].length===0&&delete C[x],localStorage.setItem(ke,JSON.stringify(C));const D=Object.keys(C).sort((u,U)=>parseInt(u)-parseInt(U)).reduce((u,U)=>u.concat(C[U]),[]);localStorage.setItem(We,JSON.stringify(D))}A&&w.length===0&&y.classList.add("lido-disable-check-button");return}else{i.classList.add("lido-element-selected");const C=i.value,E=Object.keys(p).find(U=>p[U]===C);let x=JSON.parse(localStorage.getItem(ke))||{};E?x[E]=[C]:x[p.length+w.length]=[C],localStorage.setItem(ke,JSON.stringify(x));const D=Object.keys(x).sort((U,re)=>parseInt(U)-parseInt(re)).reduce((U,re)=>U.concat(x[re]),[]);localStorage.setItem(We,JSON.stringify(D));const u=p.includes(i.value);if(nr(i,u),u){const U=i.getAttribute("onCorrect");await $e(U,i)}else{const U=i.getAttribute("onInCorrect");await $e(U,i)}Ln(u)}!A&&Jt(p)===Jt(w)&&Kn()};i.addEventListener("click",d),i.addEventListener("pointerdown",()=>{i.getAttribute("animation")==="clickable"&&(i.classList.add("removeShadow"),i.style.top="40px",i.style.position="relative")}),i.addEventListener("pointerup",()=>{i.getAttribute("animation")==="clickable"&&setTimeout(()=>{i.classList.remove("removeShadow"),i.style.top="0px",i.style.position="relative"},50)})}function so(i){let d=JSON.parse(localStorage.getItem(rt)||"{}");const h=i.getAttribute("tabIndex");(typeof d!="object"||d===null)&&(d={}),d[h]||(d[h]={drop:i.id,isFull:!1},localStorage.setItem(rt,JSON.stringify(d))),i.onclick=()=>{Zn(i,"drop")},ei(i,"drop")}async function Zn(i,d){if(document.querySelectorAll(`[type='${d}']`).forEach(A=>{Kt(A)}),!document.querySelector("#dynamic-highlight-style")){const A=document.createElement("style");A.id="dynamic-highlight-style",A.innerHTML=`
      .highlight {
        // border: 4px solid #e74c3c; /* Thicker red border for more visibility */
        // border-radius: 12px; /* Larger rounded corners */
        // background-color: rgba(231, 76, 60, 0.3); /* Stronger, more noticeable background */
        // box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2), 0 12px 40px rgba(0, 0, 0, 0.2); /* Stronger shadow */
        // outline: 4px solid rgba(231, 76, 60, 0.6); /* Glow effect */
      }
    `,document.head.appendChild(A)}i==null||i.classList.add("highlight"),i.ariaPressed="true";const p=d==="drop"?i:document.querySelector("[type='drop'].highlight"),y=d==="drag"?i:document.querySelector("[type='drag'].highlight");if(p||ao(i),p&&y){y.style.transition="transform 0.5s ease",y.style.transform="";const A=document.querySelector("#lido-container"),S=In(A);console.log("ðŸš€ ~ onClickDropOrDragElement ~ containerScale:",S);const w=p.getBoundingClientRect(),C=y.getBoundingClientRect(),E=(w.left-C.left)/S,x=(w.top-C.top)/S;y.style.transform=`translate(${E}px, ${x}px)`,document.querySelectorAll("*").forEach(D=>{Kt(D)}),await An(y,p)}}const Sn=new Map;async function ao(i){const d=JSON.parse(localStorage.getItem(rt)||"{}"),h=i;if(!h){console.error("Element not found");return}const p=getComputedStyle(h).transform;if(Kt(i),p&&p!=="none"&&p!=="matrix(1, 0, 0, 1, 0, 0)"){h.style.transition="transform 0.5s ease",h.style.transform="translate(0px, 0px)",An(h,null);return}let y=Object.values(d).find(A=>!A.isFull);if(y){const A=document.querySelector(`#${y.drop}`);h.style.transition="transform 0.5s ease",An(h,A)}}function Kt(i){i.classList.remove("highlight"),i.ariaPressed="false"}function ir(i){if(!i)return;i.classList.add("speaking-highlight");const d="#speaking-highlight-style";if(!document.querySelector(d)){const h=document.createElement("style");h.id=d,h.innerHTML=`
      .speaking-highlight {
        --base-transform: ${i.style.transform};
        box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9) !important; /* Stronger orange glow effect */
        // border: 3px solid green !important;
        transition: box-shadow 0.5s ease-in-out, transform 0.5s ease-in-out;
        transform: scale(1.05); /* Subtle scale effect to pop the element */
        animation: pulseEffect 1.5s infinite; /* Pulsing animation */
      }

      @keyframes pulseEffect {
        0% {
          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);
          transform: var(--base-transform) scale(1.05);
        }
        50% {
          box-shadow: 0 0 30px 15px rgba(255, 165, 0, 1);
          transform: var(--base-transform) scale(1.1);
        }
        100% {
          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);
          transform: var(--base-transform) scale(1.05);
        }
      }
    `,document.head.appendChild(h)}}function qn(i){i&&i.classList.remove("speaking-highlight")}function at(i){const h=document.querySelector("#lido-container").getAttribute("baseUrl");return i!=null&&i.startsWith("http")||i!=null&&i.startsWith("blob")?i:h?h+i:rr(i)}async function lo(i,d){return new Promise((h,p)=>{if(!("speechSynthesis"in window)){p(new Error("Speech synthesis is not supported in this browser."));return}const y=window.speechSynthesis;setTimeout(()=>{const A=new SpeechSynthesisUtterance(i);A.onend=()=>{h(!0)},y.speak(A)},50)})}function Qn(i,d,h,p,y){if(p===void 0)return;const A=Array.from(i.children);let S=p;d&&p<d&&(S=d),h&&p>h&&(S=h),A.forEach((w,C)=>{w.style.display=C<S?y:"none"})}const Z=(i,d)=>!i||!i.includes(",")?i:i.split(",").reduce((p,y)=>{const[A,S]=y.split(".");return p[A.trim()]=S.trim(),p},{})[d]||"",ei=(i,d)=>{const h=document.querySelectorAll("[type='drag']"),p=document.querySelectorAll("[type='drop']"),y=document.querySelectorAll("[type='click']");let A=0;if(d==="click"){y.forEach(S=>{const w=S;let C=null;if(w.getAttribute("flexibleWidth"))C=w;else{const E=w.children;for(let x=0;x<E.length;x++){const k=E[x];if(k.getAttribute("flexibleWidth")){C=k;break}}}if(C){const E=C.style.width,x=C.style.padding;C.style.width="auto",C.style.padding="0 20px";const k=C.offsetWidth;C.style.width=E,C.style.padding=x,k>A&&(A=k)}}),y.forEach(S=>{const w=S;if(w.getAttribute("flexibleWidth")){if(w.getAttribute("flexibleWidth")==="true")return;w.style.width=`${A}px`}else{const C=w.children;for(let E=0;E<C.length;E++){const x=C[E];if(x.getAttribute("flexibleWidth")){if(x.getAttribute("flexibleWidth")==="true")return;x.style.width=`${A}px`;break}}}});return}h.forEach(S=>{const w=S,C=w.style.width,E=w.style.padding;w.style.width="auto",w.style.padding="0 20px";const x=w.offsetWidth;w.style.width=C,w.style.padding=E,x>A&&(A=x)}),h.forEach(S=>{const w=S,C=w.getAttribute("flexibleWidth");C==="false"?w.style.width=`${A}px`:C==="true"&&d==="drag"&&(w.style.width="auto",w.style.padding="0 20px")}),p.forEach(S=>{const w=S,C=w.getAttribute("flexibleWidth");if(C==="false"){const E=parseFloat(getComputedStyle(w).borderWidth);if(typeof E=="number"){const x=A-E*2,k=parseFloat(w.style.height)-E*2;w.style.height=`${k}px`,w.style.width=`${x}px`;return}}else C==="true"&&d==="drag"&&(w.style.width="auto",w.style.padding="0 20px")})};var co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sr={exports:{}};(function(i,d){(function(p,y){i.exports=y()})(co,()=>(()=>{var h=[,(S,w,C)=>{C.r(w),C.d(w,{default:()=>x});var E=(()=>{var k=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(D={}){var u=D,U,re;u.ready=new Promise((e,t)=>{U=e,re=t});function ue(){function e(f){const b=o;n=t=0,o=new Map,b.forEach(_=>{try{_(f)}catch(v){console.error(v)}}),this.ob(),s&&s.Tb()}let t=0,n=0,o=new Map,s=null,l=null;this.requestAnimationFrame=function(f){t||(t=requestAnimationFrame(e.bind(this)));const b=++n;return o.set(b,f),b},this.cancelAnimationFrame=function(f){o.delete(f),t&&o.size==0&&(cancelAnimationFrame(t),t=0)},this.Rb=function(f){l&&(document.body.remove(l),l=null),f||(l=document.createElement("div"),l.style.backgroundColor="black",l.style.position="fixed",l.style.right=0,l.style.top=0,l.style.color="white",l.style.padding="4px",l.innerHTML="RIVE FPS",f=function(b){l.innerHTML="RIVE FPS "+b.toFixed(1)},document.body.appendChild(l)),s=new function(){let b=0,_=0;this.Tb=function(){var v=performance.now();_?(++b,v-=_,1e3<v&&(f(1e3*b/v),b=_=0)):(_=v,b=0)}}},this.Ob=function(){l&&(document.body.remove(l),l=null),s=null},this.ob=function(){}}function he(e){console.assert(!0);const t=new Map;let n=-1/0;this.push=function(o){return o=o+((1<<e)-1)>>e,t.has(o)&&clearTimeout(t.get(o)),t.set(o,setTimeout(function(){t.delete(o),t.length==0?n=-1/0:o==n&&(n=Math.max(...t.keys()),console.assert(n<o))},1e3)),n=Math.max(o,n),n<<e}}const be=u.onRuntimeInitialized;u.onRuntimeInitialized=function(){be&&be();let e=u.decodeAudio;u.decodeAudio=function(s,l){s=e(s),l(s)};let t=u.decodeFont;u.decodeFont=function(s,l){s=t(s),l(s)};const n=u.FileAssetLoader;u.ptrToAsset=s=>{let l=u.ptrToFileAsset(s);return l.isImage?u.ptrToImageAsset(s):l.isFont?u.ptrToFontAsset(s):l.isAudio?u.ptrToAudioAsset(s):l},u.CustomFileAssetLoader=n.extend("CustomFileAssetLoader",{__construct:function({loadContents:s}){this.__parent.__construct.call(this),this.Gb=s},loadContents:function(s,l){return s=u.ptrToAsset(s),this.Gb(s,l)}}),u.CDNFileAssetLoader=n.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(s){let l=u.ptrToAsset(s);return s=l.cdnUuid,s===""?!1:(function(f,b){var _=new XMLHttpRequest;_.responseType="arraybuffer",_.onreadystatechange=function(){_.readyState==4&&_.status==200&&b(_)},_.open("GET",f,!0),_.send(null)}(l.cdnBaseUrl+"/"+s,f=>{l.decode(new Uint8Array(f.response))}),!0)}}),u.FallbackFileAssetLoader=n.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(s){this.kb.push(s)},loadContents:function(s,l){for(let f of this.kb)if(f.loadContents(s,l))return!0;return!1}});let o=u.computeAlignment;u.computeAlignment=function(s,l,f,b,_=1){return o.call(this,s,l,f,b,_)}};const V="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),H=new function(){function e(){if(!t){let J=function(ee,j,xe){if(j=T.createShader(j),T.shaderSource(j,xe),T.compileShader(j),xe=T.getShaderInfoLog(j),0<(xe||"").length)throw xe;T.attachShader(ee,j)};var g=document.createElement("canvas"),R={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let T;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(T=g.getContext("webgl",R),n=1,!T)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(T=g.getContext("webgl2",R))n=2;else if(T=g.getContext("webgl",R))n=1;else return console.log("No WebGL support. Image mesh will not be drawn."),!1;if(T=new Proxy(T,{get(ee,j){if(ee.isContextLost()){if(_||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",j),_=!0),typeof ee[j]=="function")return function(){}}else return typeof ee[j]=="function"?function(...xe){return ee[j].apply(ee,xe)}:ee[j]},set(ee,j,xe){if(ee.isContextLost())_||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+j),_=!0);else return ee[j]=xe,!0}}),o=Math.min(T.getParameter(T.MAX_RENDERBUFFER_SIZE),T.getParameter(T.MAX_TEXTURE_SIZE)),g=T.createProgram(),J(g,T.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),J(g,T.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),T.bindAttribLocation(g,0,"vertex"),T.bindAttribLocation(g,1,"uv"),T.linkProgram(g),R=T.getProgramInfoLog(g),0<(R||"").trim().length)throw R;s=T.getUniformLocation(g,"mat"),l=T.getUniformLocation(g,"translate"),T.useProgram(g),T.bindBuffer(T.ARRAY_BUFFER,T.createBuffer()),T.enableVertexAttribArray(0),T.enableVertexAttribArray(1),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,T.createBuffer()),T.uniform1i(T.getUniformLocation(g,"image"),0),T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=T}return!0}let t=null,n=0,o=0,s=null,l=null,f=0,b=0,_=!1;e(),this.hc=function(){return e(),o},this.Mb=function(g){t.deleteTexture&&t.deleteTexture(g)},this.Lb=function(g){if(!e())return null;const R=t.createTexture();return R?(t.bindTexture(t.TEXTURE_2D,R),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,g),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),n==2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),R):null};const v=new he(8),M=new he(8),F=new he(10),W=new he(10);this.Qb=function(g,R,T,J,ee){if(e()){var j=v.push(g),xe=M.push(R);if(t.canvas){(t.canvas.width!=j||t.canvas.height!=xe)&&(t.canvas.width=j,t.canvas.height=xe),t.viewport(0,xe-R,g,R),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),T.sort((ae,nt)=>nt.wb-ae.wb),j=F.push(J),f!=j&&(t.bufferData(t.ARRAY_BUFFER,8*j,t.DYNAMIC_DRAW),f=j),j=0;for(var Oe of T)t.bufferSubData(t.ARRAY_BUFFER,j,Oe.Ta),j+=4*Oe.Ta.length;console.assert(j==4*J);for(var tt of T)t.bufferSubData(t.ARRAY_BUFFER,j,tt.Db),j+=4*tt.Db.length;console.assert(j==8*J),j=W.push(ee),b!=j&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*j,t.DYNAMIC_DRAW),b=j),Oe=0;for(var At of T)t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,Oe,At.indices),Oe+=2*At.indices.length;console.assert(Oe==2*ee),At=0,tt=!0,j=Oe=0;for(const ae of T){ae.image.Ka!=At&&(t.bindTexture(t.TEXTURE_2D,ae.image.Ja||null),At=ae.image.Ka),ae.mc?(t.scissor(ae.Ya,xe-ae.Za-ae.jb,ae.Ac,ae.jb),tt=!0):tt&&(t.scissor(0,xe-R,g,R),tt=!1),T=2/g;const nt=-2/R;t.uniform4f(s,ae.ha[0]*T*ae.Ba,ae.ha[1]*nt*ae.Ca,ae.ha[2]*T*ae.Ba,ae.ha[3]*nt*ae.Ca),t.uniform2f(l,ae.ha[4]*T*ae.Ba+T*(ae.Ya-ae.ic*ae.Ba)-1,ae.ha[5]*nt*ae.Ca+nt*(ae.Za-ae.jc*ae.Ca)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,j),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,j+4*J),t.drawElements(t.TRIANGLES,ae.indices.length,t.UNSIGNED_SHORT,Oe),j+=4*ae.Ta.length,Oe+=2*ae.indices.length}console.assert(j==4*J),console.assert(Oe==2*ee)}}},this.canvas=function(){return e()&&t.canvas}},ve=u.onRuntimeInitialized;u.onRuntimeInitialized=function(){function e(P){switch(P){case v.srcOver:return"source-over";case v.screen:return"screen";case v.overlay:return"overlay";case v.darken:return"darken";case v.lighten:return"lighten";case v.colorDodge:return"color-dodge";case v.colorBurn:return"color-burn";case v.hardLight:return"hard-light";case v.softLight:return"soft-light";case v.difference:return"difference";case v.exclusion:return"exclusion";case v.multiply:return"multiply";case v.hue:return"hue";case v.saturation:return"saturation";case v.color:return"color";case v.luminosity:return"luminosity"}}function t(P){return"rgba("+((16711680&P)>>>16)+","+((65280&P)>>>8)+","+((255&P)>>>0)+","+((4278190080&P)>>>24)/255+")"}function n(){0<xe.length&&(H.Qb(j.drawWidth(),j.drawHeight(),xe,Oe,tt),xe=[],tt=Oe=0,j.reset(512,512));for(const P of ee){for(const B of P.H)B();P.H=[]}ee.clear()}ve&&ve();var o=u.RenderPaintStyle;const s=u.RenderPath,l=u.RenderPaint,f=u.Renderer,b=u.StrokeCap,_=u.StrokeJoin,v=u.BlendMode,M=o.fill,F=o.stroke,W=u.FillRule.evenOdd;let g=1;var R=u.RenderImage.extend("CanvasRenderImage",{__construct:function({la:P,xa:B}={}){this.__parent.__construct.call(this),this.Ka=g,g=g+1&2147483647||1,this.la=P,this.xa=B},__destruct:function(){this.Ja&&(H.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(P){var B=this;B.xa&&B.xa(B);var oe=new Image;B.Wa=URL.createObjectURL(new Blob([P],{type:"image/png"})),oe.onload=function(){B.Fb=oe,B.Ja=H.Lb(oe),B.size(oe.width,oe.height),B.la&&B.la(B)},oe.src=B.Wa}}),T=s.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(P,B,oe,se,G,le,ce){var me=this.T,Ve=me.addPath;P=P.T;const Ee=new DOMMatrix;Ee.a=B,Ee.b=oe,Ee.c=se,Ee.d=G,Ee.e=le,Ee.f=ce,Ve.call(me,P,Ee)},fillRule:function(P){this.Va=P},moveTo:function(P,B){this.T.moveTo(P,B)},lineTo:function(P,B){this.T.lineTo(P,B)},cubicTo:function(P,B,oe,se,G,le){this.T.bezierCurveTo(P,B,oe,se,G,le)},close:function(){this.T.closePath()}}),J=l.extend("CanvasRenderPaint",{color:function(P){this.Xa=t(P)},thickness:function(P){this.Ib=P},join:function(P){switch(P){case _.miter:this.Ia="miter";break;case _.round:this.Ia="round";break;case _.bevel:this.Ia="bevel"}},cap:function(P){switch(P){case b.butt:this.Ha="butt";break;case b.round:this.Ha="round";break;case b.square:this.Ha="square"}},style:function(P){this.Hb=P},blendMode:function(P){this.Eb=e(P)},clearGradient:function(){this.ja=null},linearGradient:function(P,B,oe,se){this.ja={yb:P,zb:B,bb:oe,cb:se,Ra:[]}},radialGradient:function(P,B,oe,se){this.ja={yb:P,zb:B,bb:oe,cb:se,Ra:[],ec:!0}},addStop:function(P,B){this.ja.Ra.push({color:P,stop:B})},completeGradient:function(){},draw:function(P,B,oe){let se=this.Hb;var G=this.Xa,le=this.ja;if(P.globalCompositeOperation=this.Eb,le!=null){G=le.yb;var ce=le.zb;const Ve=le.bb;var me=le.cb;const Ee=le.Ra;le.ec?(le=Ve-G,me-=ce,G=P.createRadialGradient(G,ce,0,G,ce,Math.sqrt(le*le+me*me))):G=P.createLinearGradient(G,ce,Ve,me);for(let it=0,Re=Ee.length;it<Re;it++)ce=Ee[it],G.addColorStop(ce.stop,t(ce.color));this.Xa=G,this.ja=null}switch(se){case F:P.strokeStyle=G,P.lineWidth=this.Ib,P.lineCap=this.Ha,P.lineJoin=this.Ia,P.stroke(B);break;case M:P.fillStyle=G,P.fill(B,oe)}}});const ee=new Set;let j=null,xe=[],Oe=0,tt=0;var At=u.CanvasRenderer=f.extend("Renderer",{__construct:function(P){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=P.getContext("2d"),this.Ua=P,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const P=this.S.length-6;if(6>P)throw"restore() called without matching save().";this.S.splice(P),this.H.push(this.C.restore.bind(this.C))},transform:function(P,B,oe,se,G,le){const ce=this.S,me=ce.length-6;ce.splice(me,6,ce[me]*P+ce[me+2]*B,ce[me+1]*P+ce[me+3]*B,ce[me]*oe+ce[me+2]*se,ce[me+1]*oe+ce[me+3]*se,ce[me]*G+ce[me+2]*le+ce[me+4],ce[me+1]*G+ce[me+3]*le+ce[me+5]),this.H.push(this.C.transform.bind(this.C,P,B,oe,se,G,le))},rotate:function(P){const B=Math.sin(P);P=Math.cos(P),this.transform(P,B,-B,P,0,0)},_drawPath:function(P,B){this.H.push(B.draw.bind(B,this.C,P.T,P.Va===W?"evenodd":"nonzero"))},_drawRiveImage:function(P,B,oe){var se=P.Fb;if(se){var G=this.C,le=e(B);this.H.push(function(){G.globalCompositeOperation=le,G.globalAlpha=oe,G.drawImage(se,0,0),G.globalAlpha=1})}},_getMatrix:function(P){const B=this.S,oe=B.length-6;for(let se=0;6>se;++se)P[se]=B[oe+se]},_drawImageMesh:function(P,B,oe,se,G,le,ce,me,Ve,Ee){var it=this.C.canvas.width,Re=this.C.canvas.height;const Ji=Ve-ce,Ki=Ee-me;ce=Math.max(ce,0),me=Math.max(me,0),Ve=Math.min(Ve,it),Ee=Math.min(Ee,Re);const Yt=Ve-ce,Vt=Ee-me;if(console.assert(Yt<=Math.min(Ji,it)),console.assert(Vt<=Math.min(Ki,Re)),!(0>=Yt||0>=Vt)){Ve=Yt<Ji||Vt<Ki,it=Ee=1;var Lt=Math.ceil(Yt*Ee),Et=Math.ceil(Vt*it);Re=H.hc(),Lt>Re&&(Ee*=Re/Lt,Lt=Re),Et>Re&&(it*=Re/Et,Et=Re),j||(j=new u.DynamicRectanizer(Re),j.reset(512,512)),Re=j.addRect(Lt,Et),0>Re&&(n(),ee.add(this),Re=j.addRect(Lt,Et),console.assert(0<=Re));var Zi=Re&65535,Qi=Re>>16;xe.push({ha:this.S.slice(this.S.length-6),image:P,Ya:Zi,Za:Qi,ic:ce,jc:me,Ac:Lt,jb:Et,Ba:Ee,Ca:it,Ta:new Float32Array(se),Db:new Float32Array(G),indices:new Uint16Array(le),mc:Ve,wb:P.Ka<<1|(Ve?1:0)}),Oe+=se.length,tt+=le.length;var Ft=this.C,Nr=e(B);this.H.push(function(){Ft.save(),Ft.resetTransform(),Ft.globalCompositeOperation=Nr,Ft.globalAlpha=oe;const er=H.canvas();er&&Ft.drawImage(er,Zi,Qi,Lt,Et,ce,me,Yt,Vt),Ft.restore()})}},_clipPath:function(P){this.H.push(this.C.clip.bind(this.C,P.T,P.Va===W?"evenodd":"nonzero"))},clear:function(){ee.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(P,B){this.transform(1,0,0,1,P,B)}});u.makeRenderer=function(P){const B=new At(P),oe=B.C;return new Proxy(B,{get(se,G){if(typeof se[G]=="function")return function(...le){return se[G].apply(se,le)};if(typeof oe[G]=="function"){if(-1<V.indexOf(G))throw Error("RiveException: Method call to '"+G+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...le){B.H.push(oe[G].bind(oe,...le))}}return se[G]},set(se,G,le){if(G in oe)return B.H.push(()=>{oe[G]=le}),!0}})},u.decodeImage=function(P,B){new R({la:B}).decode(P)},u.renderFactory={makeRenderPaint:function(){return new J},makeRenderPath:function(){return new T},makeRenderImage:function(){let P=nt;return new R({xa:()=>{P.total++},la:()=>{if(P.loaded++,P.loaded===P.total){const B=P.ready;B&&(B(),P.ready=null)}}})}};let ae=u.load,nt=null;u.load=function(P,B,oe=!0){const se=new u.FallbackFileAssetLoader;return B!==void 0&&se.addLoader(B),oe&&(B=new u.CDNFileAssetLoader,se.addLoader(B)),new Promise(function(G){let le=null;nt={total:0,loaded:0,ready:function(){G(le)}},le=ae(P,se),nt.total==0&&G(le)})};let jr=u.RendererWrapper.prototype.align;u.RendererWrapper.prototype.align=function(P,B,oe,se,G=1){jr.call(this,P,B,oe,se,G)},o=new ue,u.requestAnimationFrame=o.requestAnimationFrame.bind(o),u.cancelAnimationFrame=o.cancelAnimationFrame.bind(o),u.enableFPSCounter=o.Rb.bind(o),u.disableFPSCounter=o.Ob,o.ob=n,u.resolveAnimationFrame=n,u.cleanup=function(){j&&j.delete()}};var N=Object.assign({},u),we="./this.program",ye=typeof window=="object",Ae=typeof importScripts=="function",fe="",Ze,de;(ye||Ae)&&(Ae?fe=self.location.href:typeof document<"u"&&document.currentScript&&(fe=document.currentScript.src),k&&(fe=k),fe.indexOf("blob:")!==0?fe=fe.substr(0,fe.replace(/[?#].*/,"").lastIndexOf("/")+1):fe="",Ae&&(de=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Ze=(e,t,n)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{o.status==200||o.status==0&&o.response?t(o.response):n()},o.onerror=n,o.send(null)});var Me=u.print||console.log.bind(console),Le=u.printErr||console.error.bind(console);Object.assign(u,N),N=null,u.thisProgram&&(we=u.thisProgram);var je;u.wasmBinary&&(je=u.wasmBinary),typeof WebAssembly!="object"&&ge("no native wasm support detected");var Ne,ne,ze=!1,Se,ie,Ce,Ge,Y,pe,c,r;function a(){var e=Ne.buffer;u.HEAP8=Se=new Int8Array(e),u.HEAP16=Ce=new Int16Array(e),u.HEAP32=Y=new Int32Array(e),u.HEAPU8=ie=new Uint8Array(e),u.HEAPU16=Ge=new Uint16Array(e),u.HEAPU32=pe=new Uint32Array(e),u.HEAPF32=c=new Float32Array(e),u.HEAPF64=r=new Float64Array(e)}var m,L=[],I=[],O=[];function X(){var e=u.preRun.shift();L.unshift(e)}var Q=0,z=null;function ge(e){throw u.onAbort&&u.onAbort(e),e="Aborted("+e+")",Le(e),ze=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),re(e),e}function Ie(e){return e.startsWith("data:application/octet-stream;base64,")}var Pe;if(Pe="canvas_advanced.wasm",!Ie(Pe)){var Te=Pe;Pe=u.locateFile?u.locateFile(Te,fe):fe+Te}function vt(e){if(e==Pe&&je)return new Uint8Array(je);if(de)return de(e);throw"both async and sync fetching of the wasm failed"}function qe(e){if(!je&&(ye||Ae)){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>vt(e));if(Ze)return new Promise((t,n)=>{Ze(e,o=>t(new Uint8Array(o)),n)})}return Promise.resolve().then(()=>vt(e))}function yt(e,t,n){return qe(e).then(o=>WebAssembly.instantiate(o,t)).then(o=>o).then(n,o=>{Le("failed to asynchronously prepare wasm: "+o),ge(o)})}function Zt(e,t){var n=Pe;return je||typeof WebAssembly.instantiateStreaming!="function"||Ie(n)||n.startsWith("file://")||typeof fetch!="function"?yt(n,e,t):fetch(n,{credentials:"same-origin"}).then(o=>WebAssembly.instantiateStreaming(o,e).then(t,function(s){return Le("wasm streaming compile failed: "+s),Le("falling back to ArrayBuffer instantiation"),yt(n,e,t)}))}var ct,Tt,Dt={446236:(e,t,n,o,s)=>{if(typeof window>"u"||(window.AudioContext||window.webkitAudioContext)===void 0)return 0;if(typeof window.h>"u"){window.h={Aa:0},window.h.I={},window.h.I.ya=e,window.h.I.capture=t,window.h.I.La=n,window.h.ga={},window.h.ga.stopped=o,window.h.ga.xb=s;let l=window.h;l.D=[],l.yc=function(f){for(var b=0;b<l.D.length;++b)if(l.D[b]==null)return l.D[b]=f,b;return l.D.push(f),l.D.length-1},l.Cb=function(f){for(l.D[f]=null;0<l.D.length&&l.D[l.D.length-1]==null;)l.D.pop()},l.Sc=function(f){for(var b=0;b<l.D.length;++b)if(l.D[b]==f)return l.Cb(b)},l.ra=function(f){return l.D[f]},l.Bb=["touchend","click"],l.unlock=function(){for(var f=0;f<l.D.length;++f){var b=l.D[f];b!=null&&b.J!=null&&b.state===l.ga.xb&&b.J.resume().then(()=>{zi(b.pb)},_=>{console.error("Failed to resume audiocontext",_)})}l.Bb.map(function(_){document.removeEventListener(_,l.unlock,!0)})},l.Bb.map(function(f){document.addEventListener(f,l.unlock,!0)})}return window.h.Aa+=1,1},448414:()=>{typeof window.h<"u"&&(--window.h.Aa,window.h.Aa===0&&delete window.h)},448578:()=>navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0,448682:()=>{try{var e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate;return e.close(),t}catch{return 0}},448853:(e,t,n,o,s,l)=>{if(typeof window.h>"u")return-1;var f={},b={};return e==window.h.I.ya&&n!=0&&(b.sampleRate=n),f.J=new(window.AudioContext||window.webkitAudioContext)(b),f.J.suspend(),f.state=window.h.ga.stopped,n=0,e!=window.h.I.ya&&(n=t),f.Z=f.J.createScriptProcessor(o,n,t),f.Z.onaudioprocess=function(_){if((f.sa==null||f.sa.length==0)&&(f.sa=new Float32Array(c.buffer,s,o*t)),e==window.h.I.capture||e==window.h.I.La){for(var v=0;v<t;v+=1)for(var M=_.inputBuffer.getChannelData(v),F=f.sa,W=0;W<o;W+=1)F[W*t+v]=M[W];Xi(l,o,s)}if(e==window.h.I.ya||e==window.h.I.La)for(Yi(l,o,s),v=0;v<_.outputBuffer.numberOfChannels;++v)for(M=_.outputBuffer.getChannelData(v),F=f.sa,W=0;W<o;W+=1)M[W]=F[W*t+v];else for(v=0;v<_.outputBuffer.numberOfChannels;++v)_.outputBuffer.getChannelData(v).fill(0)},e!=window.h.I.capture&&e!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(_){f.Da=f.J.createMediaStreamSource(_),f.Da.connect(f.Z),f.Z.connect(f.J.destination)}).catch(function(_){console.log("Failed to get user media: "+_)}),e==window.h.I.ya&&f.Z.connect(f.J.destination),f.pb=l,window.h.yc(f)},451730:e=>window.h.ra(e).J.sampleRate,451803:e=>{e=window.h.ra(e),e.Z!==void 0&&(e.Z.onaudioprocess=function(){},e.Z.disconnect(),e.Z=void 0),e.Da!==void 0&&(e.Da.disconnect(),e.Da=void 0),e.J.close(),e.J=void 0,e.pb=void 0},452203:e=>{window.h.Cb(e)},452253:e=>{e=window.h.ra(e),e.J.resume(),e.state=window.h.ga.xb},452392:e=>{e=window.h.ra(e),e.J.suspend(),e.state=window.h.ga.stopped}},ut=e=>{for(;0<e.length;)e.shift()(u)},Rt=(e,t)=>{for(var n=0,o=e.length-1;0<=o;o--){var s=e[o];s==="."?e.splice(o,1):s===".."?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},Xe=e=>{var t=e.charAt(0)==="/",n=e.substr(-1)==="/";return(e=Rt(e.split("/").filter(o=>!!o),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},ar=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)},ti=e=>{if(e==="/")return"/";e=Xe(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},lr=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);ge("initRandomDevice")},ni=e=>(ni=lr())(e);function Qt(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if(t=0<=n?arguments[n]:"/",typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t=t.charAt(0)==="/"}return e=Rt(e.split("/").filter(o=>!!o),!t).join("/"),(t?"/":"")+e||"."}var ii=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,bt=(e,t,n)=>{var o=t+n;for(n=t;e[n]&&!(n>=o);)++n;if(16<n-t&&e.buffer&&ii)return ii.decode(e.subarray(t,n));for(o="";t<n;){var s=e[t++];if(s&128){var l=e[t++]&63;if((s&224)==192)o+=String.fromCharCode((s&31)<<6|l);else{var f=e[t++]&63;s=(s&240)==224?(s&15)<<12|l<<6|f:(s&7)<<18|l<<12|f<<6|e[t++]&63,65536>s?o+=String.fromCharCode(s):(s-=65536,o+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else o+=String.fromCharCode(s)}return o},Tn=[],ri=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);127>=o?t++:2047>=o?t+=2:55296<=o&&57343>=o?(t+=4,++n):t+=3}return t},oi=(e,t,n,o)=>{if(!(0<o))return 0;var s=n;o=n+o-1;for(var l=0;l<e.length;++l){var f=e.charCodeAt(l);if(55296<=f&&57343>=f){var b=e.charCodeAt(++l);f=65536+((f&1023)<<10)|b&1023}if(127>=f){if(n>=o)break;t[n++]=f}else{if(2047>=f){if(n+1>=o)break;t[n++]=192|f>>6}else{if(65535>=f){if(n+2>=o)break;t[n++]=224|f>>12}else{if(n+3>=o)break;t[n++]=240|f>>18,t[n++]=128|f>>12&63}t[n++]=128|f>>6&63}t[n++]=128|f&63}}return t[n]=0,n-s};function si(e,t){var n=Array(ri(e)+1);return e=oi(e,n,0,n.length),t&&(n.length=e),n}var ai=[];function li(e,t){ai[e]={input:[],F:[],V:t},On(e,cr)}var cr={open:function(e){var t=ai[e.node.za];if(!t)throw new $(43);e.s=t,e.seekable=!1},close:function(e){e.s.V.qa(e.s)},qa:function(e){e.s.V.qa(e.s)},read:function(e,t,n,o){if(!e.s||!e.s.V.ib)throw new $(60);for(var s=0,l=0;l<o;l++){try{var f=e.s.V.ib(e.s)}catch{throw new $(29)}if(f===void 0&&s===0)throw new $(6);if(f==null)break;s++,t[n+l]=f}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,o){if(!e.s||!e.s.V.Oa)throw new $(60);try{for(var s=0;s<o;s++)e.s.V.Oa(e.s,t[n+s])}catch{throw new $(29)}return o&&(e.node.timestamp=Date.now()),s}},ur={ib:function(){e:{if(!Tn.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e){e=null;break e}Tn=si(e,!0)}e=Tn.shift()}return e},Oa:function(e,t){t===null||t===10?(Me(bt(e.F,0)),e.F=[]):t!=0&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(Me(bt(e.F,0)),e.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},dr={Oa:function(e,t){t===null||t===10?(Le(bt(e.F,0)),e.F=[]):t!=0&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(Le(bt(e.F,0)),e.F=[])}};function ci(e,t){var n=e.j?e.j.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),n!=0&&(t=Math.max(t,256)),n=e.j,e.j=new Uint8Array(t),0<e.v&&e.j.set(n.subarray(0,e.v),0))}var te={O:null,U(){return te.createNode(null,"/",16895,0)},createNode(e,t,n,o){if((n&61440)===24576||(n&61440)===4096)throw new $(63);return te.O||(te.O={dir:{node:{Y:te.l.Y,P:te.l.P,ka:te.l.ka,va:te.l.va,ub:te.l.ub,Ab:te.l.Ab,vb:te.l.vb,sb:te.l.sb,Ea:te.l.Ea},stream:{ba:te.m.ba}},file:{node:{Y:te.l.Y,P:te.l.P},stream:{ba:te.m.ba,read:te.m.read,write:te.m.write,pa:te.m.pa,lb:te.m.lb,nb:te.m.nb}},link:{node:{Y:te.l.Y,P:te.l.P,ma:te.l.ma},stream:{}},$a:{node:{Y:te.l.Y,P:te.l.P},stream:gr}}),n=pi(e,t,n,o),(n.mode&61440)===16384?(n.l=te.O.dir.node,n.m=te.O.dir.stream,n.j={}):(n.mode&61440)===32768?(n.l=te.O.file.node,n.m=te.O.file.stream,n.v=0,n.j=null):(n.mode&61440)===40960?(n.l=te.O.link.node,n.m=te.O.link.stream):(n.mode&61440)===8192&&(n.l=te.O.$a.node,n.m=te.O.$a.stream),n.timestamp=Date.now(),e&&(e.j[t]=n,e.timestamp=n.timestamp),n},Kc(e){return e.j?e.j.subarray?e.j.subarray(0,e.v):new Uint8Array(e.j):new Uint8Array(0)},l:{Y(e){var t={};return t.Jc=(e.mode&61440)===8192?e.id:1,t.Mc=e.id,t.mode=e.mode,t.Oc=1,t.uid=0,t.Lc=0,t.za=e.za,(e.mode&61440)===16384?t.size=4096:(e.mode&61440)===32768?t.size=e.v:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.Bc=new Date(e.timestamp),t.Nc=new Date(e.timestamp),t.Ic=new Date(e.timestamp),t.Jb=4096,t.Cc=Math.ceil(t.size/t.Jb),t},P(e,t){if(t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&(t=t.size,e.v!=t))if(t==0)e.j=null,e.v=0;else{var n=e.j;e.j=new Uint8Array(t),n&&e.j.set(n.subarray(0,Math.min(t,e.v))),e.v=t}},ka(){throw Mn[44]},va(e,t,n,o){return te.createNode(e,t,n,o)},ub(e,t,n){if((e.mode&61440)===16384){try{var o=tn(t,n)}catch{}if(o)for(var s in o.j)throw new $(55)}delete e.parent.j[e.name],e.parent.timestamp=Date.now(),e.name=n,t.j[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},Ab(e,t){delete e.j[t],e.timestamp=Date.now()},vb(e,t){var n=tn(e,t),o;for(o in n.j)throw new $(55);delete e.j[t],e.timestamp=Date.now()},sb(e){var t=[".",".."],n;for(n in e.j)e.j.hasOwnProperty(n)&&t.push(n);return t},Ea(e,t,n){return e=te.createNode(e,t,41471,0),e.link=n,e},ma(e){if((e.mode&61440)!==40960)throw new $(28);return e.link}},m:{read(e,t,n,o,s){var l=e.node.j;if(s>=e.node.v)return 0;if(e=Math.min(e.node.v-s,o),8<e&&l.subarray)t.set(l.subarray(s,s+e),n);else for(o=0;o<e;o++)t[n+o]=l[s+o];return e},write(e,t,n,o,s,l){if(t.buffer===Se.buffer&&(l=!1),!o)return 0;if(e=e.node,e.timestamp=Date.now(),t.subarray&&(!e.j||e.j.subarray)){if(l)return e.j=t.subarray(n,n+o),e.v=o;if(e.v===0&&s===0)return e.j=t.slice(n,n+o),e.v=o;if(s+o<=e.v)return e.j.set(t.subarray(n,n+o),s),o}if(ci(e,s+o),e.j.subarray&&t.subarray)e.j.set(t.subarray(n,n+o),s);else for(l=0;l<o;l++)e.j[s+l]=t[n+l];return e.v=Math.max(e.v,s+o),o},ba(e,t,n){if(n===1?t+=e.position:n===2&&(e.node.mode&61440)===32768&&(t+=e.node.v),0>t)throw new $(28);return t},pa(e,t,n){ci(e.node,t+n),e.node.v=Math.max(e.node.v,t+n)},lb(e,t,n,o,s){if((e.node.mode&61440)!==32768)throw new $(43);if(e=e.node.j,s&2||e.buffer!==Se.buffer){if((0<n||n+t<e.length)&&(e.subarray?e=e.subarray(n,n+t):e=Array.prototype.slice.call(e,n,n+t)),n=!0,ge(),t=void 0,!t)throw new $(48);Se.set(e,t)}else n=!1,t=e.byteOffset;return{o:t,M:n}},nb(e,t,n,o){return te.m.write(e,t,0,o,n,!1),0}}};function hr(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}var Rn=null,ui={},en=[],fr=1,jt=null,di=!0,$=null,Mn={},xt=(e,t={})=>{if(e=Qt(e),!e)return{path:"",node:null};if(t=Object.assign({gb:!0,Qa:0},t),8<t.Qa)throw new $(32);e=e.split("/").filter(f=>!!f);for(var n=Rn,o="/",s=0;s<e.length;s++){var l=s===e.length-1;if(l&&t.parent)break;if(n=tn(n,e[s]),o=Xe(o+"/"+e[s]),n.wa&&(!l||l&&t.gb)&&(n=n.wa.root),!l||t.fb){for(l=0;(n.mode&61440)===40960;)if(n=mr(o),o=Qt(ar(o),n),n=xt(o,{Qa:t.Qa+1}).node,40<l++)throw new $(32)}}return{path:o,node:n}},hi=e=>{for(var t;;){if(e===e.parent)return e=e.U.mb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}},fi=(e,t)=>{for(var n=0,o=0;o<t.length;o++)n=(n<<5)-n+t.charCodeAt(o)|0;return(e+n>>>0)%jt.length},tn=(e,t)=>{var n;if(n=(n=nn(e,"x"))?n:e.l.ka?0:2)throw new $(n,e);for(n=jt[fi(e.id,t)];n;n=n.lc){var o=n.name;if(n.parent.id===e.id&&o===t)return n}return e.l.ka(e,t)},pi=(e,t,n,o)=>(e=new $i(e,t,n,o),t=fi(e.parent.id,e.name),e.lc=jt[t],jt[t]=e),gi=e=>{var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nn=(e,t)=>{if(di)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0},mi=(e,t)=>{try{return tn(e,t),20}catch{}return nn(e,"wx")},pr=()=>{for(var e=0;4096>=e;e++)if(!en[e])return e;throw new $(33)},wt=e=>{if(e=en[e],!e)throw new $(8);return e},vi=(e,t=-1)=>(Wt||(Wt=function(){this.h={}},Wt.prototype={},Object.defineProperties(Wt.prototype,{object:{get(){return this.node},set(n){this.node=n}},flags:{get(){return this.h.flags},set(n){this.h.flags=n}},position:{get(){return this.h.position},set(n){this.h.position=n}}})),e=Object.assign(new Wt,e),t==-1&&(t=pr()),e.X=t,en[t]=e),gr={open:e=>{e.m=ui[e.node.za].m,e.m.open&&e.m.open(e)},ba:()=>{throw new $(70)}},On=(e,t)=>{ui[e]={m:t}},yi=(e,t)=>{var n=t==="/",o=!t;if(n&&Rn)throw new $(10);if(!n&&!o){var s=xt(t,{gb:!1});if(t=s.path,s=s.node,s.wa)throw new $(10);if((s.mode&61440)!==16384)throw new $(54)}t={type:e,Qc:{},mb:t,kc:[]},e=e.U(t),e.U=t,t.root=e,n?Rn=e:s&&(s.wa=t,s.U&&s.U.kc.push(t))},Je=(e,t,n)=>{var o=xt(e,{parent:!0}).node;if(e=ti(e),!e||e==="."||e==="..")throw new $(28);var s=mi(o,e);if(s)throw new $(s);if(!o.l.va)throw new $(63);return o.l.va(o,e,t,n)},rn=(e,t,n)=>{typeof n>"u"&&(n=t,t=438),Je(e,t|8192,n)},kn=(e,t)=>{if(!Qt(e))throw new $(44);var n=xt(t,{parent:!0}).node;if(!n)throw new $(44);t=ti(t);var o=mi(n,t);if(o)throw new $(o);if(!n.l.Ea)throw new $(63);n.l.Ea(n,t,e)},mr=e=>{if(e=xt(e).node,!e)throw new $(44);if(!e.l.ma)throw new $(28);return Qt(hi(e.parent),e.l.ma(e))},on=(e,t,n)=>{if(e==="")throw new $(44);if(typeof t=="string"){var o={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof o>"u")throw Error(`Unknown file open mode: ${t}`);t=o}if(n=t&64?(typeof n>"u"?438:n)&4095|32768:0,typeof e=="object")var s=e;else{e=Xe(e);try{s=xt(e,{fb:!(t&131072)}).node}catch{}}if(o=!1,t&64)if(s){if(t&128)throw new $(20)}else s=Je(e,n,0),o=!0;if(!s)throw new $(44);if((s.mode&61440)===8192&&(t&=-513),t&65536&&(s.mode&61440)!==16384)throw new $(54);if(!o&&(n=s?(s.mode&61440)===40960?32:(s.mode&61440)===16384&&(gi(t)!=="r"||t&512)?31:nn(s,gi(t)):44))throw new $(n);if(t&512&&!o){if(n=s,n=typeof n=="string"?xt(n,{fb:!0}).node:n,!n.l.P)throw new $(63);if((n.mode&61440)===16384)throw new $(31);if((n.mode&61440)!==32768)throw new $(28);if(o=nn(n,"w"))throw new $(o);n.l.P(n,{size:0,timestamp:Date.now()})}return t&=-131713,s=vi({node:s,path:hi(s),flags:t,seekable:!0,position:0,m:s.m,zc:[],error:!1}),s.m.open&&s.m.open(s),!u.logReadFiles||t&1||(sn||(sn={}),e in sn||(sn[e]=1)),s},bi=(e,t,n)=>{if(e.X===null)throw new $(8);if(!e.seekable||!e.m.ba)throw new $(70);if(n!=0&&n!=1&&n!=2)throw new $(28);e.position=e.m.ba(e,t,n),e.zc=[]},wi=()=>{$||($=function(e,t){this.name="ErrnoError",this.node=t,this.pc=function(n){this.aa=n},this.pc(e),this.message="FS error"},$.prototype=Error(),$.prototype.constructor=$,[44].forEach(e=>{Mn[e]=new $(e),Mn[e].stack="<generic error, no stack>"}))},Ci,Nt=(e,t,n)=>{e=Xe("/dev/"+e);var o=hr(!!t,!!n);Fn||(Fn=64);var s=Fn++<<8|0;On(s,{open:l=>{l.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(l,f,b,_)=>{for(var v=0,M=0;M<_;M++){try{var F=t()}catch{throw new $(29)}if(F===void 0&&v===0)throw new $(6);if(F==null)break;v++,f[b+M]=F}return v&&(l.node.timestamp=Date.now()),v},write:(l,f,b,_)=>{for(var v=0;v<_;v++)try{n(f[b+v])}catch{throw new $(29)}return _&&(l.node.timestamp=Date.now()),v}}),rn(e,o,s)},Fn,St={},Wt,sn,Bt=void 0;function dt(){return Bt+=4,Y[Bt-4>>2]}function xi(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e}function an(e,t){return e=xi(e),{[e]:function(){return t.apply(this,arguments)}}[e]}function Si(){this.M=[void 0],this.hb=[]}var Ye=new Si,Mt=void 0;function q(e){throw new Mt(e)}var Ke=e=>(e||q("Cannot use deleted val. handle = "+e),Ye.get(e).value),Qe=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Ye.pa({tb:1,value:e})}};function _i(e){var t=Error,n=an(e,function(o){this.name=e,this.message=o,o=Error(o).stack,o!==void 0&&(this.stack=this.toString()+`
`+o.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n}var Ai=void 0,Li=void 0;function _e(e){for(var t="";ie[e];)t+=Li[ie[e++]];return t}var $t=[];function Dn(){for(;$t.length;){var e=$t.pop();e.g.fa=!1,e.delete()}}var Ut=void 0,ht={};function jn(e,t){for(t===void 0&&q("ptr should not be undefined");e.A;)t=e.na(t),e=e.A;return t}var _t={};function Ei(e){e=Gi(e);var t=_e(e);return gt(e),t}function Ht(e,t){var n=_t[e];return n===void 0&&q(t+" has unknown type "+Ei(e)),n}function ln(){}var Nn=!1;function Ii(e){--e.count.value,e.count.value===0&&(e.G?e.L.W(e.G):e.u.i.W(e.o))}function Pi(e,t,n){return t===n?e:n.A===void 0?null:(e=Pi(e,t,n.A),e===null?null:n.Pb(e))}var Ti={};function vr(e,t){return t=jn(e,t),ht[t]}var Ri=void 0;function cn(e){throw new Ri(e)}function un(e,t){return t.u&&t.o||cn("makeClassHandle requires ptr and ptrType"),!!t.L!=!!t.G&&cn("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ot(Object.create(e,{g:{value:t}}))}function Ot(e){return typeof FinalizationRegistry>"u"?(Ot=t=>t,e):(Nn=new FinalizationRegistry(t=>{Ii(t.g)}),Ot=t=>{var n=t.g;return n.G&&Nn.register(t,{g:n},t),t},ln=t=>{Nn.unregister(t)},Ot(e))}var dn={};function zt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Xt(e){return this.fromWireType(Y[e>>2])}var kt={},hn={};function Be(e,t,n){function o(b){b=n(b),b.length!==e.length&&cn("Mismatched type converter count");for(var _=0;_<e.length;++_)et(e[_],b[_])}e.forEach(function(b){hn[b]=t});var s=Array(t.length),l=[],f=0;t.forEach((b,_)=>{_t.hasOwnProperty(b)?s[_]=_t[b]:(l.push(b),kt.hasOwnProperty(b)||(kt[b]=[]),kt[b].push(()=>{s[_]=_t[b],++f,f===l.length&&o(s)}))}),l.length===0&&o(s)}function fn(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function yr(e,t,n={}){var o=t.name;if(e||q(`type "${o}" must have a positive integer typeid pointer`),_t.hasOwnProperty(e)){if(n.$b)return;q(`Cannot register type '${o}' twice`)}_t[e]=t,delete hn[e],kt.hasOwnProperty(e)&&(t=kt[e],delete kt[e],t.forEach(s=>s()))}function et(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");yr(e,t,n)}function Wn(e){q(e.g.u.i.name+" instance already deleted")}function Ct(){}function Bn(e,t,n){if(e[t].B===void 0){var o=e[t];e[t]=function(){return e[t].B.hasOwnProperty(arguments.length)||q(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].B})!`),e[t].B[arguments.length].apply(this,arguments)},e[t].B=[],e[t].B[o.ea]=o}}function $n(e,t,n){u.hasOwnProperty(e)?((n===void 0||u[e].B!==void 0&&u[e].B[n]!==void 0)&&q(`Cannot register public name '${e}' twice`),Bn(u,e,e),u.hasOwnProperty(n)&&q(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),u[e].B[n]=t):(u[e]=t,n!==void 0&&(u[e].Pc=n))}function br(e,t,n,o,s,l,f,b){this.name=e,this.constructor=t,this.N=n,this.W=o,this.A=s,this.Ub=l,this.na=f,this.Pb=b,this.qb=[]}function pn(e,t,n){for(;t!==n;)t.na||q(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.na(e),t=t.A;return e}function wr(e,t){return t===null?(this.Na&&q(`null is not a valid ${this.name}`),0):(t.g||q(`Cannot pass "${Hn(t)}" as a ${this.name}`),t.g.o||q(`Cannot pass deleted object as a pointer of type ${this.name}`),pn(t.g.o,t.g.u.i,this.i))}function Cr(e,t){if(t===null){if(this.Na&&q(`null is not a valid ${this.name}`),this.ua){var n=this.Pa();return e!==null&&e.push(this.W,n),n}return 0}if(t.g||q(`Cannot pass "${Hn(t)}" as a ${this.name}`),t.g.o||q(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&t.g.u.ta&&q(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`),n=pn(t.g.o,t.g.u.i,this.i),this.ua)switch(t.g.G===void 0&&q("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:t.g.L===this?n=t.g.G:q(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`);break;case 1:n=t.g.G;break;case 2:if(t.g.L===this)n=t.g.G;else{var o=t.clone();n=this.oc(n,Qe(function(){o.delete()})),e!==null&&e.push(this.W,n)}break;default:q("Unsupporting sharing policy")}return n}function xr(e,t){return t===null?(this.Na&&q(`null is not a valid ${this.name}`),0):(t.g||q(`Cannot pass "${Hn(t)}" as a ${this.name}`),t.g.o||q(`Cannot pass deleted object as a pointer of type ${this.name}`),t.g.u.ta&&q(`Cannot convert argument of type ${t.g.u.name} to parameter type ${this.name}`),pn(t.g.o,t.g.u.i,this.i))}function ft(e,t,n,o){this.name=e,this.i=t,this.Na=n,this.ta=o,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,t.A!==void 0?this.toWireType=Cr:(this.toWireType=o?wr:xr,this.K=null)}function Mi(e,t,n){u.hasOwnProperty(e)||cn("Replacing nonexistant public symbol"),u[e].B!==void 0&&n!==void 0?u[e].B[n]=t:(u[e]=t,u[e].ea=n)}var gn=[],Oi=e=>{var t=gn[e];return t||(e>=gn.length&&(gn.length=e+1),gn[e]=t=m.get(e)),t},Sr=(e,t)=>{var n=[];return function(){if(n.length=0,Object.assign(n,arguments),e.includes("j")){var o=u["dynCall_"+e];o=n&&n.length?o.apply(null,[t].concat(n)):o.call(null,t)}else o=Oi(t).apply(null,n);return o}};function Fe(e,t){e=_e(e);var n=e.includes("j")?Sr(e,t):Oi(t);return typeof n!="function"&&q(`unknown function pointer with signature ${e}: ${t}`),n}var ki=void 0;function pt(e,t){function n(l){s[l]||_t[l]||(hn[l]?hn[l].forEach(n):(o.push(l),s[l]=!0))}var o=[],s={};throw t.forEach(n),new ki(`${e}: `+o.map(Ei).join([", "]))}function mn(e,t,n,o,s){var l=t.length;2>l&&q("argTypes array size mismatch! Must at least get return value and 'this' types!");var f=t[1]!==null&&n!==null,b=!1;for(n=1;n<t.length;++n)if(t[n]!==null&&t[n].K===void 0){b=!0;break}var _=t[0].name!=="void",v=l-2,M=Array(v),F=[],W=[];return function(){if(arguments.length!==v&&q(`function ${e} called with ${arguments.length} arguments, expected ${v} args!`),W.length=0,F.length=f?2:1,F[0]=s,f){var g=t[1].toWireType(W,this);F[1]=g}for(var R=0;R<v;++R)M[R]=t[R+2].toWireType(W,arguments[R]),F.push(M[R]);if(R=o.apply(null,F),b)zt(W);else for(var T=f?1:2;T<t.length;T++){var J=T===1?g:M[T-2];t[T].K!==null&&t[T].K(J)}return g=_?t[0].fromWireType(R):void 0,g}}function vn(e,t){for(var n=[],o=0;o<e;o++)n.push(pe[t+4*o>>2]);return n}function Fi(e,t,n){return e instanceof Object||q(`${n} with invalid "this": ${e}`),e instanceof t.i.constructor||q(`${n} incompatible with "this" of type ${e.constructor.name}`),e.g.o||q(`cannot call emscripten binding method ${n} on deleted object`),pn(e.g.o,e.g.u.i,t.i)}function Un(e){e>=Ye.h&&--Ye.get(e).tb===0&&Ye.Zb(e)}function _r(e,t,n){switch(t){case 0:return function(o){return this.fromWireType((n?Se:ie)[o])};case 1:return function(o){return this.fromWireType((n?Ce:Ge)[o>>1])};case 2:return function(o){return this.fromWireType((n?Y:pe)[o>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Hn(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function Ar(e,t){switch(t){case 2:return function(n){return this.fromWireType(c[n>>2])};case 3:return function(n){return this.fromWireType(r[n>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Lr(e,t,n){switch(t){case 0:return n?function(o){return Se[o]}:function(o){return ie[o]};case 1:return n?function(o){return Ce[o>>1]}:function(o){return Ge[o>>1]};case 2:return n?function(o){return Y[o>>2]}:function(o){return pe[o>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Di=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Er=(e,t)=>{for(var n=e>>1,o=n+t/2;!(n>=o)&&Ge[n];)++n;if(n<<=1,32<n-e&&Di)return Di.decode(ie.subarray(e,n));for(n="",o=0;!(o>=t/2);++o){var s=Ce[e+2*o>>1];if(s==0)break;n+=String.fromCharCode(s)}return n},Ir=(e,t,n)=>{if(n===void 0&&(n=2147483647),2>n)return 0;n-=2;var o=t;n=n<2*e.length?n/2:e.length;for(var s=0;s<n;++s)Ce[t>>1]=e.charCodeAt(s),t+=2;return Ce[t>>1]=0,t-o},Pr=e=>2*e.length,Tr=(e,t)=>{for(var n=0,o="";!(n>=t/4);){var s=Y[e+4*n>>2];if(s==0)break;++n,65536<=s?(s-=65536,o+=String.fromCharCode(55296|s>>10,56320|s&1023)):o+=String.fromCharCode(s)}return o},Rr=(e,t,n)=>{if(n===void 0&&(n=2147483647),4>n)return 0;var o=t;n=o+n-4;for(var s=0;s<e.length;++s){var l=e.charCodeAt(s);if(55296<=l&&57343>=l){var f=e.charCodeAt(++s);l=65536+((l&1023)<<10)|f&1023}if(Y[t>>2]=l,t+=4,t+4>n)break}return Y[t>>2]=0,t-o},Mr=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);55296<=o&&57343>=o&&++n,t+=4}return t},Or={};function yn(e){var t=Or[e];return t===void 0?_e(e):t}var bn=[];function kr(e){var t=bn.length;return bn.push(e),t}function Fr(e,t){for(var n=Array(e),o=0;o<e;++o)n[o]=Ht(pe[t+4*o>>2],"parameter "+o);return n}var ji=[],zn=[],Xn={},Ni=()=>{if(!Yn){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:we||"./this.program"},t;for(t in Xn)Xn[t]===void 0?delete e[t]:e[t]=Xn[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);Yn=n}return Yn},Yn,wn=e=>e%4===0&&(e%100!==0||e%400===0),Wi=[31,29,31,30,31,30,31,31,30,31,30,31],Bi=[31,28,31,30,31,30,31,31,30,31,30,31],Dr=(e,t,n,o)=>{function s(g,R,T){for(g=typeof g=="number"?g.toString():g||"";g.length<R;)g=T[0]+g;return g}function l(g,R){return s(g,R,"0")}function f(g,R){function T(ee){return 0>ee?-1:0<ee?1:0}var J;return(J=T(g.getFullYear()-R.getFullYear()))===0&&(J=T(g.getMonth()-R.getMonth()))===0&&(J=T(g.getDate()-R.getDate())),J}function b(g){switch(g.getDay()){case 0:return new Date(g.getFullYear()-1,11,29);case 1:return g;case 2:return new Date(g.getFullYear(),0,3);case 3:return new Date(g.getFullYear(),0,2);case 4:return new Date(g.getFullYear(),0,1);case 5:return new Date(g.getFullYear()-1,11,31);case 6:return new Date(g.getFullYear()-1,11,30)}}function _(g){var R=g.ca;for(g=new Date(new Date(g.da+1900,0,1).getTime());0<R;){var T=g.getMonth(),J=(wn(g.getFullYear())?Wi:Bi)[T];if(R>J-g.getDate())R-=J-g.getDate()+1,g.setDate(1),11>T?g.setMonth(T+1):(g.setMonth(0),g.setFullYear(g.getFullYear()+1));else{g.setDate(g.getDate()+R);break}}return T=new Date(g.getFullYear()+1,0,4),R=b(new Date(g.getFullYear(),0,4)),T=b(T),0>=f(R,g)?0>=f(T,g)?g.getFullYear()+1:g.getFullYear():g.getFullYear()-1}var v=Y[o+40>>2];o={wc:Y[o>>2],vc:Y[o+4>>2],Fa:Y[o+8>>2],Sa:Y[o+12>>2],Ga:Y[o+16>>2],da:Y[o+20>>2],R:Y[o+24>>2],ca:Y[o+28>>2],Rc:Y[o+32>>2],uc:Y[o+36>>2],xc:v&&v?bt(ie,v):""},n=n?bt(ie,n):"",v={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var M in v)n=n.replace(new RegExp(M,"g"),v[M]);var F="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),W="January February March April May June July August September October November December".split(" ");v={"%a":g=>F[g.R].substring(0,3),"%A":g=>F[g.R],"%b":g=>W[g.Ga].substring(0,3),"%B":g=>W[g.Ga],"%C":g=>l((g.da+1900)/100|0,2),"%d":g=>l(g.Sa,2),"%e":g=>s(g.Sa,2," "),"%g":g=>_(g).toString().substring(2),"%G":g=>_(g),"%H":g=>l(g.Fa,2),"%I":g=>(g=g.Fa,g==0?g=12:12<g&&(g-=12),l(g,2)),"%j":g=>{for(var R=0,T=0;T<=g.Ga-1;R+=(wn(g.da+1900)?Wi:Bi)[T++]);return l(g.Sa+R,3)},"%m":g=>l(g.Ga+1,2),"%M":g=>l(g.vc,2),"%n":()=>`
`,"%p":g=>0<=g.Fa&&12>g.Fa?"AM":"PM","%S":g=>l(g.wc,2),"%t":()=>"	","%u":g=>g.R||7,"%U":g=>l(Math.floor((g.ca+7-g.R)/7),2),"%V":g=>{var R=Math.floor((g.ca+7-(g.R+6)%7)/7);if(2>=(g.R+371-g.ca-2)%7&&R++,R)R==53&&(T=(g.R+371-g.ca)%7,T==4||T==3&&wn(g.da)||(R=1));else{R=52;var T=(g.R+7-g.ca-1)%7;(T==4||T==5&&wn(g.da%400-1))&&R++}return l(R,2)},"%w":g=>g.R,"%W":g=>l(Math.floor((g.ca+7-(g.R+6)%7)/7),2),"%y":g=>(g.da+1900).toString().substring(2),"%Y":g=>g.da+1900,"%z":g=>{g=g.uc;var R=0<=g;return g=Math.abs(g)/60,(R?"+":"-")+("0000"+(g/60*100+g%60)).slice(-4)},"%Z":g=>g.xc,"%%":()=>"%"},n=n.replace(/%%/g,"\0\0");for(M in v)n.includes(M)&&(n=n.replace(new RegExp(M,"g"),v[M](o)));return n=n.replace(/\0\0/g,"%"),M=si(n,!1),M.length>t?0:(Se.set(M,e),M.length-1)};function $i(e,t,n,o){e||(e=this),this.parent=e,this.U=e.U,this.wa=null,this.id=fr++,this.name=t,this.mode=n,this.l={},this.m={},this.za=o}Object.defineProperties($i.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(e){e?this.mode|=146:this.mode&=-147}}}),wi(),jt=Array(4096),yi(te,"/"),Je("/tmp",16895,0),Je("/home",16895,0),Je("/home/web_user",16895,0),(()=>{Je("/dev",16895,0),On(259,{read:()=>0,write:(o,s,l,f)=>f}),rn("/dev/null",259),li(1280,ur),li(1536,dr),rn("/dev/tty",1280),rn("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=ni(e).byteLength),e[--t]);Nt("random",n),Nt("urandom",n),Je("/dev/shm",16895,0),Je("/dev/shm/tmp",16895,0)})(),(()=>{Je("/proc",16895,0);var e=Je("/proc/self",16895,0);Je("/proc/self/fd",16895,0),yi({U:()=>{var t=pi(e,"fd",16895,73);return t.l={ka:(n,o)=>{var s=wt(+o);return n={parent:null,U:{mb:"fake"},l:{ma:()=>s.path}},n.parent=n}},t}},"/proc/self/fd")})(),Object.assign(Si.prototype,{get(e){return this.M[e]},has(e){return this.M[e]!==void 0},pa(e){var t=this.hb.pop()||this.M.length;return this.M[t]=e,t},Zb(e){this.M[e]=void 0,this.hb.push(e)}}),Mt=u.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},Ye.M.push({value:void 0},{value:null},{value:!0},{value:!1}),Ye.h=Ye.M.length,u.count_emval_handles=function(){for(var e=0,t=Ye.h;t<Ye.M.length;++t)Ye.M[t]!==void 0&&++e;return e},Ai=u.PureVirtualError=_i("PureVirtualError");for(var Ui=Array(256),Cn=0;256>Cn;++Cn)Ui[Cn]=String.fromCharCode(Cn);Li=Ui,u.getInheritedInstanceCount=function(){return Object.keys(ht).length},u.getLiveInheritedInstances=function(){var e=[],t;for(t in ht)ht.hasOwnProperty(t)&&e.push(ht[t]);return e},u.flushPendingDeletes=Dn,u.setDelayFunction=function(e){Ut=e,$t.length&&Ut&&Ut(Dn)},Ri=u.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Ct.prototype.isAliasOf=function(e){if(!(this instanceof Ct&&e instanceof Ct))return!1;var t=this.g.u.i,n=this.g.o,o=e.g.u.i;for(e=e.g.o;t.A;)n=t.na(n),t=t.A;for(;o.A;)e=o.na(e),o=o.A;return t===o&&n===e},Ct.prototype.clone=function(){if(this.g.o||Wn(this),this.g.ia)return this.g.count.value+=1,this;var e=Ot,t=Object,n=t.create,o=Object.getPrototypeOf(this),s=this.g;return e=e(n.call(t,o,{g:{value:{count:s.count,fa:s.fa,ia:s.ia,o:s.o,u:s.u,G:s.G,L:s.L}}})),e.g.count.value+=1,e.g.fa=!1,e},Ct.prototype.delete=function(){this.g.o||Wn(this),this.g.fa&&!this.g.ia&&q("Object already scheduled for deletion"),ln(this),Ii(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},Ct.prototype.isDeleted=function(){return!this.g.o},Ct.prototype.deleteLater=function(){return this.g.o||Wn(this),this.g.fa&&!this.g.ia&&q("Object already scheduled for deletion"),$t.push(this),$t.length===1&&Ut&&Ut(Dn),this.g.fa=!0,this},ft.prototype.Vb=function(e){return this.rb&&(e=this.rb(e)),e},ft.prototype.ab=function(e){this.W&&this.W(e)},ft.prototype.argPackAdvance=8,ft.prototype.readValueFromPointer=Xt,ft.prototype.deleteObject=function(e){e!==null&&e.delete()},ft.prototype.fromWireType=function(e){function t(){return this.ua?un(this.i.N,{u:this.nc,o:n,L:this,G:e}):un(this.i.N,{u:this,o:e})}var n=this.Vb(e);if(!n)return this.ab(e),null;var o=vr(this.i,n);if(o!==void 0)return o.g.count.value===0?(o.g.o=n,o.g.G=e,o.clone()):(o=o.clone(),this.ab(e),o);if(o=this.i.Ub(n),o=Ti[o],!o)return t.call(this);o=this.ta?o.Kb:o.pointerType;var s=Pi(n,this.i,o.i);return s===null?t.call(this):this.ua?un(o.i.N,{u:o,o:s,L:this,G:e}):un(o.i.N,{u:o,o:s})},ki=u.UnboundTypeError=_i("UnboundTypeError");var Hi={__syscall_fcntl64:function(e,t,n){Bt=n;try{var o=wt(e);switch(t){case 0:var s=dt();return 0>s?-28:vi(o,s).X;case 1:case 2:return 0;case 3:return o.flags;case 4:return s=dt(),o.flags|=s,0;case 5:return s=dt(),Ce[s+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Y[Vi()>>2]=28,-1;default:return-28}}catch(l){if(typeof St>"u"||l.name!=="ErrnoError")throw l;return-l.aa}},__syscall_ioctl:function(e,t,n){Bt=n;try{var o=wt(e);switch(t){case 21509:return o.s?0:-59;case 21505:if(!o.s)return-59;if(o.s.V.bc){t=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var s=dt();Y[s>>2]=25856,Y[s+4>>2]=5,Y[s+8>>2]=191,Y[s+12>>2]=35387;for(var l=0;32>l;l++)Se[s+l+17>>0]=t[l]||0}return 0;case 21510:case 21511:case 21512:return o.s?0:-59;case 21506:case 21507:case 21508:if(!o.s)return-59;if(o.s.V.cc)for(s=dt(),t=[],l=0;32>l;l++)t.push(Se[s+l+17>>0]);return 0;case 21519:return o.s?(s=dt(),Y[s>>2]=0):-59;case 21520:return o.s?-28:-59;case 21531:if(s=dt(),!o.m.ac)throw new $(59);return o.m.ac(o,t,s);case 21523:return o.s?(o.s.V.dc&&(l=[24,80],s=dt(),Ce[s>>1]=l[0],Ce[s+2>>1]=l[1]),0):-59;case 21524:return o.s?0:-59;case 21515:return o.s?0:-59;default:return-28}}catch(f){if(typeof St>"u"||f.name!=="ErrnoError")throw f;return-f.aa}},__syscall_openat:function(e,t,n,o){Bt=o;try{t=t?bt(ie,t):"";var s=t;if(s.charAt(0)==="/")t=s;else{var l=e===-100?"/":wt(e).path;if(s.length==0)throw new $(44);t=Xe(l+"/"+s)}var f=o?dt():0;return on(t,n,f).X}catch(b){if(typeof St>"u"||b.name!=="ErrnoError")throw b;return-b.aa}},_embind_create_inheriting_constructor:function(e,t,n){e=_e(e),t=Ht(t,"wrapper"),n=Ke(n);var o=[].slice,s=t.i,l=s.N,f=s.A.N,b=s.A.constructor;e=an(e,function(){s.A.qb.forEach((function(v){if(this[v]===f[v])throw new Ai(`Pure virtual function ${v} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:l}),this.__construct.apply(this,o.call(arguments))}),l.__construct=function(){this===l&&q("Pass correct 'this' to __construct");var v=b.implement.apply(void 0,[this].concat(o.call(arguments)));ln(v);var M=v.g;v.notifyOnDestruction(),M.ia=!0,Object.defineProperties(this,{g:{value:M}}),Ot(this),v=M.o,v=jn(s,v),ht.hasOwnProperty(v)?q(`Tried to register registered instance: ${v}`):ht[v]=this},l.__destruct=function(){this===l&&q("Pass correct 'this' to __destruct"),ln(this);var v=this.g.o;v=jn(s,v),ht.hasOwnProperty(v)?delete ht[v]:q(`Tried to unregister unregistered instance: ${v}`)},e.prototype=Object.create(l);for(var _ in n)e.prototype[_]=n[_];return Qe(e)},_embind_finalize_value_object:function(e){var t=dn[e];delete dn[e];var n=t.Pa,o=t.W,s=t.eb,l=s.map(f=>f.Yb).concat(s.map(f=>f.rc));Be([e],l,f=>{var b={};return s.forEach((_,v)=>{var M=f[v],F=_.Wb,W=_.Xb,g=f[v+s.length],R=_.qc,T=_.sc;b[_.Sb]={read:J=>M.fromWireType(F(W,J)),write:(J,ee)=>{var j=[];R(T,J,g.toWireType(j,ee)),zt(j)}}}),[{name:t.name,fromWireType:function(_){var v={},M;for(M in b)v[M]=b[M].read(_);return o(_),v},toWireType:function(_,v){for(var M in b)if(!(M in v))throw new TypeError(`Missing field: "${M}"`);var F=n();for(M in b)b[M].write(F,v[M]);return _!==null&&_.push(o,F),F},argPackAdvance:8,readValueFromPointer:Xt,K:o}]})},_embind_register_bigint:function(){},_embind_register_bool:function(e,t,n,o,s){var l=fn(n);t=_e(t),et(e,{name:t,fromWireType:function(f){return!!f},toWireType:function(f,b){return b?o:s},argPackAdvance:8,readValueFromPointer:function(f){if(n===1)var b=Se;else if(n===2)b=Ce;else if(n===4)b=Y;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(b[f>>l])},K:null})},_embind_register_class:function(e,t,n,o,s,l,f,b,_,v,M,F,W){M=_e(M),l=Fe(s,l),b&&(b=Fe(f,b)),v&&(v=Fe(_,v)),W=Fe(F,W);var g=xi(M);$n(g,function(){pt(`Cannot construct ${M} due to unbound types`,[o])}),Be([e,t,n],o?[o]:[],function(R){if(R=R[0],o)var T=R.i,J=T.N;else J=Ct.prototype;R=an(g,function(){if(Object.getPrototypeOf(this)!==ee)throw new Mt("Use 'new' to construct "+M);if(j.$===void 0)throw new Mt(M+" has no accessible constructor");var Oe=j.$[arguments.length];if(Oe===void 0)throw new Mt(`Tried to invoke ctor of ${M} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(j.$).toString()}) parameters instead!`);return Oe.apply(this,arguments)});var ee=Object.create(J,{constructor:{value:R}});R.prototype=ee;var j=new br(M,R,ee,W,T,l,b,v);j.A&&(j.A.oa===void 0&&(j.A.oa=[]),j.A.oa.push(j)),T=new ft(M,j,!0,!1),J=new ft(M+"*",j,!1,!1);var xe=new ft(M+" const*",j,!1,!0);return Ti[e]={pointerType:J,Kb:xe},Mi(g,R),[T,J,xe]})},_embind_register_class_class_function:function(e,t,n,o,s,l,f){var b=vn(n,o);t=_e(t),l=Fe(s,l),Be([],[e],function(_){function v(){pt(`Cannot call ${M} due to unbound types`,b)}_=_[0];var M=`${_.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var F=_.i.constructor;return F[t]===void 0?(v.ea=n-1,F[t]=v):(Bn(F,t,M),F[t].B[n-1]=v),Be([],b,function(W){if(W=mn(M,[W[0],null].concat(W.slice(1)),null,l,f),F[t].B===void 0?(W.ea=n-1,F[t]=W):F[t].B[n-1]=W,_.i.oa)for(const g of _.i.oa)g.constructor.hasOwnProperty(t)||(g.constructor[t]=W);return[]}),[]})},_embind_register_class_class_property:function(e,t,n,o,s,l,f,b){t=_e(t),l=Fe(s,l),Be([],[e],function(_){_=_[0];var v=`${_.name}.${t}`,M={get(){pt(`Cannot access ${v} due to unbound types`,[n])},enumerable:!0,configurable:!0};return M.set=b?()=>{pt(`Cannot access ${v} due to unbound types`,[n])}:()=>{q(`${v} is a read-only property`)},Object.defineProperty(_.i.constructor,t,M),Be([],[n],function(F){F=F[0];var W={get(){return F.fromWireType(l(o))},enumerable:!0};return b&&(b=Fe(f,b),W.set=g=>{var R=[];b(o,F.toWireType(R,g)),zt(R)}),Object.defineProperty(_.i.constructor,t,W),[]}),[]})},_embind_register_class_constructor:function(e,t,n,o,s,l){var f=vn(t,n);s=Fe(o,s),Be([],[e],function(b){b=b[0];var _=`constructor ${b.name}`;if(b.i.$===void 0&&(b.i.$=[]),b.i.$[t-1]!==void 0)throw new Mt(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${b.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return b.i.$[t-1]=()=>{pt(`Cannot construct ${b.name} due to unbound types`,f)},Be([],f,function(v){return v.splice(1,0,null),b.i.$[t-1]=mn(_,v,null,s,l),[]}),[]})},_embind_register_class_function:function(e,t,n,o,s,l,f,b){var _=vn(n,o);t=_e(t),l=Fe(s,l),Be([],[e],function(v){function M(){pt(`Cannot call ${F} due to unbound types`,_)}v=v[0];var F=`${v.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),b&&v.i.qb.push(t);var W=v.i.N,g=W[t];return g===void 0||g.B===void 0&&g.className!==v.name&&g.ea===n-2?(M.ea=n-2,M.className=v.name,W[t]=M):(Bn(W,t,F),W[t].B[n-2]=M),Be([],_,function(R){return R=mn(F,R,v,l,f),W[t].B===void 0?(R.ea=n-2,W[t]=R):W[t].B[n-2]=R,[]}),[]})},_embind_register_class_property:function(e,t,n,o,s,l,f,b,_,v){t=_e(t),s=Fe(o,s),Be([],[e],function(M){M=M[0];var F=`${M.name}.${t}`,W={get(){pt(`Cannot access ${F} due to unbound types`,[n,f])},enumerable:!0,configurable:!0};return W.set=_?()=>{pt(`Cannot access ${F} due to unbound types`,[n,f])}:()=>{q(F+" is a read-only property")},Object.defineProperty(M.i.N,t,W),Be([],_?[n,f]:[n],function(g){var R=g[0],T={get(){var ee=Fi(this,M,F+" getter");return R.fromWireType(s(l,ee))},enumerable:!0};if(_){_=Fe(b,_);var J=g[1];T.set=function(ee){var j=Fi(this,M,F+" setter"),xe=[];_(v,j,J.toWireType(xe,ee)),zt(xe)}}return Object.defineProperty(M.i.N,t,T),[]}),[]})},_embind_register_emval:function(e,t){t=_e(t),et(e,{name:t,fromWireType:function(n){var o=Ke(n);return Un(n),o},toWireType:function(n,o){return Qe(o)},argPackAdvance:8,readValueFromPointer:Xt,K:null})},_embind_register_enum:function(e,t,n,o){function s(){}n=fn(n),t=_e(t),s.values={},et(e,{name:t,constructor:s,fromWireType:function(l){return this.constructor.values[l]},toWireType:function(l,f){return f.value},argPackAdvance:8,readValueFromPointer:_r(t,n,o),K:null}),$n(t,s)},_embind_register_enum_value:function(e,t,n){var o=Ht(e,"enum");t=_e(t),e=o.constructor,o=Object.create(o.constructor.prototype,{value:{value:n},constructor:{value:an(`${o.name}_${t}`,function(){})}}),e.values[n]=o,e[t]=o},_embind_register_float:function(e,t,n){n=fn(n),t=_e(t),et(e,{name:t,fromWireType:function(o){return o},toWireType:function(o,s){return s},argPackAdvance:8,readValueFromPointer:Ar(t,n),K:null})},_embind_register_function:function(e,t,n,o,s,l){var f=vn(t,n);e=_e(e),s=Fe(o,s),$n(e,function(){pt(`Cannot call ${e} due to unbound types`,f)},t-1),Be([],f,function(b){return Mi(e,mn(e,[b[0],null].concat(b.slice(1)),null,s,l),t-1),[]})},_embind_register_integer:function(e,t,n,o,s){t=_e(t),s===-1&&(s=4294967295),s=fn(n);var l=b=>b;if(o===0){var f=32-8*n;l=b=>b<<f>>>f}n=t.includes("unsigned")?function(b,_){return _>>>0}:function(b,_){return _},et(e,{name:t,fromWireType:l,toWireType:n,argPackAdvance:8,readValueFromPointer:Lr(t,s,o!==0),K:null})},_embind_register_memory_view:function(e,t,n){function o(l){l>>=2;var f=pe;return new s(f.buffer,f[l+1],f[l])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];n=_e(n),et(e,{name:n,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{$b:!0})},_embind_register_std_string:function(e,t){t=_e(t);var n=t==="std::string";et(e,{name:t,fromWireType:function(o){var s=pe[o>>2],l=o+4;if(n)for(var f=l,b=0;b<=s;++b){var _=l+b;if(b==s||ie[_]==0){if(f=f?bt(ie,f,_-f):"",v===void 0)var v=f;else v+="\0",v+=f;f=_+1}}else{for(v=Array(s),b=0;b<s;++b)v[b]=String.fromCharCode(ie[l+b]);v=v.join("")}return gt(o),v},toWireType:function(o,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var l=typeof s=="string";l||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||q("Cannot pass non-string to std::string");var f=n&&l?ri(s):s.length,b=Vn(4+f+1),_=b+4;if(pe[b>>2]=f,n&&l)oi(s,ie,_,f+1);else if(l)for(l=0;l<f;++l){var v=s.charCodeAt(l);255<v&&(gt(_),q("String has UTF-16 code units that do not fit in 8 bits")),ie[_+l]=v}else for(l=0;l<f;++l)ie[_+l]=s[l];return o!==null&&o.push(gt,b),b},argPackAdvance:8,readValueFromPointer:Xt,K:function(o){gt(o)}})},_embind_register_std_wstring:function(e,t,n){if(n=_e(n),t===2)var o=Er,s=Ir,l=Pr,f=()=>Ge,b=1;else t===4&&(o=Tr,s=Rr,l=Mr,f=()=>pe,b=2);et(e,{name:n,fromWireType:function(_){for(var v=pe[_>>2],M=f(),F,W=_+4,g=0;g<=v;++g){var R=_+4+g*t;(g==v||M[R>>b]==0)&&(W=o(W,R-W),F===void 0?F=W:(F+="\0",F+=W),W=R+t)}return gt(_),F},toWireType:function(_,v){typeof v!="string"&&q(`Cannot pass non-string to C++ string type ${n}`);var M=l(v),F=Vn(4+M+t);return pe[F>>2]=M>>b,s(v,F+4,M+t),_!==null&&_.push(gt,F),F},argPackAdvance:8,readValueFromPointer:Xt,K:function(_){gt(_)}})},_embind_register_value_object:function(e,t,n,o,s,l){dn[e]={name:_e(t),Pa:Fe(n,o),W:Fe(s,l),eb:[]}},_embind_register_value_object_field:function(e,t,n,o,s,l,f,b,_,v){dn[e].eb.push({Sb:_e(t),Yb:n,Wb:Fe(o,s),Xb:l,rc:f,qc:Fe(b,_),sc:v})},_embind_register_void:function(e,t){t=_e(t),et(e,{fc:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(e,t,n){e=Ke(e),t=Ht(t,"emval::as");var o=[],s=Qe(o);return pe[n>>2]=s,t.toWireType(o,e)},_emval_call_method:function(e,t,n,o,s){e=bn[e],t=Ke(t),n=yn(n);var l=[];return pe[o>>2]=Qe(l),e(t,n,l,s)},_emval_call_void_method:function(e,t,n,o){e=bn[e],t=Ke(t),n=yn(n),e(t,n,null,o)},_emval_decref:Un,_emval_get_method_caller:function(e,t){var n=Fr(e,t),o=n[0];t=o.name+"_$"+n.slice(1).map(function(f){return f.name}).join("_")+"$";var s=ji[t];if(s!==void 0)return s;var l=Array(e-1);return s=kr((f,b,_,v)=>{for(var M=0,F=0;F<e-1;++F)l[F]=n[F+1].readValueFromPointer(v+M),M+=n[F+1].argPackAdvance;for(f=f[b].apply(f,l),F=0;F<e-1;++F)n[F+1].Nb&&n[F+1].Nb(l[F]);if(!o.fc)return o.toWireType(_,f)}),ji[t]=s},_emval_get_module_property:function(e){return e=yn(e),Qe(u[e])},_emval_get_property:function(e,t){return e=Ke(e),t=Ke(t),Qe(e[t])},_emval_incref:function(e){4<e&&(Ye.get(e).tb+=1)},_emval_new_cstring:function(e){return Qe(yn(e))},_emval_new_object:function(){return Qe({})},_emval_run_destructors:function(e){var t=Ke(e);zt(t),Un(e)},_emval_set_property:function(e,t,n){e=Ke(e),t=Ke(t),n=Ke(n),e[t]=n},_emval_take_value:function(e,t){return e=Ht(e,"_emval_take_value"),e=e.readValueFromPointer(t),Qe(e)},abort:()=>{ge("")},emscripten_asm_const_int:(e,t,n)=>{zn.length=0;var o;for(n>>=2;o=ie[t++];)n+=o!=105&n,zn.push(o==105?Y[n]:r[n++>>1]),++n;return Dt[e].apply(null,zn)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(e,t,n)=>ie.copyWithin(e,t,t+n),emscripten_resize_heap:e=>{var t=ie.length;if(e>>>=0,2147483648<e)return!1;for(var n=1;4>=n;n*=2){var o=t*(1+.2/n);o=Math.min(o,e+100663296);var s=Math;o=Math.max(e,o);e:{s=s.min.call(s,2147483648,o+(65536-o%65536)%65536)-Ne.buffer.byteLength+65535>>>16;try{Ne.grow(s),a();var l=1;break e}catch{}l=void 0}if(l)return!0}return!1},environ_get:(e,t)=>{var n=0;return Ni().forEach(function(o,s){var l=t+n;for(s=pe[e+4*s>>2]=l,l=0;l<o.length;++l)Se[s++>>0]=o.charCodeAt(l);Se[s>>0]=0,n+=o.length+1}),0},environ_sizes_get:(e,t)=>{var n=Ni();pe[e>>2]=n.length;var o=0;return n.forEach(function(s){o+=s.length+1}),pe[t>>2]=o,0},fd_close:function(e){try{var t=wt(e);if(t.X===null)throw new $(8);t.Ma&&(t.Ma=null);try{t.m.close&&t.m.close(t)}catch(n){throw n}finally{en[t.X]=null}return t.X=null,0}catch(n){if(typeof St>"u"||n.name!=="ErrnoError")throw n;return n.aa}},fd_read:function(e,t,n,o){try{e:{var s=wt(e);e=t;for(var l,f=t=0;f<n;f++){var b=pe[e>>2],_=pe[e+4>>2];e+=8;var v=s,M=b,F=_,W=l,g=Se;if(0>F||0>W)throw new $(28);if(v.X===null)throw new $(8);if((v.flags&2097155)===1)throw new $(8);if((v.node.mode&61440)===16384)throw new $(31);if(!v.m.read)throw new $(28);var R=typeof W<"u";if(!R)W=v.position;else if(!v.seekable)throw new $(70);var T=v.m.read(v,g,M,F,W);R||(v.position+=T);var J=T;if(0>J){var ee=-1;break e}if(t+=J,J<_)break;typeof l<"u"&&(l+=J)}ee=t}return pe[o>>2]=ee,0}catch(j){if(typeof St>"u"||j.name!=="ErrnoError")throw j;return j.aa}},fd_seek:function(e,t,n,o,s){t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN;try{if(isNaN(t))return 61;var l=wt(e);return bi(l,t,o),Tt=[l.position>>>0,(ct=l.position,1<=+Math.abs(ct)?0<ct?+Math.floor(ct/4294967296)>>>0:~~+Math.ceil((ct-+(~~ct>>>0))/4294967296)>>>0:0)],Y[s>>2]=Tt[0],Y[s+4>>2]=Tt[1],l.Ma&&t===0&&o===0&&(l.Ma=null),0}catch(f){if(typeof St>"u"||f.name!=="ErrnoError")throw f;return f.aa}},fd_write:function(e,t,n,o){try{e:{var s=wt(e);e=t;for(var l,f=t=0;f<n;f++){var b=pe[e>>2],_=pe[e+4>>2];e+=8;var v=s,M=b,F=_,W=l,g=Se;if(0>F||0>W)throw new $(28);if(v.X===null)throw new $(8);if((v.flags&2097155)===0)throw new $(8);if((v.node.mode&61440)===16384)throw new $(31);if(!v.m.write)throw new $(28);v.seekable&&v.flags&1024&&bi(v,0,2);var R=typeof W<"u";if(!R)W=v.position;else if(!v.seekable)throw new $(70);var T=v.m.write(v,g,M,F,W,void 0);R||(v.position+=T);var J=T;if(0>J){var ee=-1;break e}t+=J,typeof l<"u"&&(l+=J)}ee=t}return pe[o>>2]=ee,0}catch(j){if(typeof St>"u"||j.name!=="ErrnoError")throw j;return j.aa}},strftime_l:(e,t,n,o)=>Dr(e,t,n,o)};(function(){function e(n){if(ne=n=n.exports,Ne=ne.memory,a(),m=ne.__indirect_function_table,I.unshift(ne.__wasm_call_ctors),Q--,u.monitorRunDependencies&&u.monitorRunDependencies(Q),Q==0&&z){var o=z;z=null,o()}return n}var t={env:Hi,wasi_snapshot_preview1:Hi};if(Q++,u.monitorRunDependencies&&u.monitorRunDependencies(Q),u.instantiateWasm)try{return u.instantiateWasm(t,e)}catch(n){Le("Module.instantiateWasm callback failed with error: "+n),re(n)}return Zt(t,function(n){e(n.instance)}).catch(re),{}})();var gt=e=>(gt=ne.free)(e),Vn=e=>(Vn=ne.malloc)(e),zi=u._ma_device__on_notification_unlocked=e=>(zi=u._ma_device__on_notification_unlocked=ne.ma_device__on_notification_unlocked)(e);u._ma_malloc_emscripten=(e,t)=>(u._ma_malloc_emscripten=ne.ma_malloc_emscripten)(e,t),u._ma_free_emscripten=(e,t)=>(u._ma_free_emscripten=ne.ma_free_emscripten)(e,t);var Xi=u._ma_device_process_pcm_frames_capture__webaudio=(e,t,n)=>(Xi=u._ma_device_process_pcm_frames_capture__webaudio=ne.ma_device_process_pcm_frames_capture__webaudio)(e,t,n),Yi=u._ma_device_process_pcm_frames_playback__webaudio=(e,t,n)=>(Yi=u._ma_device_process_pcm_frames_playback__webaudio=ne.ma_device_process_pcm_frames_playback__webaudio)(e,t,n),Vi=()=>(Vi=ne.__errno_location)(),Gi=e=>(Gi=ne.__getTypeName)(e);u.__embind_initialize_bindings=()=>(u.__embind_initialize_bindings=ne._embind_initialize_bindings)(),u.dynCall_iiji=(e,t,n,o,s)=>(u.dynCall_iiji=ne.dynCall_iiji)(e,t,n,o,s),u.dynCall_jiji=(e,t,n,o,s)=>(u.dynCall_jiji=ne.dynCall_jiji)(e,t,n,o,s),u.dynCall_iiiji=(e,t,n,o,s,l)=>(u.dynCall_iiiji=ne.dynCall_iiiji)(e,t,n,o,s,l),u.dynCall_iij=(e,t,n,o)=>(u.dynCall_iij=ne.dynCall_iij)(e,t,n,o),u.dynCall_jii=(e,t,n)=>(u.dynCall_jii=ne.dynCall_jii)(e,t,n),u.dynCall_viijii=(e,t,n,o,s,l,f)=>(u.dynCall_viijii=ne.dynCall_viijii)(e,t,n,o,s,l,f),u.dynCall_iiiiij=(e,t,n,o,s,l,f)=>(u.dynCall_iiiiij=ne.dynCall_iiiiij)(e,t,n,o,s,l,f),u.dynCall_iiiiijj=(e,t,n,o,s,l,f,b,_)=>(u.dynCall_iiiiijj=ne.dynCall_iiiiijj)(e,t,n,o,s,l,f,b,_),u.dynCall_iiiiiijj=(e,t,n,o,s,l,f,b,_,v)=>(u.dynCall_iiiiiijj=ne.dynCall_iiiiiijj)(e,t,n,o,s,l,f,b,_,v);var xn;z=function e(){xn||qi(),xn||(z=e)};function qi(){function e(){if(!xn&&(xn=!0,u.calledRun=!0,!ze)){if(u.noFSInit||Ci||(Ci=!0,wi(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?Nt("stdin",u.stdin):kn("/dev/tty","/dev/stdin"),u.stdout?Nt("stdout",null,u.stdout):kn("/dev/tty","/dev/stdout"),u.stderr?Nt("stderr",null,u.stderr):kn("/dev/tty1","/dev/stderr"),on("/dev/stdin",0),on("/dev/stdout",1),on("/dev/stderr",1)),di=!1,ut(I),U(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();O.unshift(t)}ut(O)}}if(!(0<Q)){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)X();ut(L),0<Q||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),e()},1)):e())}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return qi(),D.ready}})();const x=E},S=>{S.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"2.25.7","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(S,w,C)=>{C.r(w),C.d(w,{Animation:()=>E.Animation});var E=C(4)},(S,w,C)=>{C.r(w),C.d(w,{Animation:()=>E});var E=function(){function x(k,D,u,U){this.animation=k,this.artboard=D,this.playing=U,this.loopCount=0,this.scrubTo=null,this.instance=new u.LinearAnimationInstance(k,D)}return Object.defineProperty(x.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"time",{get:function(){return this.instance.time},set:function(k){this.instance.time=k},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),x.prototype.advance=function(k){this.scrubTo===null?this.instance.advance(k):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},x.prototype.apply=function(k){this.instance.apply(k)},x.prototype.cleanup=function(){this.instance.delete()},x}()},(S,w,C)=>{C.r(w),C.d(w,{BLANK_URL:()=>x.BLANK_URL,registerTouchInteractions:()=>E.registerTouchInteractions,sanitizeUrl:()=>x.sanitizeUrl});var E=C(6),x=C(7)},(S,w,C)=>{C.r(w),C.d(w,{registerTouchInteractions:()=>k});var E=void 0,x=function(D,u){var U,re;return["touchstart","touchmove"].indexOf(D.type)>-1&&(!((U=D.touches)===null||U===void 0)&&U.length)?(u||D.preventDefault(),{clientX:D.touches[0].clientX,clientY:D.touches[0].clientY}):D.type==="touchend"&&(!((re=D.changedTouches)===null||re===void 0)&&re.length)?{clientX:D.changedTouches[0].clientX,clientY:D.changedTouches[0].clientY}:{clientX:D.clientX,clientY:D.clientY}},k=function(D){var u=D.canvas,U=D.artboard,re=D.stateMachines,ue=re===void 0?[]:re,he=D.renderer,be=D.rive,V=D.fit,H=D.alignment,ve=D.isTouchScrollEnabled,N=ve===void 0?!1:ve,we=D.layoutScaleFactor,ye=we===void 0?1:we;if(!u||!ue.length||!he||!be||!U||typeof window>"u")return null;var Ae=null,fe=!1,Ze=function(Me){if(fe&&Me instanceof MouseEvent){Me.type=="mouseup"&&(fe=!1);return}fe=N&&Me.type==="touchend"&&Ae==="touchstart",Ae=Me.type;var Le=Me.currentTarget.getBoundingClientRect(),je=x(Me,N),Ne=je.clientX,ne=je.clientY;if(!(!Ne&&!ne)){var ze=Ne-Le.left,Se=ne-Le.top,ie=be.computeAlignment(V,H,{minX:0,minY:0,maxX:Le.width,maxY:Le.height},U.bounds,ye),Ce=new be.Mat2D;ie.invert(Ce);var Ge=new be.Vec2D(ze,Se),Y=be.mapXY(Ce,Ge),pe=Y.x(),c=Y.y();switch(Y.delete(),Ce.delete(),Ge.delete(),ie.delete(),Me.type){case"mouseout":for(var r=0,a=ue;r<a.length;r++){var m=a[r];m.pointerMove(pe,c)}break;case"touchmove":case"mouseover":case"mousemove":{for(var L=0,I=ue;L<I.length;L++){var m=I[L];m.pointerMove(pe,c)}break}case"touchstart":case"mousedown":{for(var O=0,X=ue;O<X.length;O++){var m=X[O];m.pointerDown(pe,c)}break}case"touchend":case"mouseup":{for(var Q=0,z=ue;Q<z.length;Q++){var m=z[Q];m.pointerUp(pe,c)}break}}}},de=Ze.bind(E);return u.addEventListener("mouseover",de),u.addEventListener("mouseout",de),u.addEventListener("mousemove",de),u.addEventListener("mousedown",de),u.addEventListener("mouseup",de),u.addEventListener("touchmove",de,{passive:N}),u.addEventListener("touchstart",de,{passive:N}),u.addEventListener("touchend",de),function(){u.removeEventListener("mouseover",de),u.removeEventListener("mouseout",de),u.removeEventListener("mousemove",de),u.removeEventListener("mousedown",de),u.removeEventListener("mouseup",de),u.removeEventListener("touchmove",de),u.removeEventListener("touchstart",de),u.removeEventListener("touchend",de)}}},(S,w,C)=>{C.r(w),C.d(w,{BLANK_URL:()=>re,sanitizeUrl:()=>be});var E=/^([^\w]*)(javascript|data|vbscript)/im,x=/&#(\w+)(^\w|;)?/g,k=/&(newline|tab);/gi,D=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,u=/^.+(:|&colon;)/gim,U=[".","/"],re="about:blank";function ue(V){return U.indexOf(V[0])>-1}function he(V){var H=V.replace(D,"");return H.replace(x,function(ve,N){return String.fromCharCode(N)})}function be(V){if(!V)return re;var H=he(V).replace(k,"").replace(D,"").trim();if(!H)return re;if(ue(H))return H;var ve=H.match(u);if(!ve)return H;var N=ve[0];return E.test(N)?re:H}}],p={};function y(S){var w=p[S];if(w!==void 0)return w.exports;var C=p[S]={exports:{}};return h[S](C,C.exports,y),C.exports}y.d=(S,w)=>{for(var C in w)y.o(w,C)&&!y.o(S,C)&&Object.defineProperty(S,C,{enumerable:!0,get:w[C]})},y.o=(S,w)=>Object.prototype.hasOwnProperty.call(S,w),y.r=S=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})};var A={};return(()=>{y.r(A),y.d(A,{Alignment:()=>U,EventType:()=>N,Fit:()=>u,Layout:()=>re,LoopType:()=>we,Rive:()=>ze,RiveEventType:()=>V,RiveFile:()=>ne,RuntimeLoader:()=>ue,StateMachineInput:()=>be,StateMachineInputType:()=>he,Testing:()=>Ce,decodeAudio:()=>Ge,decodeFont:()=>pe,decodeImage:()=>Y});var S=y(1),w=y(2),C=y(3),E=y(5),x=function(){var c=function(r,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,L){m.__proto__=L}||function(m,L){for(var I in L)Object.prototype.hasOwnProperty.call(L,I)&&(m[I]=L[I])},c(r,a)};return function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(r,a);function m(){this.constructor=r}r.prototype=a===null?Object.create(a):(m.prototype=a.prototype,new m)}}(),k=function(c,r,a,m){function L(I){return I instanceof a?I:new a(function(O){O(I)})}return new(a||(a=Promise))(function(I,O){function X(ge){try{z(m.next(ge))}catch(Ie){O(Ie)}}function Q(ge){try{z(m.throw(ge))}catch(Ie){O(Ie)}}function z(ge){ge.done?I(ge.value):L(ge.value).then(X,Q)}z((m=m.apply(c,[])).next())})},D=function(c,r){var a={label:0,sent:function(){if(I[0]&1)throw I[1];return I[1]},trys:[],ops:[]},m,L,I,O=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return O.next=X(0),O.throw=X(1),O.return=X(2),typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function X(z){return function(ge){return Q([z,ge])}}function Q(z){if(m)throw new TypeError("Generator is already executing.");for(;O&&(O=0,z[0]&&(a=0)),a;)try{if(m=1,L&&(I=z[0]&2?L.return:z[0]?L.throw||((I=L.return)&&I.call(L),0):L.next)&&!(I=I.call(L,z[1])).done)return I;switch(L=0,I&&(z=[z[0]&2,I.value]),z[0]){case 0:case 1:I=z;break;case 4:return a.label++,{value:z[1],done:!1};case 5:a.label++,L=z[1],z=[0];continue;case 7:z=a.ops.pop(),a.trys.pop();continue;default:if(I=a.trys,!(I=I.length>0&&I[I.length-1])&&(z[0]===6||z[0]===2)){a=0;continue}if(z[0]===3&&(!I||z[1]>I[0]&&z[1]<I[3])){a.label=z[1];break}if(z[0]===6&&a.label<I[1]){a.label=I[1],I=z;break}if(I&&a.label<I[2]){a.label=I[2],a.ops.push(z);break}I[2]&&a.ops.pop(),a.trys.pop();continue}z=r.call(c,a)}catch(ge){z=[6,ge],L=0}finally{m=I=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}},u;(function(c){c.Cover="cover",c.Contain="contain",c.Fill="fill",c.FitWidth="fitWidth",c.FitHeight="fitHeight",c.None="none",c.ScaleDown="scaleDown",c.Layout="layout"})(u||(u={}));var U;(function(c){c.Center="center",c.TopLeft="topLeft",c.TopCenter="topCenter",c.TopRight="topRight",c.CenterLeft="centerLeft",c.CenterRight="centerRight",c.BottomLeft="bottomLeft",c.BottomCenter="bottomCenter",c.BottomRight="bottomRight"})(U||(U={}));var re=function(){function c(r){var a,m,L,I,O,X,Q;this.fit=(a=r==null?void 0:r.fit)!==null&&a!==void 0?a:u.Contain,this.alignment=(m=r==null?void 0:r.alignment)!==null&&m!==void 0?m:U.Center,this.layoutScaleFactor=(L=r==null?void 0:r.layoutScaleFactor)!==null&&L!==void 0?L:1,this.minX=(I=r==null?void 0:r.minX)!==null&&I!==void 0?I:0,this.minY=(O=r==null?void 0:r.minY)!==null&&O!==void 0?O:0,this.maxX=(X=r==null?void 0:r.maxX)!==null&&X!==void 0?X:0,this.maxY=(Q=r==null?void 0:r.maxY)!==null&&Q!==void 0?Q:0}return c.new=function(r){var a=r.fit,m=r.alignment,L=r.minX,I=r.minY,O=r.maxX,X=r.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new c({fit:a,alignment:m,minX:L,minY:I,maxX:O,maxY:X})},c.prototype.copyWith=function(r){var a=r.fit,m=r.alignment,L=r.layoutScaleFactor,I=r.minX,O=r.minY,X=r.maxX,Q=r.maxY;return new c({fit:a??this.fit,alignment:m??this.alignment,layoutScaleFactor:L??this.layoutScaleFactor,minX:I??this.minX,minY:O??this.minY,maxX:X??this.maxX,maxY:Q??this.maxY})},c.prototype.runtimeFit=function(r){if(this.cachedRuntimeFit)return this.cachedRuntimeFit;var a;return this.fit===u.Cover?a=r.Fit.cover:this.fit===u.Contain?a=r.Fit.contain:this.fit===u.Fill?a=r.Fit.fill:this.fit===u.FitWidth?a=r.Fit.fitWidth:this.fit===u.FitHeight?a=r.Fit.fitHeight:this.fit===u.ScaleDown?a=r.Fit.scaleDown:this.fit===u.Layout?a=r.Fit.layout:a=r.Fit.none,this.cachedRuntimeFit=a,a},c.prototype.runtimeAlignment=function(r){if(this.cachedRuntimeAlignment)return this.cachedRuntimeAlignment;var a;return this.alignment===U.TopLeft?a=r.Alignment.topLeft:this.alignment===U.TopCenter?a=r.Alignment.topCenter:this.alignment===U.TopRight?a=r.Alignment.topRight:this.alignment===U.CenterLeft?a=r.Alignment.centerLeft:this.alignment===U.CenterRight?a=r.Alignment.centerRight:this.alignment===U.BottomLeft?a=r.Alignment.bottomLeft:this.alignment===U.BottomCenter?a=r.Alignment.bottomCenter:this.alignment===U.BottomRight?a=r.Alignment.bottomRight:a=r.Alignment.center,this.cachedRuntimeAlignment=a,a},c}(),ue=function(){function c(){}return c.loadRuntime=function(){S.default({locateFile:function(){return c.wasmURL}}).then(function(r){var a;for(c.runtime=r;c.callBackQueue.length>0;)(a=c.callBackQueue.shift())===null||a===void 0||a(c.runtime)}).catch(function(r){var a={message:(r==null?void 0:r.message)||"Unknown error",type:(r==null?void 0:r.name)||"Error",wasmError:r instanceof WebAssembly.CompileError||r instanceof WebAssembly.RuntimeError,originalError:r};console.debug("Rive WASM load error details:",a);var m="https://cdn.jsdelivr.net/npm/".concat(w.name,"@").concat(w.version,"/rive_fallback.wasm");if(c.wasmURL.toLowerCase()!==m)console.warn("Failed to load WASM from ".concat(c.wasmURL," (").concat(a.message,"), trying jsdelivr as a backup")),c.setWasmUrl(m),c.loadRuntime();else{var L=["Could not load Rive WASM file from ".concat(c.wasmURL," or ").concat(m,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible",`
Error details:`,"- Type: ".concat(a.type),"- Message: ".concat(a.message),"- WebAssembly-specific error: ".concat(a.wasmError),`
To resolve, you may need to:`,"1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join(`
`);console.error(L)}})},c.getInstance=function(r){c.isLoading||(c.isLoading=!0,c.loadRuntime()),c.runtime?r(c.runtime):c.callBackQueue.push(r)},c.awaitInstance=function(){return new Promise(function(r){return c.getInstance(function(a){return r(a)})})},c.setWasmUrl=function(r){c.wasmURL=r},c.getWasmUrl=function(){return c.wasmURL},c.isLoading=!1,c.callBackQueue=[],c.wasmURL="https://unpkg.com/".concat(w.name,"@").concat(w.version,"/rive.wasm"),c}(),he;(function(c){c[c.Number=56]="Number",c[c.Trigger=58]="Trigger",c[c.Boolean=59]="Boolean"})(he||(he={}));var be=function(){function c(r,a){this.type=r,this.runtimeInput=a}return Object.defineProperty(c.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(r){this.runtimeInput.value=r},enumerable:!1,configurable:!0}),c.prototype.fire=function(){this.type===he.Trigger&&this.runtimeInput.fire()},c.prototype.delete=function(){this.runtimeInput=null},c}(),V;(function(c){c[c.General=128]="General",c[c.OpenUrl=131]="OpenUrl"})(V||(V={}));var H=function(){function c(r,a,m,L){this.stateMachine=r,this.playing=m,this.artboard=L,this.inputs=[],this.instance=new a.StateMachineInstance(r,L),this.initInputs(a)}return Object.defineProperty(c.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"statesChanged",{get:function(){for(var r=[],a=0;a<this.instance.stateChangedCount();a++)r.push(this.instance.stateChangedNameByIndex(a));return r},enumerable:!1,configurable:!0}),c.prototype.advance=function(r){this.instance.advance(r)},c.prototype.advanceAndApply=function(r){this.instance.advanceAndApply(r)},c.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},c.prototype.reportedEventAt=function(r){return this.instance.reportedEventAt(r)},c.prototype.initInputs=function(r){for(var a=0;a<this.instance.inputCount();a++){var m=this.instance.input(a);this.inputs.push(this.mapRuntimeInput(m,r))}},c.prototype.mapRuntimeInput=function(r,a){if(r.type===a.SMIInput.bool)return new be(he.Boolean,r.asBool());if(r.type===a.SMIInput.number)return new be(he.Number,r.asNumber());if(r.type===a.SMIInput.trigger)return new be(he.Trigger,r.asTrigger())},c.prototype.cleanup=function(){this.inputs.forEach(function(r){r.delete()}),this.inputs.length=0,this.instance.delete()},c}(),ve=function(){function c(r,a,m,L,I){L===void 0&&(L=[]),I===void 0&&(I=[]),this.runtime=r,this.artboard=a,this.eventManager=m,this.animations=L,this.stateMachines=I}return c.prototype.add=function(r,a,m){if(m===void 0&&(m=!0),r=ie(r),r.length===0)this.animations.forEach(function(Te){return Te.playing=a}),this.stateMachines.forEach(function(Te){return Te.playing=a});else for(var L=this.animations.map(function(Te){return Te.name}),I=this.stateMachines.map(function(Te){return Te.name}),O=0;O<r.length;O++){var X=L.indexOf(r[O]),Q=I.indexOf(r[O]);if(X>=0||Q>=0)X>=0?this.animations[X].playing=a:this.stateMachines[Q].playing=a;else{var z=this.artboard.animationByName(r[O]);if(z){var ge=new C.Animation(z,this.artboard,this.runtime,a);ge.advance(0),ge.apply(1),this.animations.push(ge)}else{var Ie=this.artboard.stateMachineByName(r[O]);if(Ie){var Pe=new H(Ie,this.runtime,a,this.artboard);this.stateMachines.push(Pe)}}}}return m&&(a?this.eventManager.fire({type:N.Play,data:this.playing}):this.eventManager.fire({type:N.Pause,data:this.paused})),a?this.playing:this.paused},c.prototype.initLinearAnimations=function(r,a){for(var m=this.animations.map(function(Q){return Q.name}),L=0;L<r.length;L++){var I=m.indexOf(r[L]);if(I>=0)this.animations[I].playing=a;else{var O=this.artboard.animationByName(r[L]);if(O){var X=new C.Animation(O,this.artboard,this.runtime,a);X.advance(0),X.apply(1),this.animations.push(X)}}}},c.prototype.initStateMachines=function(r,a){for(var m=this.stateMachines.map(function(Q){return Q.name}),L=0;L<r.length;L++){var I=m.indexOf(r[L]);if(I>=0)this.stateMachines[I].playing=a;else{var O=this.artboard.stateMachineByName(r[L]);if(O){var X=new H(O,this.runtime,a,this.artboard);this.stateMachines.push(X)}else this.initLinearAnimations([r[L]],a)}}},c.prototype.play=function(r){return this.add(r,!0)},c.prototype.pause=function(r){return this.add(r,!1)},c.prototype.scrub=function(r,a){var m=this.animations.filter(function(L){return r.includes(L.name)});return m.forEach(function(L){return L.scrubTo=a}),m.map(function(L){return L.name})},Object.defineProperty(c.prototype,"playing",{get:function(){return this.animations.filter(function(r){return r.playing}).map(function(r){return r.name}).concat(this.stateMachines.filter(function(r){return r.playing}).map(function(r){return r.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"paused",{get:function(){return this.animations.filter(function(r){return!r.playing}).map(function(r){return r.name}).concat(this.stateMachines.filter(function(r){return!r.playing}).map(function(r){return r.name}))},enumerable:!1,configurable:!0}),c.prototype.stop=function(r){var a=this;r=ie(r);var m=[];if(r.length===0)m=this.animations.map(function(O){return O.name}).concat(this.stateMachines.map(function(O){return O.name})),this.animations.forEach(function(O){return O.cleanup()}),this.stateMachines.forEach(function(O){return O.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var L=this.animations.filter(function(O){return r.includes(O.name)});L.forEach(function(O){O.cleanup(),a.animations.splice(a.animations.indexOf(O),1)});var I=this.stateMachines.filter(function(O){return r.includes(O.name)});I.forEach(function(O){O.cleanup(),a.stateMachines.splice(a.stateMachines.indexOf(O),1)}),m=L.map(function(O){return O.name}).concat(I.map(function(O){return O.name}))}return this.eventManager.fire({type:N.Stop,data:m}),m},Object.defineProperty(c.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(r,a){return r||a.playing},!1)||this.stateMachines.reduce(function(r,a){return r||a.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),c.prototype.atLeastOne=function(r,a){a===void 0&&(a=!0);var m;return this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([m=this.artboard.animationByIndex(0).name],r,a):this.artboard.stateMachineCount()>0&&this.add([m=this.artboard.stateMachineByIndex(0).name],r,a)),m},c.prototype.handleLooping=function(){for(var r=0,a=this.animations.filter(function(L){return L.playing});r<a.length;r++){var m=a[r];m.loopValue===0&&m.loopCount?(m.loopCount=0,this.stop(m.name)):m.loopValue===1&&m.loopCount?(this.eventManager.fire({type:N.Loop,data:{animation:m.name,type:we.Loop}}),m.loopCount=0):m.loopValue===2&&m.loopCount>1&&(this.eventManager.fire({type:N.Loop,data:{animation:m.name,type:we.PingPong}}),m.loopCount=0)}},c.prototype.handleStateChanges=function(){for(var r=[],a=0,m=this.stateMachines.filter(function(I){return I.playing});a<m.length;a++){var L=m[a];r.push.apply(r,L.statesChanged)}r.length>0&&this.eventManager.fire({type:N.StateChange,data:r})},c.prototype.handleAdvancing=function(r){this.eventManager.fire({type:N.Advance,data:r})},c}(),N;(function(c){c.Load="load",c.LoadError="loaderror",c.Play="play",c.Pause="pause",c.Stop="stop",c.Loop="loop",c.Draw="draw",c.Advance="advance",c.StateChange="statechange",c.RiveEvent="riveevent",c.AudioStatusChange="audiostatuschange"})(N||(N={}));var we;(function(c){c.OneShot="oneshot",c.Loop="loop",c.PingPong="pingpong"})(we||(we={}));var ye=function(){function c(r){r===void 0&&(r=[]),this.listeners=r}return c.prototype.getListeners=function(r){return this.listeners.filter(function(a){return a.type===r})},c.prototype.add=function(r){this.listeners.includes(r)||this.listeners.push(r)},c.prototype.remove=function(r){for(var a=0;a<this.listeners.length;a++){var m=this.listeners[a];if(m.type===r.type&&m.callback===r.callback){this.listeners.splice(a,1);break}}},c.prototype.removeAll=function(r){var a=this;r?this.listeners.filter(function(m){return m.type===r}).forEach(function(m){return a.remove(m)}):this.listeners.splice(0,this.listeners.length)},c.prototype.fire=function(r){var a=this.getListeners(r.type);a.forEach(function(m){return m.callback(r)})},c}(),Ae=function(){function c(r){this.eventManager=r,this.queue=[]}return c.prototype.add=function(r){this.queue.push(r)},c.prototype.process=function(){for(;this.queue.length>0;){var r=this.queue.shift();r!=null&&r.action&&r.action(),r!=null&&r.event&&this.eventManager.fire(r.event)}},c}(),fe;(function(c){c[c.AVAILABLE=0]="AVAILABLE",c[c.UNAVAILABLE=1]="UNAVAILABLE"})(fe||(fe={}));var Ze=function(c){x(r,c);function r(){var a=c!==null&&c.apply(this,arguments)||this;return a._started=!1,a._enabled=!1,a._status=fe.UNAVAILABLE,a}return r.prototype.delay=function(a){return k(this,void 0,void 0,function(){return D(this,function(m){return[2,new Promise(function(L){return setTimeout(L,a)})]})})},r.prototype.timeout=function(){return k(this,void 0,void 0,function(){return D(this,function(a){return[2,new Promise(function(m,L){return setTimeout(L,50)})]})})},r.prototype.reportToListeners=function(){this.fire({type:N.AudioStatusChange}),this.removeAll()},r.prototype.enableAudio=function(){return k(this,void 0,void 0,function(){return D(this,function(a){return this._enabled||(this._enabled=!0,this._status=fe.AVAILABLE,this.reportToListeners()),[2]})})},r.prototype.testAudio=function(){return k(this,void 0,void 0,function(){return D(this,function(a){switch(a.label){case 0:if(!(this._status===fe.UNAVAILABLE&&this._audioContext!==null))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return a.sent(),this.enableAudio(),[3,4];case 3:return a.sent(),[3,4];case 4:return[2]}})})},r.prototype._establishAudio=function(){return k(this,void 0,void 0,function(){return D(this,function(a){switch(a.label){case 0:return this._started?[3,5]:(this._started=!0,typeof window>"u"?(this.enableAudio(),[3,5]):[3,1]);case 1:this._audioContext=new AudioContext,this.listenForUserAction(),a.label=2;case 2:return this._status!==fe.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return a.sent(),[4,this.delay(1e3)];case 4:return a.sent(),[3,2];case 5:return[2]}})})},r.prototype.listenForUserAction=function(){var a=this,m=function(){return k(a,void 0,void 0,function(){return D(this,function(L){return this.enableAudio(),[2]})})};document.addEventListener("pointerdown",m,{once:!0})},r.prototype.establishAudio=function(){return k(this,void 0,void 0,function(){return D(this,function(a){return this._establishAudio(),[2]})})},Object.defineProperty(r.prototype,"systemVolume",{get:function(){return this._status===fe.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),r}(ye),de=new Ze,Me=function(){function c(){}return c.prototype.observe=function(){},c.prototype.unobserve=function(){},c.prototype.disconnect=function(){},c}(),Le=globalThis.ResizeObserver||Me,je=function(){function c(){var r=this;this._elementsMap=new Map,this._onObservedEntry=function(a){var m=r._elementsMap.get(a.target);m!==null?m.onResize(a.target.clientWidth==0||a.target.clientHeight==0):r._resizeObserver.unobserve(a.target)},this._onObserved=function(a){a.forEach(r._onObservedEntry)},this._resizeObserver=new Le(this._onObserved)}return c.prototype.add=function(r,a){var m={onResize:a,element:r};return this._elementsMap.set(r,m),this._resizeObserver.observe(r),m},c.prototype.remove=function(r){this._resizeObserver.unobserve(r.element),this._elementsMap.delete(r.element)},c}(),Ne=new je,ne=function(){function c(r){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.src=r.src,this.buffer=r.buffer,r.assetLoader&&(this.assetLoader=r.assetLoader),this.enableRiveAssetCDN=typeof r.enableRiveAssetCDN=="boolean"?r.enableRiveAssetCDN:!0,this.eventManager=new ye,r.onLoad&&this.on(N.Load,r.onLoad),r.onLoadError&&this.on(N.LoadError,r.onLoadError)}return c.prototype.initData=function(){return k(this,void 0,void 0,function(){var r,a,m;return D(this,function(L){switch(L.label){case 0:return this.src?(r=this,[4,Se(this.src)]):[3,2];case 1:r.buffer=L.sent(),L.label=2;case 2:return this.assetLoader&&(a=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),m=this,[4,this.runtime.load(new Uint8Array(this.buffer),a,this.enableRiveAssetCDN)];case 3:if(m.file=L.sent(),this.file!==null)this.eventManager.fire({type:N.Load,data:this});else throw this.eventManager.fire({type:N.LoadError,data:null}),new Error(c.fileLoadErrorMessage);return[2]}})})},c.prototype.init=function(){return k(this,void 0,void 0,function(){var r;return D(this,function(a){switch(a.label){case 0:if(!this.src&&!this.buffer)throw new Error(c.missingErrorMessage);return r=this,[4,ue.awaitInstance()];case 1:return r.runtime=a.sent(),[4,this.initData()];case 2:return a.sent(),[2]}})})},c.prototype.on=function(r,a){this.eventManager.add({type:r,callback:a})},c.prototype.off=function(r,a){this.eventManager.remove({type:r,callback:a})},c.prototype.cleanup=function(){var r;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),(r=this.file)===null||r===void 0||r.delete())},c.prototype.removeAllRiveEventListeners=function(r){this.eventManager.removeAll(r)},c.prototype.getInstance=function(){if(this.file!==null)return this.referenceCount+=1,this.file},c.missingErrorMessage="Rive source file or data buffer required",c.fileLoadErrorMessage="The file failed to load",c}(),ze=function(){function c(r){var a=this,m;this.loaded=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(L){a._hasZeroSize=L,(!a._layout.maxX||!a._layout.maxY)&&a.resizeToCanvas()},this.renderSecondTimer=0,this.canvas=r.canvas,r.canvas.constructor===HTMLCanvasElement&&(this._observed=Ne.add(this.canvas,this.onCanvasResize)),this.src=r.src,this.buffer=r.buffer,this.riveFile=r.riveFile,this.layout=(m=r.layout)!==null&&m!==void 0?m:new re,this.shouldDisableRiveListeners=!!r.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!r.isTouchScrollEnabled,this.automaticallyHandleEvents=!!r.automaticallyHandleEvents,this.enableRiveAssetCDN=r.enableRiveAssetCDN===void 0?!0:r.enableRiveAssetCDN,this.eventManager=new ye,r.onLoad&&this.on(N.Load,r.onLoad),r.onLoadError&&this.on(N.LoadError,r.onLoadError),r.onPlay&&this.on(N.Play,r.onPlay),r.onPause&&this.on(N.Pause,r.onPause),r.onStop&&this.on(N.Stop,r.onStop),r.onLoop&&this.on(N.Loop,r.onLoop),r.onStateChange&&this.on(N.StateChange,r.onStateChange),r.onAdvance&&this.on(N.Advance,r.onAdvance),r.onload&&!r.onLoad&&this.on(N.Load,r.onload),r.onloaderror&&!r.onLoadError&&this.on(N.LoadError,r.onloaderror),r.onplay&&!r.onPlay&&this.on(N.Play,r.onplay),r.onpause&&!r.onPause&&this.on(N.Pause,r.onpause),r.onstop&&!r.onStop&&this.on(N.Stop,r.onstop),r.onloop&&!r.onLoop&&this.on(N.Loop,r.onloop),r.onstatechange&&!r.onStateChange&&this.on(N.StateChange,r.onstatechange),r.assetLoader&&(this.assetLoader=r.assetLoader),this.taskQueue=new Ae(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:r.autoplay,animations:r.animations,stateMachines:r.stateMachines,artboard:r.artboard,useOffscreenRenderer:r.useOffscreenRenderer})}return c.new=function(r){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new c(r)},c.prototype.onSystemAudioChanged=function(){this.volume=this._volume},c.prototype.init=function(r){var a=this,m=r.src,L=r.buffer,I=r.riveFile,O=r.animations,X=r.stateMachines,Q=r.artboard,z=r.autoplay,ge=z===void 0?!1:z,Ie=r.useOffscreenRenderer,Pe=Ie===void 0?!1:Ie;if(this.src=m,this.buffer=L,this.riveFile=I,!this.src&&!this.buffer&&!this.riveFile)throw new Error(c.missingErrorMessage);var Te=ie(O),vt=ie(X);this.loaded=!1,this.readyForPlaying=!1,ue.awaitInstance().then(function(qe){a.runtime=qe,a.removeRiveListeners(),a.deleteRiveRenderer(),a.renderer=a.runtime.makeRenderer(a.canvas,Pe),a.canvas.width||a.canvas.height||a.resizeDrawingSurfaceToCanvas(),a.initData(Q,Te,vt,ge).then(function(){return a.setupRiveListeners()}).catch(function(yt){console.error(yt)})}).catch(function(qe){console.error(qe)})},c.prototype.setupRiveListeners=function(r){var a=this;if(this.eventCleanup&&this.eventCleanup(),!this.shouldDisableRiveListeners){var m=(this.animator.stateMachines||[]).filter(function(I){return I.playing&&a.runtime.hasListeners(I.instance)}).map(function(I){return I.instance}),L=this.isTouchScrollEnabled;r&&"isTouchScrollEnabled"in r&&(L=r.isTouchScrollEnabled),this.eventCleanup=(0,E.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:m,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:L,layoutScaleFactor:this._layout.layoutScaleFactor})}},c.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},c.prototype.initializeAudio=function(){var r=this,a;de.status==fe.UNAVAILABLE&&!((a=this.artboard)===null||a===void 0)&&a.hasAudio&&this._audioEventListener===null&&(this._audioEventListener={type:N.AudioStatusChange,callback:function(){return r.onSystemAudioChanged()}},de.add(this._audioEventListener),de.establishAudio())},c.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},c.prototype.initData=function(r,a,m,L){return k(this,void 0,void 0,function(){var I,O;return D(this,function(X){switch(X.label){case 0:return X.trys.push([0,3,,4]),this.riveFile!=null?[3,2]:(this.riveFile=new ne({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:X.sent(),X.label=2;case 2:return this.file=this.riveFile.getInstance(),this.initArtboard(r,a,m,L),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:N.Load,data:(O=this.src)!==null&&O!==void 0?O:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return X.sent(),I="Problem loading file; may be corrupt!",console.warn(I),this.eventManager.fire({type:N.LoadError,data:I}),[2,Promise.reject(I)];case 4:return[2]}})})},c.prototype.initArtboard=function(r,a,m,L){if(this.file){var I=r?this.file.artboardByName(r):this.file.defaultArtboard();if(!I){var O="Invalid artboard name or no default artboard";console.warn(O),this.eventManager.fire({type:N.LoadError,data:O});return}if(this.artboard=I,I.volume=this._volume*de.systemVolume,this.artboard.animationCount()<1){var O="Artboard has no animations";throw this.eventManager.fire({type:N.LoadError,data:O}),O}this.animator=new ve(this.runtime,this.artboard,this.eventManager);var X;a.length>0||m.length>0?(X=a.concat(m),this.animator.initLinearAnimations(a,L),this.animator.initStateMachines(m,L)):X=[this.animator.atLeastOne(L,!1)],this.taskQueue.add({event:{type:L?N.Play:N.Pause,data:X}})}},c.prototype.drawFrame=function(){this.startRendering()},c.prototype.draw=function(r,a){this.frameRequestId=null;var m=performance.now();this.lastRenderTime||(this.lastRenderTime=r),this.renderSecondTimer+=r-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,a==null||a());var L=(r-this.lastRenderTime)/1e3;this.lastRenderTime=r;for(var I=this.animator.animations.filter(function(Xe){return Xe.playing||Xe.needsScrub}).sort(function(Xe){return Xe.needsScrub?-1:1}),O=0,X=I;O<X.length;O++){var Q=X[O];Q.advance(L),Q.instance.didLoop&&(Q.loopCount+=1),Q.apply(1)}for(var z=this.animator.stateMachines.filter(function(Xe){return Xe.playing}),ge=0,Ie=z;ge<Ie.length;ge++){var Pe=Ie[ge],Te=Pe.reportedEventCount();if(Te)for(var vt=0;vt<Te;vt++){var qe=Pe.reportedEventAt(vt);if(qe)if(qe.type===V.OpenUrl){if(this.eventManager.fire({type:N.RiveEvent,data:qe}),this.automaticallyHandleEvents){var yt=document.createElement("a"),Zt=qe,ct=Zt.url,Tt=Zt.target,Dt=(0,E.sanitizeUrl)(ct);ct&&yt.setAttribute("href",Dt),Tt&&yt.setAttribute("target",Tt),Dt&&Dt!==E.BLANK_URL&&yt.click()}}else this.eventManager.fire({type:N.RiveEvent,data:qe})}Pe.advanceAndApply(L)}this.animator.stateMachines.length==0&&this.artboard.advance(L);var ut=this.renderer;ut.clear(),ut.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(ut),ut.restore(),ut.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(L),this.frameCount++;var Rt=performance.now();for(this.frameTimes.push(Rt),this.durations.push(Rt-m);this.frameTimes[0]<=Rt-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():this.animator.isPaused?this.lastRenderTime=0:this.animator.isStopped&&(this.lastRenderTime=0)},c.prototype.alignRenderer=function(){var r=this,a=r.renderer,m=r.runtime,L=r._layout,I=r.artboard;a.align(L.runtimeFit(m),L.runtimeAlignment(m),{minX:L.minX,minY:L.minY,maxX:L.maxX,maxY:L.maxY},I.bounds,this._devicePixelRatioUsed*L.layoutScaleFactor)},Object.defineProperty(c.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(r,a){return r+a},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),c.prototype.cleanup=function(){var r;this.stopRendering(),this.cleanupInstances(),this._observed!==null&&Ne.remove(this._observed),this.removeRiveListeners(),(r=this.riveFile)===null||r===void 0||r.cleanup(),this.riveFile=null,this.file=null,this.deleteRiveRenderer(),this._audioEventListener!==null&&(de.remove(this._audioEventListener),this._audioEventListener=null)},c.prototype.deleteRiveRenderer=function(){var r;(r=this.renderer)===null||r===void 0||r.delete(),this.renderer=null},c.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},c.prototype.retrieveTextRun=function(r){var a;if(!r){console.warn("No text run name provided");return}if(!this.artboard){console.warn("Tried to access text run, but the Artboard is null");return}var m=this.artboard.textRun(r);if(!m){console.warn("Could not access a text run with name '".concat(r,"' in the '").concat((a=this.artboard)===null||a===void 0?void 0:a.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."));return}return m},c.prototype.getTextRunValue=function(r){var a=this.retrieveTextRun(r);return a?a.text:void 0},c.prototype.setTextRunValue=function(r,a){var m=this.retrieveTextRun(r);m&&(m.text=a)},c.prototype.play=function(r,a){var m=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return m.play(r,a)}});return}this.animator.play(r),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()},c.prototype.pause=function(r){var a=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.pause(r)}});return}this.eventCleanup&&this.eventCleanup(),this.animator.pause(r)},c.prototype.scrub=function(r,a){var m=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return m.scrub(r,a)}});return}this.animator.scrub(r,a||0),this.drawFrame()},c.prototype.stop=function(r){var a=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.stop(r)}});return}this.animator&&this.animator.stop(r),this.eventCleanup&&this.eventCleanup()},c.prototype.reset=function(r){var a,m=r==null?void 0:r.artboard,L=ie(r==null?void 0:r.animations),I=ie(r==null?void 0:r.stateMachines),O=(a=r==null?void 0:r.autoplay)!==null&&a!==void 0?a:!1;this.cleanupInstances(),this.initArtboard(m,L,I,O),this.taskQueue.process()},c.prototype.load=function(r){this.file=null,this.stop(),this.init(r)},Object.defineProperty(c.prototype,"layout",{get:function(){return this._layout},set:function(r){this._layout=r,(!r.maxX||!r.maxY)&&this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),c.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},c.prototype.resizeDrawingSurfaceToCanvas=function(r){if(this.canvas instanceof HTMLCanvasElement&&window){var a=this.canvas.getBoundingClientRect(),m=a.width,L=a.height,I=r||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=I,this.canvas.width=I*m,this.canvas.height=I*L,this.startRendering(),this.resizeToCanvas(),this.layout.fit===u.Layout){var O=this._layout.layoutScaleFactor;this.artboard.width=m/O,this.artboard.height=L/O}}},Object.defineProperty(c.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var r=[],a=0;a<this.artboard.animationCount();a++)r.push(this.artboard.animationByIndex(a).name);return r},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var r=[],a=0;a<this.artboard.stateMachineCount();a++)r.push(this.artboard.stateMachineByIndex(a).name);return r},enumerable:!1,configurable:!0}),c.prototype.stateMachineInputs=function(r){if(this.loaded){var a=this.animator.stateMachines.find(function(m){return m.name===r});return a==null?void 0:a.inputs}},c.prototype.retrieveInputAtPath=function(r,a){if(!r){console.warn("No input name provided for path '".concat(a,"'"));return}if(!this.artboard){console.warn("Tried to access input: '".concat(r,"', at path: '").concat(a,"', but the Artboard is null"));return}var m=this.artboard.inputByPath(r,a);if(!m){console.warn("Could not access an input with name: '".concat(r,"', at path:'").concat(a,"'"));return}return m},c.prototype.setBooleanStateAtPath=function(r,a,m){var L=this.retrieveInputAtPath(r,m);L&&(L.type===he.Boolean?L.asBool().value=a:console.warn("Input with name: '".concat(r,"', at path:'").concat(m,"' is not a boolean")))},c.prototype.setNumberStateAtPath=function(r,a,m){var L=this.retrieveInputAtPath(r,m);L&&(L.type===he.Number?L.asNumber().value=a:console.warn("Input with name: '".concat(r,"', at path:'").concat(m,"' is not a number")))},c.prototype.fireStateAtPath=function(r,a){var m=this.retrieveInputAtPath(r,a);m&&(m.type===he.Trigger?m.asTrigger().fire():console.warn("Input with name: '".concat(r,"', at path:'").concat(a,"' is not a trigger")))},c.prototype.retrieveTextAtPath=function(r,a){if(!r){console.warn("No text name provided for path '".concat(a,"'"));return}if(!a){console.warn("No path provided for text '".concat(r,"'"));return}if(!this.artboard){console.warn("Tried to access text: '".concat(r,"', at path: '").concat(a,"', but the Artboard is null"));return}var m=this.artboard.textByPath(r,a);if(!m){console.warn("Could not access text with name: '".concat(r,"', at path:'").concat(a,"'"));return}return m},c.prototype.getTextRunValueAtPath=function(r,a){var m=this.retrieveTextAtPath(r,a);if(!m){console.warn("Could not get text with name: '".concat(r,"', at path:'").concat(a,"'"));return}return m.text},c.prototype.setTextRunValueAtPath=function(r,a,m){var L=this.retrieveTextAtPath(r,m);if(!L){console.warn("Could not set text with name: '".concat(r,"', at path:'").concat(m,"'"));return}L.text=a},Object.defineProperty(c.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(r){return r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(r){return r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(r){return!r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(r){return!r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),c.prototype.on=function(r,a){this.eventManager.add({type:r,callback:a})},c.prototype.off=function(r,a){this.eventManager.remove({type:r,callback:a})},c.prototype.unsubscribe=function(r,a){console.warn("This function is deprecated: please use `off()` instead."),this.off(r,a)},c.prototype.removeAllRiveEventListeners=function(r){this.eventManager.removeAll(r)},c.prototype.unsubscribeAll=function(r){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(r)},c.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},c.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},c.prototype.enableFPSCounter=function(r){this.runtime.enableFPSCounter(r)},c.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(c.prototype,"contents",{get:function(){if(this.loaded){for(var r={artboards:[]},a=0;a<this.file.artboardCount();a++){for(var m=this.file.artboardByIndex(a),L={name:m.name,animations:[],stateMachines:[]},I=0;I<m.animationCount();I++){var O=m.animationByIndex(I);L.animations.push(O.name)}for(var X=0;X<m.stateMachineCount();X++){for(var Q=m.stateMachineByIndex(X),z=Q.name,ge=new this.runtime.StateMachineInstance(Q,m),Ie=[],Pe=0;Pe<ge.inputCount();Pe++){var Te=ge.input(Pe);Ie.push({name:Te.name,type:Te.type})}L.stateMachines.push({name:z,inputs:Ie})}r.artboards.push(L)}return r}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(r){this._volume=r,this.artboard&&(this.artboard.volume=r*de.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"artboardWidth",{get:function(){var r;return this.artboard?this.artboard.width:(r=this._artboardWidth)!==null&&r!==void 0?r:0},set:function(r){this._artboardWidth=r,this.artboard&&(this.artboard.width=r)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"artboardHeight",{get:function(){var r;return this.artboard?this.artboard.height:(r=this._artboardHeight)!==null&&r!==void 0?r:0},set:function(r){this._artboardHeight=r,this.artboard&&(this.artboard.height=r)},enumerable:!1,configurable:!0}),c.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(c.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(r){this._devicePixelRatioUsed=r},enumerable:!1,configurable:!0}),c.missingErrorMessage="Rive source file or data buffer required",c}(),Se=function(c){return k(void 0,void 0,void 0,function(){var r,a,m;return D(this,function(L){switch(L.label){case 0:return r=new Request(c),[4,fetch(r)];case 1:return a=L.sent(),[4,a.arrayBuffer()];case 2:return m=L.sent(),[2,m]}})})},ie=function(c){return typeof c=="string"?[c]:c instanceof Array?c:[]},Ce={EventManager:ye,TaskQueueManager:Ae},Ge=function(c){return new Promise(function(r){return ue.getInstance(function(a){a.decodeAudio(c,r)})})},Y=function(c){return new Promise(function(r){return ue.getInstance(function(a){a.decodeImage(c,r)})})},pe=function(c){return new Promise(function(r){return ue.getInstance(function(a){a.decodeFont(c,r)})})}})(),A})())})(sr);const uo=".lido-canvas{height:100%;width:100%}",ho=uo,fo=class{constructor(i){He(this,i),this.initializeRive=d=>{const h=It.getInstance(),p=this.el.querySelector("canvas");this.riveInstance=new sr.exports.Rive({src:d,canvas:p,stateMachines:"Idle",autoplay:!0,onLoad:()=>{this.riveInstance.resizeDrawingSurfaceToCanvas(),h.setRiveInstance(this.riveInstance)}})},this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.src=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0}async componentDidLoad(){mt(this.el,this.type),this.initializeRive(at(this.src))}render(){const i={height:this.height,width:this.width,backgroundColor:this.bgColor,top:this.y,left:this.x,display:this.visible?"flex":"none",zIndex:this.z};return K(Ue,{key:"7cbafd15e6ffab907fb5ce58446971a5681de60c",id:this.id,type:this.type,tabindex:this.tabIndex,value:this.value,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("canvas",{key:"e4809a9cbe812db6aace7dc00dd21f748d0170b5",class:"lido-canvas"}))}get el(){return lt(this)}};fo.style=ho;const po=".lido-col{top:var(--y, 0);left:var(--x, 0);height:var(--height, 100%);width:var(--width, 100%);background-color:var(--bgColor, #eeeeee);padding:15px;border-radius:10px;display:flex;justify-content:space-around;flex-direction:column;align-items:center}.lido-col>*{}",go=po,mo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.childElementsLength=void 0,this.minLength=void 0,this.maxLength=void 0,this.direction=void 0,this.borderImage=void 0,this.boxShadow=void 0,this.style={}}componentDidLoad(){mt(this.el,this.type),Qn(this.el,this.minLength,this.maxLength,this.childElementsLength,"flex")}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=this.borderImage?at(this.borderImage):"",d=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,d),width:Z(this.width,d),backgroundColor:Z(this.bgColor,d),top:Z(this.y,d),left:Z(this.x,d),zIndex:this.z,display:this.visible?"flex":"none",flexDirection:this.direction?Z(this.direction,d):"column",borderImage:`url(${i})`,borderImageSlice:i?"0 fill":"",boxShadow:this.boxShadow?this.boxShadow:"unset"}}render(){return K(Ue,{key:"be4d40df66b299db3f50b61bb17d9344156f3e1c",id:this.id,class:"lido-col",type:this.type,tabindex:this.tabIndex,value:this.value,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"858fcdd47cfd7872a55ffb2d86eaa9c64077a3e2"}))}get el(){return lt(this)}};mo.style=go;const vo=".lido-container{position:relative;height:100%;width:100%;background-color:var(--bgColor, #ffffff);display:flex;flex-direction:column;justify-content:center;align-items:center}",yo=vo,bo=class{constructor(i){He(this,i),this.id=void 0,this.objective=void 0,this.customStyle=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.bgImage=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.canplay=!0,this.showCheck=!1,this.isContinueOnCorrect=!1,this.isAllowOnlyCorrect=!1,this.baseUrl=""}convertToPixels(i,d=document.body){if(!i)return 0;if(i.endsWith("px"))return parseFloat(i);const h=document.createElement("div");h.style.position="absolute",h.style.visibility="hidden",h.style.height=i,d.appendChild(h);const p=h.offsetHeight;return d.removeChild(h),p}scaleContainer(i){var d;const h=[window.innerWidth],p=[window.innerHeight];!((d=window.screen)===null||d===void 0)&&d.width&&(h.push(window.screen.width),p.push(window.screen.height));const y=Math.min(...h),A=Math.min(...p),S=A>y;let w,C;S?(w=y/900,C=A/1600):(w=y/1600,C=A/900);const E=Math.min(w,C);i.style.transform=`translate(-50%, -50%) scale(${E})`,i.style.left="50%",i.style.top="50%",i.style.position="absolute",this.screenOrientation()}screenOrientation(){window.innerHeight>window.innerWidth?(this.el.style.height="1600px",this.el.style.width="900px"):(this.el.style.height="900px",this.el.style.width="1600px")}componentDidLoad(){this.scaleContainer(this.el);const i=this.bgImage?at(this.bgImage):"";if(document.body.style.backgroundColor=this.bgColor,document.body.style.backgroundImage=`url(${i})`,window.addEventListener("resize",()=>this.scaleContainer(this.el)),window.addEventListener("load",()=>this.scaleContainer(this.el)),mt(this.el,this.type),this.customStyle){const d=document.createElement("style");d.innerHTML=this.customStyle,document.head.appendChild(d)}}disconnectedCallback(){window.removeEventListener("resize",()=>this.scaleContainer(this.el)),window.removeEventListener("load",()=>this.scaleContainer(this.el)),document.body.style.backgroundColor="",document.body.style.backgroundImage=""}render(){const i={backgroundColor:this.bgColor,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return console.log("ðŸš€ ~ LidoContainer ~ canplay:",this.canplay),K(Ue,{key:"1405439fb38afbedb8c29062766d9fb8358fe72a",id:"lido-container",tabindex:0,class:"lido-container",objective:this.objective,baseUrl:this.baseUrl,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,onTouch:this.onTouch,onInCorrect:this.onInCorrect,onCorrect:this.onCorrect,onEntry:this.onEntry,showCheck:`${this.showCheck}`,isContinueOnCorrect:`${this.isContinueOnCorrect}`,isAllowOnlyCorrect:`${this.isAllowOnlyCorrect}`,canplay:`${this.canplay}`},K("slot",{key:"eeb15e63789bff68b699893793dd4e59e3f96678"}))}get el(){return lt(this)}};bo.style=yo;const wo="@import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400..800&display=swap'); body{overflow:hidden;background-position:center;background-size:cover;background-repeat:no-repeat;height:100vh}.lido-disable-check-button{pointer-events:none;background-color:#9393935c !important;color:white}.lido-element-selected{border:2px solid;background-color:#ffdf7d !important}.diagonal-target,.diagonal-drop lido-image{transform:scale(0.7) !important;opacity:1 !important}.cloned-element{display:flex !important;position:absolute !important;filter:grayscale(100%);pointer-events:none}.removeShadow{box-shadow:0px 0px 0px 0px #FF8900 !important}",Co=wo,xo="@keyframes rightToPlace{from{transform:translateX(2000px)}to{transform:translateX(0)}}@keyframes topToPlace{from{transform:translateY(-1000px)}to{transform:translateY(0)}}@keyframes bottomToPlace{from{transform:translateY(1000px)}to{transform:translateY(0)}}@keyframes placeToLeft{from{}to{transform:translateX(-2000px)}}@keyframes leftToPlace{from{transform:translateX(-2000px)}to{transform:translateX(0)}}@keyframes shake{0%{transform:translateX(0)}10%{transform:translateX(-5px)}20%{transform:translateX(5px)}30%{transform:translateX(-5px)}40%{transform:translateX(5px)}50%{transform:translateX(-5px)}60%{transform:translateX(5px)}70%{transform:translateX(-5px)}80%{transform:translateX(5px)}90%{transform:translateX(-5px)}100%{transform:translateX(0)}}@keyframes fallAndBounce{0%{transform:translateY(-1000px)}25%{transform:translateY(0px)}50%{transform:translateY(-200px)}75%{transform:translateY(0)}90%{transform:translateY(-100px)}100%{transform:translateY(0)}}@keyframes placeToDown{0%{transform:translateY(0)}100%{transform:translateY(1000px)}}",So=xo,_o=".lido-snackbar{visibility:visible;min-width:250px;background-color:#333;color:#fff;text-align:center;border-radius:2px;padding:16px;position:fixed;z-index:1;bottom:30px;left:50%;transform:translateX(-50%);font-size:17px}.lido-dot-container{text-align:center;position:fixed;z-index:1;width:fit-content;top:1%;left:50%;transform:translate(-50%)}.lido-dot{height:15px;width:15px;margin:0 4px;background-color:#bbb;border-radius:50%;display:inline-block;transition:background-color 0.3s;cursor:pointer}.lido-dot.completed{background-color:grey}.lido-dot.current{background-color:green}.lido-dot:not(.completed):not(.current){background-color:#bbb}",Ao=_o,Lo=class{constructor(i){He(this,i),this.NextContainerKey=d=>{d!=null&&d==this.currentContainerIndex||(localStorage.removeItem(We),localStorage.removeItem(ke),localStorage.removeItem(Gt),localStorage.removeItem(rt),d!=null&&d<this.containers.length?(this.currentContainerIndex=d,tr(this.currentContainerIndex)):this.currentContainerIndex<this.containers.length-1?(this.currentContainerIndex++,tr(this.currentContainerIndex)):this.currentContainerIndex>=this.containers.length-1&&(this.showCompletionMessage=!0,qr(),this.currentContainerIndex=0,setTimeout(()=>{this.showCompletionMessage=!1},3e3)),this.containers=[...this.containers])},this.xmlData=void 0,this.initialIndex=0,this.canplay=!0,this.baseUrl="",this.height="",this.currentContainerIndex=this.initialIndex,this.showCompletionMessage=!1,this.containers=[]}componentWillLoad(){window.addEventListener(Jn,()=>{this.NextContainerKey()}),window.addEventListener("changeContainer",i=>{this.NextContainerKey(i.detail.index)}),this.parseXMLData(this.xmlData),window.addEventListener("beforeunload",()=>{localStorage.removeItem(We),localStorage.removeItem(ke),localStorage.removeItem(Gt),localStorage.removeItem(rt)})}disconnectedCallback(){window.removeEventListener(Jn,()=>{this.NextContainerKey()}),window.removeEventListener("changeContainer",i=>{this.NextContainerKey(i.detail.index)})}parseXMLData(i){if(i){const p=new DOMParser().parseFromString(i,"text/xml").documentElement;this.parseContainers(p)}}onXmlDataChange(i){this.parseXMLData(i)}parseElement(i){const d=i.nodeName.toLowerCase(),h={};Array.from(i.attributes).forEach(A=>{h[A.name]=A.value});const p=Array.from(i.childNodes).map(A=>A.nodeType===1?this.parseElement(A):A.nodeType===3&&A.textContent.trim()!==""?A.textContent:null).filter(Boolean),y={"lido-container":K("lido-container",Object.assign({},h,{canplay:this.canplay,baseUrl:this.baseUrl,height:this.height}),p),"lido-col":K("lido-col",Object.assign({},h),p),"lido-trace":K("lido-trace",Object.assign({},h),p),"lido-image":K("lido-image",Object.assign({},h),p),"lido-row":K("lido-row",Object.assign({},h),p),"lido-text":K("lido-text",Object.assign({},h),p),"lido-pos":K("lido-pos",Object.assign({},h),p),"lido-shape":K("lido-shape",Object.assign({},h),p),"lido-wrap":K("lido-wrap",Object.assign({},h),p),"lido-random":K("lido-random",Object.assign({},h),p),"lido-avatar":K("lido-avatar",Object.assign({},h),p)};return y[d]?y[d]:(console.warn(`Unknown tag: ${d}`),null)}parseContainers(i){const d=[];i.querySelectorAll("lido-container").forEach(p=>{const y=this.parseElement(p);y&&d.push(y)}),this.containers=d}renderDots(){const i={pointerEvents:this.canplay?"none":""};return K("div",{id:"lido-dot-indicator",class:"lido-dot-container",style:i},this.containers.map((d,h)=>K("span",{class:`lido-dot ${h<this.currentContainerIndex?"completed":h===this.currentContainerIndex?"current":""}`,onClick:()=>this.jumpToContainer(h)})))}jumpToContainer(i){this.NextContainerKey(i)}render(){return console.log("ðŸš€ ~ LidoHome ~ render ~ this.containers:",this),this.xmlData?K(Ue,{index:this.currentContainerIndex,totalIndex:this.containers.length},K("div",{key:this.currentContainerIndex},this.containers[this.currentContainerIndex]),this.renderDots(),this.showCompletionMessage&&K("div",{class:"lido-snackbar"},"All containers have been displayed!")):K("div",null,"Please provide XML data.")}static get watchers(){return{xmlData:["onXmlDataChange"]}}};Lo.style=Co+(So+Ao);const Eo=".lido-image{user-select:none;-webkit-user-drag:none;object-fit:contain;max-width:100%;max-height:100%;aspect-ratio:1 / 1;}.slice{background-repeat:no-repeat;background-position:center;background-size:100% 100%}",Io=Eo,Po=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.src=void 0,this.isSlice=void 0,this.sliceWidth="30px",this.style=void 0}componentDidLoad(){mt(this.el,this.type)}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:JSON.parse(Z(`${this.visible}`,i))?"flex":"none",alignItems:"center",justifyContent:"center",borderImageSource:this.isSlice==="true"?`url(${at(this.src)})`:"none",borderImageSlice:this.isSlice==="true"?`${parseInt(this.sliceWidth)} fill`:"unset",borderImageRepeat:this.isSlice==="true"?"round":"unset",borderImageWidth:this.isSlice==="true"?`${this.sliceWidth}`:"unset",backgroundImage:this.isSlice==="true"?`url(${at(this.src)})`:"none"}}render(){return this.isSlice==="true"?K(Ue,{class:"slice",id:this.id,type:this.type,tabIndex:this.tabIndex,onEntry:this.onEntry,style:this.style}):K(Ue,{type:this.type,tabindex:this.tabIndex,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,value:this.value,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("img",{class:"lido-image",src:at(this.src),alt:"",style:this.style}))}get el(){return lt(this)}};Po.style=Io;const To=".lido-pos{top:var(--y, 0);left:var(--x, 0);height:var(--height, 100%);width:var(--width, 100%);background-color:var(--bgColor, #eeeeee);display:flex;justify-content:space-around;flex-direction:column;position:fixed}.lido-pos>*{position:absolute}",Ro=To,Mo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.style=void 0}componentDidLoad(){mt(this.el,this.type)}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:JSON.parse(Z(`${this.visible}`,i))?"block":"none"}}render(){return K(Ue,{key:"971edca73664a1bc06917ea4e07d559ffb2ead66",id:this.id,class:"lido-pos",type:this.type,tabindex:this.tabIndex,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,value:this.value,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"7c7de2dc271a6fd10c7b828c73afdbc397e35a75"}))}get el(){return lt(this)}};Mo.style=Ro;const Oo=".lido-random{display:flex;justify-content:space-between;align-items:center;position:absolute;}.lido-random>*{position:absolute}",ko=Oo,Fo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0}componentDidLoad(){this.el.querySelectorAll(".lido-random > *").forEach(d=>{const h=Math.random()*100,p=Math.random()*100;d.style.top=`${h}%`,d.style.left=`${p}%`})}render(){const i={height:this.height,width:this.width,top:this.y,left:this.x,display:this.visible?"block":"none",zIndex:this.z,backgroundColor:this.bgColor};return K(Ue,{key:"0611246d6b0091eebcad0ec0f2999d2b8e98c854",class:"lido-random",type:this.type,tabindex:this.tabIndex,value:this.value,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"b03397724ad9e902d82eecde3d2981b01e49b3b0"}))}get el(){return lt(this)}};Fo.style=ko;const Qo=class{constructor(i){He(this,i),this.xmlPath=void 0,this.initialIndex=0,this.canplay=!0,this.baseUrl="",this.xmlData=void 0}async componentWillLoad(){var i;const d=(i=this.xmlPath)!==null&&i!==void 0?i:this.baseUrl+"/index.xml";console.log("ðŸš€ ~ LidoRoot ~ componentWillLoad ~ this.baseUrl:",this.baseUrl),console.log("ðŸš€ ~ LidoRoot ~ componentWillLoad ~ this.xmlPath:",this.xmlPath),console.log("ðŸš€ ~ LidoRoot ~ componentWillLoad ~ xmlPath:",d);try{const h=d.startsWith("http")?d:rr(d),p=await fetch(h);if(!p.ok)throw new Error(`Failed to fetch XML data: ${p.statusText}`);const y=await p.text();this.xmlData=y}catch(h){console.error("Error fetching XML data:",h),this.xmlData=null}}render(){return this.xmlData===void 0?K("div",null,"Loading..."):this.xmlData===null?K("div",null,"Error loading XML data. Please check the path or URL."):K("lido-home",{initialIndex:this.initialIndex,canplay:this.canplay,xmlData:this.xmlData,baseUrl:this.baseUrl})}static get assetsDirs(){return["assets"]}},Do=".lido-row{display:flex;justify-content:space-around;align-items:center;}.lido-row>*{}",jo=Do,No=class{constructor(i){He(this,i),this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.childElementsLength=void 0,this.minLength=void 0,this.maxLength=void 0,this.direction=void 0,this.style={},this.display=void 0}componentDidLoad(){mt(this.el,this.type),Qn(this.el,this.minLength,this.maxLength,this.childElementsLength,"flex")}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:this.visible?this.display?Z(this.display,i):"flex":"none",flexDirection:this.direction?Z(this.direction,i):"row",gridTemplateColumns:this.display&&Z(this.display,i)==="grid"?"repeat(auto-fill, minmax(186px, auto))":void 0,gap:this.display&&Z(this.display,i)==="grid"?"20px":void 0}}render(){return K(Ue,{key:"ac41b0c6ed571e205f8d73297c3274343c8b91bb",class:"lido-row",type:this.type,tabindex:this.tabIndex,value:this.value,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"9c29e7ec9014fea4e647af2ce06bf1b9a17d3d0b"}))}get el(){return lt(this)}};No.style=jo;const Wo=".lido-shape{position:absolute;top:var(--y);left:var(--x);display:var(--display);z-index:var(--z)}.lido-rectangle{border-radius:0}.lido-circle{width:var(--width);height:var(--width);border-radius:50%;background-color:var(--bgColor)}.lido-ellipse{width:var(--width);height:var(--height);border-radius:50%;background-color:var(--bgColor)}.lido-triangle{width:var(--triangleWidth);height:var(--triangleHeight);background-color:var(--bgColor);clip-path:polygon(50% 0%, 100% 100%, 0% 100%)}.lido-rightTriangle{width:var(--triangleWidth);height:var(--triangleHeight);background-color:var(--bgColor);clip-path:polygon(100% 0%, 100% 100%, 0% 100%)}.lido-leftTriangle{width:var(--triangleWidth);height:var(--triangleHeight);background-color:var(--triangleBgColor);clip-path:polygon(0% 0%, 100% 100%, 0% 100%)}.lido-parallelogram{width:var(--paralleWidth);height:var(--paralleHeight);transform:skew(20deg)}.lido-star{width:var(--starWidth);height:var(--starHeight);background-color:var(--starBgColor);clip-path:polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)}.lido-pentagon{width:var(--pentagonWidth);height:var(--pentagonHeight);background-color:var(--pentagonBgColor);clip-path:polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%)}.lido-heptagon{width:var(--heptagonWidth);height:var(--heptagonHeight);background-color:var(--heptagonBgColor);clip-path:polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)}.lido-octagon{width:var(--octagonWidth);height:var(--octagonHeight);background-color:var(--octagonBgColor);clip-path:polygon(25% 0%, 75% 0%, 100% 25%, 100% 75%, 75% 100%, 25% 100%, 0% 75%, 0% 25%)}.lido-rhombus{width:var(--rhombusWidth);height:var(--rhombusHeight);background-color:var(--rhombusBgColor);clip-path:polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)}.lido-heart{height:var(--heartHeight);width:var(--heartWidth);border-image:radial-gradient(var(--heartBgColor) 69%, #0000 70%) 84.5%/50%;clip-path:polygon(-41% 0, 50% 91%, 141% 0)}",Bo=Wo,$o=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.shapeType=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0}componentDidLoad(){mt(this.el,this.type)}render(){const i={height:this.shapeType!=="polygon"?this.height:void 0,width:this.shapeType!=="polygon"?this.width:void 0,top:this.y,left:this.x,display:this.visible?"block":"none",zIndex:this.z,backgroundColor:this.shapeType!=="polygon"?this.bgColor:"transparent"};return K(Ue,{key:"b82bed547952d36b52d9f94f609aed1f7e7ab4cf",class:`lido-shape ${this.shapeType}`,value:this.value,type:this.type,tabindex:this.tabIndex,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry})}get el(){return lt(this)}};$o.style=Bo;const Uo=".lido-text{background-color:#fff;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);transition:background-color 0.3s ease;user-select:none;align-items:center;justify-content:center;text-align:center;border-radius:8px;color:#333;cursor:pointer}.lido-text:hover{background-color:#f0f0f0}",Ho=Uo,zo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.string=void 0,this.font=void 0,this.fontSize=void 0,this.fontColor=void 0,this.highlightWhileSpeaking=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.borderImage=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.style={}}componentDidLoad(){mt(this.el,this.type)}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=this.borderImage?at(this.borderImage):"",d=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,d),width:Z(this.width,d),backgroundColor:Z(this.bgColor,d),top:Z(this.y,d),left:Z(this.x,d),zIndex:this.z,fontSize:Z(this.fontSize,d),fontFamily:this.font,color:Z(this.fontColor,d),display:JSON.parse(Z(`${this.visible}`,d))?"flex":"none",borderImage:`url(${i})`,borderImageSlice:i?"0 fill":""}}render(){return K(Ue,{key:"93f1191ac947e2f3de0e4bf33c3f0829e2c3b792",class:"lido-text",value:this.value,type:this.type,tabindex:this.tabIndex,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry,id:this.id,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden},this.string)}get el(){return lt(this)}};zo.style=Ho;const Xo=":host{display:block;position:relative}#lido-svgContainer{position:absolute;top:0;left:0;right:0;bottom:50px;display:flex;justify-content:center;align-items:center;overflow:hidden}svg{width:100%;height:100%;max-height:calc(100vh - 50px);touch-action:none}#lido-draggableCircle{cursor:pointer;fill:red;transition:fill 0.2s, r 0.2s}.lido-blindTracing{stroke:none !important}.lido-blindFreeTrace{stroke:none !important}.lido-hovered{cursor:grab;fill:darkred}#lido-controls{position:fixed;bottom:0;left:0;right:0;display:flex;justify-content:space-between;padding:10px;background-color:#f0f0f0;border-top:1px solid #ccc}button{padding:10px;font-size:16px}@media (max-width: 600px){button{padding:8px;font-size:14px}}.lido-trace-path-green{}",Yo=Xo,Vo=class{constructor(i){He(this,i),this.id=void 0,this.svgSource=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.tabIndex=void 0,this.mode=De.ShowFlow,this.fingerHintUrl="https://aeakbcdznktpsbrfsgys.supabase.co/storage/v1/object/public/template-assets/trace/finger.png",this.fileIndex=-1,this.isDragging=!1,this.activePointerId=null,this.idleTimer=null,this.fingerImg=null}async initializeSVG(){let i={fileIndex:-1,currentPathIndex:0,lastLength:0,totalPathLength:0,isDragging:!1,circle:null,paths:[],svg:null,proximityThreshold:100,freeTraceProximityThreshold:50,rafId:null,pointerMoveEvent:null,activePointerId:null,mode:this.mode,flowMarkers:[],freeTraceLines:[],currentFreePath:[],lastPointerPos:null};await this.loadAnotherSVG(i,!0)}componentWillLoad(){this.initializeSVG()}resetIdleTimer(i){this.idleTimer!==null&&(clearTimeout(this.idleTimer),this.idleTimer=null),this.idleTimer=window.setTimeout(()=>{this.showFingerHint(i)},3e3)}showFingerHint(i){var d;if(this.fingerImg)return;const h=i.paths[i.currentPathIndex];if(!h)return;const p=40,y=document.createElementNS("http://www.w3.org/2000/svg","image");y.setAttributeNS("http://www.w3.org/1999/xlink","href",at(this.fingerHintUrl)),y.setAttribute("width",`${p}`),y.setAttribute("height",`${p}`),y.setAttribute("id","lido-finger-hint"),y.style.pointerEvents="none",y.style.opacity="0.8",y.setAttribute("x","0"),y.setAttribute("y","0");const A=document.createElementNS("http://www.w3.org/2000/svg","animateMotion");A.setAttribute("dur","2s"),A.setAttribute("repeatCount","indefinite");const S=document.createElementNS("http://www.w3.org/2000/svg","mpath");S.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${h.id}`),A.appendChild(S),y.appendChild(A),(d=i.svg)===null||d===void 0||d.appendChild(y),this.fingerImg=y}hideFingerHint(){this.fingerImg&&this.fingerImg.parentNode&&this.fingerImg.parentNode.removeChild(this.fingerImg),this.fingerImg=null}async fetchSVG(i){const d=await fetch(i);if(!d.ok)throw new Error(`Failed to fetch SVG (${i}): ${d.statusText}`);return await d.text()}calculateBoundingBox(i,d=22){let h=1/0,p=1/0,y=-1/0,A=-1/0;return i.forEach(S=>{const w=S.getTotalLength(),C=100;for(let E=0;E<=C;E++){const x=S.getPointAtLength(E/C*w);x.x<h&&(h=x.x),x.y<p&&(p=x.y),x.x>y&&(y=x.x),x.y>A&&(A=x.y)}}),h-=d,p-=d,y+=d,A+=d,{minX:h,minY:p,maxX:y,maxY:A}}insertSVG(i){const d=document.getElementById("lido-svgContainer");d.innerHTML=i;const h=d.querySelector("svg");h.removeAttribute("width"),h.removeAttribute("height");const p=h.querySelectorAll("path, line"),y=this.calculateBoundingBox(Array.from(p)),A=y.maxX-y.minX,S=y.maxY-y.minY;h.setAttribute("viewBox",`${y.minX} ${y.minY} ${A} ${S}`)}getSVGElement(){return document.getElementById("lido-svgContainer").querySelector("svg")}getPaths(i){return Array.from(i.querySelectorAll("path, line"))}createFlowMarkersForPath(i,d=10){var h;const y=i.getTotalLength()/(d+1),A=[];for(let S=1;S<=d;S++){const w=i.getPointAtLength(S*y),C=i.getPointAtLength((S+.5)*y),E=Math.atan2(C.y-w.y,C.x-w.x),x=document.createElementNS("http://www.w3.org/2000/svg","polygon");x.setAttribute("points","-5,-5 0,0 -5,5"),x.setAttribute("fill","blue"),x.setAttribute("transform",`translate(${w.x},${w.y}) rotate(${E*180/Math.PI})`),x.setAttribute("class","lido-flow-indicator"),A.push(x),(h=i.parentNode)===null||h===void 0||h.appendChild(x)}return A}updateFlowIndicators(i){i.svg.querySelectorAll(".lido-flow-indicator").forEach(h=>{i.mode===De.NoFlow?h.style.display="none":i.mode===De.ShowFlow&&(h.style.display="block")})}setupDrawingPath(i){i.paths.forEach((d,h)=>{const p=d.getTotalLength();d.setAttribute("id","lido-path-"+h);const y=d.cloneNode();y.style.opacity="100",y.style["stroke-opacity"]="100";const A=d.style["stroke-width"]||d.getAttribute("stroke-width");y.setAttribute("stroke-width",A),y.setAttribute("stroke-dasharray",p.toString()),y.setAttribute("stroke-dashoffset",p.toString()),d.parentNode.appendChild(y,d),d.setAttribute("class","lido-trace-path"),y.setAttribute("class","lido-trace-path-green"),d.greenPath=y,d.classList.add(i.mode),i.mode===De.BlindTracing||i.mode===De.BlindFreeTrace?d.setAttribute("stroke","none"):(d.setAttribute("stroke","#000"),d.setAttribute("stroke-width",A),d.setAttribute("fill","none"),d.setAttribute("stroke-dasharray",p.toString()),d.setAttribute("stroke-dashoffset","0")),h===i.currentPathIndex&&i.mode===De.ShowFlow&&(i.flowMarkers=this.createFlowMarkersForPath(d))}),i.totalPathLength=i.paths[i.currentPathIndex].getTotalLength()}setupDraggableCircle(i){var d;const h=i.paths[0].getPointAtLength(0),p=document.createElementNS("http://www.w3.org/2000/svg","circle"),y=i.paths[i.currentPathIndex].style["stroke-width"]||i.paths[i.currentPathIndex].getAttribute("stroke-width");p.setAttribute("id","lido-draggableCircle"),p.setAttribute("cx",h.x.toString()),p.setAttribute("cy",h.y.toString()),p.setAttribute("r",`calc(${y||10} / 2)`),p.setAttribute("fill","red"),(d=i.svg)===null||d===void 0||d.appendChild(p),i.circle=p,this.resetIdleTimer(i)}addEventListeners(i){var d,h,p,y;if(!i.circle||!i.paths||i.paths.length===0)return;i.circle.addEventListener("pointerdown",S=>{S.preventDefault();const w=this.getPointerPosition(S,i.svg),C={x:parseFloat(i.circle.getAttribute("cx")),y:parseFloat(i.circle.getAttribute("cy"))};this.getDistanceSquared(w,C)<=i.proximityThreshold*i.proximityThreshold&&(i.isDragging=!0,i.activePointerId=S.pointerId,i.circle.setPointerCapture(S.pointerId)),this.hideFingerHint(),this.resetIdleTimer(i)}),(d=i.svg)===null||d===void 0||d.addEventListener("pointermove",S=>{!i.isDragging||S.pointerId!==i.activePointerId||(i.pointerMoveEvent=S,i.rafId||(i.rafId=requestAnimationFrame(()=>{this.handlePointerMove(i),i.rafId=null})))});const A=S=>{S.pointerId===i.activePointerId&&(i.isDragging=!1,i.activePointerId=null,this.hideFingerHint(),this.resetIdleTimer(i))};(h=i.svg)===null||h===void 0||h.addEventListener("pointerup",A),(p=i.svg)===null||p===void 0||p.addEventListener("pointercancel",A),(y=i.svg)===null||y===void 0||y.addEventListener("contextmenu",S=>{S.preventDefault()})}handlePointerMove(i){var d,h,p,y;if(!i.isDragging||!i.circle||!i.paths||i.paths.length===0)return;this.hideFingerHint();const A=i.pointerMoveEvent,S=this.getPointerPosition(A,i.svg),w={x:parseFloat(i.circle.getAttribute("cx")),y:parseFloat(i.circle.getAttribute("cy"))},C=i.paths[i.currentPathIndex];if(!C){console.error("No valid path found at the current index");return}let E;if(i.mode===De.FreeTrace||i.mode===De.BlindFreeTrace?E=i.freeTraceProximityThreshold*i.freeTraceProximityThreshold:E=i.proximityThreshold*i.proximityThreshold,this.getDistanceSquared(S,w)>E)return;const k=this.getClosestPointOnPath(C,S);if(!(this.getDistanceSquared(S,k)>E)){if(i.mode===De.FreeTrace||i.mode===De.BlindFreeTrace){if(i.currentFreePath||(i.currentFreePath=[]),!i.currentFreePath[i.currentPathIndex]){const H=document.createElementNS("http://www.w3.org/2000/svg","path"),ve=i.paths[i.currentPathIndex].style["stroke-width"]||i.paths[i.currentPathIndex].getAttribute("stroke-width");H.setAttribute("stroke-width",ve),H.setAttribute("fill","none"),H.setAttribute("stroke-linecap","round"),H.setAttribute("stroke","lightgreen"),H.setAttribute("d",`M${S.x},${S.y}`),(d=i.svg)===null||d===void 0||d.appendChild(H),i.currentFreePath[i.currentPathIndex]=H,i.lastPointerPos=S}const u=i.lastPointerPos||S,U=i.currentFreePath[i.currentPathIndex].getAttribute("d"),re=(u.x+S.x)/2,ue=(u.y+S.y)/2,he=`${U} Q ${u.x},${u.y} ${re},${ue}`;i.currentFreePath[i.currentPathIndex].setAttribute("d",he),i.circle.setAttribute("cx",S.x.toString()),i.circle.setAttribute("cy",S.y.toString()),(h=i.svg)===null||h===void 0||h.appendChild(i.circle),i.lastPointerPos=S,C.getTotalLength()-k.length<5&&(this.moveToNextPath(i),i.currentFreePath[i.currentPathIndex]=null);return}i.isDragging&&k.length>=i.lastLength&&(i.lastLength=k.length,i.circle.setAttribute("cx",k.x.toString()),i.circle.setAttribute("cy",k.y.toString()),(p=i.svg)===null||p===void 0||p.appendChild(i.circle),(y=C.greenPath)===null||y===void 0||y.setAttribute("stroke-dashoffset",(i.totalPathLength-i.lastLength).toString())),i.totalPathLength-1-i.lastLength<5&&i.currentPathIndex<i.paths.length-1?this.moveToNextPath(i):i.totalPathLength-1-i.lastLength<5&&i.currentPathIndex===i.paths.length-1&&En()}}getPointerPosition(i,d){var h;const p=d.createSVGPoint();p.x=i.clientX,p.y=i.clientY;const y=(h=d.getScreenCTM())===null||h===void 0?void 0:h.inverse();return y?p.matrixTransform(y):{x:i.clientX,y:i.clientY}}getDistanceSquared(i,d){const h=i.x-d.x,p=i.y-d.y;return h*h+p*p}getClosestPointOnPath(i,d){const h=i.getTotalLength();let p={x:0,y:0,length:0},y=1/0;const A=20;let S={length:0},w=1/0;for(let k=0;k<=h;k+=A){const D=i.getPointAtLength(k),u=this.getDistanceSquared(d,D);u<w&&(w=u,S={x:D.x,y:D.y,length:k})}const C=2,E=Math.max(S.length-A,0),x=Math.min(S.length+A,h);for(let k=E;k<=x;k+=C){const D=i.getPointAtLength(k),u=this.getDistanceSquared(d,D);u<y&&(y=u,p={x:D.x,y:D.y,length:k})}return p}async loadAnotherSVG(i,d){i.isDragging=!1;try{i.svg&&this.cleanupPreviousSVG(i);const h=await this.fetchSVG(at(this.svgSource));this.insertSVG(h),i.svg=this.getSVGElement(),(this.mode===De.BlindTracing||this.mode===De.BlindFreeTrace)&&i.svg.querySelectorAll("image").forEach(p=>{p.style.display="none"}),i.paths=this.getPaths(i.svg),this.setupDrawingPath(i),this.setupDraggableCircle(i),this.addEventListeners(i)}catch(h){console.error(`Error loading SVG (${this.svgSource}):`,h)}}cleanupPreviousSVG(i){var d,h;i.circle&&((d=i.svg)===null||d===void 0||d.removeChild(i.circle),i.circle=null),((h=i.svg)===null||h===void 0?void 0:h.querySelectorAll(".lido-flow-indicator")).forEach(y=>{y.remove()}),i.currentPathIndex=0,i.lastLength=0,i.totalPathLength=i.paths[0].getTotalLength(),this.hideFingerHint(),this.resetIdleTimer(i)}moveToNextPath(i){var d,h;if(i.isDragging=!1,i.currentPathIndex++,i.lastLength=0,this.hideFingerHint(),i.currentPathIndex>=i.paths.length){En();return}const p=i.paths[i.currentPathIndex];if(!p){console.error("No valid path found at the next index");return}i.totalPathLength=p.getTotalLength();const y=p.getPointAtLength(0);(d=i.circle)===null||d===void 0||d.setAttribute("cx",y.x.toString()),(h=i.circle)===null||h===void 0||h.setAttribute("cy",y.y.toString()),i.mode===De.ShowFlow&&(i.flowMarkers=this.createFlowMarkersForPath(p)),this.resetIdleTimer(i)}render(){const i={height:this.height,width:this.width,top:this.y,left:this.x,zIndex:this.z,position:"absolute"};return K(Ue,{key:"c5735c155dcfaedc05103e10e394b34bc34d3551",class:"lido-trace",id:this.id,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,tabindex:this.tabIndex},K("div",{key:"cf01cb544e2aa6622f8e9fd5eac50d0cc7ed4060",id:"lido-svgContainer"}))}static get assetsDirs(){return["svg","images"]}static get watchers(){return{svgSource:["initializeSVG"],mode:["initializeSVG"]}}};Vo.style=Yo;const Go=".lido-wrap{display:grid;grid-gap:10px;grid-template-columns:repeat(auto-fill, minmax(186px, auto))}.lido-wrap>*{padding:10px;background-color:var(--child-bg-color, #f0f0f0);box-sizing:border-box}",qo=Go,Jo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.childElementsLength=void 0,this.minLength=void 0,this.maxLength=void 0,this.style=void 0}componentDidLoad(){mt(this.el,this.type),Qn(this.el,this.minLength,this.maxLength,this.childElementsLength,"grid")}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:JSON.parse(Z(`${this.visible}`,i))?"grid":"none"}}render(){return K(Ue,{key:"c4e66e5d75e598fd237a1829b2153090ba34993b",class:"lido-wrap",value:this.value,type:this.type,tabindex:this.tabIndex,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"60a3c125bb0ab2ad8279968d8ef3579c9d2a8a89"}))}get el(){return lt(this)}};Jo.style=qo;export{fo as lido_avatar,mo as lido_col,bo as lido_container,Lo as lido_home,Po as lido_image,Mo as lido_pos,Fo as lido_random,Qo as lido_root,No as lido_row,$o as lido_shape,zo as lido_text,Vo as lido_trace,Jo as lido_wrap};
