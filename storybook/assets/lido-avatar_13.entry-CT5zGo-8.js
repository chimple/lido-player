import{g as rr,r as He,h as K,H as Ue,a as ct}from"./preview-ClvoG0DK.js";import"./iframe-DXre-DpW.js";const ke="lidoDragSelectedMap",We="lidoSelectedValues",Gn="lidoActivityScore",Wr="lidoActivityEnd",Br="lidoLessonEnd",Jn="lidoNextContainer",$r="lidoActivityChange",Ur="lidoGameCompleted",Hr="lidoElementDrop",zr="lidoElementClick",qt="dropLength",ot="dropHasDrag";var De;(function(i){i.NoFlow="noFlow",i.ShowFlow="showFlow",i.FreeTrace="freeTrace",i.BlindTracing="blindTracing",i.BlindFreeTrace="blindFreeTrace"})(De||(De={}));class Xr{constructor(){this.rightMoves=0,this.wrongMoves=0,this.finalScore=0}}var Qe;(function(i){i.Diagonal="diagonal"})(Qe||(Qe={}));function Tt(i,d){const h=new CustomEvent(i,{detail:d});window.dispatchEvent(h)}function Yr(i,d,h){Tt(Wr,{index:i,totalIndex:d,score:h})}function Vr(i){Tt(Br,{score:i})}function Gr(){Tt(Jn,{})}function qr(){Tt(Ur,{})}function tr(i){Tt($r,{index:i})}function Jr(i,d,h){Tt(Hr,{dragElement:i,dropElement:d,isCorrect:h,createdAt:new Date().toISOString()})}function nr(i,d){Tt(zr,{element:i,isCorrect:d,createdAt:new Date().toISOString()})}class Pt{constructor(){}static getInstance(){return Pt.instance||(Pt.instance=new Pt),Pt.instance}setRiveInstance(d){this.riveInstance=d}getRiveInstance(){return this.riveInstance}}class st{constructor(){this.audioElement=document.createElement("audio"),this.audioElement.id="audio",document.body.appendChild(this.audioElement)}static getI(){return st.instance||(st.instance=new st),st.instance}stop(){window!=null&&window.speechSynthesis&&window.speechSynthesis.cancel(),this.audioElement.pause(),this.audioElement.currentTime=0,this.audioElement.src="",document.querySelectorAll(".speaking-highlight").forEach(y=>qn(y));const h=document.querySelector("#play"),g=document.querySelector("#pause");h&&g&&(h.style.visibility="visible",g.style.visibility="hidden")}async play(d){let h=d.getAttribute("audio")||"";if(!h){const g=d.children;for(let y=0;y<g.length;y++){const S=g[y].getAttribute("audio");S&&(h=S)}}if(h){h=lt(h),this.audioElement.src=h,console.log("ðŸš€ Playing audio:",this.audioElement.src);try{await this.audioElement.play(),ir(d),await new Promise(g=>{this.audioElement.onended=()=>{qn(d),g()}})}catch(g){console.log("ðŸš€ Audio play error:",g)}}else if(d.textContent)try{ir(d),await lo(d.textContent),qn(d)}catch(g){console.log("ðŸš€ TTS Error:",g)}}}const at=new Xr,In=i=>{i.style.animation="unset";const d=window.getComputedStyle(i).transform;if(d==="none")return 1;{const h=d.match(/matrix\(([^)]+)\)/);if(h){const g=h[1].split(", ");return parseFloat(g[0])}}return 1};function Kr(i){let d=!1,h=!1,g=0,y=0,S=0,_=0;const x=i.parentElement;if(!x){console.error("Parent element not found.");return}const w=c=>{Kt(i),h=!0,c instanceof MouseEvent?(g=c.clientX,y=c.clientY):(g=c.touches[0].clientX,y=c.touches[0].clientY),i.style.opacity="0.8",i.style.cursor="grabbing";const U=window.getComputedStyle(i).transform;if(U!=="none"){const re=U.match(/matrix\(([^)]+)\)/);if(re){const de=re[1].split(", ");S=parseFloat(de[4]),_=parseFloat(de[5])}}else S=0,_=0;x.getBoundingClientRect(),i.getBoundingClientRect(),document.addEventListener("mousemove",E),document.addEventListener("mouseup",k),document.addEventListener("touchmove",E),document.addEventListener("touchend",k)},R=new MutationObserver(c=>{for(const U of c)U.type==="attributes"&&U.attributeName==="style"&&(x.getBoundingClientRect(),i.getBoundingClientRect())}),C={attributes:!0,attributeFilter:["style"]};R.observe(x,C);const E=c=>{if(!h)return;const U=In(x);let re=0,de=0;c instanceof MouseEvent?(re=(c.clientX-g)/U,de=(c.clientY-y)/U):(re=(c.touches[0].clientX-g)/U,de=(c.touches[0].clientY-y)/U);const pe=S+re,be=_+de,V=x.getBoundingClientRect(),H=i.getBoundingClientRect(),N=i.style.transform.match(/-?\d+(\.\d+)?/g).map(Number),we=H.left/U-N[0],ye=H.top-N[1],Se=H.right/U-N[0],he=H.bottom-N[1],Ge=V.right-Se,fe=V.left-we,Me=V.top-ye,Le=V.bottom-he,je=pe+we<=V.left?fe:Math.min(pe,Ge),Ne=be+ye<=V.top?Me:Math.min(be,Le);i.style.transform=`translate(${je}px, ${Ne}px)`;let ne=Sn(i,"slide");if(ne&&ne!=i){const ze=i.parentElement,_e=ne.parentElement;if(ze&&_e){const ie=document.createComment("element-placeholder"),Ce=document.createComment("overlapped-placeholder");ze.replaceChild(ie,i),_e.replaceChild(Ce,ne),ze.replaceChild(ne,ie),_e.replaceChild(i,Ce),i.style.transform="translate(0, 0)",g=c instanceof MouseEvent?c.clientX:c.touches[0].clientX,y=c instanceof MouseEvent?c.clientY:c.touches[0].clientY,S=0,_=0,d=!0}}},k=c=>{h=!1,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",k),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",k),i.style.opacity="",i.style.cursor="move",i.style.transform="translate(0, 0)",d&&(Zr(i),d=!1)};i.style.cursor="move",i.style.transform="translate(0, 0)",i.addEventListener("mousedown",w),i.addEventListener("touchstart",w),i.addEventListener("click",c=>{Zn(i,"drag")})}const Zr=i=>{const d=JSON.parse(localStorage.getItem(We))||[],h=document.querySelectorAll("[type='slide']");let g=0;h.forEach(w=>{d[g++]=w.value}),localStorage.setItem(We,JSON.stringify(d));const S=document.querySelector("#lido-container").objective.split(","),_=d.indexOf(i.value),x=or(i.value,[S[_].trim()]);Ln(x),Pn()};function Qr(i){let d=!1,h=!1,g=0,y=0,S=0,_=0,x=null;const w=document.querySelector("#lido-container");if(!w){console.error('Container with ID "container" not found.');return}ei(i,"drag");let R,C;const E=V=>{var H;if(st.getI().stop(),Kt(i),d=!0,h=!0,V instanceof MouseEvent?(g=V.clientX,y=V.clientY):(g=V.touches[0].clientX,y=V.touches[0].clientY),i.style.opacity="0.8",i.style.cursor="grabbing",((H=i.getAttribute("dropAttr"))===null||H===void 0?void 0:H.toLowerCase())===Qe.Diagonal){const N=window.getComputedStyle(i),we=i.getBoundingClientRect();x||(x=i.cloneNode(!0),x.style.left=`${we.left}px`,x.style.top=`${we.top}px`,x.style.width=`${we.width}px`,x.style.height=`${we.height}px`,x.style.transform=N.transform,x.style.zIndex="0",x.setAttribute("visible","true"),x.classList.add("cloned-element"),document.body.appendChild(x))}const me=window.getComputedStyle(i).transform;if(me!=="none"){const N=me.match(/matrix\(([^)]+)\)/);if(N){const we=N[1].split(", ");S=parseFloat(we[4]),_=parseFloat(we[5])}}else S=0,_=0;document.addEventListener("mousemove",de),document.addEventListener("mouseup",be),document.addEventListener("touchmove",de),document.addEventListener("touchend",be)},k=w.getBoundingClientRect(),c=i.getBoundingClientRect();R=k.top-c.top,C=k.left-c.left;const U=new MutationObserver(V=>{for(const H of V)if(H.type==="attributes"&&H.attributeName==="style"){const me=w.getBoundingClientRect(),N=i.getBoundingClientRect();R=me.top-N.top,C=me.left-N.left}}),re={attributes:!0,attributeFilter:["style"]};U.observe(w,re);const de=V=>{if(!d)return;h=!1,i.style.transition="none";const H=In(w);let me=0,N=0;V instanceof MouseEvent?(me=(V.clientX-g)/H,N=(V.clientY-y)/H):(me=(V.touches[0].clientX-g)/H,N=(V.touches[0].clientY-y)/H);const we=S+me,ye=_+N,Se=w.getBoundingClientRect(),he=i.getBoundingClientRect(),fe=i.style.transform.match(/-?\d+(\.\d+)?/g).map(Number),Me=he.left/H-fe[0],Le=he.top-fe[1],je=Se.width/H-Math.abs(C/H)-he.width/H,Ne=Se.left-Me,ne=Se.top-Le,ze=Se.height/H-Math.abs(R/H)-he.height/H,_e=we+Me<=Se.left?Ne:Math.min(we,je),ie=ye+Le<=Se.top?ne:Math.min(ye,ze);i.style.transform=`translate(${_e}px, ${ie}px)`;let Ce=Sn(i,"drop");document.querySelectorAll("[type='drop']").forEach(Y=>{var le;const u=JSON.parse(localStorage.getItem(ke))||{};Object.keys(u).map(Number).includes(Y.tabIndex)?((le=i.getAttribute("dropAttr"))===null||le===void 0?void 0:le.toLowerCase())!==Qe.Diagonal&&(Y.tagName.toLowerCase()==="lido-text"&&(Y.style.border="",Y.style.backgroundColor="transparent"),Y.tagName.toLowerCase()==="lido-image"&&(Y.style.opacity="0")):(Y.tagName.toLowerCase()==="lido-text"&&(Y.style.border="",Y.style.backgroundColor=""),Y.tagName.toLowerCase()==="lido-image"&&(Y.style.opacity="1"))}),Ce&&(Ce.tagName.toLowerCase()==="lido-text"?(Ce.style.border="2px dashed #ff0000",Ce.style.backgroundColor="rgba(255, 0, 0, 0.1)"):Ce.style.opacity="0.3")};let pe=null;const be=V=>{var H;if(d=!1,h){x&&(x.remove(),x=null),i.style.opacity="1";return}document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",be),document.removeEventListener("touchmove",de),document.removeEventListener("touchend",be),i.style.opacity="",i.style.cursor="move";const me=document.querySelectorAll("[type='drop']");me.forEach(we=>{me.forEach(ye=>{var Se;const he=JSON.parse(localStorage.getItem(ke))||{};Object.keys(he).map(Number).includes(ye.tabIndex)?((Se=i.getAttribute("dropAttr"))===null||Se===void 0?void 0:Se.toLowerCase())!==Qe.Diagonal&&(ye.tagName.toLowerCase()==="lido-text"&&(ye.style.border="",ye.style.backgroundColor="transparent"),ye.tagName.toLowerCase()==="lido-image"&&(ye.style.opacity="0")):(ye.tagName.toLowerCase()==="lido-text"&&(ye.style.border="",ye.style.backgroundColor=""),ye.tagName.toLowerCase()==="lido-image"&&(ye.style.opacity="1"))})});let N=Sn(i,"drop");An(i,N),((H=i.getAttribute("dropAttr"))===null||H===void 0?void 0:H.toLowerCase())===Qe.Diagonal&&(N?i&&(i.classList.add("diagonal-drop"),N.classList.add("diagonal-target"),pe=N):(pe&&(pe.classList.remove("diagonal-target"),pe=null),i==null||i.classList.remove("diagonal-drop"),i.style.transform="translate(0, 0)",x&&(x.remove(),x=null)))};i.style.cursor="move",i.style.transform="translate(0, 0)",i.addEventListener("mousedown",E),i.addEventListener("touchstart",E),i.addEventListener("click",V=>{h&&Zn(i,"drag")})}const Sn=(i,d)=>{const h=i.getBoundingClientRect(),g=document.querySelectorAll(`[type="${d}"]`);let y=null,S=0;return g.forEach(_=>{if(_===i)return;const x=_.getBoundingClientRect(),w=Math.max(0,Math.min(h.right,x.right)-Math.max(h.left,x.left)),R=Math.max(0,Math.min(h.bottom,x.bottom)-Math.max(h.top,x.top)),C=w*R;if(C!==0)if(d==="slide"){const E=h.width*h.height,k=x.width*x.height,c=Math.min(E,k)*.8;C>=c&&C>S&&(S=C,y=_)}else C>S&&(S=C,y=_)}),y};async function An(i,d){var h;const g=localStorage.getItem(We)||"",y=localStorage.getItem(ke);let S=JSON.parse(localStorage.getItem(ot)||" {}");if(d&&((h=d.getAttribute("dropAttr"))===null||h===void 0?void 0:h.toLowerCase())!==Qe.Diagonal&&(d.getAttribute("isAllowOnlyOneDrop")==="true"||!d.getAttribute("isAllowOnlyOneDrop"))){const w=Object.values(S).find(C=>document.getElementById(C.drop)===d);if(w?w.isFull=!0:console.warn("No matching drop item found for",d),localStorage.setItem(ot,JSON.stringify(S)),Sn(i,"drag")){if(i.style.transform="translate(0,0)",i.style.transition="transform 0.5s ease",y){let E=JSON.parse(y);for(const k in E)E[k].includes(i.value)&&delete E[k];localStorage.setItem(ke,JSON.stringify(E))}document.querySelectorAll("[type='drop']").forEach(E=>{var k;const c=JSON.parse(localStorage.getItem(ke))||{};Object.keys(c).map(Number).includes(E.tabIndex)?((k=E.getAttribute("dropAttr"))===null||k===void 0?void 0:k.toLowerCase())!==Qe.Diagonal&&(E.tagName.toLowerCase()==="lido-text"&&(E.style.border="",E.style.backgroundColor="transparent"),E.tagName.toLowerCase()==="lido-image"&&(E.style.opacity="0")):(E.tagName.toLowerCase()==="lido-text"&&(E.style.border="",E.style.backgroundColor=""),E.tagName.toLowerCase()==="lido-image"&&(E.style.opacity="1"))});return}}if(!d){i.style.transform="translate(0,0)",i.style.transition="transform 0.5s ease";let w=_n.get(i);if(w){let C=Object.values(S).find(E=>document.getElementById(E.drop)===w);C&&(C.isFull=!1,localStorage.setItem(ot,JSON.stringify(S))),_n.delete(i)}if(g){let C=JSON.parse(g);C=C.filter(E=>E!=i.value),localStorage.setItem(We,JSON.stringify(C))}if(y){let C=JSON.parse(y);for(const E in C)C[E].includes(i.value)&&delete C[E];localStorage.setItem(ke,JSON.stringify(C))}document.querySelectorAll("[type='drop']").forEach(C=>{var E;const k=JSON.parse(localStorage.getItem(ke))||{};Object.keys(k).map(Number).includes(C.tabIndex)?((E=C.getAttribute("dropAttr"))===null||E===void 0?void 0:E.toLowerCase())!==Qe.Diagonal&&(C.tagName.toLowerCase()==="lido-text"&&(C.style.border="",C.style.backgroundColor="transparent"),C.tagName.toLowerCase()==="lido-image"&&(C.style.opacity="0")):(C.tagName.toLowerCase()==="lido-text"&&(C.style.border="",C.style.backgroundColor=""),C.tagName.toLowerCase()==="lido-image"&&(C.style.opacity="1"))}),Pn();return}if(y){let w=_n.get(i);if(w){let C=Object.values(S).find(E=>document.getElementById(E.drop)===w);C&&(C.isFull=!1,localStorage.setItem(ot,JSON.stringify(S)))}let R=JSON.parse(y);for(const C in R)R[C].includes(i.value)&&delete R[C];localStorage.setItem(ke,JSON.stringify(R))}let _=JSON.parse(localStorage.getItem(qt))||0;if(_+=1,localStorage.setItem(qt,JSON.stringify(_)),_===Jt(d.value)){const w=Object.values(S).find(R=>document.getElementById(R.drop)===d);w?w.isFull=!0:console.warn("No matching drop item found for",d),localStorage.setItem(ot,JSON.stringify(S)),_=0,localStorage.setItem(qt,JSON.stringify(_))}_n.set(i,d);const x=d.value.includes(i.value);if(Jr(i,d,x),x){const w=d.getAttribute("onCorrect");w&&await $e(w,d,i)}else{const w=d.getAttribute("onInCorrect");await $e(w,d,i)}Ln(x),i.style.opacity="1",await to(i,d)}const $e=async(i,d,h)=>{var g;const y=eo(i);for(let S=0;S<y.length;S++){const _=y[S],x=document.querySelector(_.actor),w=_.actor==="this"?d:_.actor==="element"?h:x||document.getElementById(_.actor);if(w)switch(_.action){case"transform":{const R=window.getComputedStyle(w).transform;w.style.transform=R!=="none"?`${R} ${_.value}`:_.value;break}case"alignMatch":{const R=w,C=h,E=document.querySelector("#lido-container"),k=In(E);C.style.transform="translate(0,0)";const c=R.getBoundingClientRect(),U=C.getBoundingClientRect(),re=c.left+c.width/2,de=c.top+c.height/2,pe=U.left+U.width/2,be=U.top+U.height/2,V=(re-pe)/k,H=(de-be)/k;((g=h.getAttribute("dropAttr"))===null||g===void 0?void 0:g.toLowerCase())===Qe.Diagonal?C.style.transform=`translate(${V-70}px, ${H-70}px)`:C.style.transform=`translate(${V}px, ${H}px)`;break}case"removeClone":{document.querySelectorAll(_.value).forEach(C=>C.remove());break}case"addClass":{w.classList.add(_.value);break}case"speak":{await st.getI().play(w);break}case"stop":{await st.getI().stop();break}case"sleep":{!isNaN(Number(_.value))&&await new Promise(C=>setTimeout(C,Number(_.value)));break}case"avatarAnimate":{const C=Pt.getInstance().getRiveInstance();C&&_.value&&C.play(_.value);break}default:{w.style[_.action]=_.value;break}}}},eo=i=>{var d;const h=[];return i&&((d=i.split(";"))===null||d===void 0?void 0:d.map(y=>y.trim())).forEach(y=>{if(y){const[S,_]=y.split("=").map(w=>w.trim()),x=S.lastIndexOf(".");if(x!==-1){const w=S.substring(0,x).trim(),R=S.substring(x+1).trim();h.push({actor:w,action:R,value:_.replace(/['"]/g,"")})}}}),h},or=(i,d)=>{const h=i.split(",").map(S=>S.trim());let g=0,y=new Set;for(const S of h)if(S.startsWith("(")&&S.endsWith(")")){const _=S.slice(1,-1).split("|").map(w=>w.trim()),x=d[g].slice(1,-1).split("|").map(w=>w.trim());if(g>=x.length)return!1;for(let w=0;w<_.length;w++)if(!_.includes(x[w]))return!1;g++}else if(S.includes("|")){const _=S.split("|").map(x=>x.trim());for(const x of _)y.add(x)}else{if(g>=d.length||d[g]!==S)return!1;g++}for(;g<d.length;){if(!y.has(d[g]))return!1;y.delete(d[g]),g++}return g===d.length},Jt=i=>{const d=i.split(",").map(g=>g.trim());let h=0;for(const g of d)g.startsWith("(")&&g.endsWith(")")?g.includes("|")?h+=g.split("|").length:h+=1:h+=g.split("|").length;return h};async function to(i,d){var h;const g=document.querySelector("#lido-container");if(!g)return;if(g.getAttribute("isAllowOnlyCorrect")==="true"&&!d.value.includes(i.value)){i.style.transform="translate(0,0)";return}await $e("this.alignMatch='true'",d,i);let S=JSON.parse((h=localStorage.getItem(ke))!==null&&h!==void 0?h:"{}");const _=d.getAttribute("tabindex");S[_]||(S[_]=[]),S[_].push(i.value),localStorage.setItem(ke,JSON.stringify(S));const w=Object.keys(S).sort((C,E)=>parseInt(C)-parseInt(E)).reduce((C,E)=>{const k=S[E];return k.length>1?C.push(`(${k.join("|")})`):C.push(k[0]),C},[]);localStorage.setItem(We,JSON.stringify(w)),document.querySelectorAll("[type='drop']").forEach(C=>{var E;const k=JSON.parse(localStorage.getItem(ke))||{};Object.keys(k).map(Number).includes(C.tabIndex)?((E=C.getAttribute("dropAttr"))===null||E===void 0?void 0:E.toLowerCase())!==Qe.Diagonal&&(C.tagName.toLowerCase()==="lido-text"&&(C.style.border="",C.style.backgroundColor="transparent"),C.tagName.toLowerCase()==="lido-image"&&(C.style.opacity="0")):(C.tagName.toLowerCase()==="lido-text"&&(C.style.border="",C.style.backgroundColor=""),C.tagName.toLowerCase()==="lido-image"&&(C.style.opacity="1"))}),Pn()}const Ln=i=>{i?at.rightMoves+=1:at.wrongMoves+=1,console.log("Right Moves : ",at.rightMoves),console.log("Wrong Moves : ",at.wrongMoves)},no=()=>{const i=at.rightMoves,d=at.wrongMoves;let h=Math.floor(i/(i+d)*100);io(h),at.rightMoves=0,at.wrongMoves=0},io=i=>{var d,h,g;const y=document.querySelector("lido-home");if(!y)return;const S=Number((d=y.getAttribute("index"))!==null&&d!==void 0?d:0),_=Number((h=y.getAttribute("totalIndex"))!==null&&h!==void 0?h:0),x=JSON.parse((g=localStorage.getItem(Gn))!==null&&g!==void 0?g:"{}"),w=S.toString();if(x[w]=i,Yr(S,_,i),localStorage.setItem(Gn,JSON.stringify(x)),_-1==S){const R=Object.values(x),C=R.reduce((E,k)=>E+k,0)/R.length;at.finalScore=Math.floor(C),console.log("Total Score : ",at.finalScore),Vr(C),localStorage.removeItem(Gn)}},Pn=()=>{var i;const d=document.querySelector("#lido-container"),h=d.objective,g=(i=localStorage.getItem(We))!==null&&i!==void 0?i:"",y=document.querySelector("#lido-checkButton");if(!g||Jt(g)!==Jt(h)){$e("this.addClass='lido-disable-check-button'",y);return}d.getAttribute("showCheck")=="true"?y.classList.remove("lido-disable-check-button"):Kn()},Kn=async()=>{var i;const d=document.querySelector("#lido-container");if(!d)return;const h=d.objective,g=(i=JSON.parse(localStorage.getItem(We)))!==null&&i!==void 0?i:[];if(or(h,g)){const S=d.getAttribute("onCorrect");S&&await $e(S,d),En()}else{const S=d.getAttribute("onInCorrect");await $e(S,d),d.getAttribute("isContinueOnCorrect")==="true"||En()}await no()},En=()=>{st.getI().stop(),console.log("ðŸš€ ~ triggerNextContainer ~ event:",event),Gr()},mt=async(i,d)=>{const h=document.querySelector("#lido-container");if(!h)return;const g=i.getAttribute("onEntry");await $e(g,i);const y=h.getAttribute("canplay");if(!(y!=null&&y==="false")){switch(d){case"drag":{Qr(i);break}case"click":{oo(i);break}case"drop":{so(i);break}case"slide":{Kr(i);break}}ro(i)}};function ro(i){if(!i)return;const d=i.getAttribute("onTouch");d&&(i.onclick=async()=>{console.log("ðŸš€ ~ element.onclick= ~ onTouch:",d),d&&await $e(d,i)})}function oo(i){if(ei(i,"click"),i.style.cursor="pointer",!i){console.error("No element provided.");return}const d=async()=>{st.getI().stop();const h=document.querySelector("#lido-container"),g=h.objective.split(","),y=document.querySelector("#lido-checkButton"),S=h.getAttribute("showCheck")==="true";if(i.getAttribute("id")=="lido-checkButton"){y.classList.add("lido-disable-check-button"),await Kn();return}const _=i.classList.contains("lido-element-selected");let x=JSON.parse(localStorage.getItem(We))||[];if(g.length===1){localStorage.setItem(We,JSON.stringify([i.value]));const w=g.includes(i.value);if(nr(i,w),w){const R=i.getAttribute("onCorrect");i.style.pointerEvents="none",await $e(R,i)}else{const R=i.getAttribute("onInCorrect");await $e(R,i)}Ln(w),Pn();return}if(S&&y.classList.remove("lido-disable-check-button"),_){i.classList.remove("lido-element-selected"),$e(i.getAttribute("onEntry"),i),x=x.filter(E=>E!=i.value),localStorage.setItem(We,JSON.stringify(x));let w=JSON.parse(localStorage.getItem(ke))||{};const R=i.value,C=Object.keys(w).find(E=>w[E].includes(R));if(C){w[C]=w[C].filter(c=>c!==R),w[C].length===0&&delete w[C],localStorage.setItem(ke,JSON.stringify(w));const k=Object.keys(w).sort((c,U)=>parseInt(c)-parseInt(U)).reduce((c,U)=>c.concat(w[U]),[]);localStorage.setItem(We,JSON.stringify(k))}S&&x.length===0&&y.classList.add("lido-disable-check-button");return}else{i.classList.add("lido-element-selected");const w=i.value,R=Object.keys(g).find(U=>g[U]===w);let C=JSON.parse(localStorage.getItem(ke))||{};R?C[R]=[w]:C[g.length+x.length]=[w],localStorage.setItem(ke,JSON.stringify(C));const k=Object.keys(C).sort((U,re)=>parseInt(U)-parseInt(re)).reduce((U,re)=>U.concat(C[re]),[]);localStorage.setItem(We,JSON.stringify(k));const c=g.includes(i.value);if(nr(i,c),c){const U=i.getAttribute("onCorrect");await $e(U,i)}else{const U=i.getAttribute("onInCorrect");await $e(U,i)}Ln(c)}!S&&Jt(g)===Jt(x)&&Kn()};i.addEventListener("click",d),i.addEventListener("pointerdown",()=>{i.getAttribute("animation")==="clickable"&&(i.classList.add("removeShadow"),i.style.top="40px",i.style.position="relative")}),i.addEventListener("pointerup",()=>{i.getAttribute("animation")==="clickable"&&setTimeout(()=>{i.classList.remove("removeShadow"),i.style.top="0px",i.style.position="relative"},50)})}function so(i){let d=JSON.parse(localStorage.getItem(ot)||"{}");const h=i.getAttribute("tabIndex");(typeof d!="object"||d===null)&&(d={}),d[h]||(d[h]={drop:i.id,isFull:!1},localStorage.setItem(ot,JSON.stringify(d))),i.onclick=()=>{Zn(i,"drop")},ei(i,"drop")}async function Zn(i,d){if(document.querySelectorAll(`[type='${d}']`).forEach(S=>{Kt(S)}),!document.querySelector("#dynamic-highlight-style")){const S=document.createElement("style");S.id="dynamic-highlight-style",S.innerHTML=`
      .highlight {
        // border: 4px solid #e74c3c; /* Thicker red border for more visibility */
        // border-radius: 12px; /* Larger rounded corners */
        // background-color: rgba(231, 76, 60, 0.3); /* Stronger, more noticeable background */
        // box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2), 0 12px 40px rgba(0, 0, 0, 0.2); /* Stronger shadow */
        // outline: 4px solid rgba(231, 76, 60, 0.6); /* Glow effect */
      }
    `,document.head.appendChild(S)}i==null||i.classList.add("highlight"),i.ariaPressed="true";const g=d==="drop"?i:document.querySelector("[type='drop'].highlight"),y=d==="drag"?i:document.querySelector("[type='drag'].highlight");if(g||ao(i),g&&y){y.style.transition="transform 0.5s ease",y.style.transform="";const S=document.querySelector("#lido-container"),_=In(S);console.log("ðŸš€ ~ onClickDropOrDragElement ~ containerScale:",_);const x=g.getBoundingClientRect(),w=y.getBoundingClientRect(),R=(x.left-w.left)/_,C=(x.top-w.top)/_;y.style.transform=`translate(${R}px, ${C}px)`,document.querySelectorAll("*").forEach(k=>{Kt(k)}),await An(y,g)}}const _n=new Map;async function ao(i){const d=JSON.parse(localStorage.getItem(ot)||"{}"),h=i;if(!h){console.error("Element not found");return}const g=getComputedStyle(h).transform;if(Kt(i),g&&g!=="none"&&g!=="matrix(1, 0, 0, 1, 0, 0)"){h.style.transition="transform 0.5s ease",h.style.transform="translate(0px, 0px)",An(h,null);return}let y=Object.values(d).find(S=>!S.isFull);if(y){const S=document.querySelector(`#${y.drop}`);h.style.transition="transform 0.5s ease",An(h,S)}}function Kt(i){i.classList.remove("highlight"),i.ariaPressed="false"}function ir(i){if(!i)return;i.classList.add("speaking-highlight");const d="#speaking-highlight-style";if(!document.querySelector(d)){const h=document.createElement("style");h.id=d,h.innerHTML=`
      .speaking-highlight {
        --base-transform: ${i.style.transform};
        box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9) !important; /* Stronger orange glow effect */
        // border: 3px solid green !important;
        transition: box-shadow 0.5s ease-in-out, transform 0.5s ease-in-out;
        transform: scale(1.05); /* Subtle scale effect to pop the element */
        animation: pulseEffect 1.5s infinite; /* Pulsing animation */
      }

      @keyframes pulseEffect {
        0% {
          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);
          transform: var(--base-transform) scale(1.05);
        }
        50% {
          box-shadow: 0 0 30px 15px rgba(255, 165, 0, 1);
          transform: var(--base-transform) scale(1.1);
        }
        100% {
          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);
          transform: var(--base-transform) scale(1.05);
        }
      }
    `,document.head.appendChild(h)}}function qn(i){i&&i.classList.remove("speaking-highlight")}function lt(i){const h=document.querySelector("#lido-container").getAttribute("baseUrl");return i!=null&&i.startsWith("http")||i!=null&&i.startsWith("blob")?i:h?h+i:rr(i)}async function lo(i,d){return new Promise((h,g)=>{if(!("speechSynthesis"in window)){g(new Error("Speech synthesis is not supported in this browser."));return}const y=window.speechSynthesis;setTimeout(()=>{const S=new SpeechSynthesisUtterance(i);S.onend=()=>{h(!0)},y.speak(S)},50)})}function Qn(i,d,h,g,y){if(g===void 0)return;const S=Array.from(i.children);let _=g;d&&g<d&&(_=d),h&&g>h&&(_=h),S.forEach((x,w)=>{x.style.display=w<_?y:"none"})}const Z=(i,d)=>!i||!i.includes(",")?i:i.split(",").reduce((g,y)=>{const[S,_]=y.split(".");return g[S.trim()]=_.trim(),g},{})[d]||"",ei=(i,d)=>{const h=document.querySelectorAll("[type='drag']"),g=document.querySelectorAll("[type='drop']"),y=document.querySelectorAll("[type='click']");let S=0;if(d==="click"){y.forEach(_=>{const x=_;let w=null;if(x.getAttribute("flexibleWidth"))w=x;else{const R=x.children;for(let C=0;C<R.length;C++){const E=R[C];if(E.getAttribute("flexibleWidth")){w=E;break}}}if(w){const R=w.style.width,C=w.style.padding;w.style.width="auto",w.style.padding="0 20px";const E=w.offsetWidth;w.style.width=R,w.style.padding=C,E>S&&(S=E)}}),y.forEach(_=>{const x=_;if(x.getAttribute("flexibleWidth")){if(x.getAttribute("flexibleWidth")==="true")return;x.style.width=`${S}px`}else{const w=x.children;for(let R=0;R<w.length;R++){const C=w[R];if(C.getAttribute("flexibleWidth")){if(C.getAttribute("flexibleWidth")==="true")return;C.style.width=`${S}px`;break}}}});return}h.forEach(_=>{const x=_,w=x.style.width,R=x.style.padding;x.style.width="auto",x.style.padding="0 20px";const C=x.offsetWidth;x.style.width=w,x.style.padding=R,C>S&&(S=C)}),h.forEach(_=>{const x=_,w=x.getAttribute("flexibleWidth");w==="false"?x.style.width=`${S}px`:w==="true"&&d==="drag"&&(x.style.width="auto",x.style.padding="0 20px")}),g.forEach(_=>{const x=_,w=x.getAttribute("flexibleWidth");if(w==="false"){const R=parseFloat(getComputedStyle(x).borderWidth);if(typeof R=="number"){const C=S-R*2,E=parseFloat(x.style.height)-R*2;x.style.height=`${E}px`,x.style.width=`${C}px`;return}}else w==="true"&&d==="drag"&&(x.style.width="auto",x.style.padding="0 20px")})};var co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sr={exports:{}};(function(i,d){(function(g,y){i.exports=y()})(co,()=>(()=>{var h=[,(_,x,w)=>{w.r(x),w.d(x,{default:()=>C});var R=(()=>{var E=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(k={}){var c=k,U,re;c.ready=new Promise((e,t)=>{U=e,re=t});function de(){function e(f){const b=o;n=t=0,o=new Map,b.forEach(A=>{try{A(f)}catch(m){console.error(m)}}),this.ob(),s&&s.Tb()}let t=0,n=0,o=new Map,s=null,l=null;this.requestAnimationFrame=function(f){t||(t=requestAnimationFrame(e.bind(this)));const b=++n;return o.set(b,f),b},this.cancelAnimationFrame=function(f){o.delete(f),t&&o.size==0&&(cancelAnimationFrame(t),t=0)},this.Rb=function(f){l&&(document.body.remove(l),l=null),f||(l=document.createElement("div"),l.style.backgroundColor="black",l.style.position="fixed",l.style.right=0,l.style.top=0,l.style.color="white",l.style.padding="4px",l.innerHTML="RIVE FPS",f=function(b){l.innerHTML="RIVE FPS "+b.toFixed(1)},document.body.appendChild(l)),s=new function(){let b=0,A=0;this.Tb=function(){var m=performance.now();A?(++b,m-=A,1e3<m&&(f(1e3*b/m),b=A=0)):(A=m,b=0)}}},this.Ob=function(){l&&(document.body.remove(l),l=null),s=null},this.ob=function(){}}function pe(e){console.assert(!0);const t=new Map;let n=-1/0;this.push=function(o){return o=o+((1<<e)-1)>>e,t.has(o)&&clearTimeout(t.get(o)),t.set(o,setTimeout(function(){t.delete(o),t.length==0?n=-1/0:o==n&&(n=Math.max(...t.keys()),console.assert(n<o))},1e3)),n=Math.max(o,n),n<<e}}const be=c.onRuntimeInitialized;c.onRuntimeInitialized=function(){be&&be();let e=c.decodeAudio;c.decodeAudio=function(s,l){s=e(s),l(s)};let t=c.decodeFont;c.decodeFont=function(s,l){s=t(s),l(s)};const n=c.FileAssetLoader;c.ptrToAsset=s=>{let l=c.ptrToFileAsset(s);return l.isImage?c.ptrToImageAsset(s):l.isFont?c.ptrToFontAsset(s):l.isAudio?c.ptrToAudioAsset(s):l},c.CustomFileAssetLoader=n.extend("CustomFileAssetLoader",{__construct:function({loadContents:s}){this.__parent.__construct.call(this),this.Gb=s},loadContents:function(s,l){return s=c.ptrToAsset(s),this.Gb(s,l)}}),c.CDNFileAssetLoader=n.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(s){let l=c.ptrToAsset(s);return s=l.cdnUuid,s===""?!1:(function(f,b){var A=new XMLHttpRequest;A.responseType="arraybuffer",A.onreadystatechange=function(){A.readyState==4&&A.status==200&&b(A)},A.open("GET",f,!0),A.send(null)}(l.cdnBaseUrl+"/"+s,f=>{l.decode(new Uint8Array(f.response))}),!0)}}),c.FallbackFileAssetLoader=n.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(s){this.kb.push(s)},loadContents:function(s,l){for(let f of this.kb)if(f.loadContents(s,l))return!0;return!1}});let o=c.computeAlignment;c.computeAlignment=function(s,l,f,b,A=1){return o.call(this,s,l,f,b,A)}};const V="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),H=new function(){function e(){if(!t){let J=function(ee,j,xe){if(j=T.createShader(j),T.shaderSource(j,xe),T.compileShader(j),xe=T.getShaderInfoLog(j),0<(xe||"").length)throw xe;T.attachShader(ee,j)};var p=document.createElement("canvas"),M={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let T;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(T=p.getContext("webgl",M),n=1,!T)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(T=p.getContext("webgl2",M))n=2;else if(T=p.getContext("webgl",M))n=1;else return console.log("No WebGL support. Image mesh will not be drawn."),!1;if(T=new Proxy(T,{get(ee,j){if(ee.isContextLost()){if(A||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",j),A=!0),typeof ee[j]=="function")return function(){}}else return typeof ee[j]=="function"?function(...xe){return ee[j].apply(ee,xe)}:ee[j]},set(ee,j,xe){if(ee.isContextLost())A||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+j),A=!0);else return ee[j]=xe,!0}}),o=Math.min(T.getParameter(T.MAX_RENDERBUFFER_SIZE),T.getParameter(T.MAX_TEXTURE_SIZE)),p=T.createProgram(),J(p,T.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),J(p,T.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),T.bindAttribLocation(p,0,"vertex"),T.bindAttribLocation(p,1,"uv"),T.linkProgram(p),M=T.getProgramInfoLog(p),0<(M||"").trim().length)throw M;s=T.getUniformLocation(p,"mat"),l=T.getUniformLocation(p,"translate"),T.useProgram(p),T.bindBuffer(T.ARRAY_BUFFER,T.createBuffer()),T.enableVertexAttribArray(0),T.enableVertexAttribArray(1),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,T.createBuffer()),T.uniform1i(T.getUniformLocation(p,"image"),0),T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=T}return!0}let t=null,n=0,o=0,s=null,l=null,f=0,b=0,A=!1;e(),this.hc=function(){return e(),o},this.Mb=function(p){t.deleteTexture&&t.deleteTexture(p)},this.Lb=function(p){if(!e())return null;const M=t.createTexture();return M?(t.bindTexture(t.TEXTURE_2D,M),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,p),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),n==2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),M):null};const m=new pe(8),O=new pe(8),D=new pe(10),W=new pe(10);this.Qb=function(p,M,T,J,ee){if(e()){var j=m.push(p),xe=O.push(M);if(t.canvas){(t.canvas.width!=j||t.canvas.height!=xe)&&(t.canvas.width=j,t.canvas.height=xe),t.viewport(0,xe-M,p,M),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),T.sort((ae,it)=>it.wb-ae.wb),j=D.push(J),f!=j&&(t.bufferData(t.ARRAY_BUFFER,8*j,t.DYNAMIC_DRAW),f=j),j=0;for(var Oe of T)t.bufferSubData(t.ARRAY_BUFFER,j,Oe.Ta),j+=4*Oe.Ta.length;console.assert(j==4*J);for(var nt of T)t.bufferSubData(t.ARRAY_BUFFER,j,nt.Db),j+=4*nt.Db.length;console.assert(j==8*J),j=W.push(ee),b!=j&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*j,t.DYNAMIC_DRAW),b=j),Oe=0;for(var Lt of T)t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,Oe,Lt.indices),Oe+=2*Lt.indices.length;console.assert(Oe==2*ee),Lt=0,nt=!0,j=Oe=0;for(const ae of T){ae.image.Ka!=Lt&&(t.bindTexture(t.TEXTURE_2D,ae.image.Ja||null),Lt=ae.image.Ka),ae.mc?(t.scissor(ae.Ya,xe-ae.Za-ae.jb,ae.Ac,ae.jb),nt=!0):nt&&(t.scissor(0,xe-M,p,M),nt=!1),T=2/p;const it=-2/M;t.uniform4f(s,ae.ha[0]*T*ae.Ba,ae.ha[1]*it*ae.Ca,ae.ha[2]*T*ae.Ba,ae.ha[3]*it*ae.Ca),t.uniform2f(l,ae.ha[4]*T*ae.Ba+T*(ae.Ya-ae.ic*ae.Ba)-1,ae.ha[5]*it*ae.Ca+it*(ae.Za-ae.jc*ae.Ca)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,j),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,j+4*J),t.drawElements(t.TRIANGLES,ae.indices.length,t.UNSIGNED_SHORT,Oe),j+=4*ae.Ta.length,Oe+=2*ae.indices.length}console.assert(j==4*J),console.assert(Oe==2*ee)}}},this.canvas=function(){return e()&&t.canvas}},me=c.onRuntimeInitialized;c.onRuntimeInitialized=function(){function e(P){switch(P){case m.srcOver:return"source-over";case m.screen:return"screen";case m.overlay:return"overlay";case m.darken:return"darken";case m.lighten:return"lighten";case m.colorDodge:return"color-dodge";case m.colorBurn:return"color-burn";case m.hardLight:return"hard-light";case m.softLight:return"soft-light";case m.difference:return"difference";case m.exclusion:return"exclusion";case m.multiply:return"multiply";case m.hue:return"hue";case m.saturation:return"saturation";case m.color:return"color";case m.luminosity:return"luminosity"}}function t(P){return"rgba("+((16711680&P)>>>16)+","+((65280&P)>>>8)+","+((255&P)>>>0)+","+((4278190080&P)>>>24)/255+")"}function n(){0<xe.length&&(H.Qb(j.drawWidth(),j.drawHeight(),xe,Oe,nt),xe=[],nt=Oe=0,j.reset(512,512));for(const P of ee){for(const B of P.H)B();P.H=[]}ee.clear()}me&&me();var o=c.RenderPaintStyle;const s=c.RenderPath,l=c.RenderPaint,f=c.Renderer,b=c.StrokeCap,A=c.StrokeJoin,m=c.BlendMode,O=o.fill,D=o.stroke,W=c.FillRule.evenOdd;let p=1;var M=c.RenderImage.extend("CanvasRenderImage",{__construct:function({la:P,xa:B}={}){this.__parent.__construct.call(this),this.Ka=p,p=p+1&2147483647||1,this.la=P,this.xa=B},__destruct:function(){this.Ja&&(H.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(P){var B=this;B.xa&&B.xa(B);var oe=new Image;B.Wa=URL.createObjectURL(new Blob([P],{type:"image/png"})),oe.onload=function(){B.Fb=oe,B.Ja=H.Lb(oe),B.size(oe.width,oe.height),B.la&&B.la(B)},oe.src=B.Wa}}),T=s.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(P,B,oe,se,G,ce,ue){var ve=this.T,Ve=ve.addPath;P=P.T;const Ee=new DOMMatrix;Ee.a=B,Ee.b=oe,Ee.c=se,Ee.d=G,Ee.e=ce,Ee.f=ue,Ve.call(ve,P,Ee)},fillRule:function(P){this.Va=P},moveTo:function(P,B){this.T.moveTo(P,B)},lineTo:function(P,B){this.T.lineTo(P,B)},cubicTo:function(P,B,oe,se,G,ce){this.T.bezierCurveTo(P,B,oe,se,G,ce)},close:function(){this.T.closePath()}}),J=l.extend("CanvasRenderPaint",{color:function(P){this.Xa=t(P)},thickness:function(P){this.Ib=P},join:function(P){switch(P){case A.miter:this.Ia="miter";break;case A.round:this.Ia="round";break;case A.bevel:this.Ia="bevel"}},cap:function(P){switch(P){case b.butt:this.Ha="butt";break;case b.round:this.Ha="round";break;case b.square:this.Ha="square"}},style:function(P){this.Hb=P},blendMode:function(P){this.Eb=e(P)},clearGradient:function(){this.ja=null},linearGradient:function(P,B,oe,se){this.ja={yb:P,zb:B,bb:oe,cb:se,Ra:[]}},radialGradient:function(P,B,oe,se){this.ja={yb:P,zb:B,bb:oe,cb:se,Ra:[],ec:!0}},addStop:function(P,B){this.ja.Ra.push({color:P,stop:B})},completeGradient:function(){},draw:function(P,B,oe){let se=this.Hb;var G=this.Xa,ce=this.ja;if(P.globalCompositeOperation=this.Eb,ce!=null){G=ce.yb;var ue=ce.zb;const Ve=ce.bb;var ve=ce.cb;const Ee=ce.Ra;ce.ec?(ce=Ve-G,ve-=ue,G=P.createRadialGradient(G,ue,0,G,ue,Math.sqrt(ce*ce+ve*ve))):G=P.createLinearGradient(G,ue,Ve,ve);for(let rt=0,Re=Ee.length;rt<Re;rt++)ue=Ee[rt],G.addColorStop(ue.stop,t(ue.color));this.Xa=G,this.ja=null}switch(se){case D:P.strokeStyle=G,P.lineWidth=this.Ib,P.lineCap=this.Ha,P.lineJoin=this.Ia,P.stroke(B);break;case O:P.fillStyle=G,P.fill(B,oe)}}});const ee=new Set;let j=null,xe=[],Oe=0,nt=0;var Lt=c.CanvasRenderer=f.extend("Renderer",{__construct:function(P){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=P.getContext("2d"),this.Ua=P,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const P=this.S.length-6;if(6>P)throw"restore() called without matching save().";this.S.splice(P),this.H.push(this.C.restore.bind(this.C))},transform:function(P,B,oe,se,G,ce){const ue=this.S,ve=ue.length-6;ue.splice(ve,6,ue[ve]*P+ue[ve+2]*B,ue[ve+1]*P+ue[ve+3]*B,ue[ve]*oe+ue[ve+2]*se,ue[ve+1]*oe+ue[ve+3]*se,ue[ve]*G+ue[ve+2]*ce+ue[ve+4],ue[ve+1]*G+ue[ve+3]*ce+ue[ve+5]),this.H.push(this.C.transform.bind(this.C,P,B,oe,se,G,ce))},rotate:function(P){const B=Math.sin(P);P=Math.cos(P),this.transform(P,B,-B,P,0,0)},_drawPath:function(P,B){this.H.push(B.draw.bind(B,this.C,P.T,P.Va===W?"evenodd":"nonzero"))},_drawRiveImage:function(P,B,oe){var se=P.Fb;if(se){var G=this.C,ce=e(B);this.H.push(function(){G.globalCompositeOperation=ce,G.globalAlpha=oe,G.drawImage(se,0,0),G.globalAlpha=1})}},_getMatrix:function(P){const B=this.S,oe=B.length-6;for(let se=0;6>se;++se)P[se]=B[oe+se]},_drawImageMesh:function(P,B,oe,se,G,ce,ue,ve,Ve,Ee){var rt=this.C.canvas.width,Re=this.C.canvas.height;const Ji=Ve-ue,Ki=Ee-ve;ue=Math.max(ue,0),ve=Math.max(ve,0),Ve=Math.min(Ve,rt),Ee=Math.min(Ee,Re);const Vt=Ve-ue,Gt=Ee-ve;if(console.assert(Vt<=Math.min(Ji,rt)),console.assert(Gt<=Math.min(Ki,Re)),!(0>=Vt||0>=Gt)){Ve=Vt<Ji||Gt<Ki,rt=Ee=1;var Et=Math.ceil(Vt*Ee),It=Math.ceil(Gt*rt);Re=H.hc(),Et>Re&&(Ee*=Re/Et,Et=Re),It>Re&&(rt*=Re/It,It=Re),j||(j=new c.DynamicRectanizer(Re),j.reset(512,512)),Re=j.addRect(Et,It),0>Re&&(n(),ee.add(this),Re=j.addRect(Et,It),console.assert(0<=Re));var Zi=Re&65535,Qi=Re>>16;xe.push({ha:this.S.slice(this.S.length-6),image:P,Ya:Zi,Za:Qi,ic:ue,jc:ve,Ac:Et,jb:It,Ba:Ee,Ca:rt,Ta:new Float32Array(se),Db:new Float32Array(G),indices:new Uint16Array(ce),mc:Ve,wb:P.Ka<<1|(Ve?1:0)}),Oe+=se.length,nt+=ce.length;var Dt=this.C,Nr=e(B);this.H.push(function(){Dt.save(),Dt.resetTransform(),Dt.globalCompositeOperation=Nr,Dt.globalAlpha=oe;const er=H.canvas();er&&Dt.drawImage(er,Zi,Qi,Et,It,ue,ve,Vt,Gt),Dt.restore()})}},_clipPath:function(P){this.H.push(this.C.clip.bind(this.C,P.T,P.Va===W?"evenodd":"nonzero"))},clear:function(){ee.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(P,B){this.transform(1,0,0,1,P,B)}});c.makeRenderer=function(P){const B=new Lt(P),oe=B.C;return new Proxy(B,{get(se,G){if(typeof se[G]=="function")return function(...ce){return se[G].apply(se,ce)};if(typeof oe[G]=="function"){if(-1<V.indexOf(G))throw Error("RiveException: Method call to '"+G+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...ce){B.H.push(oe[G].bind(oe,...ce))}}return se[G]},set(se,G,ce){if(G in oe)return B.H.push(()=>{oe[G]=ce}),!0}})},c.decodeImage=function(P,B){new M({la:B}).decode(P)},c.renderFactory={makeRenderPaint:function(){return new J},makeRenderPath:function(){return new T},makeRenderImage:function(){let P=it;return new M({xa:()=>{P.total++},la:()=>{if(P.loaded++,P.loaded===P.total){const B=P.ready;B&&(B(),P.ready=null)}}})}};let ae=c.load,it=null;c.load=function(P,B,oe=!0){const se=new c.FallbackFileAssetLoader;return B!==void 0&&se.addLoader(B),oe&&(B=new c.CDNFileAssetLoader,se.addLoader(B)),new Promise(function(G){let ce=null;it={total:0,loaded:0,ready:function(){G(ce)}},ce=ae(P,se),it.total==0&&G(ce)})};let jr=c.RendererWrapper.prototype.align;c.RendererWrapper.prototype.align=function(P,B,oe,se,G=1){jr.call(this,P,B,oe,se,G)},o=new de,c.requestAnimationFrame=o.requestAnimationFrame.bind(o),c.cancelAnimationFrame=o.cancelAnimationFrame.bind(o),c.enableFPSCounter=o.Rb.bind(o),c.disableFPSCounter=o.Ob,o.ob=n,c.resolveAnimationFrame=n,c.cleanup=function(){j&&j.delete()}};var N=Object.assign({},c),we="./this.program",ye=typeof window=="object",Se=typeof importScripts=="function",he="",Ge,fe;(ye||Se)&&(Se?he=self.location.href:typeof document<"u"&&document.currentScript&&(he=document.currentScript.src),E&&(he=E),he.indexOf("blob:")!==0?he=he.substr(0,he.replace(/[?#].*/,"").lastIndexOf("/")+1):he="",Se&&(fe=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Ge=(e,t,n)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{o.status==200||o.status==0&&o.response?t(o.response):n()},o.onerror=n,o.send(null)});var Me=c.print||console.log.bind(console),Le=c.printErr||console.error.bind(console);Object.assign(c,N),N=null,c.thisProgram&&(we=c.thisProgram);var je;c.wasmBinary&&(je=c.wasmBinary),typeof WebAssembly!="object"&&ge("no native wasm support detected");var Ne,ne,ze=!1,_e,ie,Ce,qe,Y,le,u,r;function a(){var e=Ne.buffer;c.HEAP8=_e=new Int8Array(e),c.HEAP16=Ce=new Int16Array(e),c.HEAP32=Y=new Int32Array(e),c.HEAPU8=ie=new Uint8Array(e),c.HEAPU16=qe=new Uint16Array(e),c.HEAPU32=le=new Uint32Array(e),c.HEAPF32=u=new Float32Array(e),c.HEAPF64=r=new Float64Array(e)}var v,L=[],I=[],F=[];function X(){var e=c.preRun.shift();L.unshift(e)}var Q=0,z=null;function ge(e){throw c.onAbort&&c.onAbort(e),e="Aborted("+e+")",Le(e),ze=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),re(e),e}function Ie(e){return e.startsWith("data:application/octet-stream;base64,")}var Pe;if(Pe="canvas_advanced.wasm",!Ie(Pe)){var Te=Pe;Pe=c.locateFile?c.locateFile(Te,he):he+Te}function yt(e){if(e==Pe&&je)return new Uint8Array(je);if(fe)return fe(e);throw"both async and sync fetching of the wasm failed"}function Je(e){if(!je&&(ye||Se)){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>yt(e));if(Ge)return new Promise((t,n)=>{Ge(e,o=>t(new Uint8Array(o)),n)})}return Promise.resolve().then(()=>yt(e))}function bt(e,t,n){return Je(e).then(o=>WebAssembly.instantiate(o,t)).then(o=>o).then(n,o=>{Le("failed to asynchronously prepare wasm: "+o),ge(o)})}function Zt(e,t){var n=Pe;return je||typeof WebAssembly.instantiateStreaming!="function"||Ie(n)||n.startsWith("file://")||typeof fetch!="function"?bt(n,e,t):fetch(n,{credentials:"same-origin"}).then(o=>WebAssembly.instantiateStreaming(o,e).then(t,function(s){return Le("wasm streaming compile failed: "+s),Le("falling back to ArrayBuffer instantiation"),bt(n,e,t)}))}var ut,Rt,jt={446236:(e,t,n,o,s)=>{if(typeof window>"u"||(window.AudioContext||window.webkitAudioContext)===void 0)return 0;if(typeof window.h>"u"){window.h={Aa:0},window.h.I={},window.h.I.ya=e,window.h.I.capture=t,window.h.I.La=n,window.h.ga={},window.h.ga.stopped=o,window.h.ga.xb=s;let l=window.h;l.D=[],l.yc=function(f){for(var b=0;b<l.D.length;++b)if(l.D[b]==null)return l.D[b]=f,b;return l.D.push(f),l.D.length-1},l.Cb=function(f){for(l.D[f]=null;0<l.D.length&&l.D[l.D.length-1]==null;)l.D.pop()},l.Sc=function(f){for(var b=0;b<l.D.length;++b)if(l.D[b]==f)return l.Cb(b)},l.ra=function(f){return l.D[f]},l.Bb=["touchend","click"],l.unlock=function(){for(var f=0;f<l.D.length;++f){var b=l.D[f];b!=null&&b.J!=null&&b.state===l.ga.xb&&b.J.resume().then(()=>{zi(b.pb)},A=>{console.error("Failed to resume audiocontext",A)})}l.Bb.map(function(A){document.removeEventListener(A,l.unlock,!0)})},l.Bb.map(function(f){document.addEventListener(f,l.unlock,!0)})}return window.h.Aa+=1,1},448414:()=>{typeof window.h<"u"&&(--window.h.Aa,window.h.Aa===0&&delete window.h)},448578:()=>navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0,448682:()=>{try{var e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate;return e.close(),t}catch{return 0}},448853:(e,t,n,o,s,l)=>{if(typeof window.h>"u")return-1;var f={},b={};return e==window.h.I.ya&&n!=0&&(b.sampleRate=n),f.J=new(window.AudioContext||window.webkitAudioContext)(b),f.J.suspend(),f.state=window.h.ga.stopped,n=0,e!=window.h.I.ya&&(n=t),f.Z=f.J.createScriptProcessor(o,n,t),f.Z.onaudioprocess=function(A){if((f.sa==null||f.sa.length==0)&&(f.sa=new Float32Array(u.buffer,s,o*t)),e==window.h.I.capture||e==window.h.I.La){for(var m=0;m<t;m+=1)for(var O=A.inputBuffer.getChannelData(m),D=f.sa,W=0;W<o;W+=1)D[W*t+m]=O[W];Xi(l,o,s)}if(e==window.h.I.ya||e==window.h.I.La)for(Yi(l,o,s),m=0;m<A.outputBuffer.numberOfChannels;++m)for(O=A.outputBuffer.getChannelData(m),D=f.sa,W=0;W<o;W+=1)O[W]=D[W*t+m];else for(m=0;m<A.outputBuffer.numberOfChannels;++m)A.outputBuffer.getChannelData(m).fill(0)},e!=window.h.I.capture&&e!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(A){f.Da=f.J.createMediaStreamSource(A),f.Da.connect(f.Z),f.Z.connect(f.J.destination)}).catch(function(A){console.log("Failed to get user media: "+A)}),e==window.h.I.ya&&f.Z.connect(f.J.destination),f.pb=l,window.h.yc(f)},451730:e=>window.h.ra(e).J.sampleRate,451803:e=>{e=window.h.ra(e),e.Z!==void 0&&(e.Z.onaudioprocess=function(){},e.Z.disconnect(),e.Z=void 0),e.Da!==void 0&&(e.Da.disconnect(),e.Da=void 0),e.J.close(),e.J=void 0,e.pb=void 0},452203:e=>{window.h.Cb(e)},452253:e=>{e=window.h.ra(e),e.J.resume(),e.state=window.h.ga.xb},452392:e=>{e=window.h.ra(e),e.J.suspend(),e.state=window.h.ga.stopped}},dt=e=>{for(;0<e.length;)e.shift()(c)},Mt=(e,t)=>{for(var n=0,o=e.length-1;0<=o;o--){var s=e[o];s==="."?e.splice(o,1):s===".."?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},Xe=e=>{var t=e.charAt(0)==="/",n=e.substr(-1)==="/";return(e=Mt(e.split("/").filter(o=>!!o),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},ar=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)},ti=e=>{if(e==="/")return"/";e=Xe(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},lr=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);ge("initRandomDevice")},ni=e=>(ni=lr())(e);function Qt(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if(t=0<=n?arguments[n]:"/",typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t=t.charAt(0)==="/"}return e=Mt(e.split("/").filter(o=>!!o),!t).join("/"),(t?"/":"")+e||"."}var ii=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,wt=(e,t,n)=>{var o=t+n;for(n=t;e[n]&&!(n>=o);)++n;if(16<n-t&&e.buffer&&ii)return ii.decode(e.subarray(t,n));for(o="";t<n;){var s=e[t++];if(s&128){var l=e[t++]&63;if((s&224)==192)o+=String.fromCharCode((s&31)<<6|l);else{var f=e[t++]&63;s=(s&240)==224?(s&15)<<12|l<<6|f:(s&7)<<18|l<<12|f<<6|e[t++]&63,65536>s?o+=String.fromCharCode(s):(s-=65536,o+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else o+=String.fromCharCode(s)}return o},Tn=[],ri=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);127>=o?t++:2047>=o?t+=2:55296<=o&&57343>=o?(t+=4,++n):t+=3}return t},oi=(e,t,n,o)=>{if(!(0<o))return 0;var s=n;o=n+o-1;for(var l=0;l<e.length;++l){var f=e.charCodeAt(l);if(55296<=f&&57343>=f){var b=e.charCodeAt(++l);f=65536+((f&1023)<<10)|b&1023}if(127>=f){if(n>=o)break;t[n++]=f}else{if(2047>=f){if(n+1>=o)break;t[n++]=192|f>>6}else{if(65535>=f){if(n+2>=o)break;t[n++]=224|f>>12}else{if(n+3>=o)break;t[n++]=240|f>>18,t[n++]=128|f>>12&63}t[n++]=128|f>>6&63}t[n++]=128|f&63}}return t[n]=0,n-s};function si(e,t){var n=Array(ri(e)+1);return e=oi(e,n,0,n.length),t&&(n.length=e),n}var ai=[];function li(e,t){ai[e]={input:[],F:[],V:t},On(e,cr)}var cr={open:function(e){var t=ai[e.node.za];if(!t)throw new $(43);e.s=t,e.seekable=!1},close:function(e){e.s.V.qa(e.s)},qa:function(e){e.s.V.qa(e.s)},read:function(e,t,n,o){if(!e.s||!e.s.V.ib)throw new $(60);for(var s=0,l=0;l<o;l++){try{var f=e.s.V.ib(e.s)}catch{throw new $(29)}if(f===void 0&&s===0)throw new $(6);if(f==null)break;s++,t[n+l]=f}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,o){if(!e.s||!e.s.V.Oa)throw new $(60);try{for(var s=0;s<o;s++)e.s.V.Oa(e.s,t[n+s])}catch{throw new $(29)}return o&&(e.node.timestamp=Date.now()),s}},ur={ib:function(){e:{if(!Tn.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e){e=null;break e}Tn=si(e,!0)}e=Tn.shift()}return e},Oa:function(e,t){t===null||t===10?(Me(wt(e.F,0)),e.F=[]):t!=0&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(Me(wt(e.F,0)),e.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},dr={Oa:function(e,t){t===null||t===10?(Le(wt(e.F,0)),e.F=[]):t!=0&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(Le(wt(e.F,0)),e.F=[])}};function ci(e,t){var n=e.j?e.j.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),n!=0&&(t=Math.max(t,256)),n=e.j,e.j=new Uint8Array(t),0<e.v&&e.j.set(n.subarray(0,e.v),0))}var te={O:null,U(){return te.createNode(null,"/",16895,0)},createNode(e,t,n,o){if((n&61440)===24576||(n&61440)===4096)throw new $(63);return te.O||(te.O={dir:{node:{Y:te.l.Y,P:te.l.P,ka:te.l.ka,va:te.l.va,ub:te.l.ub,Ab:te.l.Ab,vb:te.l.vb,sb:te.l.sb,Ea:te.l.Ea},stream:{ba:te.m.ba}},file:{node:{Y:te.l.Y,P:te.l.P},stream:{ba:te.m.ba,read:te.m.read,write:te.m.write,pa:te.m.pa,lb:te.m.lb,nb:te.m.nb}},link:{node:{Y:te.l.Y,P:te.l.P,ma:te.l.ma},stream:{}},$a:{node:{Y:te.l.Y,P:te.l.P},stream:gr}}),n=pi(e,t,n,o),(n.mode&61440)===16384?(n.l=te.O.dir.node,n.m=te.O.dir.stream,n.j={}):(n.mode&61440)===32768?(n.l=te.O.file.node,n.m=te.O.file.stream,n.v=0,n.j=null):(n.mode&61440)===40960?(n.l=te.O.link.node,n.m=te.O.link.stream):(n.mode&61440)===8192&&(n.l=te.O.$a.node,n.m=te.O.$a.stream),n.timestamp=Date.now(),e&&(e.j[t]=n,e.timestamp=n.timestamp),n},Kc(e){return e.j?e.j.subarray?e.j.subarray(0,e.v):new Uint8Array(e.j):new Uint8Array(0)},l:{Y(e){var t={};return t.Jc=(e.mode&61440)===8192?e.id:1,t.Mc=e.id,t.mode=e.mode,t.Oc=1,t.uid=0,t.Lc=0,t.za=e.za,(e.mode&61440)===16384?t.size=4096:(e.mode&61440)===32768?t.size=e.v:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.Bc=new Date(e.timestamp),t.Nc=new Date(e.timestamp),t.Ic=new Date(e.timestamp),t.Jb=4096,t.Cc=Math.ceil(t.size/t.Jb),t},P(e,t){if(t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&(t=t.size,e.v!=t))if(t==0)e.j=null,e.v=0;else{var n=e.j;e.j=new Uint8Array(t),n&&e.j.set(n.subarray(0,Math.min(t,e.v))),e.v=t}},ka(){throw Mn[44]},va(e,t,n,o){return te.createNode(e,t,n,o)},ub(e,t,n){if((e.mode&61440)===16384){try{var o=tn(t,n)}catch{}if(o)for(var s in o.j)throw new $(55)}delete e.parent.j[e.name],e.parent.timestamp=Date.now(),e.name=n,t.j[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},Ab(e,t){delete e.j[t],e.timestamp=Date.now()},vb(e,t){var n=tn(e,t),o;for(o in n.j)throw new $(55);delete e.j[t],e.timestamp=Date.now()},sb(e){var t=[".",".."],n;for(n in e.j)e.j.hasOwnProperty(n)&&t.push(n);return t},Ea(e,t,n){return e=te.createNode(e,t,41471,0),e.link=n,e},ma(e){if((e.mode&61440)!==40960)throw new $(28);return e.link}},m:{read(e,t,n,o,s){var l=e.node.j;if(s>=e.node.v)return 0;if(e=Math.min(e.node.v-s,o),8<e&&l.subarray)t.set(l.subarray(s,s+e),n);else for(o=0;o<e;o++)t[n+o]=l[s+o];return e},write(e,t,n,o,s,l){if(t.buffer===_e.buffer&&(l=!1),!o)return 0;if(e=e.node,e.timestamp=Date.now(),t.subarray&&(!e.j||e.j.subarray)){if(l)return e.j=t.subarray(n,n+o),e.v=o;if(e.v===0&&s===0)return e.j=t.slice(n,n+o),e.v=o;if(s+o<=e.v)return e.j.set(t.subarray(n,n+o),s),o}if(ci(e,s+o),e.j.subarray&&t.subarray)e.j.set(t.subarray(n,n+o),s);else for(l=0;l<o;l++)e.j[s+l]=t[n+l];return e.v=Math.max(e.v,s+o),o},ba(e,t,n){if(n===1?t+=e.position:n===2&&(e.node.mode&61440)===32768&&(t+=e.node.v),0>t)throw new $(28);return t},pa(e,t,n){ci(e.node,t+n),e.node.v=Math.max(e.node.v,t+n)},lb(e,t,n,o,s){if((e.node.mode&61440)!==32768)throw new $(43);if(e=e.node.j,s&2||e.buffer!==_e.buffer){if((0<n||n+t<e.length)&&(e.subarray?e=e.subarray(n,n+t):e=Array.prototype.slice.call(e,n,n+t)),n=!0,ge(),t=void 0,!t)throw new $(48);_e.set(e,t)}else n=!1,t=e.byteOffset;return{o:t,M:n}},nb(e,t,n,o){return te.m.write(e,t,0,o,n,!1),0}}};function hr(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}var Rn=null,ui={},en=[],fr=1,Nt=null,di=!0,$=null,Mn={},_t=(e,t={})=>{if(e=Qt(e),!e)return{path:"",node:null};if(t=Object.assign({gb:!0,Qa:0},t),8<t.Qa)throw new $(32);e=e.split("/").filter(f=>!!f);for(var n=Rn,o="/",s=0;s<e.length;s++){var l=s===e.length-1;if(l&&t.parent)break;if(n=tn(n,e[s]),o=Xe(o+"/"+e[s]),n.wa&&(!l||l&&t.gb)&&(n=n.wa.root),!l||t.fb){for(l=0;(n.mode&61440)===40960;)if(n=vr(o),o=Qt(ar(o),n),n=_t(o,{Qa:t.Qa+1}).node,40<l++)throw new $(32)}}return{path:o,node:n}},hi=e=>{for(var t;;){if(e===e.parent)return e=e.U.mb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}},fi=(e,t)=>{for(var n=0,o=0;o<t.length;o++)n=(n<<5)-n+t.charCodeAt(o)|0;return(e+n>>>0)%Nt.length},tn=(e,t)=>{var n;if(n=(n=nn(e,"x"))?n:e.l.ka?0:2)throw new $(n,e);for(n=Nt[fi(e.id,t)];n;n=n.lc){var o=n.name;if(n.parent.id===e.id&&o===t)return n}return e.l.ka(e,t)},pi=(e,t,n,o)=>(e=new $i(e,t,n,o),t=fi(e.parent.id,e.name),e.lc=Nt[t],Nt[t]=e),gi=e=>{var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nn=(e,t)=>{if(di)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0},vi=(e,t)=>{try{return tn(e,t),20}catch{}return nn(e,"wx")},pr=()=>{for(var e=0;4096>=e;e++)if(!en[e])return e;throw new $(33)},Ct=e=>{if(e=en[e],!e)throw new $(8);return e},mi=(e,t=-1)=>(Bt||(Bt=function(){this.h={}},Bt.prototype={},Object.defineProperties(Bt.prototype,{object:{get(){return this.node},set(n){this.node=n}},flags:{get(){return this.h.flags},set(n){this.h.flags=n}},position:{get(){return this.h.position},set(n){this.h.position=n}}})),e=Object.assign(new Bt,e),t==-1&&(t=pr()),e.X=t,en[t]=e),gr={open:e=>{e.m=ui[e.node.za].m,e.m.open&&e.m.open(e)},ba:()=>{throw new $(70)}},On=(e,t)=>{ui[e]={m:t}},yi=(e,t)=>{var n=t==="/",o=!t;if(n&&Rn)throw new $(10);if(!n&&!o){var s=_t(t,{gb:!1});if(t=s.path,s=s.node,s.wa)throw new $(10);if((s.mode&61440)!==16384)throw new $(54)}t={type:e,Qc:{},mb:t,kc:[]},e=e.U(t),e.U=t,t.root=e,n?Rn=e:s&&(s.wa=t,s.U&&s.U.kc.push(t))},Ke=(e,t,n)=>{var o=_t(e,{parent:!0}).node;if(e=ti(e),!e||e==="."||e==="..")throw new $(28);var s=vi(o,e);if(s)throw new $(s);if(!o.l.va)throw new $(63);return o.l.va(o,e,t,n)},rn=(e,t,n)=>{typeof n>"u"&&(n=t,t=438),Ke(e,t|8192,n)},kn=(e,t)=>{if(!Qt(e))throw new $(44);var n=_t(t,{parent:!0}).node;if(!n)throw new $(44);t=ti(t);var o=vi(n,t);if(o)throw new $(o);if(!n.l.Ea)throw new $(63);n.l.Ea(n,t,e)},vr=e=>{if(e=_t(e).node,!e)throw new $(44);if(!e.l.ma)throw new $(28);return Qt(hi(e.parent),e.l.ma(e))},on=(e,t,n)=>{if(e==="")throw new $(44);if(typeof t=="string"){var o={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof o>"u")throw Error(`Unknown file open mode: ${t}`);t=o}if(n=t&64?(typeof n>"u"?438:n)&4095|32768:0,typeof e=="object")var s=e;else{e=Xe(e);try{s=_t(e,{fb:!(t&131072)}).node}catch{}}if(o=!1,t&64)if(s){if(t&128)throw new $(20)}else s=Ke(e,n,0),o=!0;if(!s)throw new $(44);if((s.mode&61440)===8192&&(t&=-513),t&65536&&(s.mode&61440)!==16384)throw new $(54);if(!o&&(n=s?(s.mode&61440)===40960?32:(s.mode&61440)===16384&&(gi(t)!=="r"||t&512)?31:nn(s,gi(t)):44))throw new $(n);if(t&512&&!o){if(n=s,n=typeof n=="string"?_t(n,{fb:!0}).node:n,!n.l.P)throw new $(63);if((n.mode&61440)===16384)throw new $(31);if((n.mode&61440)!==32768)throw new $(28);if(o=nn(n,"w"))throw new $(o);n.l.P(n,{size:0,timestamp:Date.now()})}return t&=-131713,s=mi({node:s,path:hi(s),flags:t,seekable:!0,position:0,m:s.m,zc:[],error:!1}),s.m.open&&s.m.open(s),!c.logReadFiles||t&1||(sn||(sn={}),e in sn||(sn[e]=1)),s},bi=(e,t,n)=>{if(e.X===null)throw new $(8);if(!e.seekable||!e.m.ba)throw new $(70);if(n!=0&&n!=1&&n!=2)throw new $(28);e.position=e.m.ba(e,t,n),e.zc=[]},wi=()=>{$||($=function(e,t){this.name="ErrnoError",this.node=t,this.pc=function(n){this.aa=n},this.pc(e),this.message="FS error"},$.prototype=Error(),$.prototype.constructor=$,[44].forEach(e=>{Mn[e]=new $(e),Mn[e].stack="<generic error, no stack>"}))},Ci,Wt=(e,t,n)=>{e=Xe("/dev/"+e);var o=hr(!!t,!!n);Fn||(Fn=64);var s=Fn++<<8|0;On(s,{open:l=>{l.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(l,f,b,A)=>{for(var m=0,O=0;O<A;O++){try{var D=t()}catch{throw new $(29)}if(D===void 0&&m===0)throw new $(6);if(D==null)break;m++,f[b+O]=D}return m&&(l.node.timestamp=Date.now()),m},write:(l,f,b,A)=>{for(var m=0;m<A;m++)try{n(f[b+m])}catch{throw new $(29)}return A&&(l.node.timestamp=Date.now()),m}}),rn(e,o,s)},Fn,St={},Bt,sn,$t=void 0;function ht(){return $t+=4,Y[$t-4>>2]}function xi(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e}function an(e,t){return e=xi(e),{[e]:function(){return t.apply(this,arguments)}}[e]}function _i(){this.M=[void 0],this.hb=[]}var Ye=new _i,Ot=void 0;function q(e){throw new Ot(e)}var Ze=e=>(e||q("Cannot use deleted val. handle = "+e),Ye.get(e).value),et=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Ye.pa({tb:1,value:e})}};function Si(e){var t=Error,n=an(e,function(o){this.name=e,this.message=o,o=Error(o).stack,o!==void 0&&(this.stack=this.toString()+`
`+o.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n}var Ai=void 0,Li=void 0;function Ae(e){for(var t="";ie[e];)t+=Li[ie[e++]];return t}var Ut=[];function Dn(){for(;Ut.length;){var e=Ut.pop();e.g.fa=!1,e.delete()}}var Ht=void 0,ft={};function jn(e,t){for(t===void 0&&q("ptr should not be undefined");e.A;)t=e.na(t),e=e.A;return t}var At={};function Ei(e){e=Gi(e);var t=Ae(e);return vt(e),t}function zt(e,t){var n=At[e];return n===void 0&&q(t+" has unknown type "+Ei(e)),n}function ln(){}var Nn=!1;function Ii(e){--e.count.value,e.count.value===0&&(e.G?e.L.W(e.G):e.u.i.W(e.o))}function Pi(e,t,n){return t===n?e:n.A===void 0?null:(e=Pi(e,t,n.A),e===null?null:n.Pb(e))}var Ti={};function mr(e,t){return t=jn(e,t),ft[t]}var Ri=void 0;function cn(e){throw new Ri(e)}function un(e,t){return t.u&&t.o||cn("makeClassHandle requires ptr and ptrType"),!!t.L!=!!t.G&&cn("Both smartPtrType and smartPtr must be specified"),t.count={value:1},kt(Object.create(e,{g:{value:t}}))}function kt(e){return typeof FinalizationRegistry>"u"?(kt=t=>t,e):(Nn=new FinalizationRegistry(t=>{Ii(t.g)}),kt=t=>{var n=t.g;return n.G&&Nn.register(t,{g:n},t),t},ln=t=>{Nn.unregister(t)},kt(e))}var dn={};function Xt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Yt(e){return this.fromWireType(Y[e>>2])}var Ft={},hn={};function Be(e,t,n){function o(b){b=n(b),b.length!==e.length&&cn("Mismatched type converter count");for(var A=0;A<e.length;++A)tt(e[A],b[A])}e.forEach(function(b){hn[b]=t});var s=Array(t.length),l=[],f=0;t.forEach((b,A)=>{At.hasOwnProperty(b)?s[A]=At[b]:(l.push(b),Ft.hasOwnProperty(b)||(Ft[b]=[]),Ft[b].push(()=>{s[A]=At[b],++f,f===l.length&&o(s)}))}),l.length===0&&o(s)}function fn(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function yr(e,t,n={}){var o=t.name;if(e||q(`type "${o}" must have a positive integer typeid pointer`),At.hasOwnProperty(e)){if(n.$b)return;q(`Cannot register type '${o}' twice`)}At[e]=t,delete hn[e],Ft.hasOwnProperty(e)&&(t=Ft[e],delete Ft[e],t.forEach(s=>s()))}function tt(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");yr(e,t,n)}function Wn(e){q(e.g.u.i.name+" instance already deleted")}function xt(){}function Bn(e,t,n){if(e[t].B===void 0){var o=e[t];e[t]=function(){return e[t].B.hasOwnProperty(arguments.length)||q(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].B})!`),e[t].B[arguments.length].apply(this,arguments)},e[t].B=[],e[t].B[o.ea]=o}}function $n(e,t,n){c.hasOwnProperty(e)?((n===void 0||c[e].B!==void 0&&c[e].B[n]!==void 0)&&q(`Cannot register public name '${e}' twice`),Bn(c,e,e),c.hasOwnProperty(n)&&q(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),c[e].B[n]=t):(c[e]=t,n!==void 0&&(c[e].Pc=n))}function br(e,t,n,o,s,l,f,b){this.name=e,this.constructor=t,this.N=n,this.W=o,this.A=s,this.Ub=l,this.na=f,this.Pb=b,this.qb=[]}function pn(e,t,n){for(;t!==n;)t.na||q(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.na(e),t=t.A;return e}function wr(e,t){return t===null?(this.Na&&q(`null is not a valid ${this.name}`),0):(t.g||q(`Cannot pass "${Hn(t)}" as a ${this.name}`),t.g.o||q(`Cannot pass deleted object as a pointer of type ${this.name}`),pn(t.g.o,t.g.u.i,this.i))}function Cr(e,t){if(t===null){if(this.Na&&q(`null is not a valid ${this.name}`),this.ua){var n=this.Pa();return e!==null&&e.push(this.W,n),n}return 0}if(t.g||q(`Cannot pass "${Hn(t)}" as a ${this.name}`),t.g.o||q(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&t.g.u.ta&&q(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`),n=pn(t.g.o,t.g.u.i,this.i),this.ua)switch(t.g.G===void 0&&q("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:t.g.L===this?n=t.g.G:q(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`);break;case 1:n=t.g.G;break;case 2:if(t.g.L===this)n=t.g.G;else{var o=t.clone();n=this.oc(n,et(function(){o.delete()})),e!==null&&e.push(this.W,n)}break;default:q("Unsupporting sharing policy")}return n}function xr(e,t){return t===null?(this.Na&&q(`null is not a valid ${this.name}`),0):(t.g||q(`Cannot pass "${Hn(t)}" as a ${this.name}`),t.g.o||q(`Cannot pass deleted object as a pointer of type ${this.name}`),t.g.u.ta&&q(`Cannot convert argument of type ${t.g.u.name} to parameter type ${this.name}`),pn(t.g.o,t.g.u.i,this.i))}function pt(e,t,n,o){this.name=e,this.i=t,this.Na=n,this.ta=o,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,t.A!==void 0?this.toWireType=Cr:(this.toWireType=o?wr:xr,this.K=null)}function Mi(e,t,n){c.hasOwnProperty(e)||cn("Replacing nonexistant public symbol"),c[e].B!==void 0&&n!==void 0?c[e].B[n]=t:(c[e]=t,c[e].ea=n)}var gn=[],Oi=e=>{var t=gn[e];return t||(e>=gn.length&&(gn.length=e+1),gn[e]=t=v.get(e)),t},_r=(e,t)=>{var n=[];return function(){if(n.length=0,Object.assign(n,arguments),e.includes("j")){var o=c["dynCall_"+e];o=n&&n.length?o.apply(null,[t].concat(n)):o.call(null,t)}else o=Oi(t).apply(null,n);return o}};function Fe(e,t){e=Ae(e);var n=e.includes("j")?_r(e,t):Oi(t);return typeof n!="function"&&q(`unknown function pointer with signature ${e}: ${t}`),n}var ki=void 0;function gt(e,t){function n(l){s[l]||At[l]||(hn[l]?hn[l].forEach(n):(o.push(l),s[l]=!0))}var o=[],s={};throw t.forEach(n),new ki(`${e}: `+o.map(Ei).join([", "]))}function vn(e,t,n,o,s){var l=t.length;2>l&&q("argTypes array size mismatch! Must at least get return value and 'this' types!");var f=t[1]!==null&&n!==null,b=!1;for(n=1;n<t.length;++n)if(t[n]!==null&&t[n].K===void 0){b=!0;break}var A=t[0].name!=="void",m=l-2,O=Array(m),D=[],W=[];return function(){if(arguments.length!==m&&q(`function ${e} called with ${arguments.length} arguments, expected ${m} args!`),W.length=0,D.length=f?2:1,D[0]=s,f){var p=t[1].toWireType(W,this);D[1]=p}for(var M=0;M<m;++M)O[M]=t[M+2].toWireType(W,arguments[M]),D.push(O[M]);if(M=o.apply(null,D),b)Xt(W);else for(var T=f?1:2;T<t.length;T++){var J=T===1?p:O[T-2];t[T].K!==null&&t[T].K(J)}return p=A?t[0].fromWireType(M):void 0,p}}function mn(e,t){for(var n=[],o=0;o<e;o++)n.push(le[t+4*o>>2]);return n}function Fi(e,t,n){return e instanceof Object||q(`${n} with invalid "this": ${e}`),e instanceof t.i.constructor||q(`${n} incompatible with "this" of type ${e.constructor.name}`),e.g.o||q(`cannot call emscripten binding method ${n} on deleted object`),pn(e.g.o,e.g.u.i,t.i)}function Un(e){e>=Ye.h&&--Ye.get(e).tb===0&&Ye.Zb(e)}function Sr(e,t,n){switch(t){case 0:return function(o){return this.fromWireType((n?_e:ie)[o])};case 1:return function(o){return this.fromWireType((n?Ce:qe)[o>>1])};case 2:return function(o){return this.fromWireType((n?Y:le)[o>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Hn(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function Ar(e,t){switch(t){case 2:return function(n){return this.fromWireType(u[n>>2])};case 3:return function(n){return this.fromWireType(r[n>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Lr(e,t,n){switch(t){case 0:return n?function(o){return _e[o]}:function(o){return ie[o]};case 1:return n?function(o){return Ce[o>>1]}:function(o){return qe[o>>1]};case 2:return n?function(o){return Y[o>>2]}:function(o){return le[o>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Di=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Er=(e,t)=>{for(var n=e>>1,o=n+t/2;!(n>=o)&&qe[n];)++n;if(n<<=1,32<n-e&&Di)return Di.decode(ie.subarray(e,n));for(n="",o=0;!(o>=t/2);++o){var s=Ce[e+2*o>>1];if(s==0)break;n+=String.fromCharCode(s)}return n},Ir=(e,t,n)=>{if(n===void 0&&(n=2147483647),2>n)return 0;n-=2;var o=t;n=n<2*e.length?n/2:e.length;for(var s=0;s<n;++s)Ce[t>>1]=e.charCodeAt(s),t+=2;return Ce[t>>1]=0,t-o},Pr=e=>2*e.length,Tr=(e,t)=>{for(var n=0,o="";!(n>=t/4);){var s=Y[e+4*n>>2];if(s==0)break;++n,65536<=s?(s-=65536,o+=String.fromCharCode(55296|s>>10,56320|s&1023)):o+=String.fromCharCode(s)}return o},Rr=(e,t,n)=>{if(n===void 0&&(n=2147483647),4>n)return 0;var o=t;n=o+n-4;for(var s=0;s<e.length;++s){var l=e.charCodeAt(s);if(55296<=l&&57343>=l){var f=e.charCodeAt(++s);l=65536+((l&1023)<<10)|f&1023}if(Y[t>>2]=l,t+=4,t+4>n)break}return Y[t>>2]=0,t-o},Mr=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);55296<=o&&57343>=o&&++n,t+=4}return t},Or={};function yn(e){var t=Or[e];return t===void 0?Ae(e):t}var bn=[];function kr(e){var t=bn.length;return bn.push(e),t}function Fr(e,t){for(var n=Array(e),o=0;o<e;++o)n[o]=zt(le[t+4*o>>2],"parameter "+o);return n}var ji=[],zn=[],Xn={},Ni=()=>{if(!Yn){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:we||"./this.program"},t;for(t in Xn)Xn[t]===void 0?delete e[t]:e[t]=Xn[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);Yn=n}return Yn},Yn,wn=e=>e%4===0&&(e%100!==0||e%400===0),Wi=[31,29,31,30,31,30,31,31,30,31,30,31],Bi=[31,28,31,30,31,30,31,31,30,31,30,31],Dr=(e,t,n,o)=>{function s(p,M,T){for(p=typeof p=="number"?p.toString():p||"";p.length<M;)p=T[0]+p;return p}function l(p,M){return s(p,M,"0")}function f(p,M){function T(ee){return 0>ee?-1:0<ee?1:0}var J;return(J=T(p.getFullYear()-M.getFullYear()))===0&&(J=T(p.getMonth()-M.getMonth()))===0&&(J=T(p.getDate()-M.getDate())),J}function b(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function A(p){var M=p.ca;for(p=new Date(new Date(p.da+1900,0,1).getTime());0<M;){var T=p.getMonth(),J=(wn(p.getFullYear())?Wi:Bi)[T];if(M>J-p.getDate())M-=J-p.getDate()+1,p.setDate(1),11>T?p.setMonth(T+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+M);break}}return T=new Date(p.getFullYear()+1,0,4),M=b(new Date(p.getFullYear(),0,4)),T=b(T),0>=f(M,p)?0>=f(T,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}var m=Y[o+40>>2];o={wc:Y[o>>2],vc:Y[o+4>>2],Fa:Y[o+8>>2],Sa:Y[o+12>>2],Ga:Y[o+16>>2],da:Y[o+20>>2],R:Y[o+24>>2],ca:Y[o+28>>2],Rc:Y[o+32>>2],uc:Y[o+36>>2],xc:m&&m?wt(ie,m):""},n=n?wt(ie,n):"",m={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var O in m)n=n.replace(new RegExp(O,"g"),m[O]);var D="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),W="January February March April May June July August September October November December".split(" ");m={"%a":p=>D[p.R].substring(0,3),"%A":p=>D[p.R],"%b":p=>W[p.Ga].substring(0,3),"%B":p=>W[p.Ga],"%C":p=>l((p.da+1900)/100|0,2),"%d":p=>l(p.Sa,2),"%e":p=>s(p.Sa,2," "),"%g":p=>A(p).toString().substring(2),"%G":p=>A(p),"%H":p=>l(p.Fa,2),"%I":p=>(p=p.Fa,p==0?p=12:12<p&&(p-=12),l(p,2)),"%j":p=>{for(var M=0,T=0;T<=p.Ga-1;M+=(wn(p.da+1900)?Wi:Bi)[T++]);return l(p.Sa+M,3)},"%m":p=>l(p.Ga+1,2),"%M":p=>l(p.vc,2),"%n":()=>`
`,"%p":p=>0<=p.Fa&&12>p.Fa?"AM":"PM","%S":p=>l(p.wc,2),"%t":()=>"	","%u":p=>p.R||7,"%U":p=>l(Math.floor((p.ca+7-p.R)/7),2),"%V":p=>{var M=Math.floor((p.ca+7-(p.R+6)%7)/7);if(2>=(p.R+371-p.ca-2)%7&&M++,M)M==53&&(T=(p.R+371-p.ca)%7,T==4||T==3&&wn(p.da)||(M=1));else{M=52;var T=(p.R+7-p.ca-1)%7;(T==4||T==5&&wn(p.da%400-1))&&M++}return l(M,2)},"%w":p=>p.R,"%W":p=>l(Math.floor((p.ca+7-(p.R+6)%7)/7),2),"%y":p=>(p.da+1900).toString().substring(2),"%Y":p=>p.da+1900,"%z":p=>{p=p.uc;var M=0<=p;return p=Math.abs(p)/60,(M?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.xc,"%%":()=>"%"},n=n.replace(/%%/g,"\0\0");for(O in m)n.includes(O)&&(n=n.replace(new RegExp(O,"g"),m[O](o)));return n=n.replace(/\0\0/g,"%"),O=si(n,!1),O.length>t?0:(_e.set(O,e),O.length-1)};function $i(e,t,n,o){e||(e=this),this.parent=e,this.U=e.U,this.wa=null,this.id=fr++,this.name=t,this.mode=n,this.l={},this.m={},this.za=o}Object.defineProperties($i.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(e){e?this.mode|=146:this.mode&=-147}}}),wi(),Nt=Array(4096),yi(te,"/"),Ke("/tmp",16895,0),Ke("/home",16895,0),Ke("/home/web_user",16895,0),(()=>{Ke("/dev",16895,0),On(259,{read:()=>0,write:(o,s,l,f)=>f}),rn("/dev/null",259),li(1280,ur),li(1536,dr),rn("/dev/tty",1280),rn("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=ni(e).byteLength),e[--t]);Wt("random",n),Wt("urandom",n),Ke("/dev/shm",16895,0),Ke("/dev/shm/tmp",16895,0)})(),(()=>{Ke("/proc",16895,0);var e=Ke("/proc/self",16895,0);Ke("/proc/self/fd",16895,0),yi({U:()=>{var t=pi(e,"fd",16895,73);return t.l={ka:(n,o)=>{var s=Ct(+o);return n={parent:null,U:{mb:"fake"},l:{ma:()=>s.path}},n.parent=n}},t}},"/proc/self/fd")})(),Object.assign(_i.prototype,{get(e){return this.M[e]},has(e){return this.M[e]!==void 0},pa(e){var t=this.hb.pop()||this.M.length;return this.M[t]=e,t},Zb(e){this.M[e]=void 0,this.hb.push(e)}}),Ot=c.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},Ye.M.push({value:void 0},{value:null},{value:!0},{value:!1}),Ye.h=Ye.M.length,c.count_emval_handles=function(){for(var e=0,t=Ye.h;t<Ye.M.length;++t)Ye.M[t]!==void 0&&++e;return e},Ai=c.PureVirtualError=Si("PureVirtualError");for(var Ui=Array(256),Cn=0;256>Cn;++Cn)Ui[Cn]=String.fromCharCode(Cn);Li=Ui,c.getInheritedInstanceCount=function(){return Object.keys(ft).length},c.getLiveInheritedInstances=function(){var e=[],t;for(t in ft)ft.hasOwnProperty(t)&&e.push(ft[t]);return e},c.flushPendingDeletes=Dn,c.setDelayFunction=function(e){Ht=e,Ut.length&&Ht&&Ht(Dn)},Ri=c.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},xt.prototype.isAliasOf=function(e){if(!(this instanceof xt&&e instanceof xt))return!1;var t=this.g.u.i,n=this.g.o,o=e.g.u.i;for(e=e.g.o;t.A;)n=t.na(n),t=t.A;for(;o.A;)e=o.na(e),o=o.A;return t===o&&n===e},xt.prototype.clone=function(){if(this.g.o||Wn(this),this.g.ia)return this.g.count.value+=1,this;var e=kt,t=Object,n=t.create,o=Object.getPrototypeOf(this),s=this.g;return e=e(n.call(t,o,{g:{value:{count:s.count,fa:s.fa,ia:s.ia,o:s.o,u:s.u,G:s.G,L:s.L}}})),e.g.count.value+=1,e.g.fa=!1,e},xt.prototype.delete=function(){this.g.o||Wn(this),this.g.fa&&!this.g.ia&&q("Object already scheduled for deletion"),ln(this),Ii(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},xt.prototype.isDeleted=function(){return!this.g.o},xt.prototype.deleteLater=function(){return this.g.o||Wn(this),this.g.fa&&!this.g.ia&&q("Object already scheduled for deletion"),Ut.push(this),Ut.length===1&&Ht&&Ht(Dn),this.g.fa=!0,this},pt.prototype.Vb=function(e){return this.rb&&(e=this.rb(e)),e},pt.prototype.ab=function(e){this.W&&this.W(e)},pt.prototype.argPackAdvance=8,pt.prototype.readValueFromPointer=Yt,pt.prototype.deleteObject=function(e){e!==null&&e.delete()},pt.prototype.fromWireType=function(e){function t(){return this.ua?un(this.i.N,{u:this.nc,o:n,L:this,G:e}):un(this.i.N,{u:this,o:e})}var n=this.Vb(e);if(!n)return this.ab(e),null;var o=mr(this.i,n);if(o!==void 0)return o.g.count.value===0?(o.g.o=n,o.g.G=e,o.clone()):(o=o.clone(),this.ab(e),o);if(o=this.i.Ub(n),o=Ti[o],!o)return t.call(this);o=this.ta?o.Kb:o.pointerType;var s=Pi(n,this.i,o.i);return s===null?t.call(this):this.ua?un(o.i.N,{u:o,o:s,L:this,G:e}):un(o.i.N,{u:o,o:s})},ki=c.UnboundTypeError=Si("UnboundTypeError");var Hi={__syscall_fcntl64:function(e,t,n){$t=n;try{var o=Ct(e);switch(t){case 0:var s=ht();return 0>s?-28:mi(o,s).X;case 1:case 2:return 0;case 3:return o.flags;case 4:return s=ht(),o.flags|=s,0;case 5:return s=ht(),Ce[s+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Y[Vi()>>2]=28,-1;default:return-28}}catch(l){if(typeof St>"u"||l.name!=="ErrnoError")throw l;return-l.aa}},__syscall_ioctl:function(e,t,n){$t=n;try{var o=Ct(e);switch(t){case 21509:return o.s?0:-59;case 21505:if(!o.s)return-59;if(o.s.V.bc){t=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var s=ht();Y[s>>2]=25856,Y[s+4>>2]=5,Y[s+8>>2]=191,Y[s+12>>2]=35387;for(var l=0;32>l;l++)_e[s+l+17>>0]=t[l]||0}return 0;case 21510:case 21511:case 21512:return o.s?0:-59;case 21506:case 21507:case 21508:if(!o.s)return-59;if(o.s.V.cc)for(s=ht(),t=[],l=0;32>l;l++)t.push(_e[s+l+17>>0]);return 0;case 21519:return o.s?(s=ht(),Y[s>>2]=0):-59;case 21520:return o.s?-28:-59;case 21531:if(s=ht(),!o.m.ac)throw new $(59);return o.m.ac(o,t,s);case 21523:return o.s?(o.s.V.dc&&(l=[24,80],s=ht(),Ce[s>>1]=l[0],Ce[s+2>>1]=l[1]),0):-59;case 21524:return o.s?0:-59;case 21515:return o.s?0:-59;default:return-28}}catch(f){if(typeof St>"u"||f.name!=="ErrnoError")throw f;return-f.aa}},__syscall_openat:function(e,t,n,o){$t=o;try{t=t?wt(ie,t):"";var s=t;if(s.charAt(0)==="/")t=s;else{var l=e===-100?"/":Ct(e).path;if(s.length==0)throw new $(44);t=Xe(l+"/"+s)}var f=o?ht():0;return on(t,n,f).X}catch(b){if(typeof St>"u"||b.name!=="ErrnoError")throw b;return-b.aa}},_embind_create_inheriting_constructor:function(e,t,n){e=Ae(e),t=zt(t,"wrapper"),n=Ze(n);var o=[].slice,s=t.i,l=s.N,f=s.A.N,b=s.A.constructor;e=an(e,function(){s.A.qb.forEach((function(m){if(this[m]===f[m])throw new Ai(`Pure virtual function ${m} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:l}),this.__construct.apply(this,o.call(arguments))}),l.__construct=function(){this===l&&q("Pass correct 'this' to __construct");var m=b.implement.apply(void 0,[this].concat(o.call(arguments)));ln(m);var O=m.g;m.notifyOnDestruction(),O.ia=!0,Object.defineProperties(this,{g:{value:O}}),kt(this),m=O.o,m=jn(s,m),ft.hasOwnProperty(m)?q(`Tried to register registered instance: ${m}`):ft[m]=this},l.__destruct=function(){this===l&&q("Pass correct 'this' to __destruct"),ln(this);var m=this.g.o;m=jn(s,m),ft.hasOwnProperty(m)?delete ft[m]:q(`Tried to unregister unregistered instance: ${m}`)},e.prototype=Object.create(l);for(var A in n)e.prototype[A]=n[A];return et(e)},_embind_finalize_value_object:function(e){var t=dn[e];delete dn[e];var n=t.Pa,o=t.W,s=t.eb,l=s.map(f=>f.Yb).concat(s.map(f=>f.rc));Be([e],l,f=>{var b={};return s.forEach((A,m)=>{var O=f[m],D=A.Wb,W=A.Xb,p=f[m+s.length],M=A.qc,T=A.sc;b[A.Sb]={read:J=>O.fromWireType(D(W,J)),write:(J,ee)=>{var j=[];M(T,J,p.toWireType(j,ee)),Xt(j)}}}),[{name:t.name,fromWireType:function(A){var m={},O;for(O in b)m[O]=b[O].read(A);return o(A),m},toWireType:function(A,m){for(var O in b)if(!(O in m))throw new TypeError(`Missing field: "${O}"`);var D=n();for(O in b)b[O].write(D,m[O]);return A!==null&&A.push(o,D),D},argPackAdvance:8,readValueFromPointer:Yt,K:o}]})},_embind_register_bigint:function(){},_embind_register_bool:function(e,t,n,o,s){var l=fn(n);t=Ae(t),tt(e,{name:t,fromWireType:function(f){return!!f},toWireType:function(f,b){return b?o:s},argPackAdvance:8,readValueFromPointer:function(f){if(n===1)var b=_e;else if(n===2)b=Ce;else if(n===4)b=Y;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(b[f>>l])},K:null})},_embind_register_class:function(e,t,n,o,s,l,f,b,A,m,O,D,W){O=Ae(O),l=Fe(s,l),b&&(b=Fe(f,b)),m&&(m=Fe(A,m)),W=Fe(D,W);var p=xi(O);$n(p,function(){gt(`Cannot construct ${O} due to unbound types`,[o])}),Be([e,t,n],o?[o]:[],function(M){if(M=M[0],o)var T=M.i,J=T.N;else J=xt.prototype;M=an(p,function(){if(Object.getPrototypeOf(this)!==ee)throw new Ot("Use 'new' to construct "+O);if(j.$===void 0)throw new Ot(O+" has no accessible constructor");var Oe=j.$[arguments.length];if(Oe===void 0)throw new Ot(`Tried to invoke ctor of ${O} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(j.$).toString()}) parameters instead!`);return Oe.apply(this,arguments)});var ee=Object.create(J,{constructor:{value:M}});M.prototype=ee;var j=new br(O,M,ee,W,T,l,b,m);j.A&&(j.A.oa===void 0&&(j.A.oa=[]),j.A.oa.push(j)),T=new pt(O,j,!0,!1),J=new pt(O+"*",j,!1,!1);var xe=new pt(O+" const*",j,!1,!0);return Ti[e]={pointerType:J,Kb:xe},Mi(p,M),[T,J,xe]})},_embind_register_class_class_function:function(e,t,n,o,s,l,f){var b=mn(n,o);t=Ae(t),l=Fe(s,l),Be([],[e],function(A){function m(){gt(`Cannot call ${O} due to unbound types`,b)}A=A[0];var O=`${A.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var D=A.i.constructor;return D[t]===void 0?(m.ea=n-1,D[t]=m):(Bn(D,t,O),D[t].B[n-1]=m),Be([],b,function(W){if(W=vn(O,[W[0],null].concat(W.slice(1)),null,l,f),D[t].B===void 0?(W.ea=n-1,D[t]=W):D[t].B[n-1]=W,A.i.oa)for(const p of A.i.oa)p.constructor.hasOwnProperty(t)||(p.constructor[t]=W);return[]}),[]})},_embind_register_class_class_property:function(e,t,n,o,s,l,f,b){t=Ae(t),l=Fe(s,l),Be([],[e],function(A){A=A[0];var m=`${A.name}.${t}`,O={get(){gt(`Cannot access ${m} due to unbound types`,[n])},enumerable:!0,configurable:!0};return O.set=b?()=>{gt(`Cannot access ${m} due to unbound types`,[n])}:()=>{q(`${m} is a read-only property`)},Object.defineProperty(A.i.constructor,t,O),Be([],[n],function(D){D=D[0];var W={get(){return D.fromWireType(l(o))},enumerable:!0};return b&&(b=Fe(f,b),W.set=p=>{var M=[];b(o,D.toWireType(M,p)),Xt(M)}),Object.defineProperty(A.i.constructor,t,W),[]}),[]})},_embind_register_class_constructor:function(e,t,n,o,s,l){var f=mn(t,n);s=Fe(o,s),Be([],[e],function(b){b=b[0];var A=`constructor ${b.name}`;if(b.i.$===void 0&&(b.i.$=[]),b.i.$[t-1]!==void 0)throw new Ot(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${b.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return b.i.$[t-1]=()=>{gt(`Cannot construct ${b.name} due to unbound types`,f)},Be([],f,function(m){return m.splice(1,0,null),b.i.$[t-1]=vn(A,m,null,s,l),[]}),[]})},_embind_register_class_function:function(e,t,n,o,s,l,f,b){var A=mn(n,o);t=Ae(t),l=Fe(s,l),Be([],[e],function(m){function O(){gt(`Cannot call ${D} due to unbound types`,A)}m=m[0];var D=`${m.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),b&&m.i.qb.push(t);var W=m.i.N,p=W[t];return p===void 0||p.B===void 0&&p.className!==m.name&&p.ea===n-2?(O.ea=n-2,O.className=m.name,W[t]=O):(Bn(W,t,D),W[t].B[n-2]=O),Be([],A,function(M){return M=vn(D,M,m,l,f),W[t].B===void 0?(M.ea=n-2,W[t]=M):W[t].B[n-2]=M,[]}),[]})},_embind_register_class_property:function(e,t,n,o,s,l,f,b,A,m){t=Ae(t),s=Fe(o,s),Be([],[e],function(O){O=O[0];var D=`${O.name}.${t}`,W={get(){gt(`Cannot access ${D} due to unbound types`,[n,f])},enumerable:!0,configurable:!0};return W.set=A?()=>{gt(`Cannot access ${D} due to unbound types`,[n,f])}:()=>{q(D+" is a read-only property")},Object.defineProperty(O.i.N,t,W),Be([],A?[n,f]:[n],function(p){var M=p[0],T={get(){var ee=Fi(this,O,D+" getter");return M.fromWireType(s(l,ee))},enumerable:!0};if(A){A=Fe(b,A);var J=p[1];T.set=function(ee){var j=Fi(this,O,D+" setter"),xe=[];A(m,j,J.toWireType(xe,ee)),Xt(xe)}}return Object.defineProperty(O.i.N,t,T),[]}),[]})},_embind_register_emval:function(e,t){t=Ae(t),tt(e,{name:t,fromWireType:function(n){var o=Ze(n);return Un(n),o},toWireType:function(n,o){return et(o)},argPackAdvance:8,readValueFromPointer:Yt,K:null})},_embind_register_enum:function(e,t,n,o){function s(){}n=fn(n),t=Ae(t),s.values={},tt(e,{name:t,constructor:s,fromWireType:function(l){return this.constructor.values[l]},toWireType:function(l,f){return f.value},argPackAdvance:8,readValueFromPointer:Sr(t,n,o),K:null}),$n(t,s)},_embind_register_enum_value:function(e,t,n){var o=zt(e,"enum");t=Ae(t),e=o.constructor,o=Object.create(o.constructor.prototype,{value:{value:n},constructor:{value:an(`${o.name}_${t}`,function(){})}}),e.values[n]=o,e[t]=o},_embind_register_float:function(e,t,n){n=fn(n),t=Ae(t),tt(e,{name:t,fromWireType:function(o){return o},toWireType:function(o,s){return s},argPackAdvance:8,readValueFromPointer:Ar(t,n),K:null})},_embind_register_function:function(e,t,n,o,s,l){var f=mn(t,n);e=Ae(e),s=Fe(o,s),$n(e,function(){gt(`Cannot call ${e} due to unbound types`,f)},t-1),Be([],f,function(b){return Mi(e,vn(e,[b[0],null].concat(b.slice(1)),null,s,l),t-1),[]})},_embind_register_integer:function(e,t,n,o,s){t=Ae(t),s===-1&&(s=4294967295),s=fn(n);var l=b=>b;if(o===0){var f=32-8*n;l=b=>b<<f>>>f}n=t.includes("unsigned")?function(b,A){return A>>>0}:function(b,A){return A},tt(e,{name:t,fromWireType:l,toWireType:n,argPackAdvance:8,readValueFromPointer:Lr(t,s,o!==0),K:null})},_embind_register_memory_view:function(e,t,n){function o(l){l>>=2;var f=le;return new s(f.buffer,f[l+1],f[l])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];n=Ae(n),tt(e,{name:n,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{$b:!0})},_embind_register_std_string:function(e,t){t=Ae(t);var n=t==="std::string";tt(e,{name:t,fromWireType:function(o){var s=le[o>>2],l=o+4;if(n)for(var f=l,b=0;b<=s;++b){var A=l+b;if(b==s||ie[A]==0){if(f=f?wt(ie,f,A-f):"",m===void 0)var m=f;else m+="\0",m+=f;f=A+1}}else{for(m=Array(s),b=0;b<s;++b)m[b]=String.fromCharCode(ie[l+b]);m=m.join("")}return vt(o),m},toWireType:function(o,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var l=typeof s=="string";l||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||q("Cannot pass non-string to std::string");var f=n&&l?ri(s):s.length,b=Vn(4+f+1),A=b+4;if(le[b>>2]=f,n&&l)oi(s,ie,A,f+1);else if(l)for(l=0;l<f;++l){var m=s.charCodeAt(l);255<m&&(vt(A),q("String has UTF-16 code units that do not fit in 8 bits")),ie[A+l]=m}else for(l=0;l<f;++l)ie[A+l]=s[l];return o!==null&&o.push(vt,b),b},argPackAdvance:8,readValueFromPointer:Yt,K:function(o){vt(o)}})},_embind_register_std_wstring:function(e,t,n){if(n=Ae(n),t===2)var o=Er,s=Ir,l=Pr,f=()=>qe,b=1;else t===4&&(o=Tr,s=Rr,l=Mr,f=()=>le,b=2);tt(e,{name:n,fromWireType:function(A){for(var m=le[A>>2],O=f(),D,W=A+4,p=0;p<=m;++p){var M=A+4+p*t;(p==m||O[M>>b]==0)&&(W=o(W,M-W),D===void 0?D=W:(D+="\0",D+=W),W=M+t)}return vt(A),D},toWireType:function(A,m){typeof m!="string"&&q(`Cannot pass non-string to C++ string type ${n}`);var O=l(m),D=Vn(4+O+t);return le[D>>2]=O>>b,s(m,D+4,O+t),A!==null&&A.push(vt,D),D},argPackAdvance:8,readValueFromPointer:Yt,K:function(A){vt(A)}})},_embind_register_value_object:function(e,t,n,o,s,l){dn[e]={name:Ae(t),Pa:Fe(n,o),W:Fe(s,l),eb:[]}},_embind_register_value_object_field:function(e,t,n,o,s,l,f,b,A,m){dn[e].eb.push({Sb:Ae(t),Yb:n,Wb:Fe(o,s),Xb:l,rc:f,qc:Fe(b,A),sc:m})},_embind_register_void:function(e,t){t=Ae(t),tt(e,{fc:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(e,t,n){e=Ze(e),t=zt(t,"emval::as");var o=[],s=et(o);return le[n>>2]=s,t.toWireType(o,e)},_emval_call_method:function(e,t,n,o,s){e=bn[e],t=Ze(t),n=yn(n);var l=[];return le[o>>2]=et(l),e(t,n,l,s)},_emval_call_void_method:function(e,t,n,o){e=bn[e],t=Ze(t),n=yn(n),e(t,n,null,o)},_emval_decref:Un,_emval_get_method_caller:function(e,t){var n=Fr(e,t),o=n[0];t=o.name+"_$"+n.slice(1).map(function(f){return f.name}).join("_")+"$";var s=ji[t];if(s!==void 0)return s;var l=Array(e-1);return s=kr((f,b,A,m)=>{for(var O=0,D=0;D<e-1;++D)l[D]=n[D+1].readValueFromPointer(m+O),O+=n[D+1].argPackAdvance;for(f=f[b].apply(f,l),D=0;D<e-1;++D)n[D+1].Nb&&n[D+1].Nb(l[D]);if(!o.fc)return o.toWireType(A,f)}),ji[t]=s},_emval_get_module_property:function(e){return e=yn(e),et(c[e])},_emval_get_property:function(e,t){return e=Ze(e),t=Ze(t),et(e[t])},_emval_incref:function(e){4<e&&(Ye.get(e).tb+=1)},_emval_new_cstring:function(e){return et(yn(e))},_emval_new_object:function(){return et({})},_emval_run_destructors:function(e){var t=Ze(e);Xt(t),Un(e)},_emval_set_property:function(e,t,n){e=Ze(e),t=Ze(t),n=Ze(n),e[t]=n},_emval_take_value:function(e,t){return e=zt(e,"_emval_take_value"),e=e.readValueFromPointer(t),et(e)},abort:()=>{ge("")},emscripten_asm_const_int:(e,t,n)=>{zn.length=0;var o;for(n>>=2;o=ie[t++];)n+=o!=105&n,zn.push(o==105?Y[n]:r[n++>>1]),++n;return jt[e].apply(null,zn)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(e,t,n)=>ie.copyWithin(e,t,t+n),emscripten_resize_heap:e=>{var t=ie.length;if(e>>>=0,2147483648<e)return!1;for(var n=1;4>=n;n*=2){var o=t*(1+.2/n);o=Math.min(o,e+100663296);var s=Math;o=Math.max(e,o);e:{s=s.min.call(s,2147483648,o+(65536-o%65536)%65536)-Ne.buffer.byteLength+65535>>>16;try{Ne.grow(s),a();var l=1;break e}catch{}l=void 0}if(l)return!0}return!1},environ_get:(e,t)=>{var n=0;return Ni().forEach(function(o,s){var l=t+n;for(s=le[e+4*s>>2]=l,l=0;l<o.length;++l)_e[s++>>0]=o.charCodeAt(l);_e[s>>0]=0,n+=o.length+1}),0},environ_sizes_get:(e,t)=>{var n=Ni();le[e>>2]=n.length;var o=0;return n.forEach(function(s){o+=s.length+1}),le[t>>2]=o,0},fd_close:function(e){try{var t=Ct(e);if(t.X===null)throw new $(8);t.Ma&&(t.Ma=null);try{t.m.close&&t.m.close(t)}catch(n){throw n}finally{en[t.X]=null}return t.X=null,0}catch(n){if(typeof St>"u"||n.name!=="ErrnoError")throw n;return n.aa}},fd_read:function(e,t,n,o){try{e:{var s=Ct(e);e=t;for(var l,f=t=0;f<n;f++){var b=le[e>>2],A=le[e+4>>2];e+=8;var m=s,O=b,D=A,W=l,p=_e;if(0>D||0>W)throw new $(28);if(m.X===null)throw new $(8);if((m.flags&2097155)===1)throw new $(8);if((m.node.mode&61440)===16384)throw new $(31);if(!m.m.read)throw new $(28);var M=typeof W<"u";if(!M)W=m.position;else if(!m.seekable)throw new $(70);var T=m.m.read(m,p,O,D,W);M||(m.position+=T);var J=T;if(0>J){var ee=-1;break e}if(t+=J,J<A)break;typeof l<"u"&&(l+=J)}ee=t}return le[o>>2]=ee,0}catch(j){if(typeof St>"u"||j.name!=="ErrnoError")throw j;return j.aa}},fd_seek:function(e,t,n,o,s){t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN;try{if(isNaN(t))return 61;var l=Ct(e);return bi(l,t,o),Rt=[l.position>>>0,(ut=l.position,1<=+Math.abs(ut)?0<ut?+Math.floor(ut/4294967296)>>>0:~~+Math.ceil((ut-+(~~ut>>>0))/4294967296)>>>0:0)],Y[s>>2]=Rt[0],Y[s+4>>2]=Rt[1],l.Ma&&t===0&&o===0&&(l.Ma=null),0}catch(f){if(typeof St>"u"||f.name!=="ErrnoError")throw f;return f.aa}},fd_write:function(e,t,n,o){try{e:{var s=Ct(e);e=t;for(var l,f=t=0;f<n;f++){var b=le[e>>2],A=le[e+4>>2];e+=8;var m=s,O=b,D=A,W=l,p=_e;if(0>D||0>W)throw new $(28);if(m.X===null)throw new $(8);if((m.flags&2097155)===0)throw new $(8);if((m.node.mode&61440)===16384)throw new $(31);if(!m.m.write)throw new $(28);m.seekable&&m.flags&1024&&bi(m,0,2);var M=typeof W<"u";if(!M)W=m.position;else if(!m.seekable)throw new $(70);var T=m.m.write(m,p,O,D,W,void 0);M||(m.position+=T);var J=T;if(0>J){var ee=-1;break e}t+=J,typeof l<"u"&&(l+=J)}ee=t}return le[o>>2]=ee,0}catch(j){if(typeof St>"u"||j.name!=="ErrnoError")throw j;return j.aa}},strftime_l:(e,t,n,o)=>Dr(e,t,n,o)};(function(){function e(n){if(ne=n=n.exports,Ne=ne.memory,a(),v=ne.__indirect_function_table,I.unshift(ne.__wasm_call_ctors),Q--,c.monitorRunDependencies&&c.monitorRunDependencies(Q),Q==0&&z){var o=z;z=null,o()}return n}var t={env:Hi,wasi_snapshot_preview1:Hi};if(Q++,c.monitorRunDependencies&&c.monitorRunDependencies(Q),c.instantiateWasm)try{return c.instantiateWasm(t,e)}catch(n){Le("Module.instantiateWasm callback failed with error: "+n),re(n)}return Zt(t,function(n){e(n.instance)}).catch(re),{}})();var vt=e=>(vt=ne.free)(e),Vn=e=>(Vn=ne.malloc)(e),zi=c._ma_device__on_notification_unlocked=e=>(zi=c._ma_device__on_notification_unlocked=ne.ma_device__on_notification_unlocked)(e);c._ma_malloc_emscripten=(e,t)=>(c._ma_malloc_emscripten=ne.ma_malloc_emscripten)(e,t),c._ma_free_emscripten=(e,t)=>(c._ma_free_emscripten=ne.ma_free_emscripten)(e,t);var Xi=c._ma_device_process_pcm_frames_capture__webaudio=(e,t,n)=>(Xi=c._ma_device_process_pcm_frames_capture__webaudio=ne.ma_device_process_pcm_frames_capture__webaudio)(e,t,n),Yi=c._ma_device_process_pcm_frames_playback__webaudio=(e,t,n)=>(Yi=c._ma_device_process_pcm_frames_playback__webaudio=ne.ma_device_process_pcm_frames_playback__webaudio)(e,t,n),Vi=()=>(Vi=ne.__errno_location)(),Gi=e=>(Gi=ne.__getTypeName)(e);c.__embind_initialize_bindings=()=>(c.__embind_initialize_bindings=ne._embind_initialize_bindings)(),c.dynCall_iiji=(e,t,n,o,s)=>(c.dynCall_iiji=ne.dynCall_iiji)(e,t,n,o,s),c.dynCall_jiji=(e,t,n,o,s)=>(c.dynCall_jiji=ne.dynCall_jiji)(e,t,n,o,s),c.dynCall_iiiji=(e,t,n,o,s,l)=>(c.dynCall_iiiji=ne.dynCall_iiiji)(e,t,n,o,s,l),c.dynCall_iij=(e,t,n,o)=>(c.dynCall_iij=ne.dynCall_iij)(e,t,n,o),c.dynCall_jii=(e,t,n)=>(c.dynCall_jii=ne.dynCall_jii)(e,t,n),c.dynCall_viijii=(e,t,n,o,s,l,f)=>(c.dynCall_viijii=ne.dynCall_viijii)(e,t,n,o,s,l,f),c.dynCall_iiiiij=(e,t,n,o,s,l,f)=>(c.dynCall_iiiiij=ne.dynCall_iiiiij)(e,t,n,o,s,l,f),c.dynCall_iiiiijj=(e,t,n,o,s,l,f,b,A)=>(c.dynCall_iiiiijj=ne.dynCall_iiiiijj)(e,t,n,o,s,l,f,b,A),c.dynCall_iiiiiijj=(e,t,n,o,s,l,f,b,A,m)=>(c.dynCall_iiiiiijj=ne.dynCall_iiiiiijj)(e,t,n,o,s,l,f,b,A,m);var xn;z=function e(){xn||qi(),xn||(z=e)};function qi(){function e(){if(!xn&&(xn=!0,c.calledRun=!0,!ze)){if(c.noFSInit||Ci||(Ci=!0,wi(),c.stdin=c.stdin,c.stdout=c.stdout,c.stderr=c.stderr,c.stdin?Wt("stdin",c.stdin):kn("/dev/tty","/dev/stdin"),c.stdout?Wt("stdout",null,c.stdout):kn("/dev/tty","/dev/stdout"),c.stderr?Wt("stderr",null,c.stderr):kn("/dev/tty1","/dev/stderr"),on("/dev/stdin",0),on("/dev/stdout",1),on("/dev/stderr",1)),di=!1,dt(I),U(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;){var t=c.postRun.shift();F.unshift(t)}dt(F)}}if(!(0<Q)){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)X();dt(L),0<Q||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),e()},1)):e())}}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return qi(),k.ready}})();const C=R},_=>{_.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"2.25.7","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(_,x,w)=>{w.r(x),w.d(x,{Animation:()=>R.Animation});var R=w(4)},(_,x,w)=>{w.r(x),w.d(x,{Animation:()=>R});var R=function(){function C(E,k,c,U){this.animation=E,this.artboard=k,this.playing=U,this.loopCount=0,this.scrubTo=null,this.instance=new c.LinearAnimationInstance(E,k)}return Object.defineProperty(C.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"time",{get:function(){return this.instance.time},set:function(E){this.instance.time=E},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),C.prototype.advance=function(E){this.scrubTo===null?this.instance.advance(E):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},C.prototype.apply=function(E){this.instance.apply(E)},C.prototype.cleanup=function(){this.instance.delete()},C}()},(_,x,w)=>{w.r(x),w.d(x,{BLANK_URL:()=>C.BLANK_URL,registerTouchInteractions:()=>R.registerTouchInteractions,sanitizeUrl:()=>C.sanitizeUrl});var R=w(6),C=w(7)},(_,x,w)=>{w.r(x),w.d(x,{registerTouchInteractions:()=>E});var R=void 0,C=function(k,c){var U,re;return["touchstart","touchmove"].indexOf(k.type)>-1&&(!((U=k.touches)===null||U===void 0)&&U.length)?(c||k.preventDefault(),{clientX:k.touches[0].clientX,clientY:k.touches[0].clientY}):k.type==="touchend"&&(!((re=k.changedTouches)===null||re===void 0)&&re.length)?{clientX:k.changedTouches[0].clientX,clientY:k.changedTouches[0].clientY}:{clientX:k.clientX,clientY:k.clientY}},E=function(k){var c=k.canvas,U=k.artboard,re=k.stateMachines,de=re===void 0?[]:re,pe=k.renderer,be=k.rive,V=k.fit,H=k.alignment,me=k.isTouchScrollEnabled,N=me===void 0?!1:me,we=k.layoutScaleFactor,ye=we===void 0?1:we;if(!c||!de.length||!pe||!be||!U||typeof window>"u")return null;var Se=null,he=!1,Ge=function(Me){if(he&&Me instanceof MouseEvent){Me.type=="mouseup"&&(he=!1);return}he=N&&Me.type==="touchend"&&Se==="touchstart",Se=Me.type;var Le=Me.currentTarget.getBoundingClientRect(),je=C(Me,N),Ne=je.clientX,ne=je.clientY;if(!(!Ne&&!ne)){var ze=Ne-Le.left,_e=ne-Le.top,ie=be.computeAlignment(V,H,{minX:0,minY:0,maxX:Le.width,maxY:Le.height},U.bounds,ye),Ce=new be.Mat2D;ie.invert(Ce);var qe=new be.Vec2D(ze,_e),Y=be.mapXY(Ce,qe),le=Y.x(),u=Y.y();switch(Y.delete(),Ce.delete(),qe.delete(),ie.delete(),Me.type){case"mouseout":for(var r=0,a=de;r<a.length;r++){var v=a[r];v.pointerMove(le,u)}break;case"touchmove":case"mouseover":case"mousemove":{for(var L=0,I=de;L<I.length;L++){var v=I[L];v.pointerMove(le,u)}break}case"touchstart":case"mousedown":{for(var F=0,X=de;F<X.length;F++){var v=X[F];v.pointerDown(le,u)}break}case"touchend":case"mouseup":{for(var Q=0,z=de;Q<z.length;Q++){var v=z[Q];v.pointerUp(le,u)}break}}}},fe=Ge.bind(R);return c.addEventListener("mouseover",fe),c.addEventListener("mouseout",fe),c.addEventListener("mousemove",fe),c.addEventListener("mousedown",fe),c.addEventListener("mouseup",fe),c.addEventListener("touchmove",fe,{passive:N}),c.addEventListener("touchstart",fe,{passive:N}),c.addEventListener("touchend",fe),function(){c.removeEventListener("mouseover",fe),c.removeEventListener("mouseout",fe),c.removeEventListener("mousemove",fe),c.removeEventListener("mousedown",fe),c.removeEventListener("mouseup",fe),c.removeEventListener("touchmove",fe),c.removeEventListener("touchstart",fe),c.removeEventListener("touchend",fe)}}},(_,x,w)=>{w.r(x),w.d(x,{BLANK_URL:()=>re,sanitizeUrl:()=>be});var R=/^([^\w]*)(javascript|data|vbscript)/im,C=/&#(\w+)(^\w|;)?/g,E=/&(newline|tab);/gi,k=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,c=/^.+(:|&colon;)/gim,U=[".","/"],re="about:blank";function de(V){return U.indexOf(V[0])>-1}function pe(V){var H=V.replace(k,"");return H.replace(C,function(me,N){return String.fromCharCode(N)})}function be(V){if(!V)return re;var H=pe(V).replace(E,"").replace(k,"").trim();if(!H)return re;if(de(H))return H;var me=H.match(c);if(!me)return H;var N=me[0];return R.test(N)?re:H}}],g={};function y(_){var x=g[_];if(x!==void 0)return x.exports;var w=g[_]={exports:{}};return h[_](w,w.exports,y),w.exports}y.d=(_,x)=>{for(var w in x)y.o(x,w)&&!y.o(_,w)&&Object.defineProperty(_,w,{enumerable:!0,get:x[w]})},y.o=(_,x)=>Object.prototype.hasOwnProperty.call(_,x),y.r=_=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})};var S={};return(()=>{y.r(S),y.d(S,{Alignment:()=>U,EventType:()=>N,Fit:()=>c,Layout:()=>re,LoopType:()=>we,Rive:()=>ze,RiveEventType:()=>V,RiveFile:()=>ne,RuntimeLoader:()=>de,StateMachineInput:()=>be,StateMachineInputType:()=>pe,Testing:()=>Ce,decodeAudio:()=>qe,decodeFont:()=>le,decodeImage:()=>Y});var _=y(1),x=y(2),w=y(3),R=y(5),C=function(){var u=function(r,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,L){v.__proto__=L}||function(v,L){for(var I in L)Object.prototype.hasOwnProperty.call(L,I)&&(v[I]=L[I])},u(r,a)};return function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");u(r,a);function v(){this.constructor=r}r.prototype=a===null?Object.create(a):(v.prototype=a.prototype,new v)}}(),E=function(u,r,a,v){function L(I){return I instanceof a?I:new a(function(F){F(I)})}return new(a||(a=Promise))(function(I,F){function X(ge){try{z(v.next(ge))}catch(Ie){F(Ie)}}function Q(ge){try{z(v.throw(ge))}catch(Ie){F(Ie)}}function z(ge){ge.done?I(ge.value):L(ge.value).then(X,Q)}z((v=v.apply(u,[])).next())})},k=function(u,r){var a={label:0,sent:function(){if(I[0]&1)throw I[1];return I[1]},trys:[],ops:[]},v,L,I,F=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return F.next=X(0),F.throw=X(1),F.return=X(2),typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function X(z){return function(ge){return Q([z,ge])}}function Q(z){if(v)throw new TypeError("Generator is already executing.");for(;F&&(F=0,z[0]&&(a=0)),a;)try{if(v=1,L&&(I=z[0]&2?L.return:z[0]?L.throw||((I=L.return)&&I.call(L),0):L.next)&&!(I=I.call(L,z[1])).done)return I;switch(L=0,I&&(z=[z[0]&2,I.value]),z[0]){case 0:case 1:I=z;break;case 4:return a.label++,{value:z[1],done:!1};case 5:a.label++,L=z[1],z=[0];continue;case 7:z=a.ops.pop(),a.trys.pop();continue;default:if(I=a.trys,!(I=I.length>0&&I[I.length-1])&&(z[0]===6||z[0]===2)){a=0;continue}if(z[0]===3&&(!I||z[1]>I[0]&&z[1]<I[3])){a.label=z[1];break}if(z[0]===6&&a.label<I[1]){a.label=I[1],I=z;break}if(I&&a.label<I[2]){a.label=I[2],a.ops.push(z);break}I[2]&&a.ops.pop(),a.trys.pop();continue}z=r.call(u,a)}catch(ge){z=[6,ge],L=0}finally{v=I=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}},c;(function(u){u.Cover="cover",u.Contain="contain",u.Fill="fill",u.FitWidth="fitWidth",u.FitHeight="fitHeight",u.None="none",u.ScaleDown="scaleDown",u.Layout="layout"})(c||(c={}));var U;(function(u){u.Center="center",u.TopLeft="topLeft",u.TopCenter="topCenter",u.TopRight="topRight",u.CenterLeft="centerLeft",u.CenterRight="centerRight",u.BottomLeft="bottomLeft",u.BottomCenter="bottomCenter",u.BottomRight="bottomRight"})(U||(U={}));var re=function(){function u(r){var a,v,L,I,F,X,Q;this.fit=(a=r==null?void 0:r.fit)!==null&&a!==void 0?a:c.Contain,this.alignment=(v=r==null?void 0:r.alignment)!==null&&v!==void 0?v:U.Center,this.layoutScaleFactor=(L=r==null?void 0:r.layoutScaleFactor)!==null&&L!==void 0?L:1,this.minX=(I=r==null?void 0:r.minX)!==null&&I!==void 0?I:0,this.minY=(F=r==null?void 0:r.minY)!==null&&F!==void 0?F:0,this.maxX=(X=r==null?void 0:r.maxX)!==null&&X!==void 0?X:0,this.maxY=(Q=r==null?void 0:r.maxY)!==null&&Q!==void 0?Q:0}return u.new=function(r){var a=r.fit,v=r.alignment,L=r.minX,I=r.minY,F=r.maxX,X=r.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new u({fit:a,alignment:v,minX:L,minY:I,maxX:F,maxY:X})},u.prototype.copyWith=function(r){var a=r.fit,v=r.alignment,L=r.layoutScaleFactor,I=r.minX,F=r.minY,X=r.maxX,Q=r.maxY;return new u({fit:a??this.fit,alignment:v??this.alignment,layoutScaleFactor:L??this.layoutScaleFactor,minX:I??this.minX,minY:F??this.minY,maxX:X??this.maxX,maxY:Q??this.maxY})},u.prototype.runtimeFit=function(r){if(this.cachedRuntimeFit)return this.cachedRuntimeFit;var a;return this.fit===c.Cover?a=r.Fit.cover:this.fit===c.Contain?a=r.Fit.contain:this.fit===c.Fill?a=r.Fit.fill:this.fit===c.FitWidth?a=r.Fit.fitWidth:this.fit===c.FitHeight?a=r.Fit.fitHeight:this.fit===c.ScaleDown?a=r.Fit.scaleDown:this.fit===c.Layout?a=r.Fit.layout:a=r.Fit.none,this.cachedRuntimeFit=a,a},u.prototype.runtimeAlignment=function(r){if(this.cachedRuntimeAlignment)return this.cachedRuntimeAlignment;var a;return this.alignment===U.TopLeft?a=r.Alignment.topLeft:this.alignment===U.TopCenter?a=r.Alignment.topCenter:this.alignment===U.TopRight?a=r.Alignment.topRight:this.alignment===U.CenterLeft?a=r.Alignment.centerLeft:this.alignment===U.CenterRight?a=r.Alignment.centerRight:this.alignment===U.BottomLeft?a=r.Alignment.bottomLeft:this.alignment===U.BottomCenter?a=r.Alignment.bottomCenter:this.alignment===U.BottomRight?a=r.Alignment.bottomRight:a=r.Alignment.center,this.cachedRuntimeAlignment=a,a},u}(),de=function(){function u(){}return u.loadRuntime=function(){_.default({locateFile:function(){return u.wasmURL}}).then(function(r){var a;for(u.runtime=r;u.callBackQueue.length>0;)(a=u.callBackQueue.shift())===null||a===void 0||a(u.runtime)}).catch(function(r){var a={message:(r==null?void 0:r.message)||"Unknown error",type:(r==null?void 0:r.name)||"Error",wasmError:r instanceof WebAssembly.CompileError||r instanceof WebAssembly.RuntimeError,originalError:r};console.debug("Rive WASM load error details:",a);var v="https://cdn.jsdelivr.net/npm/".concat(x.name,"@").concat(x.version,"/rive_fallback.wasm");if(u.wasmURL.toLowerCase()!==v)console.warn("Failed to load WASM from ".concat(u.wasmURL," (").concat(a.message,"), trying jsdelivr as a backup")),u.setWasmUrl(v),u.loadRuntime();else{var L=["Could not load Rive WASM file from ".concat(u.wasmURL," or ").concat(v,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible",`
Error details:`,"- Type: ".concat(a.type),"- Message: ".concat(a.message),"- WebAssembly-specific error: ".concat(a.wasmError),`
To resolve, you may need to:`,"1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join(`
`);console.error(L)}})},u.getInstance=function(r){u.isLoading||(u.isLoading=!0,u.loadRuntime()),u.runtime?r(u.runtime):u.callBackQueue.push(r)},u.awaitInstance=function(){return new Promise(function(r){return u.getInstance(function(a){return r(a)})})},u.setWasmUrl=function(r){u.wasmURL=r},u.getWasmUrl=function(){return u.wasmURL},u.isLoading=!1,u.callBackQueue=[],u.wasmURL="https://unpkg.com/".concat(x.name,"@").concat(x.version,"/rive.wasm"),u}(),pe;(function(u){u[u.Number=56]="Number",u[u.Trigger=58]="Trigger",u[u.Boolean=59]="Boolean"})(pe||(pe={}));var be=function(){function u(r,a){this.type=r,this.runtimeInput=a}return Object.defineProperty(u.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(r){this.runtimeInput.value=r},enumerable:!1,configurable:!0}),u.prototype.fire=function(){this.type===pe.Trigger&&this.runtimeInput.fire()},u.prototype.delete=function(){this.runtimeInput=null},u}(),V;(function(u){u[u.General=128]="General",u[u.OpenUrl=131]="OpenUrl"})(V||(V={}));var H=function(){function u(r,a,v,L){this.stateMachine=r,this.playing=v,this.artboard=L,this.inputs=[],this.instance=new a.StateMachineInstance(r,L),this.initInputs(a)}return Object.defineProperty(u.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"statesChanged",{get:function(){for(var r=[],a=0;a<this.instance.stateChangedCount();a++)r.push(this.instance.stateChangedNameByIndex(a));return r},enumerable:!1,configurable:!0}),u.prototype.advance=function(r){this.instance.advance(r)},u.prototype.advanceAndApply=function(r){this.instance.advanceAndApply(r)},u.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},u.prototype.reportedEventAt=function(r){return this.instance.reportedEventAt(r)},u.prototype.initInputs=function(r){for(var a=0;a<this.instance.inputCount();a++){var v=this.instance.input(a);this.inputs.push(this.mapRuntimeInput(v,r))}},u.prototype.mapRuntimeInput=function(r,a){if(r.type===a.SMIInput.bool)return new be(pe.Boolean,r.asBool());if(r.type===a.SMIInput.number)return new be(pe.Number,r.asNumber());if(r.type===a.SMIInput.trigger)return new be(pe.Trigger,r.asTrigger())},u.prototype.cleanup=function(){this.inputs.forEach(function(r){r.delete()}),this.inputs.length=0,this.instance.delete()},u}(),me=function(){function u(r,a,v,L,I){L===void 0&&(L=[]),I===void 0&&(I=[]),this.runtime=r,this.artboard=a,this.eventManager=v,this.animations=L,this.stateMachines=I}return u.prototype.add=function(r,a,v){if(v===void 0&&(v=!0),r=ie(r),r.length===0)this.animations.forEach(function(Te){return Te.playing=a}),this.stateMachines.forEach(function(Te){return Te.playing=a});else for(var L=this.animations.map(function(Te){return Te.name}),I=this.stateMachines.map(function(Te){return Te.name}),F=0;F<r.length;F++){var X=L.indexOf(r[F]),Q=I.indexOf(r[F]);if(X>=0||Q>=0)X>=0?this.animations[X].playing=a:this.stateMachines[Q].playing=a;else{var z=this.artboard.animationByName(r[F]);if(z){var ge=new w.Animation(z,this.artboard,this.runtime,a);ge.advance(0),ge.apply(1),this.animations.push(ge)}else{var Ie=this.artboard.stateMachineByName(r[F]);if(Ie){var Pe=new H(Ie,this.runtime,a,this.artboard);this.stateMachines.push(Pe)}}}}return v&&(a?this.eventManager.fire({type:N.Play,data:this.playing}):this.eventManager.fire({type:N.Pause,data:this.paused})),a?this.playing:this.paused},u.prototype.initLinearAnimations=function(r,a){for(var v=this.animations.map(function(Q){return Q.name}),L=0;L<r.length;L++){var I=v.indexOf(r[L]);if(I>=0)this.animations[I].playing=a;else{var F=this.artboard.animationByName(r[L]);if(F){var X=new w.Animation(F,this.artboard,this.runtime,a);X.advance(0),X.apply(1),this.animations.push(X)}}}},u.prototype.initStateMachines=function(r,a){for(var v=this.stateMachines.map(function(Q){return Q.name}),L=0;L<r.length;L++){var I=v.indexOf(r[L]);if(I>=0)this.stateMachines[I].playing=a;else{var F=this.artboard.stateMachineByName(r[L]);if(F){var X=new H(F,this.runtime,a,this.artboard);this.stateMachines.push(X)}else this.initLinearAnimations([r[L]],a)}}},u.prototype.play=function(r){return this.add(r,!0)},u.prototype.pause=function(r){return this.add(r,!1)},u.prototype.scrub=function(r,a){var v=this.animations.filter(function(L){return r.includes(L.name)});return v.forEach(function(L){return L.scrubTo=a}),v.map(function(L){return L.name})},Object.defineProperty(u.prototype,"playing",{get:function(){return this.animations.filter(function(r){return r.playing}).map(function(r){return r.name}).concat(this.stateMachines.filter(function(r){return r.playing}).map(function(r){return r.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"paused",{get:function(){return this.animations.filter(function(r){return!r.playing}).map(function(r){return r.name}).concat(this.stateMachines.filter(function(r){return!r.playing}).map(function(r){return r.name}))},enumerable:!1,configurable:!0}),u.prototype.stop=function(r){var a=this;r=ie(r);var v=[];if(r.length===0)v=this.animations.map(function(F){return F.name}).concat(this.stateMachines.map(function(F){return F.name})),this.animations.forEach(function(F){return F.cleanup()}),this.stateMachines.forEach(function(F){return F.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var L=this.animations.filter(function(F){return r.includes(F.name)});L.forEach(function(F){F.cleanup(),a.animations.splice(a.animations.indexOf(F),1)});var I=this.stateMachines.filter(function(F){return r.includes(F.name)});I.forEach(function(F){F.cleanup(),a.stateMachines.splice(a.stateMachines.indexOf(F),1)}),v=L.map(function(F){return F.name}).concat(I.map(function(F){return F.name}))}return this.eventManager.fire({type:N.Stop,data:v}),v},Object.defineProperty(u.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(r,a){return r||a.playing},!1)||this.stateMachines.reduce(function(r,a){return r||a.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),u.prototype.atLeastOne=function(r,a){a===void 0&&(a=!0);var v;return this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([v=this.artboard.animationByIndex(0).name],r,a):this.artboard.stateMachineCount()>0&&this.add([v=this.artboard.stateMachineByIndex(0).name],r,a)),v},u.prototype.handleLooping=function(){for(var r=0,a=this.animations.filter(function(L){return L.playing});r<a.length;r++){var v=a[r];v.loopValue===0&&v.loopCount?(v.loopCount=0,this.stop(v.name)):v.loopValue===1&&v.loopCount?(this.eventManager.fire({type:N.Loop,data:{animation:v.name,type:we.Loop}}),v.loopCount=0):v.loopValue===2&&v.loopCount>1&&(this.eventManager.fire({type:N.Loop,data:{animation:v.name,type:we.PingPong}}),v.loopCount=0)}},u.prototype.handleStateChanges=function(){for(var r=[],a=0,v=this.stateMachines.filter(function(I){return I.playing});a<v.length;a++){var L=v[a];r.push.apply(r,L.statesChanged)}r.length>0&&this.eventManager.fire({type:N.StateChange,data:r})},u.prototype.handleAdvancing=function(r){this.eventManager.fire({type:N.Advance,data:r})},u}(),N;(function(u){u.Load="load",u.LoadError="loaderror",u.Play="play",u.Pause="pause",u.Stop="stop",u.Loop="loop",u.Draw="draw",u.Advance="advance",u.StateChange="statechange",u.RiveEvent="riveevent",u.AudioStatusChange="audiostatuschange"})(N||(N={}));var we;(function(u){u.OneShot="oneshot",u.Loop="loop",u.PingPong="pingpong"})(we||(we={}));var ye=function(){function u(r){r===void 0&&(r=[]),this.listeners=r}return u.prototype.getListeners=function(r){return this.listeners.filter(function(a){return a.type===r})},u.prototype.add=function(r){this.listeners.includes(r)||this.listeners.push(r)},u.prototype.remove=function(r){for(var a=0;a<this.listeners.length;a++){var v=this.listeners[a];if(v.type===r.type&&v.callback===r.callback){this.listeners.splice(a,1);break}}},u.prototype.removeAll=function(r){var a=this;r?this.listeners.filter(function(v){return v.type===r}).forEach(function(v){return a.remove(v)}):this.listeners.splice(0,this.listeners.length)},u.prototype.fire=function(r){var a=this.getListeners(r.type);a.forEach(function(v){return v.callback(r)})},u}(),Se=function(){function u(r){this.eventManager=r,this.queue=[]}return u.prototype.add=function(r){this.queue.push(r)},u.prototype.process=function(){for(;this.queue.length>0;){var r=this.queue.shift();r!=null&&r.action&&r.action(),r!=null&&r.event&&this.eventManager.fire(r.event)}},u}(),he;(function(u){u[u.AVAILABLE=0]="AVAILABLE",u[u.UNAVAILABLE=1]="UNAVAILABLE"})(he||(he={}));var Ge=function(u){C(r,u);function r(){var a=u!==null&&u.apply(this,arguments)||this;return a._started=!1,a._enabled=!1,a._status=he.UNAVAILABLE,a}return r.prototype.delay=function(a){return E(this,void 0,void 0,function(){return k(this,function(v){return[2,new Promise(function(L){return setTimeout(L,a)})]})})},r.prototype.timeout=function(){return E(this,void 0,void 0,function(){return k(this,function(a){return[2,new Promise(function(v,L){return setTimeout(L,50)})]})})},r.prototype.reportToListeners=function(){this.fire({type:N.AudioStatusChange}),this.removeAll()},r.prototype.enableAudio=function(){return E(this,void 0,void 0,function(){return k(this,function(a){return this._enabled||(this._enabled=!0,this._status=he.AVAILABLE,this.reportToListeners()),[2]})})},r.prototype.testAudio=function(){return E(this,void 0,void 0,function(){return k(this,function(a){switch(a.label){case 0:if(!(this._status===he.UNAVAILABLE&&this._audioContext!==null))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return a.sent(),this.enableAudio(),[3,4];case 3:return a.sent(),[3,4];case 4:return[2]}})})},r.prototype._establishAudio=function(){return E(this,void 0,void 0,function(){return k(this,function(a){switch(a.label){case 0:return this._started?[3,5]:(this._started=!0,typeof window>"u"?(this.enableAudio(),[3,5]):[3,1]);case 1:this._audioContext=new AudioContext,this.listenForUserAction(),a.label=2;case 2:return this._status!==he.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return a.sent(),[4,this.delay(1e3)];case 4:return a.sent(),[3,2];case 5:return[2]}})})},r.prototype.listenForUserAction=function(){var a=this,v=function(){return E(a,void 0,void 0,function(){return k(this,function(L){return this.enableAudio(),[2]})})};document.addEventListener("pointerdown",v,{once:!0})},r.prototype.establishAudio=function(){return E(this,void 0,void 0,function(){return k(this,function(a){return this._establishAudio(),[2]})})},Object.defineProperty(r.prototype,"systemVolume",{get:function(){return this._status===he.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),r}(ye),fe=new Ge,Me=function(){function u(){}return u.prototype.observe=function(){},u.prototype.unobserve=function(){},u.prototype.disconnect=function(){},u}(),Le=globalThis.ResizeObserver||Me,je=function(){function u(){var r=this;this._elementsMap=new Map,this._onObservedEntry=function(a){var v=r._elementsMap.get(a.target);v!==null?v.onResize(a.target.clientWidth==0||a.target.clientHeight==0):r._resizeObserver.unobserve(a.target)},this._onObserved=function(a){a.forEach(r._onObservedEntry)},this._resizeObserver=new Le(this._onObserved)}return u.prototype.add=function(r,a){var v={onResize:a,element:r};return this._elementsMap.set(r,v),this._resizeObserver.observe(r),v},u.prototype.remove=function(r){this._resizeObserver.unobserve(r.element),this._elementsMap.delete(r.element)},u}(),Ne=new je,ne=function(){function u(r){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.src=r.src,this.buffer=r.buffer,r.assetLoader&&(this.assetLoader=r.assetLoader),this.enableRiveAssetCDN=typeof r.enableRiveAssetCDN=="boolean"?r.enableRiveAssetCDN:!0,this.eventManager=new ye,r.onLoad&&this.on(N.Load,r.onLoad),r.onLoadError&&this.on(N.LoadError,r.onLoadError)}return u.prototype.initData=function(){return E(this,void 0,void 0,function(){var r,a,v;return k(this,function(L){switch(L.label){case 0:return this.src?(r=this,[4,_e(this.src)]):[3,2];case 1:r.buffer=L.sent(),L.label=2;case 2:return this.assetLoader&&(a=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),v=this,[4,this.runtime.load(new Uint8Array(this.buffer),a,this.enableRiveAssetCDN)];case 3:if(v.file=L.sent(),this.file!==null)this.eventManager.fire({type:N.Load,data:this});else throw this.eventManager.fire({type:N.LoadError,data:null}),new Error(u.fileLoadErrorMessage);return[2]}})})},u.prototype.init=function(){return E(this,void 0,void 0,function(){var r;return k(this,function(a){switch(a.label){case 0:if(!this.src&&!this.buffer)throw new Error(u.missingErrorMessage);return r=this,[4,de.awaitInstance()];case 1:return r.runtime=a.sent(),[4,this.initData()];case 2:return a.sent(),[2]}})})},u.prototype.on=function(r,a){this.eventManager.add({type:r,callback:a})},u.prototype.off=function(r,a){this.eventManager.remove({type:r,callback:a})},u.prototype.cleanup=function(){var r;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),(r=this.file)===null||r===void 0||r.delete())},u.prototype.removeAllRiveEventListeners=function(r){this.eventManager.removeAll(r)},u.prototype.getInstance=function(){if(this.file!==null)return this.referenceCount+=1,this.file},u.missingErrorMessage="Rive source file or data buffer required",u.fileLoadErrorMessage="The file failed to load",u}(),ze=function(){function u(r){var a=this,v;this.loaded=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(L){a._hasZeroSize=L,(!a._layout.maxX||!a._layout.maxY)&&a.resizeToCanvas()},this.renderSecondTimer=0,this.canvas=r.canvas,r.canvas.constructor===HTMLCanvasElement&&(this._observed=Ne.add(this.canvas,this.onCanvasResize)),this.src=r.src,this.buffer=r.buffer,this.riveFile=r.riveFile,this.layout=(v=r.layout)!==null&&v!==void 0?v:new re,this.shouldDisableRiveListeners=!!r.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!r.isTouchScrollEnabled,this.automaticallyHandleEvents=!!r.automaticallyHandleEvents,this.enableRiveAssetCDN=r.enableRiveAssetCDN===void 0?!0:r.enableRiveAssetCDN,this.eventManager=new ye,r.onLoad&&this.on(N.Load,r.onLoad),r.onLoadError&&this.on(N.LoadError,r.onLoadError),r.onPlay&&this.on(N.Play,r.onPlay),r.onPause&&this.on(N.Pause,r.onPause),r.onStop&&this.on(N.Stop,r.onStop),r.onLoop&&this.on(N.Loop,r.onLoop),r.onStateChange&&this.on(N.StateChange,r.onStateChange),r.onAdvance&&this.on(N.Advance,r.onAdvance),r.onload&&!r.onLoad&&this.on(N.Load,r.onload),r.onloaderror&&!r.onLoadError&&this.on(N.LoadError,r.onloaderror),r.onplay&&!r.onPlay&&this.on(N.Play,r.onplay),r.onpause&&!r.onPause&&this.on(N.Pause,r.onpause),r.onstop&&!r.onStop&&this.on(N.Stop,r.onstop),r.onloop&&!r.onLoop&&this.on(N.Loop,r.onloop),r.onstatechange&&!r.onStateChange&&this.on(N.StateChange,r.onstatechange),r.assetLoader&&(this.assetLoader=r.assetLoader),this.taskQueue=new Se(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:r.autoplay,animations:r.animations,stateMachines:r.stateMachines,artboard:r.artboard,useOffscreenRenderer:r.useOffscreenRenderer})}return u.new=function(r){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new u(r)},u.prototype.onSystemAudioChanged=function(){this.volume=this._volume},u.prototype.init=function(r){var a=this,v=r.src,L=r.buffer,I=r.riveFile,F=r.animations,X=r.stateMachines,Q=r.artboard,z=r.autoplay,ge=z===void 0?!1:z,Ie=r.useOffscreenRenderer,Pe=Ie===void 0?!1:Ie;if(this.src=v,this.buffer=L,this.riveFile=I,!this.src&&!this.buffer&&!this.riveFile)throw new Error(u.missingErrorMessage);var Te=ie(F),yt=ie(X);this.loaded=!1,this.readyForPlaying=!1,de.awaitInstance().then(function(Je){a.runtime=Je,a.removeRiveListeners(),a.deleteRiveRenderer(),a.renderer=a.runtime.makeRenderer(a.canvas,Pe),a.canvas.width||a.canvas.height||a.resizeDrawingSurfaceToCanvas(),a.initData(Q,Te,yt,ge).then(function(){return a.setupRiveListeners()}).catch(function(bt){console.error(bt)})}).catch(function(Je){console.error(Je)})},u.prototype.setupRiveListeners=function(r){var a=this;if(this.eventCleanup&&this.eventCleanup(),!this.shouldDisableRiveListeners){var v=(this.animator.stateMachines||[]).filter(function(I){return I.playing&&a.runtime.hasListeners(I.instance)}).map(function(I){return I.instance}),L=this.isTouchScrollEnabled;r&&"isTouchScrollEnabled"in r&&(L=r.isTouchScrollEnabled),this.eventCleanup=(0,R.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:v,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:L,layoutScaleFactor:this._layout.layoutScaleFactor})}},u.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},u.prototype.initializeAudio=function(){var r=this,a;fe.status==he.UNAVAILABLE&&!((a=this.artboard)===null||a===void 0)&&a.hasAudio&&this._audioEventListener===null&&(this._audioEventListener={type:N.AudioStatusChange,callback:function(){return r.onSystemAudioChanged()}},fe.add(this._audioEventListener),fe.establishAudio())},u.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},u.prototype.initData=function(r,a,v,L){return E(this,void 0,void 0,function(){var I,F;return k(this,function(X){switch(X.label){case 0:return X.trys.push([0,3,,4]),this.riveFile!=null?[3,2]:(this.riveFile=new ne({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:X.sent(),X.label=2;case 2:return this.file=this.riveFile.getInstance(),this.initArtboard(r,a,v,L),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:N.Load,data:(F=this.src)!==null&&F!==void 0?F:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return X.sent(),I="Problem loading file; may be corrupt!",console.warn(I),this.eventManager.fire({type:N.LoadError,data:I}),[2,Promise.reject(I)];case 4:return[2]}})})},u.prototype.initArtboard=function(r,a,v,L){if(this.file){var I=r?this.file.artboardByName(r):this.file.defaultArtboard();if(!I){var F="Invalid artboard name or no default artboard";console.warn(F),this.eventManager.fire({type:N.LoadError,data:F});return}if(this.artboard=I,I.volume=this._volume*fe.systemVolume,this.artboard.animationCount()<1){var F="Artboard has no animations";throw this.eventManager.fire({type:N.LoadError,data:F}),F}this.animator=new me(this.runtime,this.artboard,this.eventManager);var X;a.length>0||v.length>0?(X=a.concat(v),this.animator.initLinearAnimations(a,L),this.animator.initStateMachines(v,L)):X=[this.animator.atLeastOne(L,!1)],this.taskQueue.add({event:{type:L?N.Play:N.Pause,data:X}})}},u.prototype.drawFrame=function(){this.startRendering()},u.prototype.draw=function(r,a){this.frameRequestId=null;var v=performance.now();this.lastRenderTime||(this.lastRenderTime=r),this.renderSecondTimer+=r-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,a==null||a());var L=(r-this.lastRenderTime)/1e3;this.lastRenderTime=r;for(var I=this.animator.animations.filter(function(Xe){return Xe.playing||Xe.needsScrub}).sort(function(Xe){return Xe.needsScrub?-1:1}),F=0,X=I;F<X.length;F++){var Q=X[F];Q.advance(L),Q.instance.didLoop&&(Q.loopCount+=1),Q.apply(1)}for(var z=this.animator.stateMachines.filter(function(Xe){return Xe.playing}),ge=0,Ie=z;ge<Ie.length;ge++){var Pe=Ie[ge],Te=Pe.reportedEventCount();if(Te)for(var yt=0;yt<Te;yt++){var Je=Pe.reportedEventAt(yt);if(Je)if(Je.type===V.OpenUrl){if(this.eventManager.fire({type:N.RiveEvent,data:Je}),this.automaticallyHandleEvents){var bt=document.createElement("a"),Zt=Je,ut=Zt.url,Rt=Zt.target,jt=(0,R.sanitizeUrl)(ut);ut&&bt.setAttribute("href",jt),Rt&&bt.setAttribute("target",Rt),jt&&jt!==R.BLANK_URL&&bt.click()}}else this.eventManager.fire({type:N.RiveEvent,data:Je})}Pe.advanceAndApply(L)}this.animator.stateMachines.length==0&&this.artboard.advance(L);var dt=this.renderer;dt.clear(),dt.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(dt),dt.restore(),dt.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(L),this.frameCount++;var Mt=performance.now();for(this.frameTimes.push(Mt),this.durations.push(Mt-v);this.frameTimes[0]<=Mt-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():this.animator.isPaused?this.lastRenderTime=0:this.animator.isStopped&&(this.lastRenderTime=0)},u.prototype.alignRenderer=function(){var r=this,a=r.renderer,v=r.runtime,L=r._layout,I=r.artboard;a.align(L.runtimeFit(v),L.runtimeAlignment(v),{minX:L.minX,minY:L.minY,maxX:L.maxX,maxY:L.maxY},I.bounds,this._devicePixelRatioUsed*L.layoutScaleFactor)},Object.defineProperty(u.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(r,a){return r+a},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),u.prototype.cleanup=function(){var r;this.stopRendering(),this.cleanupInstances(),this._observed!==null&&Ne.remove(this._observed),this.removeRiveListeners(),(r=this.riveFile)===null||r===void 0||r.cleanup(),this.riveFile=null,this.file=null,this.deleteRiveRenderer(),this._audioEventListener!==null&&(fe.remove(this._audioEventListener),this._audioEventListener=null)},u.prototype.deleteRiveRenderer=function(){var r;(r=this.renderer)===null||r===void 0||r.delete(),this.renderer=null},u.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},u.prototype.retrieveTextRun=function(r){var a;if(!r){console.warn("No text run name provided");return}if(!this.artboard){console.warn("Tried to access text run, but the Artboard is null");return}var v=this.artboard.textRun(r);if(!v){console.warn("Could not access a text run with name '".concat(r,"' in the '").concat((a=this.artboard)===null||a===void 0?void 0:a.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."));return}return v},u.prototype.getTextRunValue=function(r){var a=this.retrieveTextRun(r);return a?a.text:void 0},u.prototype.setTextRunValue=function(r,a){var v=this.retrieveTextRun(r);v&&(v.text=a)},u.prototype.play=function(r,a){var v=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return v.play(r,a)}});return}this.animator.play(r),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()},u.prototype.pause=function(r){var a=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.pause(r)}});return}this.eventCleanup&&this.eventCleanup(),this.animator.pause(r)},u.prototype.scrub=function(r,a){var v=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return v.scrub(r,a)}});return}this.animator.scrub(r,a||0),this.drawFrame()},u.prototype.stop=function(r){var a=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.stop(r)}});return}this.animator&&this.animator.stop(r),this.eventCleanup&&this.eventCleanup()},u.prototype.reset=function(r){var a,v=r==null?void 0:r.artboard,L=ie(r==null?void 0:r.animations),I=ie(r==null?void 0:r.stateMachines),F=(a=r==null?void 0:r.autoplay)!==null&&a!==void 0?a:!1;this.cleanupInstances(),this.initArtboard(v,L,I,F),this.taskQueue.process()},u.prototype.load=function(r){this.file=null,this.stop(),this.init(r)},Object.defineProperty(u.prototype,"layout",{get:function(){return this._layout},set:function(r){this._layout=r,(!r.maxX||!r.maxY)&&this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),u.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},u.prototype.resizeDrawingSurfaceToCanvas=function(r){if(this.canvas instanceof HTMLCanvasElement&&window){var a=this.canvas.getBoundingClientRect(),v=a.width,L=a.height,I=r||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=I,this.canvas.width=I*v,this.canvas.height=I*L,this.startRendering(),this.resizeToCanvas(),this.layout.fit===c.Layout){var F=this._layout.layoutScaleFactor;this.artboard.width=v/F,this.artboard.height=L/F}}},Object.defineProperty(u.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var r=[],a=0;a<this.artboard.animationCount();a++)r.push(this.artboard.animationByIndex(a).name);return r},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var r=[],a=0;a<this.artboard.stateMachineCount();a++)r.push(this.artboard.stateMachineByIndex(a).name);return r},enumerable:!1,configurable:!0}),u.prototype.stateMachineInputs=function(r){if(this.loaded){var a=this.animator.stateMachines.find(function(v){return v.name===r});return a==null?void 0:a.inputs}},u.prototype.retrieveInputAtPath=function(r,a){if(!r){console.warn("No input name provided for path '".concat(a,"'"));return}if(!this.artboard){console.warn("Tried to access input: '".concat(r,"', at path: '").concat(a,"', but the Artboard is null"));return}var v=this.artboard.inputByPath(r,a);if(!v){console.warn("Could not access an input with name: '".concat(r,"', at path:'").concat(a,"'"));return}return v},u.prototype.setBooleanStateAtPath=function(r,a,v){var L=this.retrieveInputAtPath(r,v);L&&(L.type===pe.Boolean?L.asBool().value=a:console.warn("Input with name: '".concat(r,"', at path:'").concat(v,"' is not a boolean")))},u.prototype.setNumberStateAtPath=function(r,a,v){var L=this.retrieveInputAtPath(r,v);L&&(L.type===pe.Number?L.asNumber().value=a:console.warn("Input with name: '".concat(r,"', at path:'").concat(v,"' is not a number")))},u.prototype.fireStateAtPath=function(r,a){var v=this.retrieveInputAtPath(r,a);v&&(v.type===pe.Trigger?v.asTrigger().fire():console.warn("Input with name: '".concat(r,"', at path:'").concat(a,"' is not a trigger")))},u.prototype.retrieveTextAtPath=function(r,a){if(!r){console.warn("No text name provided for path '".concat(a,"'"));return}if(!a){console.warn("No path provided for text '".concat(r,"'"));return}if(!this.artboard){console.warn("Tried to access text: '".concat(r,"', at path: '").concat(a,"', but the Artboard is null"));return}var v=this.artboard.textByPath(r,a);if(!v){console.warn("Could not access text with name: '".concat(r,"', at path:'").concat(a,"'"));return}return v},u.prototype.getTextRunValueAtPath=function(r,a){var v=this.retrieveTextAtPath(r,a);if(!v){console.warn("Could not get text with name: '".concat(r,"', at path:'").concat(a,"'"));return}return v.text},u.prototype.setTextRunValueAtPath=function(r,a,v){var L=this.retrieveTextAtPath(r,v);if(!L){console.warn("Could not set text with name: '".concat(r,"', at path:'").concat(v,"'"));return}L.text=a},Object.defineProperty(u.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(r){return r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(r){return r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(r){return!r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(r){return!r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),u.prototype.on=function(r,a){this.eventManager.add({type:r,callback:a})},u.prototype.off=function(r,a){this.eventManager.remove({type:r,callback:a})},u.prototype.unsubscribe=function(r,a){console.warn("This function is deprecated: please use `off()` instead."),this.off(r,a)},u.prototype.removeAllRiveEventListeners=function(r){this.eventManager.removeAll(r)},u.prototype.unsubscribeAll=function(r){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(r)},u.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},u.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},u.prototype.enableFPSCounter=function(r){this.runtime.enableFPSCounter(r)},u.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(u.prototype,"contents",{get:function(){if(this.loaded){for(var r={artboards:[]},a=0;a<this.file.artboardCount();a++){for(var v=this.file.artboardByIndex(a),L={name:v.name,animations:[],stateMachines:[]},I=0;I<v.animationCount();I++){var F=v.animationByIndex(I);L.animations.push(F.name)}for(var X=0;X<v.stateMachineCount();X++){for(var Q=v.stateMachineByIndex(X),z=Q.name,ge=new this.runtime.StateMachineInstance(Q,v),Ie=[],Pe=0;Pe<ge.inputCount();Pe++){var Te=ge.input(Pe);Ie.push({name:Te.name,type:Te.type})}L.stateMachines.push({name:z,inputs:Ie})}r.artboards.push(L)}return r}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(r){this._volume=r,this.artboard&&(this.artboard.volume=r*fe.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"artboardWidth",{get:function(){var r;return this.artboard?this.artboard.width:(r=this._artboardWidth)!==null&&r!==void 0?r:0},set:function(r){this._artboardWidth=r,this.artboard&&(this.artboard.width=r)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"artboardHeight",{get:function(){var r;return this.artboard?this.artboard.height:(r=this._artboardHeight)!==null&&r!==void 0?r:0},set:function(r){this._artboardHeight=r,this.artboard&&(this.artboard.height=r)},enumerable:!1,configurable:!0}),u.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(u.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(r){this._devicePixelRatioUsed=r},enumerable:!1,configurable:!0}),u.missingErrorMessage="Rive source file or data buffer required",u}(),_e=function(u){return E(void 0,void 0,void 0,function(){var r,a,v;return k(this,function(L){switch(L.label){case 0:return r=new Request(u),[4,fetch(r)];case 1:return a=L.sent(),[4,a.arrayBuffer()];case 2:return v=L.sent(),[2,v]}})})},ie=function(u){return typeof u=="string"?[u]:u instanceof Array?u:[]},Ce={EventManager:ye,TaskQueueManager:Se},qe=function(u){return new Promise(function(r){return de.getInstance(function(a){a.decodeAudio(u,r)})})},Y=function(u){return new Promise(function(r){return de.getInstance(function(a){a.decodeImage(u,r)})})},le=function(u){return new Promise(function(r){return de.getInstance(function(a){a.decodeFont(u,r)})})}})(),S})())})(sr);const uo=".lido-canvas{height:100%;width:100%}",ho=uo,fo=class{constructor(i){He(this,i),this.initializeRive=d=>{const h=Pt.getInstance(),g=this.el.querySelector("canvas");this.riveInstance=new sr.exports.Rive({src:d,canvas:g,stateMachines:"Idle",autoplay:!0,onLoad:()=>{this.riveInstance.resizeDrawingSurfaceToCanvas(),h.setRiveInstance(this.riveInstance)}})},this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.src=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0}async componentDidLoad(){mt(this.el,this.type),this.initializeRive(lt(this.src))}render(){const i={height:this.height,width:this.width,backgroundColor:this.bgColor,top:this.y,left:this.x,display:this.visible?"flex":"none",zIndex:this.z};return K(Ue,{key:"7cbafd15e6ffab907fb5ce58446971a5681de60c",id:this.id,type:this.type,tabindex:this.tabIndex,value:this.value,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("canvas",{key:"e4809a9cbe812db6aace7dc00dd21f748d0170b5",class:"lido-canvas"}))}get el(){return ct(this)}};fo.style=ho;const po=".lido-col{top:var(--y, 0);left:var(--x, 0);height:var(--height, 100%);width:var(--width, 100%);background-color:var(--bgColor, #eeeeee);padding:15px;border-radius:10px;display:flex;justify-content:space-around;flex-direction:column;align-items:center}.lido-col>*{}",go=po,vo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.childElementsLength=void 0,this.minLength=void 0,this.maxLength=void 0,this.direction=void 0,this.borderImage=void 0,this.boxShadow=void 0,this.style={}}componentDidLoad(){mt(this.el,this.type),Qn(this.el,this.minLength,this.maxLength,this.childElementsLength,"flex")}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=this.borderImage?lt(this.borderImage):"",d=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,d),width:Z(this.width,d),backgroundColor:Z(this.bgColor,d),top:Z(this.y,d),left:Z(this.x,d),zIndex:this.z,display:this.visible?"flex":"none",flexDirection:this.direction?Z(this.direction,d):"column",borderImage:`url(${i})`,borderImageSlice:i?"0 fill":"",boxShadow:this.boxShadow?this.boxShadow:"unset"}}render(){return K(Ue,{key:"be4d40df66b299db3f50b61bb17d9344156f3e1c",id:this.id,class:"lido-col",type:this.type,tabindex:this.tabIndex,value:this.value,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"858fcdd47cfd7872a55ffb2d86eaa9c64077a3e2"}))}get el(){return ct(this)}};vo.style=go;const mo=".lido-container{position:relative;height:100%;width:100%;background-color:var(--bgColor, #ffffff);display:flex;flex-direction:column;justify-content:center;align-items:center}",yo=mo,bo=class{constructor(i){He(this,i),this.id=void 0,this.objective=void 0,this.customStyle=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.bgImage=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.canplay=!0,this.showCheck=!1,this.isContinueOnCorrect=!1,this.isAllowOnlyCorrect=!1,this.baseUrl=""}convertToPixels(i,d=document.body){if(!i)return 0;if(i.endsWith("px"))return parseFloat(i);const h=document.createElement("div");h.style.position="absolute",h.style.visibility="hidden",h.style.height=i,d.appendChild(h);const g=h.offsetHeight;return d.removeChild(h),g}scaleContainer(i){var d;const h=[window.innerWidth],g=[window.innerHeight];!((d=window.screen)===null||d===void 0)&&d.width&&(h.push(window.screen.width),g.push(window.screen.height));const y=Math.min(...h),S=Math.min(...g),_=S>y;let x,w;_?(x=y/900,w=S/1600):(x=y/1600,w=S/900);const R=Math.min(x,w);i.style.transform=`translate(-50%, -50%) scale(${R})`,i.style.left="50%",i.style.top="50%",i.style.position="absolute",this.screenOrientation()}screenOrientation(){window.innerHeight>window.innerWidth?(this.el.style.height="1600px",this.el.style.width="900px"):(this.el.style.height="900px",this.el.style.width="1600px")}componentDidLoad(){this.scaleContainer(this.el);const i=this.bgImage?lt(this.bgImage):"";if(document.body.style.backgroundColor=this.bgColor,document.body.style.backgroundImage=`url(${i})`,window.addEventListener("resize",()=>this.scaleContainer(this.el)),window.addEventListener("load",()=>this.scaleContainer(this.el)),mt(this.el,this.type),this.customStyle){const d=document.createElement("style");d.innerHTML=this.customStyle,document.head.appendChild(d)}}disconnectedCallback(){window.removeEventListener("resize",()=>this.scaleContainer(this.el)),window.removeEventListener("load",()=>this.scaleContainer(this.el)),document.body.style.backgroundColor="",document.body.style.backgroundImage=""}render(){const i={backgroundColor:this.bgColor,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return console.log("ðŸš€ ~ LidoContainer ~ canplay:",this.canplay),K(Ue,{key:"1405439fb38afbedb8c29062766d9fb8358fe72a",id:"lido-container",tabindex:0,class:"lido-container",objective:this.objective,baseUrl:this.baseUrl,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,onTouch:this.onTouch,onInCorrect:this.onInCorrect,onCorrect:this.onCorrect,onEntry:this.onEntry,showCheck:`${this.showCheck}`,isContinueOnCorrect:`${this.isContinueOnCorrect}`,isAllowOnlyCorrect:`${this.isAllowOnlyCorrect}`,canplay:`${this.canplay}`},K("slot",{key:"eeb15e63789bff68b699893793dd4e59e3f96678"}))}get el(){return ct(this)}};bo.style=yo;const wo="@import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400..800&display=swap'); body{overflow:hidden;background-position:center;background-size:cover;background-repeat:no-repeat;height:100vh}.lido-disable-check-button{pointer-events:none;background-color:#9393935c !important;color:white}.lido-element-selected{border:2px solid;background-color:#ffdf7d !important}.diagonal-target,.diagonal-drop *{transform:scale(0.8) !important;opacity:1 !important}.cloned-element{display:flex !important;position:absolute !important;filter:grayscale(100%);pointer-events:none}.removeShadow{box-shadow:0px 0px 0px 0px #FF8900 !important}",Co=wo,xo="@keyframes rightToPlace{from{transform:translateX(2000px)}to{transform:translateX(0)}}@keyframes topToPlace{from{transform:translateY(-1000px)}to{transform:translateY(0)}}@keyframes bottomToPlace{from{transform:translateY(1000px)}to{transform:translateY(0)}}@keyframes placeToLeft{from{}to{transform:translateX(-2000px)}}@keyframes leftToPlace{from{transform:translateX(-2000px)}to{transform:translateX(0)}}@keyframes shake{0%{transform:translateX(0)}10%{transform:translateX(-5px)}20%{transform:translateX(5px)}30%{transform:translateX(-5px)}40%{transform:translateX(5px)}50%{transform:translateX(-5px)}60%{transform:translateX(5px)}70%{transform:translateX(-5px)}80%{transform:translateX(5px)}90%{transform:translateX(-5px)}100%{transform:translateX(0)}}@keyframes fallAndBounce{0%{transform:translateY(-1000px)}25%{transform:translateY(0px)}50%{transform:translateY(-200px)}75%{transform:translateY(0)}90%{transform:translateY(-100px)}100%{transform:translateY(0)}}@keyframes placeToDown{0%{transform:translateY(0)}100%{transform:translateY(1000px)}}",_o=xo,So=".lido-snackbar{visibility:visible;min-width:250px;background-color:#333;color:#fff;text-align:center;border-radius:2px;padding:16px;position:fixed;z-index:1;bottom:30px;left:50%;transform:translateX(-50%);font-size:17px}.lido-dot-container{text-align:center;position:fixed;z-index:1;width:fit-content;top:1%;left:50%;transform:translate(-50%)}.lido-dot{height:15px;width:15px;margin:0 4px;background-color:#bbb;border-radius:50%;display:inline-block;transition:background-color 0.3s;cursor:pointer}.lido-dot.completed{background-color:grey}.lido-dot.current{background-color:green}.lido-dot:not(.completed):not(.current){background-color:#bbb}",Ao=So,Lo=class{constructor(i){He(this,i),this.NextContainerKey=d=>{d!=null&&d==this.currentContainerIndex||(localStorage.removeItem(We),localStorage.removeItem(ke),localStorage.removeItem(qt),localStorage.removeItem(ot),d!=null&&d<this.containers.length?(this.currentContainerIndex=d,tr(this.currentContainerIndex)):this.currentContainerIndex<this.containers.length-1?(this.currentContainerIndex++,tr(this.currentContainerIndex)):this.currentContainerIndex>=this.containers.length-1&&(this.showCompletionMessage=!0,qr(),this.currentContainerIndex=0,setTimeout(()=>{this.showCompletionMessage=!1},3e3)),this.containers=[...this.containers])},this.xmlData=void 0,this.initialIndex=0,this.canplay=!0,this.baseUrl="",this.height="",this.currentContainerIndex=this.initialIndex,this.showCompletionMessage=!1,this.containers=[]}componentWillLoad(){window.addEventListener(Jn,()=>{this.NextContainerKey()}),window.addEventListener("changeContainer",i=>{this.NextContainerKey(i.detail.index)}),this.parseXMLData(this.xmlData),window.addEventListener("beforeunload",()=>{localStorage.removeItem(We),localStorage.removeItem(ke),localStorage.removeItem(qt),localStorage.removeItem(ot)})}disconnectedCallback(){window.removeEventListener(Jn,()=>{this.NextContainerKey()}),window.removeEventListener("changeContainer",i=>{this.NextContainerKey(i.detail.index)})}parseXMLData(i){if(i){const g=new DOMParser().parseFromString(i,"text/xml").documentElement;this.parseContainers(g)}}onXmlDataChange(i){this.parseXMLData(i)}parseElement(i){const d=i.nodeName.toLowerCase(),h={};Array.from(i.attributes).forEach(S=>{h[S.name]=S.value});const g=Array.from(i.childNodes).map(S=>S.nodeType===1?this.parseElement(S):S.nodeType===3&&S.textContent.trim()!==""?S.textContent:null).filter(Boolean),y={"lido-container":K("lido-container",Object.assign({},h,{canplay:this.canplay,baseUrl:this.baseUrl,height:this.height}),g),"lido-col":K("lido-col",Object.assign({},h),g),"lido-trace":K("lido-trace",Object.assign({},h),g),"lido-image":K("lido-image",Object.assign({},h),g),"lido-row":K("lido-row",Object.assign({},h),g),"lido-text":K("lido-text",Object.assign({},h),g),"lido-pos":K("lido-pos",Object.assign({},h),g),"lido-shape":K("lido-shape",Object.assign({},h),g),"lido-wrap":K("lido-wrap",Object.assign({},h),g),"lido-random":K("lido-random",Object.assign({},h),g),"lido-avatar":K("lido-avatar",Object.assign({},h),g)};return y[d]?y[d]:(console.warn(`Unknown tag: ${d}`),null)}parseContainers(i){const d=[];i.querySelectorAll("lido-container").forEach(g=>{const y=this.parseElement(g);y&&d.push(y)}),this.containers=d}renderDots(){const i={pointerEvents:this.canplay?"none":""};return K("div",{id:"lido-dot-indicator",class:"lido-dot-container",style:i},this.containers.map((d,h)=>K("span",{class:`lido-dot ${h<this.currentContainerIndex?"completed":h===this.currentContainerIndex?"current":""}`,onClick:()=>this.jumpToContainer(h)})))}jumpToContainer(i){this.NextContainerKey(i)}render(){return console.log("ðŸš€ ~ LidoHome ~ render ~ this.containers:",this),this.xmlData?K(Ue,{index:this.currentContainerIndex,totalIndex:this.containers.length},K("div",{key:this.currentContainerIndex},this.containers[this.currentContainerIndex]),this.renderDots(),this.showCompletionMessage&&K("div",{class:"lido-snackbar"},"All containers have been displayed!")):K("div",null,"Please provide XML data.")}static get watchers(){return{xmlData:["onXmlDataChange"]}}};Lo.style=Co+(_o+Ao);const Eo=".lido-image{user-select:none;-webkit-user-drag:none;object-fit:contain;max-width:100%;max-height:100%;aspect-ratio:1 / 1;}.slice{background-repeat:no-repeat;background-position:center;background-size:100% 100%}",Io=Eo,Po=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.src=void 0,this.isSlice=void 0,this.sliceWidth="30px",this.style=void 0}componentDidLoad(){mt(this.el,this.type)}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:JSON.parse(Z(`${this.visible}`,i))?"flex":"none",alignItems:"center",justifyContent:"center",borderImageSource:this.isSlice==="true"?`url(${lt(this.src)})`:"none",borderImageSlice:this.isSlice==="true"?`${parseInt(this.sliceWidth)} fill`:"unset",borderImageRepeat:this.isSlice==="true"?"round":"unset",borderImageWidth:this.isSlice==="true"?`${this.sliceWidth}`:"unset",backgroundImage:this.isSlice==="true"?`url(${lt(this.src)})`:"none"}}render(){return this.isSlice==="true"?K(Ue,{class:"slice",id:this.id,type:this.type,tabIndex:this.tabIndex,onEntry:this.onEntry,style:this.style}):K(Ue,{type:this.type,tabindex:this.tabIndex,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,value:this.value,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("img",{class:"lido-image",src:lt(this.src),alt:"",style:this.style}))}get el(){return ct(this)}};Po.style=Io;const To=".lido-pos{top:var(--y, 0);left:var(--x, 0);height:var(--height, 100%);width:var(--width, 100%);background-color:var(--bgColor, #eeeeee);display:flex;justify-content:space-around;flex-direction:column;position:fixed}.lido-pos>*{position:absolute}",Ro=To,Mo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.style=void 0}componentDidLoad(){mt(this.el,this.type)}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:JSON.parse(Z(`${this.visible}`,i))?"block":"none"}}render(){return K(Ue,{key:"971edca73664a1bc06917ea4e07d559ffb2ead66",id:this.id,class:"lido-pos",type:this.type,tabindex:this.tabIndex,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,value:this.value,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"7c7de2dc271a6fd10c7b828c73afdbc397e35a75"}))}get el(){return ct(this)}};Mo.style=Ro;const Oo=".lido-random{display:flex;justify-content:space-between;align-items:center;position:absolute;}.lido-random>*{position:absolute}",ko=Oo,Fo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0}componentDidLoad(){this.el.querySelectorAll(".lido-random > *").forEach(d=>{const h=Math.random()*100,g=Math.random()*100;d.style.top=`${h}%`,d.style.left=`${g}%`})}render(){const i={height:this.height,width:this.width,top:this.y,left:this.x,display:this.visible?"block":"none",zIndex:this.z,backgroundColor:this.bgColor};return K(Ue,{key:"0611246d6b0091eebcad0ec0f2999d2b8e98c854",class:"lido-random",type:this.type,tabindex:this.tabIndex,value:this.value,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"b03397724ad9e902d82eecde3d2981b01e49b3b0"}))}get el(){return ct(this)}};Fo.style=ko;const Qo=class{constructor(i){He(this,i),this.xmlPath=void 0,this.initialIndex=0,this.canplay=!0,this.baseUrl="",this.xmlData=void 0}async componentWillLoad(){var i;const d=(i=this.xmlPath)!==null&&i!==void 0?i:this.baseUrl+"/index.xml";console.log("ðŸš€ ~ LidoRoot ~ componentWillLoad ~ this.baseUrl:",this.baseUrl),console.log("ðŸš€ ~ LidoRoot ~ componentWillLoad ~ this.xmlPath:",this.xmlPath),console.log("ðŸš€ ~ LidoRoot ~ componentWillLoad ~ xmlPath:",d);try{const h=d.startsWith("http")?d:rr(d),g=await fetch(h);if(!g.ok)throw new Error(`Failed to fetch XML data: ${g.statusText}`);const y=await g.text();this.xmlData=y}catch(h){console.error("Error fetching XML data:",h),this.xmlData=null}}render(){return this.xmlData===void 0?K("div",null,"Loading..."):this.xmlData===null?K("div",null,"Error loading XML data. Please check the path or URL."):K("lido-home",{initialIndex:this.initialIndex,canplay:this.canplay,xmlData:this.xmlData,baseUrl:this.baseUrl})}static get assetsDirs(){return["assets"]}},Do=".lido-row{display:flex;justify-content:space-around;align-items:center;}.lido-row>*{}",jo=Do,No=class{constructor(i){He(this,i),this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.childElementsLength=void 0,this.minLength=void 0,this.maxLength=void 0,this.direction=void 0,this.style={},this.display=void 0}componentDidLoad(){mt(this.el,this.type),Qn(this.el,this.minLength,this.maxLength,this.childElementsLength,"flex")}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:this.visible?this.display?Z(this.display,i):"flex":"none",flexDirection:this.direction?Z(this.direction,i):"row",gridTemplateColumns:this.display&&Z(this.display,i)==="grid"?"repeat(auto-fill, minmax(186px, auto))":void 0,gap:this.display&&Z(this.display,i)==="grid"?"20px":void 0}}render(){return K(Ue,{key:"ac41b0c6ed571e205f8d73297c3274343c8b91bb",class:"lido-row",type:this.type,tabindex:this.tabIndex,value:this.value,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"9c29e7ec9014fea4e647af2ce06bf1b9a17d3d0b"}))}get el(){return ct(this)}};No.style=jo;const Wo=".lido-shape{position:absolute;top:var(--y);left:var(--x);display:var(--display);z-index:var(--z)}.lido-rectangle{border-radius:0}.lido-circle{width:var(--width);height:var(--width);border-radius:50%;background-color:var(--bgColor)}.lido-ellipse{width:var(--width);height:var(--height);border-radius:50%;background-color:var(--bgColor)}.lido-triangle{width:var(--triangleWidth);height:var(--triangleHeight);background-color:var(--bgColor);clip-path:polygon(50% 0%, 100% 100%, 0% 100%)}.lido-rightTriangle{width:var(--triangleWidth);height:var(--triangleHeight);background-color:var(--bgColor);clip-path:polygon(100% 0%, 100% 100%, 0% 100%)}.lido-leftTriangle{width:var(--triangleWidth);height:var(--triangleHeight);background-color:var(--triangleBgColor);clip-path:polygon(0% 0%, 100% 100%, 0% 100%)}.lido-parallelogram{width:var(--paralleWidth);height:var(--paralleHeight);transform:skew(20deg)}.lido-star{width:var(--starWidth);height:var(--starHeight);background-color:var(--starBgColor);clip-path:polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)}.lido-pentagon{width:var(--pentagonWidth);height:var(--pentagonHeight);background-color:var(--pentagonBgColor);clip-path:polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%)}.lido-heptagon{width:var(--heptagonWidth);height:var(--heptagonHeight);background-color:var(--heptagonBgColor);clip-path:polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)}.lido-octagon{width:var(--octagonWidth);height:var(--octagonHeight);background-color:var(--octagonBgColor);clip-path:polygon(25% 0%, 75% 0%, 100% 25%, 100% 75%, 75% 100%, 25% 100%, 0% 75%, 0% 25%)}.lido-rhombus{width:var(--rhombusWidth);height:var(--rhombusHeight);background-color:var(--rhombusBgColor);clip-path:polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)}.lido-heart{height:var(--heartHeight);width:var(--heartWidth);border-image:radial-gradient(var(--heartBgColor) 69%, #0000 70%) 84.5%/50%;clip-path:polygon(-41% 0, 50% 91%, 141% 0)}",Bo=Wo,$o=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.shapeType=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0}componentDidLoad(){mt(this.el,this.type)}render(){const i={height:this.shapeType!=="polygon"?this.height:void 0,width:this.shapeType!=="polygon"?this.width:void 0,top:this.y,left:this.x,display:this.visible?"block":"none",zIndex:this.z,backgroundColor:this.shapeType!=="polygon"?this.bgColor:"transparent"};return K(Ue,{key:"b82bed547952d36b52d9f94f609aed1f7e7ab4cf",class:`lido-shape ${this.shapeType}`,value:this.value,type:this.type,tabindex:this.tabIndex,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry})}get el(){return ct(this)}};$o.style=Bo;const Uo=".lido-text{background-color:#fff;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);transition:background-color 0.3s ease;user-select:none;align-items:center;justify-content:center;text-align:center;border-radius:8px;color:#333;cursor:pointer}.lido-text:hover{background-color:#f0f0f0}",Ho=Uo,zo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.string=void 0,this.font=void 0,this.fontSize=void 0,this.fontColor=void 0,this.highlightWhileSpeaking=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.borderImage=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.style={}}componentDidLoad(){mt(this.el,this.type)}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=this.borderImage?lt(this.borderImage):"",d=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,d),width:Z(this.width,d),backgroundColor:Z(this.bgColor,d),top:Z(this.y,d),left:Z(this.x,d),zIndex:this.z,fontSize:Z(this.fontSize,d),fontFamily:this.font,color:Z(this.fontColor,d),display:JSON.parse(Z(`${this.visible}`,d))?"flex":"none",borderImage:`url(${i})`,borderImageSlice:i?"0 fill":""}}render(){return K(Ue,{key:"93f1191ac947e2f3de0e4bf33c3f0829e2c3b792",class:"lido-text",value:this.value,type:this.type,tabindex:this.tabIndex,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry,id:this.id,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden},this.string)}get el(){return ct(this)}};zo.style=Ho;const Xo=":host{display:block;position:relative}#lido-svgContainer{position:absolute;top:0;left:0;right:0;bottom:50px;display:flex;justify-content:center;align-items:center;overflow:hidden}svg{width:100%;height:100%;max-height:calc(100vh - 50px);touch-action:none}#lido-draggableCircle{cursor:pointer;fill:red;transition:fill 0.2s, r 0.2s}.lido-blindTracing{stroke:none !important}.lido-blindFreeTrace{stroke:none !important}.lido-hovered{cursor:grab;fill:darkred}#lido-controls{position:fixed;bottom:0;left:0;right:0;display:flex;justify-content:space-between;padding:10px;background-color:#f0f0f0;border-top:1px solid #ccc}button{padding:10px;font-size:16px}@media (max-width: 600px){button{padding:8px;font-size:14px}}.lido-trace-path-green{}",Yo=Xo,Vo=class{constructor(i){He(this,i),this.id=void 0,this.svgSource=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.tabIndex=void 0,this.mode=De.ShowFlow,this.fingerHintUrl="https://aeakbcdznktpsbrfsgys.supabase.co/storage/v1/object/public/template-assets/trace/finger.png",this.fileIndex=-1,this.isDragging=!1,this.activePointerId=null,this.idleTimer=null,this.fingerImg=null}async initializeSVG(){let i={fileIndex:-1,currentPathIndex:0,lastLength:0,totalPathLength:0,isDragging:!1,circle:null,paths:[],svg:null,proximityThreshold:100,freeTraceProximityThreshold:50,rafId:null,pointerMoveEvent:null,activePointerId:null,mode:this.mode,flowMarkers:[],freeTraceLines:[],currentFreePath:[],lastPointerPos:null};await this.loadAnotherSVG(i,!0)}componentWillLoad(){this.initializeSVG()}resetIdleTimer(i){this.idleTimer!==null&&(clearTimeout(this.idleTimer),this.idleTimer=null),this.idleTimer=window.setTimeout(()=>{this.showFingerHint(i)},3e3)}showFingerHint(i){var d;if(this.fingerImg)return;const h=i.paths[i.currentPathIndex];if(!h)return;const g=40,y=document.createElementNS("http://www.w3.org/2000/svg","image");y.setAttributeNS("http://www.w3.org/1999/xlink","href",lt(this.fingerHintUrl)),y.setAttribute("width",`${g}`),y.setAttribute("height",`${g}`),y.setAttribute("id","lido-finger-hint"),y.style.pointerEvents="none",y.style.opacity="0.8",y.setAttribute("x","0"),y.setAttribute("y","0");const S=document.createElementNS("http://www.w3.org/2000/svg","animateMotion");S.setAttribute("dur","2s"),S.setAttribute("repeatCount","indefinite");const _=document.createElementNS("http://www.w3.org/2000/svg","mpath");_.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${h.id}`),S.appendChild(_),y.appendChild(S),(d=i.svg)===null||d===void 0||d.appendChild(y),this.fingerImg=y}hideFingerHint(){this.fingerImg&&this.fingerImg.parentNode&&this.fingerImg.parentNode.removeChild(this.fingerImg),this.fingerImg=null}async fetchSVG(i){const d=await fetch(i);if(!d.ok)throw new Error(`Failed to fetch SVG (${i}): ${d.statusText}`);return await d.text()}calculateBoundingBox(i,d=22){let h=1/0,g=1/0,y=-1/0,S=-1/0;return i.forEach(_=>{const x=_.getTotalLength(),w=100;for(let R=0;R<=w;R++){const C=_.getPointAtLength(R/w*x);C.x<h&&(h=C.x),C.y<g&&(g=C.y),C.x>y&&(y=C.x),C.y>S&&(S=C.y)}}),h-=d,g-=d,y+=d,S+=d,{minX:h,minY:g,maxX:y,maxY:S}}insertSVG(i){const d=document.getElementById("lido-svgContainer");d.innerHTML=i;const h=d.querySelector("svg");h.removeAttribute("width"),h.removeAttribute("height");const g=h.querySelectorAll("path, line"),y=this.calculateBoundingBox(Array.from(g)),S=y.maxX-y.minX,_=y.maxY-y.minY;h.setAttribute("viewBox",`${y.minX} ${y.minY} ${S} ${_}`)}getSVGElement(){return document.getElementById("lido-svgContainer").querySelector("svg")}getPaths(i){return Array.from(i.querySelectorAll("path, line"))}createFlowMarkersForPath(i,d=10){var h;const y=i.getTotalLength()/(d+1),S=[];for(let _=1;_<=d;_++){const x=i.getPointAtLength(_*y),w=i.getPointAtLength((_+.5)*y),R=Math.atan2(w.y-x.y,w.x-x.x),C=document.createElementNS("http://www.w3.org/2000/svg","polygon");C.setAttribute("points","-5,-5 0,0 -5,5"),C.setAttribute("fill","blue"),C.setAttribute("transform",`translate(${x.x},${x.y}) rotate(${R*180/Math.PI})`),C.setAttribute("class","lido-flow-indicator"),S.push(C),(h=i.parentNode)===null||h===void 0||h.appendChild(C)}return S}updateFlowIndicators(i){i.svg.querySelectorAll(".lido-flow-indicator").forEach(h=>{i.mode===De.NoFlow?h.style.display="none":i.mode===De.ShowFlow&&(h.style.display="block")})}setupDrawingPath(i){i.paths.forEach((d,h)=>{const g=d.getTotalLength();d.setAttribute("id","lido-path-"+h);const y=d.cloneNode();y.style.opacity="100",y.style["stroke-opacity"]="100";const S=d.style["stroke-width"]||d.getAttribute("stroke-width");y.setAttribute("stroke-width",S),y.setAttribute("stroke-dasharray",g.toString()),y.setAttribute("stroke-dashoffset",g.toString()),d.parentNode.appendChild(y,d),d.setAttribute("class","lido-trace-path"),y.setAttribute("class","lido-trace-path-green"),d.greenPath=y,d.classList.add(i.mode),i.mode===De.BlindTracing||i.mode===De.BlindFreeTrace?d.setAttribute("stroke","none"):(d.setAttribute("stroke","#000"),d.setAttribute("stroke-width",S),d.setAttribute("fill","none"),d.setAttribute("stroke-dasharray",g.toString()),d.setAttribute("stroke-dashoffset","0")),h===i.currentPathIndex&&i.mode===De.ShowFlow&&(i.flowMarkers=this.createFlowMarkersForPath(d))}),i.totalPathLength=i.paths[i.currentPathIndex].getTotalLength()}setupDraggableCircle(i){var d;const h=i.paths[0].getPointAtLength(0),g=document.createElementNS("http://www.w3.org/2000/svg","circle"),y=i.paths[i.currentPathIndex].style["stroke-width"]||i.paths[i.currentPathIndex].getAttribute("stroke-width");g.setAttribute("id","lido-draggableCircle"),g.setAttribute("cx",h.x.toString()),g.setAttribute("cy",h.y.toString()),g.setAttribute("r",`calc(${y||10} / 2)`),g.setAttribute("fill","red"),(d=i.svg)===null||d===void 0||d.appendChild(g),i.circle=g,this.resetIdleTimer(i)}addEventListeners(i){var d,h,g,y;if(!i.circle||!i.paths||i.paths.length===0)return;i.circle.addEventListener("pointerdown",_=>{_.preventDefault();const x=this.getPointerPosition(_,i.svg),w={x:parseFloat(i.circle.getAttribute("cx")),y:parseFloat(i.circle.getAttribute("cy"))};this.getDistanceSquared(x,w)<=i.proximityThreshold*i.proximityThreshold&&(i.isDragging=!0,i.activePointerId=_.pointerId,i.circle.setPointerCapture(_.pointerId)),this.hideFingerHint(),this.resetIdleTimer(i)}),(d=i.svg)===null||d===void 0||d.addEventListener("pointermove",_=>{!i.isDragging||_.pointerId!==i.activePointerId||(i.pointerMoveEvent=_,i.rafId||(i.rafId=requestAnimationFrame(()=>{this.handlePointerMove(i),i.rafId=null})))});const S=_=>{_.pointerId===i.activePointerId&&(i.isDragging=!1,i.activePointerId=null,this.hideFingerHint(),this.resetIdleTimer(i))};(h=i.svg)===null||h===void 0||h.addEventListener("pointerup",S),(g=i.svg)===null||g===void 0||g.addEventListener("pointercancel",S),(y=i.svg)===null||y===void 0||y.addEventListener("contextmenu",_=>{_.preventDefault()})}handlePointerMove(i){var d,h,g,y;if(!i.isDragging||!i.circle||!i.paths||i.paths.length===0)return;this.hideFingerHint();const S=i.pointerMoveEvent,_=this.getPointerPosition(S,i.svg),x={x:parseFloat(i.circle.getAttribute("cx")),y:parseFloat(i.circle.getAttribute("cy"))},w=i.paths[i.currentPathIndex];if(!w){console.error("No valid path found at the current index");return}let R;if(i.mode===De.FreeTrace||i.mode===De.BlindFreeTrace?R=i.freeTraceProximityThreshold*i.freeTraceProximityThreshold:R=i.proximityThreshold*i.proximityThreshold,this.getDistanceSquared(_,x)>R)return;const E=this.getClosestPointOnPath(w,_);if(!(this.getDistanceSquared(_,E)>R)){if(i.mode===De.FreeTrace||i.mode===De.BlindFreeTrace){if(i.currentFreePath||(i.currentFreePath=[]),!i.currentFreePath[i.currentPathIndex]){const H=document.createElementNS("http://www.w3.org/2000/svg","path"),me=i.paths[i.currentPathIndex].style["stroke-width"]||i.paths[i.currentPathIndex].getAttribute("stroke-width");H.setAttribute("stroke-width",me),H.setAttribute("fill","none"),H.setAttribute("stroke-linecap","round"),H.setAttribute("stroke","lightgreen"),H.setAttribute("d",`M${_.x},${_.y}`),(d=i.svg)===null||d===void 0||d.appendChild(H),i.currentFreePath[i.currentPathIndex]=H,i.lastPointerPos=_}const c=i.lastPointerPos||_,U=i.currentFreePath[i.currentPathIndex].getAttribute("d"),re=(c.x+_.x)/2,de=(c.y+_.y)/2,pe=`${U} Q ${c.x},${c.y} ${re},${de}`;i.currentFreePath[i.currentPathIndex].setAttribute("d",pe),i.circle.setAttribute("cx",_.x.toString()),i.circle.setAttribute("cy",_.y.toString()),(h=i.svg)===null||h===void 0||h.appendChild(i.circle),i.lastPointerPos=_,w.getTotalLength()-E.length<5&&(this.moveToNextPath(i),i.currentFreePath[i.currentPathIndex]=null);return}i.isDragging&&E.length>=i.lastLength&&(i.lastLength=E.length,i.circle.setAttribute("cx",E.x.toString()),i.circle.setAttribute("cy",E.y.toString()),(g=i.svg)===null||g===void 0||g.appendChild(i.circle),(y=w.greenPath)===null||y===void 0||y.setAttribute("stroke-dashoffset",(i.totalPathLength-i.lastLength).toString())),i.totalPathLength-1-i.lastLength<5&&i.currentPathIndex<i.paths.length-1?this.moveToNextPath(i):i.totalPathLength-1-i.lastLength<5&&i.currentPathIndex===i.paths.length-1&&En()}}getPointerPosition(i,d){var h;const g=d.createSVGPoint();g.x=i.clientX,g.y=i.clientY;const y=(h=d.getScreenCTM())===null||h===void 0?void 0:h.inverse();return y?g.matrixTransform(y):{x:i.clientX,y:i.clientY}}getDistanceSquared(i,d){const h=i.x-d.x,g=i.y-d.y;return h*h+g*g}getClosestPointOnPath(i,d){const h=i.getTotalLength();let g={x:0,y:0,length:0},y=1/0;const S=20;let _={length:0},x=1/0;for(let E=0;E<=h;E+=S){const k=i.getPointAtLength(E),c=this.getDistanceSquared(d,k);c<x&&(x=c,_={x:k.x,y:k.y,length:E})}const w=2,R=Math.max(_.length-S,0),C=Math.min(_.length+S,h);for(let E=R;E<=C;E+=w){const k=i.getPointAtLength(E),c=this.getDistanceSquared(d,k);c<y&&(y=c,g={x:k.x,y:k.y,length:E})}return g}async loadAnotherSVG(i,d){i.isDragging=!1;try{i.svg&&this.cleanupPreviousSVG(i);const h=await this.fetchSVG(lt(this.svgSource));this.insertSVG(h),i.svg=this.getSVGElement(),(this.mode===De.BlindTracing||this.mode===De.BlindFreeTrace)&&i.svg.querySelectorAll("image").forEach(g=>{g.style.display="none"}),i.paths=this.getPaths(i.svg),this.setupDrawingPath(i),this.setupDraggableCircle(i),this.addEventListeners(i)}catch(h){console.error(`Error loading SVG (${this.svgSource}):`,h)}}cleanupPreviousSVG(i){var d,h;i.circle&&((d=i.svg)===null||d===void 0||d.removeChild(i.circle),i.circle=null),((h=i.svg)===null||h===void 0?void 0:h.querySelectorAll(".lido-flow-indicator")).forEach(y=>{y.remove()}),i.currentPathIndex=0,i.lastLength=0,i.totalPathLength=i.paths[0].getTotalLength(),this.hideFingerHint(),this.resetIdleTimer(i)}moveToNextPath(i){var d,h;if(i.isDragging=!1,i.currentPathIndex++,i.lastLength=0,this.hideFingerHint(),i.currentPathIndex>=i.paths.length){En();return}const g=i.paths[i.currentPathIndex];if(!g){console.error("No valid path found at the next index");return}i.totalPathLength=g.getTotalLength();const y=g.getPointAtLength(0);(d=i.circle)===null||d===void 0||d.setAttribute("cx",y.x.toString()),(h=i.circle)===null||h===void 0||h.setAttribute("cy",y.y.toString()),i.mode===De.ShowFlow&&(i.flowMarkers=this.createFlowMarkersForPath(g)),this.resetIdleTimer(i)}render(){const i={height:this.height,width:this.width,top:this.y,left:this.x,zIndex:this.z,position:"absolute"};return K(Ue,{key:"c5735c155dcfaedc05103e10e394b34bc34d3551",class:"lido-trace",id:this.id,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,tabindex:this.tabIndex},K("div",{key:"cf01cb544e2aa6622f8e9fd5eac50d0cc7ed4060",id:"lido-svgContainer"}))}static get assetsDirs(){return["svg","images"]}static get watchers(){return{svgSource:["initializeSVG"],mode:["initializeSVG"]}}};Vo.style=Yo;const Go=".lido-wrap{display:grid;grid-gap:10px;grid-template-columns:repeat(auto-fill, minmax(186px, auto))}.lido-wrap>*{padding:10px;background-color:var(--child-bg-color, #f0f0f0);box-sizing:border-box}",qo=Go,Jo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.childElementsLength=void 0,this.minLength=void 0,this.maxLength=void 0,this.style=void 0}componentDidLoad(){mt(this.el,this.type),Qn(this.el,this.minLength,this.maxLength,this.childElementsLength,"grid")}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:JSON.parse(Z(`${this.visible}`,i))?"grid":"none"}}render(){return K(Ue,{key:"c4e66e5d75e598fd237a1829b2153090ba34993b",class:"lido-wrap",value:this.value,type:this.type,tabindex:this.tabIndex,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"60a3c125bb0ab2ad8279968d8ef3579c9d2a8a89"}))}get el(){return ct(this)}};Jo.style=qo;export{fo as lido_avatar,vo as lido_col,bo as lido_container,Lo as lido_home,Po as lido_image,Mo as lido_pos,Fo as lido_random,Qo as lido_root,No as lido_row,$o as lido_shape,zo as lido_text,Vo as lido_trace,Jo as lido_wrap};
