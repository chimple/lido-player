const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./lido-avatar_22.entry-Dxl_d7bR.js","./iframe-riog4a0U.js"])))=>i.map(i=>d[i]);
var Xe=Object.defineProperty;var Je=(e,t,n)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var j=(e,t,n)=>Je(e,typeof t!="symbol"?t+"":t,n);import{_ as be}from"./iframe-riog4a0U.js";const Qe="lido-player",A={hotModuleReplacement:!1,hydratedSelectorName:"hydrated",lazyLoad:!0,propChangeCallback:!0,slotRelocation:!0,state:!0,updatable:!0},Ze=()=>{},me=`@import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400..800&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Baloo+Bhai+2:wght@400..800&display=swap'); body{overflow:hidden;background-position:center;background-size:cover;background-repeat:no-repeat;height:100vh}*{user-select:none}.lido-disable-check-button{pointer-events:none;background-color:#9393935c !important;color:white}.lido-element-selected{border:2px solid;background-color:#ffdf7d !important}.diagonal-target,.diagonal-drop *{transform:scale(0.8) !important;opacity:1 !important}.cloned-element{display:flex !important;position:absolute !important;filter:grayscale(100%);pointer-events:none}.removeShadow{box-shadow:0px 0px 0px 0px #ff8900 !important}.highlight-element{border:2px solid white;box-shadow:rgb(243, 77, 8) 0px 0px 40px !important}.drop-element.empty{border:4px dashed #f34d08 !important}.drop-element.filled{border:'none' !important}.drag-element{box-shadow:0px 15px 11px rgba(43, 0, 0, 0.3) !important}.drag-element.dropped{box-shadow:none !important}.click-element{background-color:var(--btn-bg-color, rgba(255, 172, 76, 1)) !important;box-shadow:var(--btn-shadow-px) var(--btn-shadow-color, rgba(225, 121, 76, 1)) !important;cursor:pointer;transition:box-shadow 0.1s ease-out, transform 0.2s ease-out;}.click-element:active{box-shadow:0px 0px 0px var(--btn-shadow-color, rgba(225, 121, 76, 1)) !important;transform:translateY(var(--btn-active));}.click-element:focus{outline:2px solid dodgerblue;outline-offset:3px}.after-drop-popup-container{width:200%;height:200%;background-color:rgba(0, 0, 0, 0.8);position:absolute;display:flex;flex-direction:row-reverse;align-items:center;justify-content:center !important;gap:80px}.after-drop-popup-drag-element{scale:1.5;border-radius:8px;transform:none !important;position:unset !important}.after-drop-popup-drop-element{scale:1.5;border:unset;border-radius:8px;transform:none !important;position:unset !important}@keyframes zoomFadeIn{0%{transform:scale(0.6);opacity:0}100%{transform:scale(1);opacity:1}}.zoom-fade-in{animation:zoomFadeIn 0.8s ease-out forwards}@keyframes zoomFadeOut{0%{transform:scale(1);opacity:1}100%{transform:scale(0.6);opacity:0}}.zoom-fade-out{animation:zoomFadeOut 0.8s ease-in forwards}.slide-numbers{width:70px;height:70px;border:1px solid #f57139;background-color:white;font-weight:500;color:#f57139;font-size:44px;border-radius:40px;display:flex;align-items:center;justify-content:center;font-family:'Baloo Bhai 2', serif}.slide-numbers-bottom{position:absolute;display:flex;justify-content:space-around;align-items:center;bottom:-25px;width:100%;height:50px}.slide-numbers-left{position:absolute;display:flex;flex-direction:column;justify-content:space-around;height:100%;width:50px;left:-25px;bottom:0px}.lido-speak-icon{width:56px;height:56px;position:absolute;top:-25px;right:-25px;z-index:10;background-image:url("https://aeakbcdznktpsbrfsgys.supabase.co/storage/v1/object/public/template-assets/template/audioIcon.png");background-color:white;border:4px solid #F34D08;border-radius:16px;box-shadow:0px 4px 0px 0px #F34D08;background-size:contain;background-repeat:no-repeat;cursor:pointer}.lido-speak-icon:active{transform:translateY(8px);box-shadow:0px 0px 0px 0px !important}.lido-strong-shake{animation:strongShake 0.3s ease}.lido-scaled-shake{animation:scaledShake 0.6s ease-in-out}.lido-horizontal-shake{animation:horizontalShake 0.6s ease-in-out;border-radius:20px}.lido-vertical-shake{animation:verticalShake 0.6s ease-in-out;border-radius:20px}.lido-diagonal-shake{animation:diagonalShake 0.5s ease-in-out;border-radius:20px;will-change:transform}.lido-glow{animation:glowPulse 1s infinite alternate;transition:opacity 0.5s ease-in-out}.lido-box-highlight{animation:topToPlace 0.3s linear}.lido-display-hiddenvalue{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:80px;font-weight:1000;color:brown;-webkit-text-stroke:2px white;font-family:'Baloo Bhai 2', sans-serif;pointer-events:none}.lido-image-colorize{position:relative;display:inline-block}.lido-image-colorize::after{content:'';position:absolute;inset:0;background:var(--tint-color);mix-blend-mode:multiply;opacity:0.8;pointer-events:none;mask-image:var(--mask-url);mask-size:cover;mask-repeat:no-repeat;mask-position:center}.lido-tts-highlight-overlay{position:fixed;pointer-events:none;z-index:9999;background:linear-gradient(
    180deg,
    rgba(255, 235, 59, 0.95),
    rgba(255, 214, 0, 0.95)
  );border-radius:6px;box-shadow:0 2px 6px rgba(0, 0, 0, 0.18),
    inset 0 -1px 0 rgba(255, 255, 255, 0.25);transition:left 55ms linear,
    top 55ms linear,
    width 55ms ease-out,
    height 55ms ease-out,
    opacity 80ms ease-out;opacity:0.95;will-change:transform, width, height}`;var Ve=(e,t)=>{var n;const o=t.$cmpMeta$;Object.entries((n=o.$members$)!=null?n:{}).map(([s,[a]])=>{if(a&31||a&32){const r=e[s],l=et(Object.getPrototypeOf(e),s)||Object.getOwnPropertyDescriptor(e,s);l&&Object.defineProperty(e,s,{get(){return l.get.call(this)},set(c){l.set.call(this,c)},configurable:!0,enumerable:!0}),e[s]=t.$instanceValues$.has(s)?t.$instanceValues$.get(s):r}})};function et(e,t){for(;e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n!=null&&n.get)return n;e=Object.getPrototypeOf(e)}}var k=e=>{if(e.__stencil__getHostRef)return e.__stencil__getHostRef()},an=(e,t)=>{t&&(e.__stencil__getHostRef=()=>t,t.$lazyInstance$=e,t.$cmpMeta$.$flags$&512&&A.state&&Ve(e,t))},tt=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map,$serializerValues$:new Map};n.$onInstancePromise$=new Promise(i=>n.$onInstanceResolve$=i),n.$onReadyPromise$=new Promise(i=>n.$onReadyResolve$=i),e["s-p"]=[],e["s-rc"]=[],n.$fetchedCbList$=[];const o=n;return e.__stencil__getHostRef=()=>o,o},ve=(e,t)=>t in e,O=(e,t)=>(0,console.error)(e,t),Q=new Map,nt=(e,t,n)=>{const o=e.$tagName$.replace(/-/g,"_"),i=e.$lazyBundleId$;if(!i)return;const s=Q.get(i);if(s)return s[o];{const a=r=>(Q.set(i,r),r[o]);switch(i){case"lido-avatar_22":return be(()=>import("./lido-avatar_22.entry-Dxl_d7bR.js"),__vite__mapDeps([0,1]),import.meta.url).then(a,O)}}return be(()=>import(`./${i}.entry.js`),[],import.meta.url).then(a=>(Q.set(i,a),a[o]),a=>{O(a,t.$hostElement$)})},G=new Map,ot="{visibility:hidden}.hydrated{visibility:inherit}",Oe="slot-fb{display:contents}slot-fb[hidden]{display:none}",xe="http://www.w3.org/1999/xlink",$=typeof window<"u"?window:{},b={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,o)=>e.addEventListener(t,n,o),rel:(e,t,n,o)=>e.removeEventListener(t,n,o),ce:(e,t)=>new CustomEvent(e,t)},it=e=>Promise.resolve(e),F=(()=>{try{return $.document.adoptedStyleSheets?(new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"):!1}catch{}return!1})(),te=F?!!$.document&&Object.getOwnPropertyDescriptor($.document.adoptedStyleSheets,"length").writable:!1,ne=!1,we=[],Ae=[],st=(e,t)=>n=>{e.push(n),ne||(ne=!0,b.$flags$&4?ue(oe):b.raf(oe))},Se=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){O(n)}e.length=0},oe=()=>{Se(we),Se(Ae),(ne=we.length>0)&&b.raf(oe)},ue=e=>it().then(e),rt=st(Ae),ln=e=>{const t=new URL(e,b.$resourcesUrl$);return t.origin!==$.location.origin?t.href:t.pathname};function at(e){if(!F)return;const t=new CSSStyleSheet;return t.replaceSync(e),t}var W;function lt(e){var t;const n={mode:"open"},o=this.attachShadow(n);if(W===void 0&&(W=(t=at(me))!=null?t:null),W)te?o.adoptedStyleSheets.push(W):o.adoptedStyleSheets=[...o.adoptedStyleSheets,W];else if(!F){const i=document.createElement("style");i.innerHTML=me,o.prepend(i)}}var Re=e=>{const t=ie(e,"childNodes");e.tagName&&e.tagName.includes("-")&&e["s-cr"]&&e.tagName!=="SLOT-FB"&&pe(t,e.tagName).forEach(o=>{o.nodeType===1&&o.tagName==="SLOT-FB"&&(dt(o,H(o),!1).length?o.hidden=!0:o.hidden=!1)});let n=0;for(n=0;n<t.length;n++){const o=t[n];o.nodeType===1&&ie(o,"childNodes").length&&Re(o)}},ct=e=>{const t=[];for(let n=0;n<e.length;n++){const o=e[n]["s-nr"]||void 0;o&&o.isConnected&&t.push(o)}return t};function pe(e,t,n){let o=0,i=[],s;for(;o<e.length;o++){if(s=e[o],s["s-sr"]&&(!t||s["s-hn"]===t)&&(n===void 0||H(s)===n)&&(i.push(s),typeof n<"u"))return i;i=[...i,...pe(s.childNodes,t,n)]}return i}var dt=(e,t,n=!0)=>{const o=[];(n&&e["s-sr"]||!e["s-sr"])&&o.push(e);let i=e;for(;i=i.nextSibling;)H(i)===t&&(n||!i["s-sr"])&&o.push(i);return o},ke=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",H=e=>typeof e["s-sn"]=="string"?e["s-sn"]:e.nodeType===1&&e.getAttribute("slot")||void 0;function ht(e){if(e.assignedElements||e.assignedNodes||!e["s-sr"])return;const t=n=>(function(o){const i=[],s=this["s-sn"];o!=null&&o.flatten&&console.error(`
          Flattening is not supported for Stencil non-shadow slots.
          You can use \`.childNodes\` to nested slot fallback content.
          If you have a particular use case, please open an issue on the Stencil repo.
        `);const a=this["s-cr"].parentElement;return(a.__childNodes?a.childNodes:ct(a.childNodes)).forEach(l=>{s===H(l)&&i.push(l)}),n?i.filter(l=>l.nodeType===1):i}).bind(e);e.assignedElements=t(!0),e.assignedNodes=t(!1)}function ft(e){e.dispatchEvent(new CustomEvent("slotchange",{bubbles:!1,cancelable:!1,composed:!1}))}function ut(e,t){var n;if(t=t||((n=e["s-ol"])==null?void 0:n.parentElement),!t)return{slotNode:null,slotName:""};const o=e["s-sn"]=H(e)||"",i=ie(t,"childNodes");return{slotNode:pe(i,t.tagName,o)[0],slotName:o}}function ie(e,t){if("__"+t in e){const n=e["__"+t];return typeof n!="function"?n:n.bind(e)}else return typeof e[t]!="function"?e[t]:e[t].bind(e)}var L=(e,t="")=>()=>{},pt=(e,t)=>()=>{};function Pe(e){var t,n,o;return(o=(n=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?o:void 0}var z=new WeakMap,gt=(e,t,n)=>{let o=G.get(e);F&&n?(o=o||new CSSStyleSheet,typeof o=="string"?o=t:o.replaceSync(t)):o=t,G.set(e,o)},$t=(e,t,n)=>{var o,i,s;const a=Ue(t),r=G.get(a);if(!$.document)return a;if(e=e.nodeType===11?e:$.document,r)if(typeof r=="string"){e=e.head||e;let l=z.get(e),c;if(l||z.set(e,l=new Set),!l.has(a)){c=$.document.createElement("style"),c.textContent=r;const u=(o=b.$nonce$)!=null?o:Pe($.document);if(u!=null&&c.setAttribute("nonce",u),!(t.$flags$&1))if(e.nodeName==="HEAD"){const h=e.querySelectorAll("link[rel=preconnect]"),d=h.length>0?h[h.length-1].nextSibling:e.querySelector("style");e.insertBefore(c,(d==null?void 0:d.parentNode)===e?d:null)}else if("host"in e)if(F){const h=(i=e.defaultView)!=null?i:e.ownerDocument.defaultView,d=new h.CSSStyleSheet;d.replaceSync(r),te?e.adoptedStyleSheets.unshift(d):e.adoptedStyleSheets=[d,...e.adoptedStyleSheets]}else{const h=e.querySelector("style");h?h.textContent=r+h.textContent:e.prepend(c)}else e.append(c);t.$flags$&1&&e.insertBefore(c,null),t.$flags$&4&&(c.textContent+=Oe),l&&l.add(a)}}else{let l=z.get(e);if(l||z.set(e,l=new Set),!l.has(a)){const c=(s=e.defaultView)!=null?s:e.ownerDocument.defaultView;let u;if(r.constructor===c.CSSStyleSheet)u=r;else{u=new c.CSSStyleSheet;for(let h=0;h<r.cssRules.length;h++)u.insertRule(r.cssRules[h].cssText,h)}te?e.adoptedStyleSheets.push(u):e.adoptedStyleSheets=[...e.adoptedStyleSheets,u],l.add(a)}}return a},yt=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,o=t.$flags$,i=L("attachStyles",t.$tagName$),s=$t(n.shadowRoot?n.shadowRoot:n.getRootNode(),t);o&10&&(n["s-sc"]=s,n.classList.add(s+"-h")),i()},Ue=(e,t)=>"sc-"+e.$tagName$,ge=e=>(e=typeof e,e==="object"||e==="function"),bt=(e,t,...n)=>{typeof e=="string"&&(e=e);let o=null,i=null,s=null,a=!1,r=!1;const l=[],c=h=>{for(let d=0;d<h.length;d++)o=h[d],Array.isArray(o)?c(o):o!=null&&typeof o!="boolean"&&((a=typeof e!="function"&&!ge(o))&&(o=String(o)),a&&r?l[l.length-1].$text$+=o:l.push(a?se(null,o):o),r=a)};if(c(n),t){t.key&&(i=t.key),t.name&&(s=t.name);{const h=t.className||t.class;h&&(t.class=typeof h!="object"?h:Object.keys(h).filter(d=>h[d]).join(" "))}}const u=se(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=i,u.$name$=s,u},se=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t??null,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},mt={},vt=e=>e&&e.$tag$===mt,re=(e,t,n)=>e!=null&&!ge(e)?t&4?e==="false"?!1:e===""||!!e:t&2?typeof e=="string"?parseFloat(e):typeof e=="number"?e:NaN:t&1?String(e):e:e,xt=e=>{var t;return(t=k(e))==null?void 0:t.$hostElement$},cn=(e,t,n)=>{const o=xt(e);return{emit:i=>We(o,t,{bubbles:!0,composed:!0,cancelable:!0,detail:i})}},We=(e,t,n)=>{const o=b.ce(t,n);return e.dispatchEvent(o),o},Ee=(e,t,n,o,i,s,a)=>{if(n===o)return;let r=ve(e,t),l=t.toLowerCase();if(t==="class"){const c=e.classList,u=Ce(n);let h=Ce(o);c.remove(...u.filter(d=>d&&!h.includes(d))),c.add(...h.filter(d=>d&&!u.includes(d)))}else if(t==="style"){for(const c in n)(!o||o[c]==null)&&(c.includes("-")?e.style.removeProperty(c):e.style[c]="");for(const c in o)(!n||o[c]!==n[c])&&(c.includes("-")?e.style.setProperty(c,o[c]):e.style[c]=o[c])}else if(t!=="key")if(t==="ref")o&&Et(o,e);else if(!r&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):ve($,l)?t=l.slice(2):t=l[2]+t.slice(3),n||o){const c=t.endsWith(Be);t=t.replace(St,""),n&&b.rel(e,t,n,c),o&&b.ael(e,t,o,c)}}else if(t[0]==="a"&&t.startsWith("attr:")){const c=t.slice(5);let u;{const h=k(e);if(h&&h.$cmpMeta$&&h.$cmpMeta$.$members$){const d=h.$cmpMeta$.$members$[c];d&&d[1]&&(u=d[1])}}u||(u=c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),o==null||o===!1?(o!==!1||e.getAttribute(u)==="")&&e.removeAttribute(u):e.setAttribute(u,o===!0?"":o);return}else if(t[0]==="p"&&t.startsWith("prop:")){const c=t.slice(5);try{e[c]=o}catch{}return}else{const c=ge(o);if(r||c&&o!==null)try{if(e.tagName.includes("-"))e[t]!==o&&(e[t]=o);else{const h=o??"";t==="list"?r=!1:(n==null||e[t]!==h)&&(typeof e.__lookupSetter__(t)=="function"?e[t]=h:e.setAttribute(t,h))}}catch{}let u=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(t=l,u=!0),o==null||o===!1?(o!==!1||e.getAttribute(t)==="")&&(u?e.removeAttributeNS(xe,t):e.removeAttribute(t)):(!r||s&4||i)&&!c&&e.nodeType===1&&(o=o===!0?"":o,u?e.setAttributeNS(xe,t,o):e.setAttribute(t,o))}},wt=/\s/,Ce=e=>(typeof e=="object"&&e&&"baseVal"in e&&(e=e.baseVal),!e||typeof e!="string"?[]:e.split(wt)),Be="Capture",St=new RegExp(Be+"$"),ae=(e,t,n,o)=>{const i=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||{},a=t.$attrs$||{};for(const r of Ie(Object.keys(s)))r in a||Ee(i,r,s[r],void 0,n,t.$flags$);for(const r of Ie(Object.keys(a)))Ee(i,r,s[r],a[r],n,t.$flags$)};function Ie(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var le,R,B=!1,N=!1,J=!1,ce=!1,de=[],he=[],K=(e,t,n)=>{var o;const i=t.$children$[n];let s=0,a,r,l;if(B||(J=!0,i.$tag$==="slot"&&(i.$flags$|=i.$children$?2:1)),i.$text$!=null)a=i.$elm$=$.document.createTextNode(i.$text$);else if(i.$flags$&1)a=i.$elm$=$.document.createTextNode(""),ae(null,i,ce);else{if(!$.document)throw new Error("You are trying to render a Stencil component in an environment that doesn't support the DOM.");if(a=i.$elm$=$.document.createElement(!B&&A.slotRelocation&&i.$flags$&2?"slot-fb":i.$tag$),ae(null,i,ce),i.$children$){const c=i.$tag$==="template"?a.content:a;for(s=0;s<i.$children$.length;++s)r=K(e,i,s),r&&c.appendChild(r)}}return a["s-hn"]=R,i.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=le,a["s-sn"]=i.$name$||"",a["s-rf"]=(o=i.$attrs$)==null?void 0:o.ref,ht(a),l=e&&e.$children$&&e.$children$[n],l&&l.$tag$===i.$tag$&&e.$elm$&&De(e.$elm$)),a},De=e=>{b.$flags$|=1;const t=e.closest(R.toLowerCase());if(t!=null){const n=Array.from(t.__childNodes||t.childNodes).find(i=>i["s-cr"]),o=Array.from(e.__childNodes||e.childNodes);for(const i of n?o.reverse():o)i["s-sh"]!=null&&(E(t,i,n??null),i["s-sh"]=void 0,J=!0)}b.$flags$&=-2},Y=(e,t)=>{b.$flags$|=1;const n=Array.from(e.__childNodes||e.childNodes);if(e["s-sr"]){let o=e;for(;o=o.nextSibling;)o&&o["s-sn"]===e["s-sn"]&&o["s-sh"]===R&&n.push(o)}for(let o=n.length-1;o>=0;o--){const i=n[o];i["s-hn"]!==R&&i["s-ol"]&&(E(D(i).parentNode,i,D(i)),i["s-ol"].remove(),i["s-ol"]=void 0,i["s-sh"]=void 0,J=!0),t&&Y(i,t)}b.$flags$&=-2},Fe=(e,t,n,o,i,s)=>{let a=e["s-cr"]&&e["s-cr"].parentNode||e,r;for(a.shadowRoot&&a.tagName===R&&(a=a.shadowRoot),n.$tag$==="template"&&(a=a.content);i<=s;++i)o[i]&&(r=K(null,n,i),r&&(o[i].$elm$=r,E(a,r,D(t))))},He=(e,t,n)=>{for(let o=t;o<=n;++o){const i=e[o];if(i){const s=i.$elm$;Me(i),s&&(N=!0,s["s-ol"]?s["s-ol"].remove():Y(s,!0),s.remove())}}},kt=(e,t,n,o,i=!1)=>{let s=0,a=0,r=0,l=0,c=t.length-1,u=t[0],h=t[c],d=o.length-1,p=o[0],f=o[d],g,m;const w=n.$tag$==="template"?e.content:e;for(;s<=c&&a<=d;)if(u==null)u=t[++s];else if(h==null)h=t[--c];else if(p==null)p=o[++a];else if(f==null)f=o[--d];else if(M(u,p,i))P(u,p,i),u=t[++s],p=o[++a];else if(M(h,f,i))P(h,f,i),h=t[--c],f=o[--d];else if(M(u,f,i))(u.$tag$==="slot"||f.$tag$==="slot")&&Y(u.$elm$.parentNode,!1),P(u,f,i),E(w,u.$elm$,h.$elm$.nextSibling),u=t[++s],f=o[--d];else if(M(h,p,i))(u.$tag$==="slot"||f.$tag$==="slot")&&Y(h.$elm$.parentNode,!1),P(h,p,i),E(w,h.$elm$,u.$elm$),h=t[--c],p=o[++a];else{for(r=-1,l=s;l<=c;++l)if(t[l]&&t[l].$key$!==null&&t[l].$key$===p.$key$){r=l;break}r>=0?(m=t[r],m.$tag$!==p.$tag$?g=K(t&&t[a],n,r):(P(m,p,i),t[r]=void 0,g=m.$elm$),p=o[++a]):(g=K(t&&t[a],n,a),p=o[++a]),g&&E(D(u.$elm$).parentNode,g,D(u.$elm$))}s>c?Fe(e,o[d+1]==null?null:o[d+1].$elm$,n,o,a,d):a>d&&He(t,s,c)},M=(e,t,n=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:n?(n&&!e.$key$&&t.$key$&&(e.$key$=t.$key$),!0):e.$key$===t.$key$:!1,D=e=>e&&e["s-ol"]||e,P=(e,t,n=!1)=>{const o=t.$elm$=e.$elm$,i=e.$children$,s=t.$children$,a=t.$tag$,r=t.$text$;let l;r==null?(a==="slot"&&!B&&e.$name$!==t.$name$&&(t.$elm$["s-sn"]=t.$name$||"",De(t.$elm$.parentElement)),ae(e,t,ce),i!==null&&s!==null?kt(o,i,t,s,n):s!==null?(e.$text$!==null&&(o.textContent=""),Fe(o,null,t,s,0,s.length-1)):!n&&A.updatable&&i!==null&&He(i,0,i.length-1)):(l=o["s-cr"])?l.parentNode.textContent=r:e.$text$!==r&&(o.data=r)},I=[],je=e=>{let t,n,o;const i=e.__childNodes||e.childNodes;for(const s of i){if(s["s-sr"]&&(t=s["s-cr"])&&t.parentNode){n=t.parentNode.__childNodes||t.parentNode.childNodes;const a=s["s-sn"];for(o=n.length-1;o>=0;o--)if(t=n[o],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==s["s-hn"]&&(!t["s-sh"]||t["s-sh"]!==s["s-hn"]))if(ke(t,a)){let r=I.find(l=>l.$nodeToRelocate$===t);N=!0,t["s-sn"]=t["s-sn"]||a,r?(r.$nodeToRelocate$["s-sh"]=s["s-hn"],r.$slotRefNode$=s):(t["s-sh"]=s["s-hn"],I.push({$slotRefNode$:s,$nodeToRelocate$:t})),t["s-sr"]&&I.map(l=>{ke(l.$nodeToRelocate$,t["s-sn"])&&(r=I.find(c=>c.$nodeToRelocate$===t),r&&!l.$slotRefNode$&&(l.$slotRefNode$=r.$slotRefNode$))})}else I.some(r=>r.$nodeToRelocate$===t)||I.push({$nodeToRelocate$:t})}s.nodeType===1&&je(s)}},Me=e=>{e.$attrs$&&e.$attrs$.ref&&de.push(()=>e.$attrs$.ref(null)),e.$children$&&e.$children$.map(Me)},Et=(e,t)=>{he.push(()=>e(t))},Ct=()=>{de.forEach(e=>e()),de.length=0,he.forEach(e=>e()),he.length=0},E=(e,t,n,o)=>{if(typeof t["s-sn"]=="string"){e.insertBefore(t,n);const{slotNode:i}=ut(t);return i&&!o&&ft(i),t}return e.__insertBefore?e.__insertBefore(t,n):e==null?void 0:e.insertBefore(t,n)},It=(e,t,n=!1)=>{var o,i,s,a,r;const l=e.$hostElement$,c=e.$cmpMeta$,u=e.$vnode$||se(null,null),d=vt(t)?t:bt(null,null,t);if(R=l.tagName,c.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},c.$attrsToReflect$.forEach(([p,f])=>{d.$attrs$[f]=l[p]})),n&&d.$attrs$)for(const p of Object.keys(d.$attrs$))l.hasAttribute(p)&&!["key","ref","style","class"].includes(p)&&(d.$attrs$[p]=l[p]);d.$tag$=null,d.$flags$|=4,e.$vnode$=d,d.$elm$=u.$elm$=l.shadowRoot||l,B=!!(c.$flags$&1)&&!(c.$flags$&128),le=l["s-cr"],N=!1,P(u,d,n);{if(b.$flags$|=1,J){je(d.$elm$);for(const p of I){const f=p.$nodeToRelocate$;if(!f["s-ol"]&&$.document){const g=$.document.createTextNode("");g["s-nr"]=f,E(f.parentNode,f["s-ol"]=g,f,n)}}for(const p of I){const f=p.$nodeToRelocate$,g=p.$slotRefNode$;if(f.nodeType===1&&n&&(f["s-ih"]=(o=f.hidden)!=null?o:!1),g){const m=g.parentNode;let w=g.nextSibling;if(w&&w.nodeType===1){let y=(i=f["s-ol"])==null?void 0:i.previousSibling;for(;y;){let x=(s=y["s-nr"])!=null?s:null;if(x&&x["s-sn"]===f["s-sn"]&&m===(x.__parentNode||x.parentNode)){for(x=x.nextSibling;x===f||x!=null&&x["s-sr"];)x=x==null?void 0:x.nextSibling;if(!x||!x["s-nr"]){w=x;break}}y=y.previousSibling}}const C=f.__parentNode||f.parentNode,v=f.__nextSibling||f.nextSibling;if((!w&&m!==C||v!==w)&&f!==w){if(E(m,f,w,n),f.nodeType===8&&f.nodeValue.startsWith("s-nt-")){const y=$.document.createTextNode(f.nodeValue.replace(/^s-nt-/,""));y["s-hn"]=f["s-hn"],y["s-sn"]=f["s-sn"],y["s-sh"]=f["s-sh"],y["s-sr"]=f["s-sr"],y["s-ol"]=f["s-ol"],y["s-ol"]["s-nr"]=y,E(f.parentNode,y,f,n),f.parentNode.removeChild(f)}f.nodeType===1&&f.tagName!=="SLOT-FB"&&(f.hidden=(a=f["s-ih"])!=null?a:!1)}f&&typeof g["s-rf"]=="function"&&g["s-rf"](g)}else f.nodeType===1&&(f.hidden=!0)}}N&&Re(d.$elm$),b.$flags$&=-2,I.length=0}if(!B&&!(c.$flags$&1)&&l["s-cr"]){const p=d.$elm$.__childNodes||d.$elm$.childNodes;for(const f of p)if(f["s-hn"]!==R&&!f["s-sh"]){if(n&&f["s-ih"]==null&&(f["s-ih"]=(r=f.hidden)!=null?r:!1),f.nodeType===1)f.hidden=!0;else if(f.nodeType===3&&f.nodeValue.trim()){const g=$.document.createComment("s-nt-"+f.nodeValue);g["s-sn"]=f["s-sn"],E(f.parentNode,g,f,n),f.parentNode.removeChild(f)}}}le=void 0,Ct()},qe=(e,t)=>{if(t&&!e.$onRenderResolve$&&t["s-p"]){const n=t["s-p"].push(new Promise(o=>e.$onRenderResolve$=()=>{t["s-p"].splice(n-1,1),o()}))}},$e=(e,t)=>{if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}qe(e,e.$ancestorComponent$);const n=()=>Tt(e,t);if(t){queueMicrotask(()=>{n()});return}return rt(n)},Tt=(e,t)=>{const n=e.$hostElement$,o=L("scheduleUpdate",e.$cmpMeta$.$tagName$),i=e.$lazyInstance$;if(!i)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let s;return t?(e.$deferredConnectedCallback$&&(e.$deferredConnectedCallback$=!1,T(i,"connectedCallback",void 0,n)),e.$fetchedCbList$.length&&e.$fetchedCbList$.forEach(a=>a(n)),s=T(i,"componentWillLoad",void 0,n)):s=T(i,"componentWillUpdate",void 0,n),s=Te(s,()=>T(i,"componentWillRender",void 0,n)),o(),Te(s,()=>_t(e,i,t))},Te=(e,t)=>Lt(e)?e.then(t).catch(n=>{console.error(n),t()}):t(),Lt=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",_t=async(e,t,n)=>{var o;const i=e.$hostElement$,s=L("update",e.$cmpMeta$.$tagName$),a=i["s-rc"];n&&yt(e);const r=L("render",e.$cmpMeta$.$tagName$);zt(e,t,i,n),a&&(a.map(l=>l()),i["s-rc"]=void 0),r(),s();{const l=(o=i["s-p"])!=null?o:[],c=()=>Ot(e);l.length===0?c():(Promise.all(l).then(c).catch(c),e.$flags$|=4,l.length=0)}},zt=(e,t,n,o)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,It(e,t,o)}catch(i){O(i,e.$hostElement$)}return null},Ot=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,o=L("postUpdate",t),i=e.$lazyInstance$,s=e.$ancestorComponent$;T(i,"componentDidRender",void 0,n),e.$flags$&64?(T(i,"componentDidUpdate",void 0,n),o()):(e.$flags$|=64,At(n),T(i,"componentDidLoad",void 0,n),o(),e.$onReadyResolve$(n),s||Ge()),e.$onInstanceResolve$(n),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&ue(()=>$e(e,!1)),e.$flags$&=-517},Ge=e=>{ue(()=>We($,"appload",{detail:{namespace:Qe}}))},T=(e,t,n,o)=>{if(e&&e[t])try{return e[t](n)}catch(i){O(i,o)}},At=e=>{var t;return e.classList.add((t=A.hydratedSelectorName)!=null?t:"hydrated")},Rt=(e,t)=>k(e).$instanceValues$.get(t),Z=(e,t,n,o)=>{const i=k(e);if(!i)return;if(!i)throw new Error(`Couldn't find host element for "${o.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/stenciljs/core/issues/5457).`);const s=i.$hostElement$,a=i.$instanceValues$.get(t),r=i.$flags$,l=i.$lazyInstance$;n=re(n,o.$members$[t][0]);const c=Number.isNaN(a)&&Number.isNaN(n),u=n!==a&&!c;if((!(r&8)||a===void 0)&&u){if(i.$instanceValues$.set(t,n),o.$watchers$){const h=o.$watchers$[t];h&&h.map(d=>{try{const[[p,f]]=Object.entries(d);(r&128||f&1)&&(l?l[p](n,a,t):i.$fetchedCbList$.push(()=>{i.$lazyInstance$[p](n,a,t)}))}catch(p){O(p,s)}})}if(r&2){if(l.componentShouldUpdate&&l.componentShouldUpdate(n,a,t)===!1&&!(r&16))return;r&16||$e(i,!1)}}},Ne=(e,t,n)=>{var o,i;const s=e.prototype;if(t.$members$||A.propChangeCallback){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers),e.deserializers&&!t.$deserializers$&&(t.$deserializers$=e.deserializers),e.serializers&&!t.$serializers$&&(t.$serializers$=e.serializers);const a=Object.entries((o=t.$members$)!=null?o:{});if(a.map(([r,[l]])=>{if(l&31||n&2&&l&32){const{get:c,set:u}=Object.getOwnPropertyDescriptor(s,r)||{};c&&(t.$members$[r][0]|=2048),u&&(t.$members$[r][0]|=4096),(n&1||!c)&&Object.defineProperty(s,r,{get(){{if((t.$members$[r][0]&2048)===0)return Rt(this,r);const h=k(this),d=h?h.$lazyInstance$:s;return d?d[r]:void 0}},configurable:!0,enumerable:!0}),Object.defineProperty(s,r,{set(h){const d=k(this);if(d){if(u){typeof(l&32?this[r]:d.$hostElement$[r])>"u"&&d.$instanceValues$.get(r)&&(h=d.$instanceValues$.get(r)),u.apply(this,[re(h,l)]),h=l&32?this[r]:d.$hostElement$[r],Z(this,r,h,t);return}{if((n&1)===0||(t.$members$[r][0]&4096)===0){Z(this,r,h,t),n&1&&!d.$lazyInstance$&&d.$fetchedCbList$.push(()=>{t.$members$[r][0]&4096&&d.$lazyInstance$[r]!==d.$instanceValues$.get(r)&&(d.$lazyInstance$[r]=h)});return}const p=()=>{const f=d.$lazyInstance$[r];!d.$instanceValues$.get(r)&&f&&d.$instanceValues$.set(r,f),d.$lazyInstance$[r]=re(h,l),Z(this,r,d.$lazyInstance$[r],t)};d.$lazyInstance$?p():d.$fetchedCbList$.push(()=>{p()})}}}})}else n&1&&l&64&&Object.defineProperty(s,r,{value(...c){var u;const h=k(this);return(u=h==null?void 0:h.$onInstancePromise$)==null?void 0:u.then(()=>{var d;return(d=h.$lazyInstance$)==null?void 0:d[r](...c)})}})}),n&1){const r=new Map;s.attributeChangedCallback=function(l,c,u){b.jmp(()=>{var h;const d=r.get(l),p=k(this);if(this.hasOwnProperty(d)&&A.lazyLoad&&(u=this[d],delete this[d]),s.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==u)return;if(d==null){const m=p==null?void 0:p.$flags$;if(p&&m&&!(m&8)&&u!==c){const w=p.$lazyInstance$,C=(h=t.$watchers$)==null?void 0:h[l];C==null||C.forEach(v=>{const[[y,x]]=Object.entries(v);w[y]!=null&&(m&128||x&1)&&w[y].call(w,u,c,l)})}return}const f=a.find(([m])=>m===d);f&&f[1][0]&4&&(u=!(u===null||u==="false"));const g=Object.getOwnPropertyDescriptor(s,d);u!=this[d]&&(!g.get||g.set)&&(this[d]=u)})},e.observedAttributes=Array.from(new Set([...Object.keys((i=t.$watchers$)!=null?i:{}),...a.filter(([l,c])=>c[0]&31).map(([l,c])=>{var u;const h=c[1]||l;return r.set(h,l),c[0]&512&&((u=t.$attrsToReflect$)==null||u.push([l,h])),h})]))}}return e},Pt=async(e,t,n,o)=>{let i;try{if((t.$flags$&32)===0){if(t.$flags$|=32,n.$lazyBundleId$){const l=nt(n,t);if(l&&"then"in l){const h=pt();i=await l,h()}else i=l;if(!i)throw new Error(`Constructor for "${n.$tagName$}#${t.$modeName$}" was not found`);i.isProxied||(n.$watchers$=i.watchers,n.$serializers$=i.serializers,n.$deserializers$=i.deserializers,Ne(i,n,2),i.isProxied=!0);const c=L("createInstance",n.$tagName$);t.$flags$|=8;try{new i(t)}catch(h){O(h,e)}t.$flags$&=-9,t.$flags$|=128,c(),n.$flags$&4?t.$deferredConnectedCallback$=!0:fe(t.$lazyInstance$,e)}else{i=e.constructor;const l=e.localName;customElements.whenDefined(l).then(()=>t.$flags$|=128)}if(i&&i.style){let l;typeof i.style=="string"&&(l=i.style);const c=Ue(n);if(!G.has(c)||A.hotModuleReplacement){const u=L("registerStyles",n.$tagName$);gt(c,l,!!(n.$flags$&1)),u()}}}const s=t.$ancestorComponent$,a=()=>$e(t,!0);s&&s["s-rc"]?s["s-rc"].push(a):a()}catch(s){O(s,e),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),t.$onReadyResolve$&&t.$onReadyResolve$(e)}},fe=(e,t)=>{T(e,"connectedCallback",void 0,t)},Ut=e=>{if((b.$flags$&1)===0){const t=k(e);if(!t)return;const n=t.$cmpMeta$,o=L("connectedCallback",n.$tagName$);if(t.$flags$&1)t!=null&&t.$lazyInstance$?fe(t.$lazyInstance$,e):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>fe(t.$lazyInstance$,e));else{t.$flags$|=1,n.$flags$&12&&Wt(e);{let i=e;for(;i=i.parentNode||i.host;)if(i["s-p"]){qe(t,t.$ancestorComponent$=i);break}}n.$members$&&Object.entries(n.$members$).map(([i,[s]])=>{if(s&31&&i in e&&e[i]!==Object.prototype[i]){const a=e[i];delete e[i],e[i]=a}}),Pt(e,t,n)}o()}},Wt=e=>{if(!$.document)return;const t=e["s-cr"]=$.document.createComment("");t["s-cn"]=!0,E(e,t,e.firstChild)},Le=(e,t)=>{T(e,"disconnectedCallback",void 0,t||e)},Bt=async e=>{if((b.$flags$&1)===0){const t=k(e);t!=null&&t.$lazyInstance$?Le(t.$lazyInstance$,e):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>Le(t.$lazyInstance$,e))}z.has(e)&&z.delete(e),e.shadowRoot&&z.has(e.shadowRoot)&&z.delete(e.shadowRoot)},Dt=(e,t={})=>{var n;if(!$.document){console.warn("Stencil: No document found. Skipping bootstrapping lazy components.");return}const o=L(),i=[],s=t.exclude||[],a=$.customElements,r=$.document.head,l=r.querySelector("meta[charset]"),c=$.document.createElement("style"),u=[];let h,d=!0;Object.assign(b,t),b.$resourcesUrl$=new URL(t.resourcesUrl||"./",$.document.baseURI).href;let p=!1;if(e.map(f=>{f[1].map(g=>{var m,w,C;const v={$flags$:g[0],$tagName$:g[1],$members$:g[2],$listeners$:g[3]};v.$flags$&4&&(p=!0),v.$members$=g[2],v.$attrsToReflect$=[],v.$watchers$=(m=g[4])!=null?m:{},v.$serializers$=(w=g[5])!=null?w:{},v.$deserializers$=(C=g[6])!=null?C:{};const y=v.$tagName$,x=class extends HTMLElement{constructor(S){super(S);j(this,"s-p");j(this,"s-rc");j(this,"hasRegisteredEventListeners",!1);if(S=this,tt(S,v),v.$flags$&1){if(!S.shadowRoot)lt.call(S,v);else if(S.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${v.$tagName$}! Mode is set to ${S.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}connectedCallback(){k(this)&&(this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),h&&(clearTimeout(h),h=null),d?u.push(this):b.jmp(()=>Ut(this)))}disconnectedCallback(){b.jmp(()=>Bt(this)),b.raf(()=>{var S;const U=k(this);if(!U)return;const ye=u.findIndex(Ye=>Ye===this);ye>-1&&u.splice(ye,1),((S=U==null?void 0:U.$vnode$)==null?void 0:S.$elm$)instanceof Node&&!U.$vnode$.$elm$.isConnected&&delete U.$vnode$.$elm$})}componentOnReady(){var S;return(S=k(this))==null?void 0:S.$onReadyPromise$}};v.$lazyBundleId$=f[0],!s.includes(y)&&!a.get(y)&&(i.push(y),a.define(y,Ne(x,v,1)))})}),i.length>0&&(p&&(c.textContent+=Oe),c.textContent+=i.sort()+ot,c.innerHTML.length)){c.setAttribute("data-styles","");const f=(n=b.$nonce$)!=null?n:Pe($.document);f!=null&&c.setAttribute("nonce",f),r.insertBefore(c,l?l.nextSibling:r.firstChild)}d=!1,u.length?u.map(f=>f.connectedCallback()):b.jmp(()=>h=setTimeout(Ge,30)),o()};const Ft=async(e,t)=>{if(!(typeof window>"u"))return await Ze(),Dt(JSON.parse('[["lido-avatar_22",[[0,"lido-root",{"Lang":[1,"lang"],"xmlPath":[1,"xml-path"],"initialIndex":[2,"initial-index"],"margin":[1],"canplay":[4],"baseUrl":[1,"base-url"],"exitButtonUrl":[1,"exit-button-url"],"prevButtonUrl":[1,"prev-button-url"],"nextButtonUrl":[1,"next-button-url"],"speakerButtonUrl":[1,"speaker-button-url"],"xmlData":[32]},null,{"Lang":[{"onLangChange":0}]}],[0,"lido-home",{"commonAudioPath":[1,"common-audio-path"],"showNav":[4,"show-nav"],"activeContainerIndexes":[16],"Lang":[1,"lang"],"xmlData":[1,"xml-data"],"initialIndex":[2,"initial-index"],"canplay":[4],"baseUrl":[1,"base-url"],"height":[1],"exitButtonUrl":[1,"exit-button-url"],"prevButtonUrl":[1,"prev-button-url"],"nextButtonUrl":[1,"next-button-url"],"speakerButtonUrl":[1,"speaker-button-url"],"avatarUrl":[1,"avatar-url"],"uuid":[1],"navBarIcons":[32],"currentContainerIndex":[32],"exitFlag":[32],"containers":[32],"showDotsandbtn":[32]},null,{"Lang":[{"onLangChange":0}],"commonAudioPath":[{"onCommonAudioPathChange":0}],"xmlData":[{"onXmlDataChange":0}]}],[0,"lido-calculator",{"width":[1],"visible":[8],"height":[1],"objective":[1],"onEntry":[1,"on-entry"],"x":[1],"y":[1],"bgColor":[1,"bg-color"],"penIcon":[1,"pen-icon"],"displayValue":[32],"style":[32]}],[1,"lido-canvas",{"bgImage":[1,"bg-image"],"width":[1],"height":[1],"x":[1],"y":[1],"onEntry":[1,"on-entry"],"style":[32]}],[260,"lido-container",{"Lang":[1,"lang"],"showDropBorder":[4,"show-drop-border"],"appendToDropOnCompletion":[4,"append-to-drop-on-completion"],"id":[1],"objective":[1],"customStyle":[1,"custom-style"],"value":[1],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"bgImage":[1,"bg-image"],"type":[1],"tabIndex":[2,"tab-index"],"visible":[4],"audio":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"onEntry":[1,"on-entry"],"canplay":[4],"showCheck":[4,"show-check"],"isContinueOnCorrect":[4,"is-continue-on-correct"],"isAllowOnlyCorrect":[4,"is-allow-only-correct"],"baseUrl":[1,"base-url"],"margin":[1],"exitButtonUrl":[1,"exit-button-url"],"prevButtonUrl":[1,"prev-button-url"],"nextButtonUrl":[1,"next-button-url"],"speakerButtonUrl":[1,"speaker-button-url"],"showPrevButton":[1,"show-prev-button"],"showNextButton":[1,"show-next-button"],"delayVisible":[1,"delay-visible"],"disableSpeak":[4,"disable-speak"],"templateId":[1,"template-id"],"highlightWordByWord":[4,"highlight-word-by-word"],"instructName":[32],"speakFlag":[32]},null,{"Lang":[{"languageChanged":0}]}],[0,"lido-keyboard",{"keys":[1],"width":[1],"height":[1],"fontSize":[1,"font-size"],"fontColor":[1,"font-color"],"fontFamily":[1,"font-family"],"gap":[1],"bgColor":[1,"bg-color"],"borderRadius":[1,"border-radius"],"y":[1],"x":[1],"z":[1],"margin":[1],"padding":[1],"visible":[1],"onEntry":[1,"on-entry"],"type":[1],"keyboardInput":[4,"keyboard-input"],"columns":[1],"letterLength":[2,"letter-length"],"disableSpeak":[4,"disable-speak"],"numberOfClick":[32],"inputString":[32],"style":[32]}],[0,"lido-avatar",{"id":[1],"value":[1],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"type":[1],"tabIndex":[2,"tab-index"],"visible":[4],"audio":[1],"src":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"onEntry":[1,"on-entry"],"delayVisible":[1,"delay-visible"]}],[0,"lido-balance",{"pivotimage":[1],"scaleimage":[1],"handlerimage":[1],"fill":[1],"tilt":[2],"maxTilt":[2,"max-tilt"],"onEntry":[1,"on-entry"],"height":[1],"width":[1],"x":[1],"y":[1],"z":[1],"visible":[8],"margin":[1],"padding":[1],"balanceSymbol":[1537,"balance-symbol"],"showSymbol":[1540,"show-symbol"],"operation":[1],"pivotSvg":[32],"scaleSvg":[32],"handlerSvg":[32],"style":[32],"tiltf":[32],"leftVal":[32],"rightVal":[32],"revealSymbol":[64],"hideSymbol":[64],"updateTilt":[64]},null,{"tilt":[{"tiltChanged":0}]}],[260,"lido-col",{"showSpeakIcon":[4,"show-speak-icon"],"id":[1],"value":[1],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"type":[1],"tabIndex":[2,"tab-index"],"visible":[4],"audio":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"onEntry":[1,"on-entry"],"childElementsLength":[2,"child-elements-length"],"minLength":[2,"min-length"],"maxLength":[2,"max-length"],"direction":[1],"borderImage":[1,"border-image"],"boxShadow":[1,"box-shadow"],"minDrops":[2,"min-drops"],"maxDrops":[2,"max-drops"],"margin":[1],"style":[32]}],[260,"lido-flash-card",{"value":[1],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"type":[1],"tabIndex":[2,"tab-index"],"visible":[4],"audio":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"onEntry":[1,"on-entry"],"direction":[1],"display":[1],"front":[8],"back":[8],"flipped":[1540],"margin":[1],"disableSpeak":[4,"disable-speak"],"delayVisible":[1,"delay-visible"],"style":[32]},null,{"flipped":[{"handleFlippedChange":0}]}],[260,"lido-float",{"id":[1],"value":[1],"z":[1],"tabIndex":[2,"tab-index"],"visible":[4],"onEntry":[1,"on-entry"],"width":[1],"height":[1],"bgColor":[1,"bg-color"],"type":[1],"delayVisible":[1,"delay-visible"],"floatDirection":[1,"float-direction"],"style":[32]}],[0,"lido-image",{"showSpeakIcon":[4,"show-speak-icon"],"id":[1],"value":[1],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"type":[1],"tabIndex":[2,"tab-index"],"visible":[8],"audio":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"onEntry":[1,"on-entry"],"src":[1],"isSlice":[1,"is-slice"],"sliceWidth":[1,"slice-width"],"minDrops":[2,"min-drops"],"maxDrops":[2,"max-drops"],"margin":[1],"padding":[1],"filter":[1],"borderRadius":[1,"border-radius"],"transform":[1],"delayVisible":[1,"delay-visible"],"disableSpeak":[4,"disable-speak"],"style":[32]}],[0,"lido-math-matrix",{"rows":[1],"cols":[1],"defualtFill":[1538,"defualt-fill"],"leftIndex":[4,"left-index"],"topIndex":[4,"top-index"],"bottomIndex":[4,"bottom-index"],"clickable":[4],"activeOnlyVisible":[4,"active-only-visible"],"matrixImage":[1,"matrix-image"],"activeBgColor":[1537,"active-bg-color"],"deactiveBgColor":[1537,"deactive-bg-color"],"border":[1537],"height":[1537],"width":[1537],"borderRadius":[1,"border-radius"],"z":[1],"margin":[1],"padding":[1],"visible":[1],"text":[1],"type":[1],"value":[1],"tabIndex":[2,"tab-index"],"x":[1],"y":[1],"fontColor":[1,"font-color"],"onCorrect":[1,"on-correct"],"onInCorrect":[1,"on-in-correct"],"onEntry":[1,"on-entry"],"previousFilledSlot":[32],"previousFilledSlotElement":[32],"style":[32]}],[260,"lido-pos",{"id":[1],"value":[1],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"type":[1],"tabIndex":[2,"tab-index"],"visible":[8],"audio":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"onEntry":[1,"on-entry"],"minDrops":[2,"min-drops"],"maxDrops":[2,"max-drops"],"margin":[1],"style":[32]}],[260,"lido-random",{"showSpeakIcon":[4,"show-speak-icon"],"id":[1],"value":[1],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"type":[1],"tabIndex":[2,"tab-index"],"visible":[4],"audio":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"onEntry":[1,"on-entry"],"minDrops":[2,"min-drops"],"maxDrops":[2,"max-drops"],"margin":[1]}],[260,"lido-row",{"showSpeakIcon":[4,"show-speak-icon"],"value":[1],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"type":[1],"tabIndex":[2,"tab-index"],"visible":[4],"audio":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"onEntry":[1,"on-entry"],"childElementsLength":[2,"child-elements-length"],"minLength":[2,"min-length"],"maxLength":[2,"max-length"],"direction":[1],"minDrops":[2,"min-drops"],"maxDrops":[2,"max-drops"],"display":[1],"margin":[1],"disableSpeak":[4,"disable-speak"],"style":[32]}],[0,"lido-shape",{"id":[1],"value":[1],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"type":[1],"tabIndex":[2,"tab-index"],"shapeType":[1,"shape-type"],"visible":[4],"audio":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"onEntry":[1,"on-entry"],"minDrops":[2,"min-drops"],"maxDrops":[2,"max-drops"],"margin":[1],"delayVisible":[1,"delay-visible"],"disableSpeak":[4,"disable-speak"],"style":[32]}],[0,"lido-slide-fill",{"id":[1],"width":[1],"height":[1],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"visible":[8],"margin":[1],"padding":[1],"borderRadius":[1,"border-radius"],"fill":[1],"numberType":[1,"number-type"],"min":[2],"division":[2],"max":[2],"slider":[4],"src":[1],"fillDirection":[1,"fill-direction"],"type":[1],"onEntry":[1,"on-entry"],"delayVisible":[1,"delay-visible"],"disableSpeak":[4,"disable-speak"],"svgContent":[32],"style":[32]},null,{"src":[{"onSrcChange":0}],"fill":[{"onPropChange":0}],"division":[{"onPropChange":0}],"fillDirection":[{"onPropChange":0}],"numberType":[{"onPropChange":0}],"min":[{"onPropChange":0}],"max":[{"onPropChange":0}]}],[0,"lido-trace",{"showSpeakIcon":[4,"show-speak-icon"],"id":[1],"svgSource":[1,"svg-source"],"value":[1],"height":[1],"width":[1],"audio":[1],"x":[1],"y":[1],"z":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"tabIndex":[2,"tab-index"],"mode":[1],"fingerHintUrl":[1,"finger-hint-url"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"highlightTextId":[1,"highlight-text-id"],"animationTrace":[4,"animation-trace"],"delayVisible":[1,"delay-visible"],"disableSpeak":[4,"disable-speak"],"svgUrls":[32],"audioUrls":[32],"currentSvgIndex":[32],"moving":[32],"style":[32],"fileIndex":[32],"isDragging":[32],"activePointerId":[32],"freeTraceUpdateCounter":[32],"idleTimer":[32],"fingerImg":[32]},null,{"svgSource":[{"initializeSVG":0}],"mode":[{"initializeSVG":0}]}],[260,"lido-wrap",{"showSpeakIcon":[4,"show-speak-icon"],"id":[1],"value":[1],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"type":[1],"tabIndex":[2,"tab-index"],"visible":[4],"audio":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"onEntry":[1,"on-entry"],"childElementsLength":[2,"child-elements-length"],"minLength":[2,"min-length"],"maxLength":[2,"max-length"],"flex":[1],"minDrops":[2,"min-drops"],"maxDrops":[2,"max-drops"],"margin":[1],"disableSpeak":[4,"disable-speak"],"style":[32]}],[260,"lido-cell",{"showSpeakIcon":[4,"show-speak-icon"],"scrollbarWidth":[1,"scrollbar-width"],"id":[1],"value":[1],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"gap":[1],"bgColor":[1,"bg-color"],"type":[1],"tabIndex":[2,"tab-index"],"visible":[1],"audio":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"onEntry":[1,"on-entry"],"childElementsLength":[2,"child-elements-length"],"minLength":[2,"min-length"],"maxLength":[2,"max-length"],"layout":[1],"minDrops":[2,"min-drops"],"maxDrops":[2,"max-drops"],"margin":[1],"padding":[1],"alignItems":[1,"align-items"],"borderRadius":[1,"border-radius"],"flexDirection":[1,"flex-direction"],"delayVisible":[1,"delay-visible"],"disableSpeak":[4,"disable-speak"],"style":[32]}],[0,"lido-text",{"showSpeakIcon":[4,"show-speak-icon"],"id":[1],"value":[1],"string":[1],"fontFamily":[1,"font-family"],"fontSize":[1,"font-size"],"fontColor":[1,"font-color"],"highlightWhileSpeaking":[4,"highlight-while-speaking"],"height":[1],"width":[1],"ariaLabel":[1,"aria-label"],"ariaHidden":[1,"aria-hidden"],"x":[1],"y":[1],"z":[1],"bgColor":[1,"bg-color"],"borderImage":[1,"border-image"],"type":[1],"tabIndex":[2,"tab-index"],"visible":[8],"audio":[1],"onTouch":[1,"on-touch"],"onInCorrect":[1,"on-in-correct"],"onCorrect":[1,"on-correct"],"minDrops":[2,"min-drops"],"maxDrops":[2,"max-drops"],"onEntry":[1,"on-entry"],"margin":[1],"padding":[1],"borderRadius":[1,"border-radius"],"spanType":[1,"span-type"],"delayVisible":[1,"delay-visible"],"disableSpeak":[4,"disable-speak"],"style":[32]}]]]]'),t)};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();const Ht="lidoActivityEnd",jt="lidoLessonEnd",Mt="lidoNextContainer",qt="lidoPrevContainer",Gt="lidoActivityChange",Nt="lidoGameCompleted",Kt="lidoGameExit",X="lido-container",_e={en:new Set(["a","an","the","on","in","at","to","of","for","into","up","or","is","are","were"]),hi:new Set(["का","की","के","में","पर","से","तो","को","है","था","थे"]),ka:new Set(["ಅದು","ಇದು","ನಲ್ಲಿ","ಮೇಲೆ","ಮತ್ತು","ಇದೆ","ಆಗಿತ್ತು"])},V={en:{expectedWPM:135,minWordMs:80,syllableWeight:1.28,punctuationPauseWeight:.45,preemptiveOffsetMs:55,smoothingMs:25,fastWordMultiplier:.65,fastClusterMultiplier:.65},hi:{expectedWPM:155,minWordMs:40,syllableWeight:1.3,punctuationPauseWeight:.3,preemptiveOffsetMs:20,smoothingMs:45,fastWordMultiplier:.9,fastClusterMultiplier:.9},ka:{expectedWPM:85,minWordMs:35,syllableWeight:1.75,punctuationPauseWeight:.5,preemptiveOffsetMs:15,smoothingMs:50,fastWordMultiplier:1,fastClusterMultiplier:1}};var Yt=typeof window<"u"?window:{},Xt={$resourcesUrl$:""},Jt=e=>{const t=new URL(e,Xt.$resourcesUrl$);return t.origin!==Yt.location.origin?t.href:t.pathname};function ze(e){if(!e)return;e.classList.add("speaking-highlight");const t="#speaking-highlight-style";if(!document.querySelector(t)){const n=document.createElement("style");n.id=t,n.innerHTML=`
      .speaking-highlight {
        --base-transform: ${e.style.transform};
        box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9) !important; /* Stronger orange glow effect */
        // border: 3px solid green !important;
        // transition: box-shadow 0.5s ease-in-out, transform 0.5s ease-in-out;
        // transform: scale(1.05); /* Subtle scale effect to pop the element */
        // animation: pulseEffect 1.5s infinite; /* Pulsing animation */
        
      }

      @keyframes pulseEffect {
        0% {
          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);
          // transform: var(--base-transform) scale(1.05);
          // background-color: #FFFF0B;
        }
        50% {
          box-shadow: 0 0 30px 15px rgba(255, 165, 0, 1);
          // transform: var(--base-transform) scale(1.1);
          // background-color: #FFFF0B;
        }
        100% {
          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);
          // transform: var(--base-transform) scale(1.05);
          // background-color: #FFFF0B;
        }
      }
    `,document.head.appendChild(n)}}function q(e){e&&e.classList.remove("speaking-highlight")}const ee=e=>{console.log("Setting dragging disabled to:",e)};document.getElementById(X);var Qt={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};Zt(Qt);function Zt(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Vt(e){const n=document.getElementById(X).getAttribute("baseUrl");if(e!=null&&e.startsWith("http")||e!=null&&e.startsWith("blob")||e!=null&&e.startsWith("data")||e.startsWith("/Lido-CommonAudios/"))return e;if(n){const o=e.startsWith("/")?e.slice(1):e;return o.startsWith(n.replace(/^\/+|\/+$/g,""))?o:n.endsWith("/")?n+o:`${n}/${o}`}return Jt(e)}async function en(e,t){return new Promise((n,o)=>{if(!("speechSynthesis"in window)){o(new Error("Speech synthesis is not supported in this browser."));return}const i=window.speechSynthesis;setTimeout(()=>{const s=new SpeechSynthesisUtterance(e);s.onend=()=>{n(!0)},i.speak(s),i.speaking||q(t)},50)})}class _{constructor(){this.highlightOverlay=null,this.wordRects=[],this.activeWordIndex=-1,this.highlightRAF=null,this.handleUserClick=()=>{this.stop()},this.audioElement=document.createElement("audio"),this.audioElement.id="audio",document.body.appendChild(this.audioElement),this.registerGlobalStopEvents()}static getI(){return _.instance||(_.instance=new _),_.instance}stop(){const t=document.getElementById(X);t&&t.getAttribute("highlight-word-by-word")==="true"&&this.stopOverlayHighlightLoop(),window!=null&&window.speechSynthesis&&window.speechSynthesis.cancel(),this.audioElement.pause(),this.audioElement.currentTime=0,this.audioElement.src="",t&&t.getAttribute("highlight-word-by-word")!=="true"&&document.querySelectorAll(".speaking-highlight").forEach(s=>q(s));const n=document.querySelector("#play"),o=document.querySelector("#pause");n&&o&&(n.style.visibility="visible",o.style.visibility="hidden")}getLidoTextElement(t){return t.tagName.toLowerCase()==="lido-text"?t:t.closest("lido-text")}async play(t){try{await _.getI().stop()}catch(i){console.error("Error stopping audio before speak action:",i)}const n=document.getElementById(X);if(!n){console.warn("[AudioPlayer] No lido-container found");return}if(t.closest("lido-text"),n.getAttribute("highlight-word-by-word")==="true"){const i=this.getLidoTextElement(t);if(!i){console.warn("[AudioPlayer] No lido-text found");return}this.stopOverlayHighlightLoop(),t=i}let o=t.getAttribute("audio")||"";if(!o){const i=t.children;for(let s=0;s<i.length;s++){const a=i[s].getAttribute("audio");if(a){o=a;break}}}if(o){o=Vt(o),this.audioElement.src=o,console.log("🚀 Playing audio:",this.audioElement.src);try{ee(!0);const i=n.getAttribute("Lang")||"en",s=V[i]||V[i.split("-")[0]]||V.en;let a=[];const r=n.getAttribute("highlight-word-by-word")==="true";this.audioElement.onloadedmetadata=null,this.audioElement.onended=null,r?this.audioElement.onloadedmetadata=()=>{const l=this.audioElement.duration*1e3,c=t.textContent||"";a=this.buildWordTimeline(c,l,s,i),this.wordRects=this.computeWordRects(t)}:ze(t),await this.audioElement.play(),r&&a.length===0?(await new Promise(l=>{this.audioElement.onloadedmetadata=()=>l()}),this.startOverlayHighlightLoop(a,s)):r&&this.startOverlayHighlightLoop(a,s),await new Promise(l=>{this.audioElement.onended=()=>l()})}catch(i){console.log("🎧 Audio play error:",i)}finally{this.audioElement.onended=null,this.audioElement.onloadedmetadata=null,this.stopOverlayHighlightLoop(),window.removeEventListener("click",this.handleUserClick,!0),this.audioElement.onended=null,ee(!1),n.getAttribute("highlight-word-by-word")!=="true"&&q(t)}}else if(t.textContent)try{ze(t),window.addEventListener("click",this.handleUserClick,!0),await en(t.textContent,t),document.querySelectorAll(".speaking-highlight").forEach(s=>q(s))}catch(i){console.log("🎧 TTS Error:",i)}finally{ee(!1)}}registerGlobalStopEvents(){[Mt,qt,jt,Gt,Ht,Nt,Kt].forEach(n=>{window.addEventListener(n,()=>this.stop())})}destroy(){console.log("AudioPlayer destroyed (hot-reload safe)"),this.stop(),this.audioElement.parentNode&&this.audioElement.parentNode.removeChild(this.audioElement),_.instance=void 0}countSyllables(t,n){if(n!=="en")return Math.max(2,Math.ceil(t.length/3));const o=t.toLowerCase().replace(/[^a-z]/g,"");if(o.length<=3)return 1;const i=o.match(/[aeiouy]{1,2}/g);return i?i.length:1}tokenize(t){return t.split(/(\s+)/).filter(Boolean)}isFastCluster(t,n,o){if(!t||!n||!o)return!1;const i=_e[o];return(i==null?void 0:i.has(t))&&(i==null?void 0:i.has(n))}buildWordTimeline(t,n,o,i){const s=this.tokenize(t).filter(p=>p.trim());console.log("[buildTimeline] words:",s);const a=s.length/o.expectedWPM*6e4;let r=1;if(a>0){const p=n/a;p>1.15?r=1.1:p<.85&&(r=.9)}const l=s.map((p,f)=>{var y,x;const g=(y=s[f-1])==null?void 0:y.toLowerCase(),m=p.toLowerCase(),w=this.countSyllables(p,i),C=/[.,!?]$/.test(p);let v=w*o.syllableWeight;return C&&(v+=o.punctuationPauseWeight),(x=_e[i])!=null&&x.has(m)&&(v*=o.fastWordMultiplier),this.isFastCluster(g,m,i)&&(v*=o.fastClusterMultiplier),console.log(`[buildTimeline] "${p}" syllables=${w}, weight=${v}`),v}),c=l.reduce((p,f)=>p+f,0);console.log("[buildTimeline] totalWeight:",c);let u=0;const h=s.map((p,f)=>{let g=l[f]/c*n;g*=r,g=Math.max(o.minWordMs,g);const m={word:p,index:f,startMs:u,endMs:u+g};return console.log("[timeline]",m),u+=g,m}),d=h[h.length-1];if(d&&d.endMs>n){const p=n/d.endMs;h.forEach(f=>{f.startMs*=p,f.endMs*=p})}return h}ensureOverlay(){if(this.highlightOverlay)return;const t=document.createElement("div");t.className="lido-tts-highlight-overlay",document.body.appendChild(t),this.highlightOverlay=t}clearOverlay(){this.highlightOverlay&&(this.highlightOverlay.remove(),this.highlightOverlay=null)}computeWordRects(t){const n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),o=[];let i,s=0;for(;i=n.nextNode();){const a=i.textContent||"",r=a.split(/\s+/).filter(Boolean);let l=0;r.forEach(c=>{const u=a.indexOf(c,l),h=u+c.length;if(u>=0){const d=document.createRange();d.setStart(i,u),d.setEnd(i,h);const p=d.getBoundingClientRect();p.width>0&&p.height>0&&(o[s++]=p)}l=h})}return o}moveOverlay(t){this.highlightOverlay&&(this.highlightOverlay.style.left=`${t.left}px`,this.highlightOverlay.style.top=`${t.top}px`,this.highlightOverlay.style.width=`${t.width}px`,this.highlightOverlay.style.height=`${t.height}px`)}startOverlayHighlightLoop(t,n){this.ensureOverlay(),this.activeWordIndex=-1;const o=()=>{if(this.audioElement.paused||this.audioElement.ended){this.stopOverlayHighlightLoop();return}const i=this.audioElement.currentTime*1e3+n.preemptiveOffsetMs,s=t.findIndex(a=>i+n.smoothingMs>=a.startMs&&i-n.smoothingMs<a.endMs);if(s>=0&&this.activeWordIndex>=0&&s-this.activeWordIndex>=2){const a=this.activeWordIndex+1;this.wordRects[a]&&(this.moveOverlay(this.wordRects[a]),this.activeWordIndex=a)}s!==this.activeWordIndex&&this.wordRects[s]&&(this.moveOverlay(this.wordRects[s]),this.activeWordIndex=s),this.highlightRAF=requestAnimationFrame(o)};this.highlightRAF=requestAnimationFrame(o)}stopOverlayHighlightLoop(){this.highlightRAF!==null&&(cancelAnimationFrame(this.highlightRAF),this.highlightRAF=null),this.clearOverlay(),this.activeWordIndex=-1}}Ft();const Ke=_.getI(),tn={parameters:{controls:{matchers:{color:/(background|color)$/i,date:/Date$/i}}}},nn=[(e,t)=>{try{Ke.stop()}catch(n){console.warn("Failed to stop audio player on story change:",n)}return e()}];module!=null&&module.hot&&module.hot.dispose(()=>{try{Ke.destroy()}catch(e){console.warn("Failed to destroy AudioPlayer on HMR dispose:",e)}});const dn=Object.freeze(Object.defineProperty({__proto__:null,decorators:nn,default:tn},Symbol.toStringTag,{value:"Module"}));export{mt as H,xt as a,cn as c,ln as g,bt as h,dn as p,an as r};
