import{g as rr,r as He,h as K,H as Ue,a as st}from"./preview-DU9mzYxh.js";import"./iframe-DNbT6pSw.js";const ke="lidoDragSelectedMap",We="lidoSelectedValues",Gn="lidoActivityScore",Wr="lidoActivityEnd",Br="lidoLessonEnd",Jn="lidoNextContainer",$r="lidoActivityChange",Ur="lidoGameCompleted",Hr="lidoElementDrop",zr="lidoElementClick",Gt="dropLength",rt="dropHasDrag";var De;(function(i){i.NoFlow="lido-noFlow",i.ShowFlow="lido-showFlow",i.FreeTrace="lido-freeTrace",i.BlindTracing="lido-blindTracing",i.BlindFreeTrace="lido-blindFreeTrace"})(De||(De={}));class Xr{constructor(){this.rightMoves=0,this.wrongMoves=0,this.finalScore=0}}var qt;(function(i){i.Diagonal="diagonal"})(qt||(qt={}));function Pt(i,d){const h=new CustomEvent(i,{detail:d});window.dispatchEvent(h)}function Yr(i,d,h){Pt(Wr,{index:i,totalIndex:d,score:h})}function Vr(i){Pt(Br,{score:i})}function Gr(){Pt(Jn,{})}function qr(){Pt(Ur,{})}function tr(i){Pt($r,{index:i})}function Jr(i,d,h){Pt(Hr,{dragElement:i,dropElement:d,isCorrect:h,createdAt:new Date().toISOString()})}function nr(i,d){Pt(zr,{element:i,isCorrect:d,createdAt:new Date().toISOString()})}class It{constructor(){}static getInstance(){return It.instance||(It.instance=new It),It.instance}setRiveInstance(d){this.riveInstance=d}getRiveInstance(){return this.riveInstance}}class ot{constructor(){this.audioElement=document.createElement("audio"),this.audioElement.id="audio",document.body.appendChild(this.audioElement)}static getI(){return ot.instance||(ot.instance=new ot),ot.instance}stop(){window!=null&&window.speechSynthesis&&window.speechSynthesis.cancel(),this.audioElement.pause(),this.audioElement.currentTime=0,this.audioElement.src="",document.querySelectorAll(".speaking-highlight").forEach(w=>qn(w));const h=document.querySelector("#play"),g=document.querySelector("#pause");h&&g&&(h.style.visibility="visible",g.style.visibility="hidden")}async play(d){let h=d.getAttribute("audio")||"";if(!h){const g=d.children;for(let w=0;w<g.length;w++){const _=g[w].getAttribute("audio");_&&(h=_)}}if(h){h=Ct(h),this.audioElement.src=h,console.log("ðŸš€ Playing audio:",this.audioElement.src);try{await this.audioElement.play(),ir(d),await new Promise(g=>{this.audioElement.onended=()=>{qn(d),g()}})}catch(g){console.log("ðŸš€ Audio play error:",g)}}else if(d.textContent)try{ir(d),await lo(d.textContent),qn(d)}catch(g){console.log("ðŸš€ TTS Error:",g)}}}const at=new Xr,In=i=>{i.style.animation="unset";const d=window.getComputedStyle(i).transform;if(d==="none")return 1;{const h=d.match(/matrix\(([^)]+)\)/);if(h){const g=h[1].split(", ");return parseFloat(g[0])}}return 1};function Kr(i){let d=!1,h=!1,g=0,w=0,_=0,L=0;const b=i.parentElement;if(!b){console.error("Parent element not found.");return}const C=u=>{Kt(i),h=!0,u instanceof MouseEvent?(g=u.clientX,w=u.clientY):(g=u.touches[0].clientX,w=u.touches[0].clientY),i.style.opacity="0.8",i.style.cursor="grabbing";const U=window.getComputedStyle(i).transform;if(U!=="none"){const re=U.match(/matrix\(([^)]+)\)/);if(re){const ue=re[1].split(", ");_=parseFloat(ue[4]),L=parseFloat(ue[5])}}else _=0,L=0;b.getBoundingClientRect(),i.getBoundingClientRect(),document.addEventListener("mousemove",k),document.addEventListener("mouseup",D),document.addEventListener("touchmove",k),document.addEventListener("touchend",D)},E=new MutationObserver(u=>{for(const U of u)U.type==="attributes"&&U.attributeName==="style"&&(b.getBoundingClientRect(),i.getBoundingClientRect())}),x={attributes:!0,attributeFilter:["style"]};E.observe(b,x);const k=u=>{if(!h)return;const U=In(b);let re=0,ue=0;u instanceof MouseEvent?(re=(u.clientX-g)/U,ue=(u.clientY-w)/U):(re=(u.touches[0].clientX-g)/U,ue=(u.touches[0].clientY-w)/U);const he=_+re,ye=L+ue,V=b.getBoundingClientRect(),H=i.getBoundingClientRect(),N=i.style.transform.match(/-?\d+(\.\d+)?/g).map(Number),be=H.left/U-N[0],me=H.top-N[1],Ae=H.right/U-N[0],fe=H.bottom-N[1],Ze=V.right-Ae,de=V.left-be,Me=V.top-me,Le=V.bottom-fe,je=he+be<=V.left?de:Math.min(he,Ze),Ne=ye+me<=V.top?Me:Math.min(ye,Le);i.style.transform=`translate(${je}px, ${Ne}px)`;let ne=Sn(i,"slide");if(ne&&ne!=i){const ze=i.parentElement,_e=ne.parentElement;if(ze&&_e){const ie=document.createComment("element-placeholder"),Ce=document.createComment("overlapped-placeholder");ze.replaceChild(ie,i),_e.replaceChild(Ce,ne),ze.replaceChild(ne,ie),_e.replaceChild(i,Ce),i.style.transform="translate(0, 0)",g=u instanceof MouseEvent?u.clientX:u.touches[0].clientX,w=u instanceof MouseEvent?u.clientY:u.touches[0].clientY,_=0,L=0,d=!0}}},D=u=>{h=!1,document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",D),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",D),i.style.opacity="",i.style.cursor="move",i.style.transform="translate(0, 0)",d&&(Zr(i),d=!1)};i.style.cursor="move",i.style.transform="translate(0, 0)",i.addEventListener("mousedown",C),i.addEventListener("touchstart",C),i.addEventListener("click",u=>{Zn(i,"drag")})}const Zr=i=>{const d=JSON.parse(localStorage.getItem(We))||[],h=document.querySelectorAll("[type='slide']");let g=0;h.forEach(C=>{d[g++]=C.value}),localStorage.setItem(We,JSON.stringify(d));const _=document.querySelector("#lido-container").objective.split(","),L=d.indexOf(i.value),b=or(i.value,[_[L].trim()]);Ln(b),Pn()};function Qr(i){let d=!1,h=!1,g=0,w=0,_=0,L=0,b=null;const C=document.querySelector("#lido-container");if(!C){console.error('Container with ID "container" not found.');return}ei(i,"drag");let E,x;const k=V=>{var H;if(ot.getI().stop(),Kt(i),d=!0,h=!0,V instanceof MouseEvent?(g=V.clientX,w=V.clientY):(g=V.touches[0].clientX,w=V.touches[0].clientY),i.style.opacity="0.8",i.style.cursor="grabbing",((H=i.getAttribute("dropAttr"))===null||H===void 0?void 0:H.toLowerCase())===qt.Diagonal){const N=window.getComputedStyle(i),be=i.getBoundingClientRect();b||(b=i.cloneNode(!0),b.style.left=`${be.left}px`,b.style.top=`${be.top}px`,b.style.width=`${be.width}px`,b.style.height=`${be.height}px`,b.style.transform=N.transform,b.setAttribute("visible","true"),b.classList.add("cloned-element"),document.body.appendChild(b))}const we=window.getComputedStyle(i).transform;if(we!=="none"){const N=we.match(/matrix\(([^)]+)\)/);if(N){const be=N[1].split(", ");_=parseFloat(be[4]),L=parseFloat(be[5])}}else _=0,L=0;document.addEventListener("mousemove",ue),document.addEventListener("mouseup",ye),document.addEventListener("touchmove",ue),document.addEventListener("touchend",ye)},D=C.getBoundingClientRect(),u=i.getBoundingClientRect();E=D.top-u.top,x=D.left-u.left;const U=new MutationObserver(V=>{for(const H of V)if(H.type==="attributes"&&H.attributeName==="style"){const we=C.getBoundingClientRect(),N=i.getBoundingClientRect();E=we.top-N.top,x=we.left-N.left}}),re={attributes:!0,attributeFilter:["style"]};U.observe(C,re);const ue=V=>{if(!d)return;h=!1,i.style.transition="none";const H=In(C);let we=0,N=0;V instanceof MouseEvent?(we=(V.clientX-g)/H,N=(V.clientY-w)/H):(we=(V.touches[0].clientX-g)/H,N=(V.touches[0].clientY-w)/H);const be=_+we,me=L+N,Ae=C.getBoundingClientRect(),fe=i.getBoundingClientRect(),de=i.style.transform.match(/-?\d+(\.\d+)?/g).map(Number),Me=fe.left/H-de[0],Le=fe.top-de[1],je=Ae.width/H-Math.abs(x/H)-fe.width/H,Ne=Ae.left-Me,ne=Ae.top-Le,ze=Ae.height/H-Math.abs(E/H)-fe.height/H,_e=be+Me<=Ae.left?Ne:Math.min(be,je),ie=me+Le<=Ae.top?ne:Math.min(me,ze);i.style.transform=`translate(${_e}px, ${ie}px)`;let Ce=Sn(i,"drop");document.querySelectorAll("[type='drop']").forEach(Y=>{const pe=JSON.parse(localStorage.getItem(ke))||{};Object.keys(pe).map(Number).includes(Y.tabIndex)?(Y.tagName.toLowerCase()==="lido-text"&&(Y.style.border="",Y.style.backgroundColor="transparent"),Y.tagName.toLowerCase()==="lido-image"&&(Y.style.opacity="0")):(Y.tagName.toLowerCase()==="lido-text"&&(Y.style.border="",Y.style.backgroundColor=""),Y.tagName.toLowerCase()==="lido-image"&&(Y.style.opacity="1"))}),Ce&&(Ce.tagName.toLowerCase()==="lido-text"?(Ce.style.border="2px dashed #ff0000",Ce.style.backgroundColor="rgba(255, 0, 0, 0.1)"):Ce.style.opacity="0.3")};let he=null;const ye=V=>{var H;if(d=!1,h)return;document.removeEventListener("mousemove",ue),document.removeEventListener("mouseup",ye),document.removeEventListener("touchmove",ue),document.removeEventListener("touchend",ye),i.style.opacity="",i.style.cursor="move";const we=document.querySelectorAll("[type='drop']");we.forEach(be=>{we.forEach(me=>{const Ae=JSON.parse(localStorage.getItem(ke))||{};Object.keys(Ae).map(Number).includes(me.tabIndex)?(me.tagName.toLowerCase()==="lido-text"&&(me.style.border="",me.style.backgroundColor="transparent"),me.tagName.toLowerCase()==="lido-image"&&(me.style.opacity="0")):(me.tagName.toLowerCase()==="lido-text"&&(me.style.border="",me.style.backgroundColor=""),me.tagName.toLowerCase()==="lido-image"&&(me.style.opacity="1"))})});let N=Sn(i,"drop");An(i,N),((H=i.getAttribute("dropAttr"))===null||H===void 0?void 0:H.toLowerCase())===qt.Diagonal&&(N?i&&(i.classList.add("diagonal-drop"),N.classList.add("diagonal-target"),he=N):(he&&(he.classList.remove("diagonal-target"),he=null),i==null||i.classList.remove("diagonal-drop"),i.style.transform="translate(0, 0)",b&&(b.remove(),b=null)))};i.style.cursor="move",i.style.transform="translate(0, 0)",i.addEventListener("mousedown",k),i.addEventListener("touchstart",k),i.addEventListener("click",V=>{h&&Zn(i,"drag")})}const Sn=(i,d)=>{const h=i.getBoundingClientRect(),g=document.querySelectorAll(`[type="${d}"]`);let w=null,_=0;return g.forEach(L=>{if(L===i)return;const b=L.getBoundingClientRect(),C=Math.max(0,Math.min(h.right,b.right)-Math.max(h.left,b.left)),E=Math.max(0,Math.min(h.bottom,b.bottom)-Math.max(h.top,b.top)),x=C*E;if(x!==0)if(d==="slide"){const k=h.width*h.height,D=b.width*b.height,u=Math.min(k,D)*.8;x>=u&&x>_&&(_=x,w=L)}else x>_&&(_=x,w=L)}),w};async function An(i,d){const h=localStorage.getItem(We)||"",g=localStorage.getItem(ke);let w=JSON.parse(localStorage.getItem(rt)||" {}");if(d&&(d.getAttribute("isAllowOnlyOneDrop")==="true"||!d.getAttribute("isAllowOnlyOneDrop"))){const b=Object.values(w).find(E=>document.getElementById(E.drop)===d);if(b?b.isFull=!0:console.warn("No matching drop item found for",d),localStorage.setItem(rt,JSON.stringify(w)),Sn(i,"drag")){if(i.style.transform="translate(0,0)",i.style.transition="transform 0.5s ease",g){let x=JSON.parse(g);for(const k in x)x[k].includes(i.value)&&delete x[k];localStorage.setItem(ke,JSON.stringify(x))}document.querySelectorAll("[type='drop']").forEach(x=>{const k=JSON.parse(localStorage.getItem(ke))||{};Object.keys(k).map(Number).includes(x.tabIndex)?(x.tagName.toLowerCase()==="lido-text"&&(x.style.border="",x.style.backgroundColor="transparent"),x.tagName.toLowerCase()==="lido-image"&&(x.style.opacity="0")):(x.tagName.toLowerCase()==="lido-text"&&(x.style.border="",x.style.backgroundColor=""),x.tagName.toLowerCase()==="lido-image"&&(x.style.opacity="1"))});return}}if(!d){i.style.transform="translate(0,0)",i.style.transition="transform 0.5s ease";let b=_n.get(i);if(b){let E=Object.values(w).find(x=>document.getElementById(x.drop)===b);E&&(E.isFull=!1,localStorage.setItem(rt,JSON.stringify(w))),_n.delete(i)}if(h){let E=JSON.parse(h);E=E.filter(x=>x!=i.value),localStorage.setItem(We,JSON.stringify(E))}if(g){let E=JSON.parse(g);for(const x in E)E[x].includes(i.value)&&delete E[x];localStorage.setItem(ke,JSON.stringify(E))}document.querySelectorAll("[type='drop']").forEach(E=>{const x=JSON.parse(localStorage.getItem(ke))||{};Object.keys(x).map(Number).includes(E.tabIndex)?(E.tagName.toLowerCase()==="lido-text"&&(E.style.border="",E.style.backgroundColor="transparent"),E.tagName.toLowerCase()==="lido-image"&&(E.style.opacity="0")):(E.tagName.toLowerCase()==="lido-text"&&(E.style.border="",E.style.backgroundColor=""),E.tagName.toLowerCase()==="lido-image"&&(E.style.opacity="1"))}),Pn();return}if(g){let b=_n.get(i);if(b){let E=Object.values(w).find(x=>document.getElementById(x.drop)===b);E&&(E.isFull=!1,localStorage.setItem(rt,JSON.stringify(w)))}let C=JSON.parse(g);for(const E in C)C[E].includes(i.value)&&delete C[E];localStorage.setItem(ke,JSON.stringify(C))}let _=JSON.parse(localStorage.getItem(Gt))||0;if(_+=1,localStorage.setItem(Gt,JSON.stringify(_)),_===Jt(d.value)){const b=Object.values(w).find(C=>document.getElementById(C.drop)===d);b?b.isFull=!0:console.warn("No matching drop item found for",d),localStorage.setItem(rt,JSON.stringify(w)),_=0,localStorage.setItem(Gt,JSON.stringify(_))}_n.set(i,d);const L=d.value.includes(i.value);if(Jr(i,d,L),L){const b=d.getAttribute("onCorrect");b&&await $e(b,d,i)}else{const b=d.getAttribute("onInCorrect");await $e(b,d,i)}Ln(L),i.style.opacity="1",await to(i,d)}const $e=async(i,d,h)=>{var g;const w=eo(i);for(let _=0;_<w.length;_++){const L=w[_],b=document.querySelector(L.actor),C=L.actor==="this"?d:L.actor==="element"?h:b||document.getElementById(L.actor);if(C)switch(L.action){case"transform":{const E=window.getComputedStyle(C).transform;C.style.transform=E!=="none"?`${E} ${L.value}`:L.value;break}case"alignMatch":{const E=C,x=h,k=document.querySelector("#lido-container"),D=In(k);x.style.transform="translate(0,0)";const u=E.getBoundingClientRect(),U=x.getBoundingClientRect(),re=u.left+u.width/2,ue=u.top+u.height/2,he=U.left+U.width/2,ye=U.top+U.height/2,V=(re-he)/D,H=(ue-ye)/D;((g=h.getAttribute("dropAttr"))===null||g===void 0?void 0:g.toLowerCase())===qt.Diagonal?x.style.transform=`translate(${V-90}px, ${H-90}px)`:x.style.transform=`translate(${V}px, ${H}px)`;break}case"removeClone":{document.querySelectorAll(L.value).forEach(x=>x.remove());break}case"addClass":{C.classList.add(L.value);break}case"speak":{await ot.getI().play(C);break}case"stop":{await ot.getI().stop();break}case"sleep":{!isNaN(Number(L.value))&&await new Promise(x=>setTimeout(x,Number(L.value)));break}case"avatarAnimate":{const x=It.getInstance().getRiveInstance();x&&L.value&&x.play(L.value);break}default:{C.style[L.action]=L.value;break}}}},eo=i=>{var d;const h=[];return i&&((d=i.split(";"))===null||d===void 0?void 0:d.map(w=>w.trim())).forEach(w=>{if(w){const[_,L]=w.split("=").map(C=>C.trim()),b=_.lastIndexOf(".");if(b!==-1){const C=_.substring(0,b).trim(),E=_.substring(b+1).trim();h.push({actor:C,action:E,value:L.replace(/['"]/g,"")})}}}),h},or=(i,d)=>{const h=i.split(",").map(_=>_.trim());let g=0,w=new Set;for(const _ of h)if(_.startsWith("(")&&_.endsWith(")")){const L=_.slice(1,-1).split("|").map(C=>C.trim()),b=d[g].slice(1,-1).split("|").map(C=>C.trim());if(g>=b.length)return!1;for(let C=0;C<L.length;C++)if(!L.includes(b[C]))return!1;g++}else if(_.includes("|")){const L=_.split("|").map(b=>b.trim());for(const b of L)w.add(b)}else{if(g>=d.length||d[g]!==_)return!1;g++}for(;g<d.length;){if(!w.has(d[g]))return!1;w.delete(d[g]),g++}return g===d.length},Jt=i=>{const d=i.split(",").map(g=>g.trim());let h=0;for(const g of d)g.startsWith("(")&&g.endsWith(")")?g.includes("|")?h+=g.split("|").length:h+=1:h+=g.split("|").length;return h};async function to(i,d){var h;const g=document.querySelector("#lido-container");if(!g)return;if(g.getAttribute("isAllowOnlyCorrect")==="true"&&!d.value.includes(i.value)){i.style.transform="translate(0,0)";return}await $e("this.alignMatch='true'",d,i);let _=JSON.parse((h=localStorage.getItem(ke))!==null&&h!==void 0?h:"{}");const L=d.getAttribute("tabindex");_[L]||(_[L]=[]),_[L].push(i.value),localStorage.setItem(ke,JSON.stringify(_));const C=Object.keys(_).sort((x,k)=>parseInt(x)-parseInt(k)).reduce((x,k)=>{const D=_[k];return D.length>1?x.push(`(${D.join("|")})`):x.push(D[0]),x},[]);localStorage.setItem(We,JSON.stringify(C)),document.querySelectorAll("[type='drop']").forEach(x=>{const k=JSON.parse(localStorage.getItem(ke))||{};Object.keys(k).map(Number).includes(x.tabIndex)?(x.tagName.toLowerCase()==="lido-text"&&(x.style.border="",x.style.backgroundColor="transparent"),x.tagName.toLowerCase()==="lido-image"&&(x.style.opacity="0")):(x.tagName.toLowerCase()==="lido-text"&&(x.style.border="",x.style.backgroundColor=""),x.tagName.toLowerCase()==="lido-image"&&(x.style.opacity="1"))}),Pn()}const Ln=i=>{i?at.rightMoves+=1:at.wrongMoves+=1,console.log("Right Moves : ",at.rightMoves),console.log("Wrong Moves : ",at.wrongMoves)},no=()=>{const i=at.rightMoves,d=at.wrongMoves;let h=Math.floor(i/(i+d)*100);io(h),at.rightMoves=0,at.wrongMoves=0},io=i=>{var d,h,g;const w=document.querySelector("lido-home");if(!w)return;const _=Number((d=w.getAttribute("index"))!==null&&d!==void 0?d:0),L=Number((h=w.getAttribute("totalIndex"))!==null&&h!==void 0?h:0),b=JSON.parse((g=localStorage.getItem(Gn))!==null&&g!==void 0?g:"{}"),C=_.toString();if(b[C]=i,Yr(_,L,i),localStorage.setItem(Gn,JSON.stringify(b)),L-1==_){const E=Object.values(b),x=E.reduce((k,D)=>k+D,0)/E.length;at.finalScore=Math.floor(x),console.log("Total Score : ",at.finalScore),Vr(x),localStorage.removeItem(Gn)}},Pn=()=>{var i;const d=document.querySelector("#lido-container"),h=d.objective,g=(i=localStorage.getItem(We))!==null&&i!==void 0?i:"",w=document.querySelector("#lido-checkButton");if(!g||Jt(g)!==Jt(h)){$e("this.addClass='lido-disable-check-button'",w);return}d.getAttribute("showCheck")=="true"?w.classList.remove("lido-disable-check-button"):Kn()},Kn=async()=>{var i;const d=document.querySelector("#lido-container");if(!d)return;const h=d.objective,g=(i=JSON.parse(localStorage.getItem(We)))!==null&&i!==void 0?i:[];if(or(h,g)){const _=d.getAttribute("onCorrect");_&&await $e(_,d),En()}else{const _=d.getAttribute("onInCorrect");await $e(_,d),d.getAttribute("isContinueOnCorrect")==="true"||En()}await no()},En=()=>{ot.getI().stop(),console.log("ðŸš€ ~ triggerNextContainer ~ event:",event),Gr()},gt=async(i,d)=>{const h=document.querySelector("#lido-container");if(!h)return;const g=i.getAttribute("onEntry");await $e(g,i);const w=h.getAttribute("canplay");if(!(w!=null&&w==="false")){switch(d){case"drag":{Qr(i);break}case"click":{oo(i);break}case"drop":{ao(i);break}case"slide":{Kr(i);break}}ro(i)}};function ro(i){if(!i)return;const d=i.getAttribute("onTouch");d&&(i.onclick=async()=>{console.log("ðŸš€ ~ element.onclick= ~ onTouch:",d),d&&await $e(d,i)})}function oo(i){if(ei(i,"click"),i.style.cursor="pointer",!i){console.error("No element provided.");return}const d=async()=>{ot.getI().stop();const h=document.querySelector("#lido-container"),g=h.objective.split(","),w=document.querySelector("#lido-checkButton"),_=h.getAttribute("showCheck")==="true";if(i.getAttribute("id")=="lido-checkButton"){w.classList.add("lido-disable-check-button"),await Kn();return}const L=i.classList.contains("lido-element-selected");let b=JSON.parse(localStorage.getItem(We))||[];if(g.length===1){localStorage.setItem(We,JSON.stringify([i.value]));const C=g.includes(i.value);if(nr(i,C),C){const E=i.getAttribute("onCorrect");i.style.pointerEvents="none",await $e(E,i)}else{const E=i.getAttribute("onInCorrect");await $e(E,i)}Ln(C),Pn();return}if(_&&w.classList.remove("lido-disable-check-button"),L){i.classList.remove("lido-element-selected"),$e(i.getAttribute("onEntry"),i),b=b.filter(k=>k!=i.value),localStorage.setItem(We,JSON.stringify(b));let C=JSON.parse(localStorage.getItem(ke))||{};const E=i.value,x=Object.keys(C).find(k=>C[k].includes(E));if(x){C[x]=C[x].filter(u=>u!==E),C[x].length===0&&delete C[x],localStorage.setItem(ke,JSON.stringify(C));const D=Object.keys(C).sort((u,U)=>parseInt(u)-parseInt(U)).reduce((u,U)=>u.concat(C[U]),[]);localStorage.setItem(We,JSON.stringify(D))}_&&b.length===0&&w.classList.add("lido-disable-check-button");return}else{i.classList.add("lido-element-selected");const C=i.value,E=Object.keys(g).find(U=>g[U]===C);let x=JSON.parse(localStorage.getItem(ke))||{};E?x[E]=[C]:x[g.length+b.length]=[C],localStorage.setItem(ke,JSON.stringify(x));const D=Object.keys(x).sort((U,re)=>parseInt(U)-parseInt(re)).reduce((U,re)=>U.concat(x[re]),[]);localStorage.setItem(We,JSON.stringify(D));const u=g.includes(i.value);if(nr(i,u),u){const U=i.getAttribute("onCorrect");await $e(U,i)}else{const U=i.getAttribute("onInCorrect");await $e(U,i)}Ln(u)}!_&&Jt(g)===Jt(b)&&Kn()};i.addEventListener("click",d)}function ao(i){let d=JSON.parse(localStorage.getItem(rt)||"{}");const h=i.getAttribute("tabIndex");(typeof d!="object"||d===null)&&(d={}),d[h]||(d[h]={drop:i.id,isFull:!1},localStorage.setItem(rt,JSON.stringify(d))),i.onclick=()=>{Zn(i,"drop")},ei(i,"drop")}async function Zn(i,d){if(document.querySelectorAll(`[type='${d}']`).forEach(_=>{Kt(_)}),!document.querySelector("#dynamic-highlight-style")){const _=document.createElement("style");_.id="dynamic-highlight-style",_.innerHTML=`
      .highlight {
        // border: 4px solid #e74c3c; /* Thicker red border for more visibility */
        // border-radius: 12px; /* Larger rounded corners */
        background-color: rgba(231, 76, 60, 0.3); /* Stronger, more noticeable background */
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2), 0 12px 40px rgba(0, 0, 0, 0.2); /* Stronger shadow */
        outline: 4px solid rgba(231, 76, 60, 0.6); /* Glow effect */
      }
    `,document.head.appendChild(_)}i==null||i.classList.add("highlight"),i.ariaPressed="true";const g=d==="drop"?i:document.querySelector("[type='drop'].highlight"),w=d==="drag"?i:document.querySelector("[type='drag'].highlight");if(g||so(i),g&&w){w.style.transition="transform 0.5s ease",w.style.transform="";const _=document.querySelector("#lido-container"),L=In(_);console.log("ðŸš€ ~ onClickDropOrDragElement ~ containerScale:",L);const b=g.getBoundingClientRect(),C=w.getBoundingClientRect(),E=(b.left-C.left)/L,x=(b.top-C.top)/L;w.style.transform=`translate(${E}px, ${x}px)`,document.querySelectorAll("*").forEach(D=>{Kt(D)}),await An(w,g)}}const _n=new Map;async function so(i){const d=JSON.parse(localStorage.getItem(rt)||"{}"),h=i;if(!h){console.error("Element not found");return}const g=getComputedStyle(h).transform;if(Kt(i),g&&g!=="none"&&g!=="matrix(1, 0, 0, 1, 0, 0)"){h.style.transition="transform 0.5s ease",h.style.transform="translate(0px, 0px)",An(h,null);return}let w=Object.values(d).find(_=>!_.isFull);if(w){const _=document.querySelector(`#${w.drop}`);h.style.transition="transform 0.5s ease",An(h,_)}}function Kt(i){i.classList.remove("highlight"),i.ariaPressed="false"}function ir(i){if(!i)return;i.classList.add("speaking-highlight");const d="#speaking-highlight-style";if(!document.querySelector(d)){const h=document.createElement("style");h.id=d,h.innerHTML=`
      .speaking-highlight {
        --base-transform: ${i.style.transform};
        box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9) !important; /* Stronger orange glow effect */
        // border: 3px solid green !important;
        transition: box-shadow 0.5s ease-in-out, transform 0.5s ease-in-out;
        transform: scale(1.05); /* Subtle scale effect to pop the element */
        animation: pulseEffect 1.5s infinite; /* Pulsing animation */
      }

      @keyframes pulseEffect {
        0% {
          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);
          transform: var(--base-transform) scale(1.05);
        }
        50% {
          box-shadow: 0 0 30px 15px rgba(255, 165, 0, 1);
          transform: var(--base-transform) scale(1.1);
        }
        100% {
          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);
          transform: var(--base-transform) scale(1.05);
        }
      }
    `,document.head.appendChild(h)}}function qn(i){i&&i.classList.remove("speaking-highlight")}function Ct(i){const h=document.querySelector("#lido-container").getAttribute("baseUrl");return i!=null&&i.startsWith("http")?i:h?h+i:rr(i)}async function lo(i,d){return new Promise((h,g)=>{if(!("speechSynthesis"in window)){g(new Error("Speech synthesis is not supported in this browser."));return}const w=window.speechSynthesis;setTimeout(()=>{const _=new SpeechSynthesisUtterance(i);_.onend=()=>{h(!0)},w.speak(_)},50)})}function Qn(i,d,h,g,w){if(g===void 0)return;const _=Array.from(i.children);let L=g;d&&g<d&&(L=d),h&&g>h&&(L=h),_.forEach((b,C)=>{b.style.display=C<L?w:"none"})}const Z=(i,d)=>!i||!i.includes(",")?i:i.split(",").reduce((g,w)=>{const[_,L]=w.split(".");return g[_.trim()]=L.trim(),g},{})[d]||"",ei=(i,d)=>{const h=document.querySelectorAll("[type='drag']"),g=document.querySelectorAll("[type='drop']"),w=document.querySelectorAll("[type='click']");let _=0;if(d==="click"){w.forEach(L=>{const b=L;let C=null;if(b.getAttribute("flexibleWidth"))C=b;else{const E=b.children;for(let x=0;x<E.length;x++){const k=E[x];if(k.getAttribute("flexibleWidth")){C=k;break}}}if(C){const E=C.style.width,x=C.style.padding;C.style.width="auto",C.style.padding="0 20px";const k=C.offsetWidth;C.style.width=E,C.style.padding=x,k>_&&(_=k)}}),w.forEach(L=>{const b=L;if(b.getAttribute("flexibleWidth")){if(b.getAttribute("flexibleWidth")==="true")return;b.style.width=`${_}px`}else{const C=b.children;for(let E=0;E<C.length;E++){const x=C[E];if(x.getAttribute("flexibleWidth")){if(x.getAttribute("flexibleWidth")==="true")return;x.style.width=`${_}px`;break}}}});return}h.forEach(L=>{const b=L,C=b.style.width,E=b.style.padding;b.style.width="auto",b.style.padding="0 20px";const x=b.offsetWidth;b.style.width=C,b.style.padding=E,x>_&&(_=x)}),h.forEach(L=>{const b=L,C=b.getAttribute("flexibleWidth");C==="false"?b.style.width=`${_}px`:C==="true"&&d==="drag"&&(b.style.width="auto",b.style.padding="0 20px")}),g.forEach(L=>{const b=L,C=b.getAttribute("flexibleWidth");if(C==="false"){const E=parseFloat(getComputedStyle(b).borderWidth);if(typeof E=="number"){const x=_-E*2,k=parseFloat(b.style.height)-E*2;b.style.height=`${k}px`,b.style.width=`${x}px`;return}}else C==="true"&&d==="drag"&&(b.style.width="auto",b.style.padding="0 20px")})};var co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ar={exports:{}};(function(i,d){(function(g,w){i.exports=w()})(co,()=>(()=>{var h=[,(L,b,C)=>{C.r(b),C.d(b,{default:()=>x});var E=(()=>{var k=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(D={}){var u=D,U,re;u.ready=new Promise((e,t)=>{U=e,re=t});function ue(){function e(f){const y=o;n=t=0,o=new Map,y.forEach(S=>{try{S(f)}catch(m){console.error(m)}}),this.ob(),a&&a.Tb()}let t=0,n=0,o=new Map,a=null,l=null;this.requestAnimationFrame=function(f){t||(t=requestAnimationFrame(e.bind(this)));const y=++n;return o.set(y,f),y},this.cancelAnimationFrame=function(f){o.delete(f),t&&o.size==0&&(cancelAnimationFrame(t),t=0)},this.Rb=function(f){l&&(document.body.remove(l),l=null),f||(l=document.createElement("div"),l.style.backgroundColor="black",l.style.position="fixed",l.style.right=0,l.style.top=0,l.style.color="white",l.style.padding="4px",l.innerHTML="RIVE FPS",f=function(y){l.innerHTML="RIVE FPS "+y.toFixed(1)},document.body.appendChild(l)),a=new function(){let y=0,S=0;this.Tb=function(){var m=performance.now();S?(++y,m-=S,1e3<m&&(f(1e3*y/m),y=S=0)):(S=m,y=0)}}},this.Ob=function(){l&&(document.body.remove(l),l=null),a=null},this.ob=function(){}}function he(e){console.assert(!0);const t=new Map;let n=-1/0;this.push=function(o){return o=o+((1<<e)-1)>>e,t.has(o)&&clearTimeout(t.get(o)),t.set(o,setTimeout(function(){t.delete(o),t.length==0?n=-1/0:o==n&&(n=Math.max(...t.keys()),console.assert(n<o))},1e3)),n=Math.max(o,n),n<<e}}const ye=u.onRuntimeInitialized;u.onRuntimeInitialized=function(){ye&&ye();let e=u.decodeAudio;u.decodeAudio=function(a,l){a=e(a),l(a)};let t=u.decodeFont;u.decodeFont=function(a,l){a=t(a),l(a)};const n=u.FileAssetLoader;u.ptrToAsset=a=>{let l=u.ptrToFileAsset(a);return l.isImage?u.ptrToImageAsset(a):l.isFont?u.ptrToFontAsset(a):l.isAudio?u.ptrToAudioAsset(a):l},u.CustomFileAssetLoader=n.extend("CustomFileAssetLoader",{__construct:function({loadContents:a}){this.__parent.__construct.call(this),this.Gb=a},loadContents:function(a,l){return a=u.ptrToAsset(a),this.Gb(a,l)}}),u.CDNFileAssetLoader=n.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(a){let l=u.ptrToAsset(a);return a=l.cdnUuid,a===""?!1:(function(f,y){var S=new XMLHttpRequest;S.responseType="arraybuffer",S.onreadystatechange=function(){S.readyState==4&&S.status==200&&y(S)},S.open("GET",f,!0),S.send(null)}(l.cdnBaseUrl+"/"+a,f=>{l.decode(new Uint8Array(f.response))}),!0)}}),u.FallbackFileAssetLoader=n.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(a){this.kb.push(a)},loadContents:function(a,l){for(let f of this.kb)if(f.loadContents(a,l))return!0;return!1}});let o=u.computeAlignment;u.computeAlignment=function(a,l,f,y,S=1){return o.call(this,a,l,f,y,S)}};const V="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),H=new function(){function e(){if(!t){let J=function(ee,j,xe){if(j=T.createShader(j),T.shaderSource(j,xe),T.compileShader(j),xe=T.getShaderInfoLog(j),0<(xe||"").length)throw xe;T.attachShader(ee,j)};var p=document.createElement("canvas"),R={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let T;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(T=p.getContext("webgl",R),n=1,!T)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(T=p.getContext("webgl2",R))n=2;else if(T=p.getContext("webgl",R))n=1;else return console.log("No WebGL support. Image mesh will not be drawn."),!1;if(T=new Proxy(T,{get(ee,j){if(ee.isContextLost()){if(S||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",j),S=!0),typeof ee[j]=="function")return function(){}}else return typeof ee[j]=="function"?function(...xe){return ee[j].apply(ee,xe)}:ee[j]},set(ee,j,xe){if(ee.isContextLost())S||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+j),S=!0);else return ee[j]=xe,!0}}),o=Math.min(T.getParameter(T.MAX_RENDERBUFFER_SIZE),T.getParameter(T.MAX_TEXTURE_SIZE)),p=T.createProgram(),J(p,T.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),J(p,T.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),T.bindAttribLocation(p,0,"vertex"),T.bindAttribLocation(p,1,"uv"),T.linkProgram(p),R=T.getProgramInfoLog(p),0<(R||"").trim().length)throw R;a=T.getUniformLocation(p,"mat"),l=T.getUniformLocation(p,"translate"),T.useProgram(p),T.bindBuffer(T.ARRAY_BUFFER,T.createBuffer()),T.enableVertexAttribArray(0),T.enableVertexAttribArray(1),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,T.createBuffer()),T.uniform1i(T.getUniformLocation(p,"image"),0),T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=T}return!0}let t=null,n=0,o=0,a=null,l=null,f=0,y=0,S=!1;e(),this.hc=function(){return e(),o},this.Mb=function(p){t.deleteTexture&&t.deleteTexture(p)},this.Lb=function(p){if(!e())return null;const R=t.createTexture();return R?(t.bindTexture(t.TEXTURE_2D,R),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,p),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),n==2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),R):null};const m=new he(8),M=new he(8),F=new he(10),W=new he(10);this.Qb=function(p,R,T,J,ee){if(e()){var j=m.push(p),xe=M.push(R);if(t.canvas){(t.canvas.width!=j||t.canvas.height!=xe)&&(t.canvas.width=j,t.canvas.height=xe),t.viewport(0,xe-R,p,R),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),T.sort((se,nt)=>nt.wb-se.wb),j=F.push(J),f!=j&&(t.bufferData(t.ARRAY_BUFFER,8*j,t.DYNAMIC_DRAW),f=j),j=0;for(var Oe of T)t.bufferSubData(t.ARRAY_BUFFER,j,Oe.Ta),j+=4*Oe.Ta.length;console.assert(j==4*J);for(var tt of T)t.bufferSubData(t.ARRAY_BUFFER,j,tt.Db),j+=4*tt.Db.length;console.assert(j==8*J),j=W.push(ee),y!=j&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*j,t.DYNAMIC_DRAW),y=j),Oe=0;for(var At of T)t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,Oe,At.indices),Oe+=2*At.indices.length;console.assert(Oe==2*ee),At=0,tt=!0,j=Oe=0;for(const se of T){se.image.Ka!=At&&(t.bindTexture(t.TEXTURE_2D,se.image.Ja||null),At=se.image.Ka),se.mc?(t.scissor(se.Ya,xe-se.Za-se.jb,se.Ac,se.jb),tt=!0):tt&&(t.scissor(0,xe-R,p,R),tt=!1),T=2/p;const nt=-2/R;t.uniform4f(a,se.ha[0]*T*se.Ba,se.ha[1]*nt*se.Ca,se.ha[2]*T*se.Ba,se.ha[3]*nt*se.Ca),t.uniform2f(l,se.ha[4]*T*se.Ba+T*(se.Ya-se.ic*se.Ba)-1,se.ha[5]*nt*se.Ca+nt*(se.Za-se.jc*se.Ca)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,j),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,j+4*J),t.drawElements(t.TRIANGLES,se.indices.length,t.UNSIGNED_SHORT,Oe),j+=4*se.Ta.length,Oe+=2*se.indices.length}console.assert(j==4*J),console.assert(Oe==2*ee)}}},this.canvas=function(){return e()&&t.canvas}},we=u.onRuntimeInitialized;u.onRuntimeInitialized=function(){function e(P){switch(P){case m.srcOver:return"source-over";case m.screen:return"screen";case m.overlay:return"overlay";case m.darken:return"darken";case m.lighten:return"lighten";case m.colorDodge:return"color-dodge";case m.colorBurn:return"color-burn";case m.hardLight:return"hard-light";case m.softLight:return"soft-light";case m.difference:return"difference";case m.exclusion:return"exclusion";case m.multiply:return"multiply";case m.hue:return"hue";case m.saturation:return"saturation";case m.color:return"color";case m.luminosity:return"luminosity"}}function t(P){return"rgba("+((16711680&P)>>>16)+","+((65280&P)>>>8)+","+((255&P)>>>0)+","+((4278190080&P)>>>24)/255+")"}function n(){0<xe.length&&(H.Qb(j.drawWidth(),j.drawHeight(),xe,Oe,tt),xe=[],tt=Oe=0,j.reset(512,512));for(const P of ee){for(const B of P.H)B();P.H=[]}ee.clear()}we&&we();var o=u.RenderPaintStyle;const a=u.RenderPath,l=u.RenderPaint,f=u.Renderer,y=u.StrokeCap,S=u.StrokeJoin,m=u.BlendMode,M=o.fill,F=o.stroke,W=u.FillRule.evenOdd;let p=1;var R=u.RenderImage.extend("CanvasRenderImage",{__construct:function({la:P,xa:B}={}){this.__parent.__construct.call(this),this.Ka=p,p=p+1&2147483647||1,this.la=P,this.xa=B},__destruct:function(){this.Ja&&(H.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(P){var B=this;B.xa&&B.xa(B);var oe=new Image;B.Wa=URL.createObjectURL(new Blob([P],{type:"image/png"})),oe.onload=function(){B.Fb=oe,B.Ja=H.Lb(oe),B.size(oe.width,oe.height),B.la&&B.la(B)},oe.src=B.Wa}}),T=a.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(P,B,oe,ae,G,le,ce){var ve=this.T,Ve=ve.addPath;P=P.T;const Ee=new DOMMatrix;Ee.a=B,Ee.b=oe,Ee.c=ae,Ee.d=G,Ee.e=le,Ee.f=ce,Ve.call(ve,P,Ee)},fillRule:function(P){this.Va=P},moveTo:function(P,B){this.T.moveTo(P,B)},lineTo:function(P,B){this.T.lineTo(P,B)},cubicTo:function(P,B,oe,ae,G,le){this.T.bezierCurveTo(P,B,oe,ae,G,le)},close:function(){this.T.closePath()}}),J=l.extend("CanvasRenderPaint",{color:function(P){this.Xa=t(P)},thickness:function(P){this.Ib=P},join:function(P){switch(P){case S.miter:this.Ia="miter";break;case S.round:this.Ia="round";break;case S.bevel:this.Ia="bevel"}},cap:function(P){switch(P){case y.butt:this.Ha="butt";break;case y.round:this.Ha="round";break;case y.square:this.Ha="square"}},style:function(P){this.Hb=P},blendMode:function(P){this.Eb=e(P)},clearGradient:function(){this.ja=null},linearGradient:function(P,B,oe,ae){this.ja={yb:P,zb:B,bb:oe,cb:ae,Ra:[]}},radialGradient:function(P,B,oe,ae){this.ja={yb:P,zb:B,bb:oe,cb:ae,Ra:[],ec:!0}},addStop:function(P,B){this.ja.Ra.push({color:P,stop:B})},completeGradient:function(){},draw:function(P,B,oe){let ae=this.Hb;var G=this.Xa,le=this.ja;if(P.globalCompositeOperation=this.Eb,le!=null){G=le.yb;var ce=le.zb;const Ve=le.bb;var ve=le.cb;const Ee=le.Ra;le.ec?(le=Ve-G,ve-=ce,G=P.createRadialGradient(G,ce,0,G,ce,Math.sqrt(le*le+ve*ve))):G=P.createLinearGradient(G,ce,Ve,ve);for(let it=0,Re=Ee.length;it<Re;it++)ce=Ee[it],G.addColorStop(ce.stop,t(ce.color));this.Xa=G,this.ja=null}switch(ae){case F:P.strokeStyle=G,P.lineWidth=this.Ib,P.lineCap=this.Ha,P.lineJoin=this.Ia,P.stroke(B);break;case M:P.fillStyle=G,P.fill(B,oe)}}});const ee=new Set;let j=null,xe=[],Oe=0,tt=0;var At=u.CanvasRenderer=f.extend("Renderer",{__construct:function(P){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=P.getContext("2d"),this.Ua=P,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const P=this.S.length-6;if(6>P)throw"restore() called without matching save().";this.S.splice(P),this.H.push(this.C.restore.bind(this.C))},transform:function(P,B,oe,ae,G,le){const ce=this.S,ve=ce.length-6;ce.splice(ve,6,ce[ve]*P+ce[ve+2]*B,ce[ve+1]*P+ce[ve+3]*B,ce[ve]*oe+ce[ve+2]*ae,ce[ve+1]*oe+ce[ve+3]*ae,ce[ve]*G+ce[ve+2]*le+ce[ve+4],ce[ve+1]*G+ce[ve+3]*le+ce[ve+5]),this.H.push(this.C.transform.bind(this.C,P,B,oe,ae,G,le))},rotate:function(P){const B=Math.sin(P);P=Math.cos(P),this.transform(P,B,-B,P,0,0)},_drawPath:function(P,B){this.H.push(B.draw.bind(B,this.C,P.T,P.Va===W?"evenodd":"nonzero"))},_drawRiveImage:function(P,B,oe){var ae=P.Fb;if(ae){var G=this.C,le=e(B);this.H.push(function(){G.globalCompositeOperation=le,G.globalAlpha=oe,G.drawImage(ae,0,0),G.globalAlpha=1})}},_getMatrix:function(P){const B=this.S,oe=B.length-6;for(let ae=0;6>ae;++ae)P[ae]=B[oe+ae]},_drawImageMesh:function(P,B,oe,ae,G,le,ce,ve,Ve,Ee){var it=this.C.canvas.width,Re=this.C.canvas.height;const Ji=Ve-ce,Ki=Ee-ve;ce=Math.max(ce,0),ve=Math.max(ve,0),Ve=Math.min(Ve,it),Ee=Math.min(Ee,Re);const Yt=Ve-ce,Vt=Ee-ve;if(console.assert(Yt<=Math.min(Ji,it)),console.assert(Vt<=Math.min(Ki,Re)),!(0>=Yt||0>=Vt)){Ve=Yt<Ji||Vt<Ki,it=Ee=1;var Lt=Math.ceil(Yt*Ee),Et=Math.ceil(Vt*it);Re=H.hc(),Lt>Re&&(Ee*=Re/Lt,Lt=Re),Et>Re&&(it*=Re/Et,Et=Re),j||(j=new u.DynamicRectanizer(Re),j.reset(512,512)),Re=j.addRect(Lt,Et),0>Re&&(n(),ee.add(this),Re=j.addRect(Lt,Et),console.assert(0<=Re));var Zi=Re&65535,Qi=Re>>16;xe.push({ha:this.S.slice(this.S.length-6),image:P,Ya:Zi,Za:Qi,ic:ce,jc:ve,Ac:Lt,jb:Et,Ba:Ee,Ca:it,Ta:new Float32Array(ae),Db:new Float32Array(G),indices:new Uint16Array(le),mc:Ve,wb:P.Ka<<1|(Ve?1:0)}),Oe+=ae.length,tt+=le.length;var Ft=this.C,Nr=e(B);this.H.push(function(){Ft.save(),Ft.resetTransform(),Ft.globalCompositeOperation=Nr,Ft.globalAlpha=oe;const er=H.canvas();er&&Ft.drawImage(er,Zi,Qi,Lt,Et,ce,ve,Yt,Vt),Ft.restore()})}},_clipPath:function(P){this.H.push(this.C.clip.bind(this.C,P.T,P.Va===W?"evenodd":"nonzero"))},clear:function(){ee.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(P,B){this.transform(1,0,0,1,P,B)}});u.makeRenderer=function(P){const B=new At(P),oe=B.C;return new Proxy(B,{get(ae,G){if(typeof ae[G]=="function")return function(...le){return ae[G].apply(ae,le)};if(typeof oe[G]=="function"){if(-1<V.indexOf(G))throw Error("RiveException: Method call to '"+G+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...le){B.H.push(oe[G].bind(oe,...le))}}return ae[G]},set(ae,G,le){if(G in oe)return B.H.push(()=>{oe[G]=le}),!0}})},u.decodeImage=function(P,B){new R({la:B}).decode(P)},u.renderFactory={makeRenderPaint:function(){return new J},makeRenderPath:function(){return new T},makeRenderImage:function(){let P=nt;return new R({xa:()=>{P.total++},la:()=>{if(P.loaded++,P.loaded===P.total){const B=P.ready;B&&(B(),P.ready=null)}}})}};let se=u.load,nt=null;u.load=function(P,B,oe=!0){const ae=new u.FallbackFileAssetLoader;return B!==void 0&&ae.addLoader(B),oe&&(B=new u.CDNFileAssetLoader,ae.addLoader(B)),new Promise(function(G){let le=null;nt={total:0,loaded:0,ready:function(){G(le)}},le=se(P,ae),nt.total==0&&G(le)})};let jr=u.RendererWrapper.prototype.align;u.RendererWrapper.prototype.align=function(P,B,oe,ae,G=1){jr.call(this,P,B,oe,ae,G)},o=new ue,u.requestAnimationFrame=o.requestAnimationFrame.bind(o),u.cancelAnimationFrame=o.cancelAnimationFrame.bind(o),u.enableFPSCounter=o.Rb.bind(o),u.disableFPSCounter=o.Ob,o.ob=n,u.resolveAnimationFrame=n,u.cleanup=function(){j&&j.delete()}};var N=Object.assign({},u),be="./this.program",me=typeof window=="object",Ae=typeof importScripts=="function",fe="",Ze,de;(me||Ae)&&(Ae?fe=self.location.href:typeof document<"u"&&document.currentScript&&(fe=document.currentScript.src),k&&(fe=k),fe.indexOf("blob:")!==0?fe=fe.substr(0,fe.replace(/[?#].*/,"").lastIndexOf("/")+1):fe="",Ae&&(de=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Ze=(e,t,n)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{o.status==200||o.status==0&&o.response?t(o.response):n()},o.onerror=n,o.send(null)});var Me=u.print||console.log.bind(console),Le=u.printErr||console.error.bind(console);Object.assign(u,N),N=null,u.thisProgram&&(be=u.thisProgram);var je;u.wasmBinary&&(je=u.wasmBinary),typeof WebAssembly!="object"&&ge("no native wasm support detected");var Ne,ne,ze=!1,_e,ie,Ce,Ge,Y,pe,c,r;function s(){var e=Ne.buffer;u.HEAP8=_e=new Int8Array(e),u.HEAP16=Ce=new Int16Array(e),u.HEAP32=Y=new Int32Array(e),u.HEAPU8=ie=new Uint8Array(e),u.HEAPU16=Ge=new Uint16Array(e),u.HEAPU32=pe=new Uint32Array(e),u.HEAPF32=c=new Float32Array(e),u.HEAPF64=r=new Float64Array(e)}var v,A=[],I=[],O=[];function X(){var e=u.preRun.shift();A.unshift(e)}var Q=0,z=null;function ge(e){throw u.onAbort&&u.onAbort(e),e="Aborted("+e+")",Le(e),ze=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),re(e),e}function Ie(e){return e.startsWith("data:application/octet-stream;base64,")}var Pe;if(Pe="canvas_advanced.wasm",!Ie(Pe)){var Te=Pe;Pe=u.locateFile?u.locateFile(Te,fe):fe+Te}function vt(e){if(e==Pe&&je)return new Uint8Array(je);if(de)return de(e);throw"both async and sync fetching of the wasm failed"}function qe(e){if(!je&&(me||Ae)){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>vt(e));if(Ze)return new Promise((t,n)=>{Ze(e,o=>t(new Uint8Array(o)),n)})}return Promise.resolve().then(()=>vt(e))}function mt(e,t,n){return qe(e).then(o=>WebAssembly.instantiate(o,t)).then(o=>o).then(n,o=>{Le("failed to asynchronously prepare wasm: "+o),ge(o)})}function Zt(e,t){var n=Pe;return je||typeof WebAssembly.instantiateStreaming!="function"||Ie(n)||n.startsWith("file://")||typeof fetch!="function"?mt(n,e,t):fetch(n,{credentials:"same-origin"}).then(o=>WebAssembly.instantiateStreaming(o,e).then(t,function(a){return Le("wasm streaming compile failed: "+a),Le("falling back to ArrayBuffer instantiation"),mt(n,e,t)}))}var lt,Tt,Dt={446236:(e,t,n,o,a)=>{if(typeof window>"u"||(window.AudioContext||window.webkitAudioContext)===void 0)return 0;if(typeof window.h>"u"){window.h={Aa:0},window.h.I={},window.h.I.ya=e,window.h.I.capture=t,window.h.I.La=n,window.h.ga={},window.h.ga.stopped=o,window.h.ga.xb=a;let l=window.h;l.D=[],l.yc=function(f){for(var y=0;y<l.D.length;++y)if(l.D[y]==null)return l.D[y]=f,y;return l.D.push(f),l.D.length-1},l.Cb=function(f){for(l.D[f]=null;0<l.D.length&&l.D[l.D.length-1]==null;)l.D.pop()},l.Sc=function(f){for(var y=0;y<l.D.length;++y)if(l.D[y]==f)return l.Cb(y)},l.ra=function(f){return l.D[f]},l.Bb=["touchend","click"],l.unlock=function(){for(var f=0;f<l.D.length;++f){var y=l.D[f];y!=null&&y.J!=null&&y.state===l.ga.xb&&y.J.resume().then(()=>{zi(y.pb)},S=>{console.error("Failed to resume audiocontext",S)})}l.Bb.map(function(S){document.removeEventListener(S,l.unlock,!0)})},l.Bb.map(function(f){document.addEventListener(f,l.unlock,!0)})}return window.h.Aa+=1,1},448414:()=>{typeof window.h<"u"&&(--window.h.Aa,window.h.Aa===0&&delete window.h)},448578:()=>navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0,448682:()=>{try{var e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate;return e.close(),t}catch{return 0}},448853:(e,t,n,o,a,l)=>{if(typeof window.h>"u")return-1;var f={},y={};return e==window.h.I.ya&&n!=0&&(y.sampleRate=n),f.J=new(window.AudioContext||window.webkitAudioContext)(y),f.J.suspend(),f.state=window.h.ga.stopped,n=0,e!=window.h.I.ya&&(n=t),f.Z=f.J.createScriptProcessor(o,n,t),f.Z.onaudioprocess=function(S){if((f.sa==null||f.sa.length==0)&&(f.sa=new Float32Array(c.buffer,a,o*t)),e==window.h.I.capture||e==window.h.I.La){for(var m=0;m<t;m+=1)for(var M=S.inputBuffer.getChannelData(m),F=f.sa,W=0;W<o;W+=1)F[W*t+m]=M[W];Xi(l,o,a)}if(e==window.h.I.ya||e==window.h.I.La)for(Yi(l,o,a),m=0;m<S.outputBuffer.numberOfChannels;++m)for(M=S.outputBuffer.getChannelData(m),F=f.sa,W=0;W<o;W+=1)M[W]=F[W*t+m];else for(m=0;m<S.outputBuffer.numberOfChannels;++m)S.outputBuffer.getChannelData(m).fill(0)},e!=window.h.I.capture&&e!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(S){f.Da=f.J.createMediaStreamSource(S),f.Da.connect(f.Z),f.Z.connect(f.J.destination)}).catch(function(S){console.log("Failed to get user media: "+S)}),e==window.h.I.ya&&f.Z.connect(f.J.destination),f.pb=l,window.h.yc(f)},451730:e=>window.h.ra(e).J.sampleRate,451803:e=>{e=window.h.ra(e),e.Z!==void 0&&(e.Z.onaudioprocess=function(){},e.Z.disconnect(),e.Z=void 0),e.Da!==void 0&&(e.Da.disconnect(),e.Da=void 0),e.J.close(),e.J=void 0,e.pb=void 0},452203:e=>{window.h.Cb(e)},452253:e=>{e=window.h.ra(e),e.J.resume(),e.state=window.h.ga.xb},452392:e=>{e=window.h.ra(e),e.J.suspend(),e.state=window.h.ga.stopped}},ct=e=>{for(;0<e.length;)e.shift()(u)},Rt=(e,t)=>{for(var n=0,o=e.length-1;0<=o;o--){var a=e[o];a==="."?e.splice(o,1):a===".."?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},Xe=e=>{var t=e.charAt(0)==="/",n=e.substr(-1)==="/";return(e=Rt(e.split("/").filter(o=>!!o),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},sr=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)},ti=e=>{if(e==="/")return"/";e=Xe(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},lr=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);ge("initRandomDevice")},ni=e=>(ni=lr())(e);function Qt(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if(t=0<=n?arguments[n]:"/",typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t=t.charAt(0)==="/"}return e=Rt(e.split("/").filter(o=>!!o),!t).join("/"),(t?"/":"")+e||"."}var ii=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,yt=(e,t,n)=>{var o=t+n;for(n=t;e[n]&&!(n>=o);)++n;if(16<n-t&&e.buffer&&ii)return ii.decode(e.subarray(t,n));for(o="";t<n;){var a=e[t++];if(a&128){var l=e[t++]&63;if((a&224)==192)o+=String.fromCharCode((a&31)<<6|l);else{var f=e[t++]&63;a=(a&240)==224?(a&15)<<12|l<<6|f:(a&7)<<18|l<<12|f<<6|e[t++]&63,65536>a?o+=String.fromCharCode(a):(a-=65536,o+=String.fromCharCode(55296|a>>10,56320|a&1023))}}else o+=String.fromCharCode(a)}return o},Tn=[],ri=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);127>=o?t++:2047>=o?t+=2:55296<=o&&57343>=o?(t+=4,++n):t+=3}return t},oi=(e,t,n,o)=>{if(!(0<o))return 0;var a=n;o=n+o-1;for(var l=0;l<e.length;++l){var f=e.charCodeAt(l);if(55296<=f&&57343>=f){var y=e.charCodeAt(++l);f=65536+((f&1023)<<10)|y&1023}if(127>=f){if(n>=o)break;t[n++]=f}else{if(2047>=f){if(n+1>=o)break;t[n++]=192|f>>6}else{if(65535>=f){if(n+2>=o)break;t[n++]=224|f>>12}else{if(n+3>=o)break;t[n++]=240|f>>18,t[n++]=128|f>>12&63}t[n++]=128|f>>6&63}t[n++]=128|f&63}}return t[n]=0,n-a};function ai(e,t){var n=Array(ri(e)+1);return e=oi(e,n,0,n.length),t&&(n.length=e),n}var si=[];function li(e,t){si[e]={input:[],F:[],V:t},On(e,cr)}var cr={open:function(e){var t=si[e.node.za];if(!t)throw new $(43);e.s=t,e.seekable=!1},close:function(e){e.s.V.qa(e.s)},qa:function(e){e.s.V.qa(e.s)},read:function(e,t,n,o){if(!e.s||!e.s.V.ib)throw new $(60);for(var a=0,l=0;l<o;l++){try{var f=e.s.V.ib(e.s)}catch{throw new $(29)}if(f===void 0&&a===0)throw new $(6);if(f==null)break;a++,t[n+l]=f}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,n,o){if(!e.s||!e.s.V.Oa)throw new $(60);try{for(var a=0;a<o;a++)e.s.V.Oa(e.s,t[n+a])}catch{throw new $(29)}return o&&(e.node.timestamp=Date.now()),a}},ur={ib:function(){e:{if(!Tn.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e){e=null;break e}Tn=ai(e,!0)}e=Tn.shift()}return e},Oa:function(e,t){t===null||t===10?(Me(yt(e.F,0)),e.F=[]):t!=0&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(Me(yt(e.F,0)),e.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},dr={Oa:function(e,t){t===null||t===10?(Le(yt(e.F,0)),e.F=[]):t!=0&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(Le(yt(e.F,0)),e.F=[])}};function ci(e,t){var n=e.j?e.j.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),n!=0&&(t=Math.max(t,256)),n=e.j,e.j=new Uint8Array(t),0<e.v&&e.j.set(n.subarray(0,e.v),0))}var te={O:null,U(){return te.createNode(null,"/",16895,0)},createNode(e,t,n,o){if((n&61440)===24576||(n&61440)===4096)throw new $(63);return te.O||(te.O={dir:{node:{Y:te.l.Y,P:te.l.P,ka:te.l.ka,va:te.l.va,ub:te.l.ub,Ab:te.l.Ab,vb:te.l.vb,sb:te.l.sb,Ea:te.l.Ea},stream:{ba:te.m.ba}},file:{node:{Y:te.l.Y,P:te.l.P},stream:{ba:te.m.ba,read:te.m.read,write:te.m.write,pa:te.m.pa,lb:te.m.lb,nb:te.m.nb}},link:{node:{Y:te.l.Y,P:te.l.P,ma:te.l.ma},stream:{}},$a:{node:{Y:te.l.Y,P:te.l.P},stream:gr}}),n=pi(e,t,n,o),(n.mode&61440)===16384?(n.l=te.O.dir.node,n.m=te.O.dir.stream,n.j={}):(n.mode&61440)===32768?(n.l=te.O.file.node,n.m=te.O.file.stream,n.v=0,n.j=null):(n.mode&61440)===40960?(n.l=te.O.link.node,n.m=te.O.link.stream):(n.mode&61440)===8192&&(n.l=te.O.$a.node,n.m=te.O.$a.stream),n.timestamp=Date.now(),e&&(e.j[t]=n,e.timestamp=n.timestamp),n},Kc(e){return e.j?e.j.subarray?e.j.subarray(0,e.v):new Uint8Array(e.j):new Uint8Array(0)},l:{Y(e){var t={};return t.Jc=(e.mode&61440)===8192?e.id:1,t.Mc=e.id,t.mode=e.mode,t.Oc=1,t.uid=0,t.Lc=0,t.za=e.za,(e.mode&61440)===16384?t.size=4096:(e.mode&61440)===32768?t.size=e.v:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.Bc=new Date(e.timestamp),t.Nc=new Date(e.timestamp),t.Ic=new Date(e.timestamp),t.Jb=4096,t.Cc=Math.ceil(t.size/t.Jb),t},P(e,t){if(t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&(t=t.size,e.v!=t))if(t==0)e.j=null,e.v=0;else{var n=e.j;e.j=new Uint8Array(t),n&&e.j.set(n.subarray(0,Math.min(t,e.v))),e.v=t}},ka(){throw Mn[44]},va(e,t,n,o){return te.createNode(e,t,n,o)},ub(e,t,n){if((e.mode&61440)===16384){try{var o=tn(t,n)}catch{}if(o)for(var a in o.j)throw new $(55)}delete e.parent.j[e.name],e.parent.timestamp=Date.now(),e.name=n,t.j[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},Ab(e,t){delete e.j[t],e.timestamp=Date.now()},vb(e,t){var n=tn(e,t),o;for(o in n.j)throw new $(55);delete e.j[t],e.timestamp=Date.now()},sb(e){var t=[".",".."],n;for(n in e.j)e.j.hasOwnProperty(n)&&t.push(n);return t},Ea(e,t,n){return e=te.createNode(e,t,41471,0),e.link=n,e},ma(e){if((e.mode&61440)!==40960)throw new $(28);return e.link}},m:{read(e,t,n,o,a){var l=e.node.j;if(a>=e.node.v)return 0;if(e=Math.min(e.node.v-a,o),8<e&&l.subarray)t.set(l.subarray(a,a+e),n);else for(o=0;o<e;o++)t[n+o]=l[a+o];return e},write(e,t,n,o,a,l){if(t.buffer===_e.buffer&&(l=!1),!o)return 0;if(e=e.node,e.timestamp=Date.now(),t.subarray&&(!e.j||e.j.subarray)){if(l)return e.j=t.subarray(n,n+o),e.v=o;if(e.v===0&&a===0)return e.j=t.slice(n,n+o),e.v=o;if(a+o<=e.v)return e.j.set(t.subarray(n,n+o),a),o}if(ci(e,a+o),e.j.subarray&&t.subarray)e.j.set(t.subarray(n,n+o),a);else for(l=0;l<o;l++)e.j[a+l]=t[n+l];return e.v=Math.max(e.v,a+o),o},ba(e,t,n){if(n===1?t+=e.position:n===2&&(e.node.mode&61440)===32768&&(t+=e.node.v),0>t)throw new $(28);return t},pa(e,t,n){ci(e.node,t+n),e.node.v=Math.max(e.node.v,t+n)},lb(e,t,n,o,a){if((e.node.mode&61440)!==32768)throw new $(43);if(e=e.node.j,a&2||e.buffer!==_e.buffer){if((0<n||n+t<e.length)&&(e.subarray?e=e.subarray(n,n+t):e=Array.prototype.slice.call(e,n,n+t)),n=!0,ge(),t=void 0,!t)throw new $(48);_e.set(e,t)}else n=!1,t=e.byteOffset;return{o:t,M:n}},nb(e,t,n,o){return te.m.write(e,t,0,o,n,!1),0}}};function hr(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}var Rn=null,ui={},en=[],fr=1,jt=null,di=!0,$=null,Mn={},xt=(e,t={})=>{if(e=Qt(e),!e)return{path:"",node:null};if(t=Object.assign({gb:!0,Qa:0},t),8<t.Qa)throw new $(32);e=e.split("/").filter(f=>!!f);for(var n=Rn,o="/",a=0;a<e.length;a++){var l=a===e.length-1;if(l&&t.parent)break;if(n=tn(n,e[a]),o=Xe(o+"/"+e[a]),n.wa&&(!l||l&&t.gb)&&(n=n.wa.root),!l||t.fb){for(l=0;(n.mode&61440)===40960;)if(n=vr(o),o=Qt(sr(o),n),n=xt(o,{Qa:t.Qa+1}).node,40<l++)throw new $(32)}}return{path:o,node:n}},hi=e=>{for(var t;;){if(e===e.parent)return e=e.U.mb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}},fi=(e,t)=>{for(var n=0,o=0;o<t.length;o++)n=(n<<5)-n+t.charCodeAt(o)|0;return(e+n>>>0)%jt.length},tn=(e,t)=>{var n;if(n=(n=nn(e,"x"))?n:e.l.ka?0:2)throw new $(n,e);for(n=jt[fi(e.id,t)];n;n=n.lc){var o=n.name;if(n.parent.id===e.id&&o===t)return n}return e.l.ka(e,t)},pi=(e,t,n,o)=>(e=new $i(e,t,n,o),t=fi(e.parent.id,e.name),e.lc=jt[t],jt[t]=e),gi=e=>{var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nn=(e,t)=>{if(di)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0},vi=(e,t)=>{try{return tn(e,t),20}catch{}return nn(e,"wx")},pr=()=>{for(var e=0;4096>=e;e++)if(!en[e])return e;throw new $(33)},bt=e=>{if(e=en[e],!e)throw new $(8);return e},mi=(e,t=-1)=>(Wt||(Wt=function(){this.h={}},Wt.prototype={},Object.defineProperties(Wt.prototype,{object:{get(){return this.node},set(n){this.node=n}},flags:{get(){return this.h.flags},set(n){this.h.flags=n}},position:{get(){return this.h.position},set(n){this.h.position=n}}})),e=Object.assign(new Wt,e),t==-1&&(t=pr()),e.X=t,en[t]=e),gr={open:e=>{e.m=ui[e.node.za].m,e.m.open&&e.m.open(e)},ba:()=>{throw new $(70)}},On=(e,t)=>{ui[e]={m:t}},yi=(e,t)=>{var n=t==="/",o=!t;if(n&&Rn)throw new $(10);if(!n&&!o){var a=xt(t,{gb:!1});if(t=a.path,a=a.node,a.wa)throw new $(10);if((a.mode&61440)!==16384)throw new $(54)}t={type:e,Qc:{},mb:t,kc:[]},e=e.U(t),e.U=t,t.root=e,n?Rn=e:a&&(a.wa=t,a.U&&a.U.kc.push(t))},Je=(e,t,n)=>{var o=xt(e,{parent:!0}).node;if(e=ti(e),!e||e==="."||e==="..")throw new $(28);var a=vi(o,e);if(a)throw new $(a);if(!o.l.va)throw new $(63);return o.l.va(o,e,t,n)},rn=(e,t,n)=>{typeof n>"u"&&(n=t,t=438),Je(e,t|8192,n)},kn=(e,t)=>{if(!Qt(e))throw new $(44);var n=xt(t,{parent:!0}).node;if(!n)throw new $(44);t=ti(t);var o=vi(n,t);if(o)throw new $(o);if(!n.l.Ea)throw new $(63);n.l.Ea(n,t,e)},vr=e=>{if(e=xt(e).node,!e)throw new $(44);if(!e.l.ma)throw new $(28);return Qt(hi(e.parent),e.l.ma(e))},on=(e,t,n)=>{if(e==="")throw new $(44);if(typeof t=="string"){var o={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof o>"u")throw Error(`Unknown file open mode: ${t}`);t=o}if(n=t&64?(typeof n>"u"?438:n)&4095|32768:0,typeof e=="object")var a=e;else{e=Xe(e);try{a=xt(e,{fb:!(t&131072)}).node}catch{}}if(o=!1,t&64)if(a){if(t&128)throw new $(20)}else a=Je(e,n,0),o=!0;if(!a)throw new $(44);if((a.mode&61440)===8192&&(t&=-513),t&65536&&(a.mode&61440)!==16384)throw new $(54);if(!o&&(n=a?(a.mode&61440)===40960?32:(a.mode&61440)===16384&&(gi(t)!=="r"||t&512)?31:nn(a,gi(t)):44))throw new $(n);if(t&512&&!o){if(n=a,n=typeof n=="string"?xt(n,{fb:!0}).node:n,!n.l.P)throw new $(63);if((n.mode&61440)===16384)throw new $(31);if((n.mode&61440)!==32768)throw new $(28);if(o=nn(n,"w"))throw new $(o);n.l.P(n,{size:0,timestamp:Date.now()})}return t&=-131713,a=mi({node:a,path:hi(a),flags:t,seekable:!0,position:0,m:a.m,zc:[],error:!1}),a.m.open&&a.m.open(a),!u.logReadFiles||t&1||(an||(an={}),e in an||(an[e]=1)),a},bi=(e,t,n)=>{if(e.X===null)throw new $(8);if(!e.seekable||!e.m.ba)throw new $(70);if(n!=0&&n!=1&&n!=2)throw new $(28);e.position=e.m.ba(e,t,n),e.zc=[]},wi=()=>{$||($=function(e,t){this.name="ErrnoError",this.node=t,this.pc=function(n){this.aa=n},this.pc(e),this.message="FS error"},$.prototype=Error(),$.prototype.constructor=$,[44].forEach(e=>{Mn[e]=new $(e),Mn[e].stack="<generic error, no stack>"}))},Ci,Nt=(e,t,n)=>{e=Xe("/dev/"+e);var o=hr(!!t,!!n);Fn||(Fn=64);var a=Fn++<<8|0;On(a,{open:l=>{l.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(l,f,y,S)=>{for(var m=0,M=0;M<S;M++){try{var F=t()}catch{throw new $(29)}if(F===void 0&&m===0)throw new $(6);if(F==null)break;m++,f[y+M]=F}return m&&(l.node.timestamp=Date.now()),m},write:(l,f,y,S)=>{for(var m=0;m<S;m++)try{n(f[y+m])}catch{throw new $(29)}return S&&(l.node.timestamp=Date.now()),m}}),rn(e,o,a)},Fn,_t={},Wt,an,Bt=void 0;function ut(){return Bt+=4,Y[Bt-4>>2]}function xi(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e}function sn(e,t){return e=xi(e),{[e]:function(){return t.apply(this,arguments)}}[e]}function _i(){this.M=[void 0],this.hb=[]}var Ye=new _i,Mt=void 0;function q(e){throw new Mt(e)}var Ke=e=>(e||q("Cannot use deleted val. handle = "+e),Ye.get(e).value),Qe=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Ye.pa({tb:1,value:e})}};function Si(e){var t=Error,n=sn(e,function(o){this.name=e,this.message=o,o=Error(o).stack,o!==void 0&&(this.stack=this.toString()+`
`+o.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n}var Ai=void 0,Li=void 0;function Se(e){for(var t="";ie[e];)t+=Li[ie[e++]];return t}var $t=[];function Dn(){for(;$t.length;){var e=$t.pop();e.g.fa=!1,e.delete()}}var Ut=void 0,dt={};function jn(e,t){for(t===void 0&&q("ptr should not be undefined");e.A;)t=e.na(t),e=e.A;return t}var St={};function Ei(e){e=Gi(e);var t=Se(e);return pt(e),t}function Ht(e,t){var n=St[e];return n===void 0&&q(t+" has unknown type "+Ei(e)),n}function ln(){}var Nn=!1;function Ii(e){--e.count.value,e.count.value===0&&(e.G?e.L.W(e.G):e.u.i.W(e.o))}function Pi(e,t,n){return t===n?e:n.A===void 0?null:(e=Pi(e,t,n.A),e===null?null:n.Pb(e))}var Ti={};function mr(e,t){return t=jn(e,t),dt[t]}var Ri=void 0;function cn(e){throw new Ri(e)}function un(e,t){return t.u&&t.o||cn("makeClassHandle requires ptr and ptrType"),!!t.L!=!!t.G&&cn("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ot(Object.create(e,{g:{value:t}}))}function Ot(e){return typeof FinalizationRegistry>"u"?(Ot=t=>t,e):(Nn=new FinalizationRegistry(t=>{Ii(t.g)}),Ot=t=>{var n=t.g;return n.G&&Nn.register(t,{g:n},t),t},ln=t=>{Nn.unregister(t)},Ot(e))}var dn={};function zt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Xt(e){return this.fromWireType(Y[e>>2])}var kt={},hn={};function Be(e,t,n){function o(y){y=n(y),y.length!==e.length&&cn("Mismatched type converter count");for(var S=0;S<e.length;++S)et(e[S],y[S])}e.forEach(function(y){hn[y]=t});var a=Array(t.length),l=[],f=0;t.forEach((y,S)=>{St.hasOwnProperty(y)?a[S]=St[y]:(l.push(y),kt.hasOwnProperty(y)||(kt[y]=[]),kt[y].push(()=>{a[S]=St[y],++f,f===l.length&&o(a)}))}),l.length===0&&o(a)}function fn(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function yr(e,t,n={}){var o=t.name;if(e||q(`type "${o}" must have a positive integer typeid pointer`),St.hasOwnProperty(e)){if(n.$b)return;q(`Cannot register type '${o}' twice`)}St[e]=t,delete hn[e],kt.hasOwnProperty(e)&&(t=kt[e],delete kt[e],t.forEach(a=>a()))}function et(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");yr(e,t,n)}function Wn(e){q(e.g.u.i.name+" instance already deleted")}function wt(){}function Bn(e,t,n){if(e[t].B===void 0){var o=e[t];e[t]=function(){return e[t].B.hasOwnProperty(arguments.length)||q(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].B})!`),e[t].B[arguments.length].apply(this,arguments)},e[t].B=[],e[t].B[o.ea]=o}}function $n(e,t,n){u.hasOwnProperty(e)?((n===void 0||u[e].B!==void 0&&u[e].B[n]!==void 0)&&q(`Cannot register public name '${e}' twice`),Bn(u,e,e),u.hasOwnProperty(n)&&q(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),u[e].B[n]=t):(u[e]=t,n!==void 0&&(u[e].Pc=n))}function br(e,t,n,o,a,l,f,y){this.name=e,this.constructor=t,this.N=n,this.W=o,this.A=a,this.Ub=l,this.na=f,this.Pb=y,this.qb=[]}function pn(e,t,n){for(;t!==n;)t.na||q(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.na(e),t=t.A;return e}function wr(e,t){return t===null?(this.Na&&q(`null is not a valid ${this.name}`),0):(t.g||q(`Cannot pass "${Hn(t)}" as a ${this.name}`),t.g.o||q(`Cannot pass deleted object as a pointer of type ${this.name}`),pn(t.g.o,t.g.u.i,this.i))}function Cr(e,t){if(t===null){if(this.Na&&q(`null is not a valid ${this.name}`),this.ua){var n=this.Pa();return e!==null&&e.push(this.W,n),n}return 0}if(t.g||q(`Cannot pass "${Hn(t)}" as a ${this.name}`),t.g.o||q(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&t.g.u.ta&&q(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`),n=pn(t.g.o,t.g.u.i,this.i),this.ua)switch(t.g.G===void 0&&q("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:t.g.L===this?n=t.g.G:q(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`);break;case 1:n=t.g.G;break;case 2:if(t.g.L===this)n=t.g.G;else{var o=t.clone();n=this.oc(n,Qe(function(){o.delete()})),e!==null&&e.push(this.W,n)}break;default:q("Unsupporting sharing policy")}return n}function xr(e,t){return t===null?(this.Na&&q(`null is not a valid ${this.name}`),0):(t.g||q(`Cannot pass "${Hn(t)}" as a ${this.name}`),t.g.o||q(`Cannot pass deleted object as a pointer of type ${this.name}`),t.g.u.ta&&q(`Cannot convert argument of type ${t.g.u.name} to parameter type ${this.name}`),pn(t.g.o,t.g.u.i,this.i))}function ht(e,t,n,o){this.name=e,this.i=t,this.Na=n,this.ta=o,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,t.A!==void 0?this.toWireType=Cr:(this.toWireType=o?wr:xr,this.K=null)}function Mi(e,t,n){u.hasOwnProperty(e)||cn("Replacing nonexistant public symbol"),u[e].B!==void 0&&n!==void 0?u[e].B[n]=t:(u[e]=t,u[e].ea=n)}var gn=[],Oi=e=>{var t=gn[e];return t||(e>=gn.length&&(gn.length=e+1),gn[e]=t=v.get(e)),t},_r=(e,t)=>{var n=[];return function(){if(n.length=0,Object.assign(n,arguments),e.includes("j")){var o=u["dynCall_"+e];o=n&&n.length?o.apply(null,[t].concat(n)):o.call(null,t)}else o=Oi(t).apply(null,n);return o}};function Fe(e,t){e=Se(e);var n=e.includes("j")?_r(e,t):Oi(t);return typeof n!="function"&&q(`unknown function pointer with signature ${e}: ${t}`),n}var ki=void 0;function ft(e,t){function n(l){a[l]||St[l]||(hn[l]?hn[l].forEach(n):(o.push(l),a[l]=!0))}var o=[],a={};throw t.forEach(n),new ki(`${e}: `+o.map(Ei).join([", "]))}function vn(e,t,n,o,a){var l=t.length;2>l&&q("argTypes array size mismatch! Must at least get return value and 'this' types!");var f=t[1]!==null&&n!==null,y=!1;for(n=1;n<t.length;++n)if(t[n]!==null&&t[n].K===void 0){y=!0;break}var S=t[0].name!=="void",m=l-2,M=Array(m),F=[],W=[];return function(){if(arguments.length!==m&&q(`function ${e} called with ${arguments.length} arguments, expected ${m} args!`),W.length=0,F.length=f?2:1,F[0]=a,f){var p=t[1].toWireType(W,this);F[1]=p}for(var R=0;R<m;++R)M[R]=t[R+2].toWireType(W,arguments[R]),F.push(M[R]);if(R=o.apply(null,F),y)zt(W);else for(var T=f?1:2;T<t.length;T++){var J=T===1?p:M[T-2];t[T].K!==null&&t[T].K(J)}return p=S?t[0].fromWireType(R):void 0,p}}function mn(e,t){for(var n=[],o=0;o<e;o++)n.push(pe[t+4*o>>2]);return n}function Fi(e,t,n){return e instanceof Object||q(`${n} with invalid "this": ${e}`),e instanceof t.i.constructor||q(`${n} incompatible with "this" of type ${e.constructor.name}`),e.g.o||q(`cannot call emscripten binding method ${n} on deleted object`),pn(e.g.o,e.g.u.i,t.i)}function Un(e){e>=Ye.h&&--Ye.get(e).tb===0&&Ye.Zb(e)}function Sr(e,t,n){switch(t){case 0:return function(o){return this.fromWireType((n?_e:ie)[o])};case 1:return function(o){return this.fromWireType((n?Ce:Ge)[o>>1])};case 2:return function(o){return this.fromWireType((n?Y:pe)[o>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Hn(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function Ar(e,t){switch(t){case 2:return function(n){return this.fromWireType(c[n>>2])};case 3:return function(n){return this.fromWireType(r[n>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Lr(e,t,n){switch(t){case 0:return n?function(o){return _e[o]}:function(o){return ie[o]};case 1:return n?function(o){return Ce[o>>1]}:function(o){return Ge[o>>1]};case 2:return n?function(o){return Y[o>>2]}:function(o){return pe[o>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Di=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Er=(e,t)=>{for(var n=e>>1,o=n+t/2;!(n>=o)&&Ge[n];)++n;if(n<<=1,32<n-e&&Di)return Di.decode(ie.subarray(e,n));for(n="",o=0;!(o>=t/2);++o){var a=Ce[e+2*o>>1];if(a==0)break;n+=String.fromCharCode(a)}return n},Ir=(e,t,n)=>{if(n===void 0&&(n=2147483647),2>n)return 0;n-=2;var o=t;n=n<2*e.length?n/2:e.length;for(var a=0;a<n;++a)Ce[t>>1]=e.charCodeAt(a),t+=2;return Ce[t>>1]=0,t-o},Pr=e=>2*e.length,Tr=(e,t)=>{for(var n=0,o="";!(n>=t/4);){var a=Y[e+4*n>>2];if(a==0)break;++n,65536<=a?(a-=65536,o+=String.fromCharCode(55296|a>>10,56320|a&1023)):o+=String.fromCharCode(a)}return o},Rr=(e,t,n)=>{if(n===void 0&&(n=2147483647),4>n)return 0;var o=t;n=o+n-4;for(var a=0;a<e.length;++a){var l=e.charCodeAt(a);if(55296<=l&&57343>=l){var f=e.charCodeAt(++a);l=65536+((l&1023)<<10)|f&1023}if(Y[t>>2]=l,t+=4,t+4>n)break}return Y[t>>2]=0,t-o},Mr=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);55296<=o&&57343>=o&&++n,t+=4}return t},Or={};function yn(e){var t=Or[e];return t===void 0?Se(e):t}var bn=[];function kr(e){var t=bn.length;return bn.push(e),t}function Fr(e,t){for(var n=Array(e),o=0;o<e;++o)n[o]=Ht(pe[t+4*o>>2],"parameter "+o);return n}var ji=[],zn=[],Xn={},Ni=()=>{if(!Yn){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:be||"./this.program"},t;for(t in Xn)Xn[t]===void 0?delete e[t]:e[t]=Xn[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);Yn=n}return Yn},Yn,wn=e=>e%4===0&&(e%100!==0||e%400===0),Wi=[31,29,31,30,31,30,31,31,30,31,30,31],Bi=[31,28,31,30,31,30,31,31,30,31,30,31],Dr=(e,t,n,o)=>{function a(p,R,T){for(p=typeof p=="number"?p.toString():p||"";p.length<R;)p=T[0]+p;return p}function l(p,R){return a(p,R,"0")}function f(p,R){function T(ee){return 0>ee?-1:0<ee?1:0}var J;return(J=T(p.getFullYear()-R.getFullYear()))===0&&(J=T(p.getMonth()-R.getMonth()))===0&&(J=T(p.getDate()-R.getDate())),J}function y(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function S(p){var R=p.ca;for(p=new Date(new Date(p.da+1900,0,1).getTime());0<R;){var T=p.getMonth(),J=(wn(p.getFullYear())?Wi:Bi)[T];if(R>J-p.getDate())R-=J-p.getDate()+1,p.setDate(1),11>T?p.setMonth(T+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+R);break}}return T=new Date(p.getFullYear()+1,0,4),R=y(new Date(p.getFullYear(),0,4)),T=y(T),0>=f(R,p)?0>=f(T,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}var m=Y[o+40>>2];o={wc:Y[o>>2],vc:Y[o+4>>2],Fa:Y[o+8>>2],Sa:Y[o+12>>2],Ga:Y[o+16>>2],da:Y[o+20>>2],R:Y[o+24>>2],ca:Y[o+28>>2],Rc:Y[o+32>>2],uc:Y[o+36>>2],xc:m&&m?yt(ie,m):""},n=n?yt(ie,n):"",m={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var M in m)n=n.replace(new RegExp(M,"g"),m[M]);var F="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),W="January February March April May June July August September October November December".split(" ");m={"%a":p=>F[p.R].substring(0,3),"%A":p=>F[p.R],"%b":p=>W[p.Ga].substring(0,3),"%B":p=>W[p.Ga],"%C":p=>l((p.da+1900)/100|0,2),"%d":p=>l(p.Sa,2),"%e":p=>a(p.Sa,2," "),"%g":p=>S(p).toString().substring(2),"%G":p=>S(p),"%H":p=>l(p.Fa,2),"%I":p=>(p=p.Fa,p==0?p=12:12<p&&(p-=12),l(p,2)),"%j":p=>{for(var R=0,T=0;T<=p.Ga-1;R+=(wn(p.da+1900)?Wi:Bi)[T++]);return l(p.Sa+R,3)},"%m":p=>l(p.Ga+1,2),"%M":p=>l(p.vc,2),"%n":()=>`
`,"%p":p=>0<=p.Fa&&12>p.Fa?"AM":"PM","%S":p=>l(p.wc,2),"%t":()=>"	","%u":p=>p.R||7,"%U":p=>l(Math.floor((p.ca+7-p.R)/7),2),"%V":p=>{var R=Math.floor((p.ca+7-(p.R+6)%7)/7);if(2>=(p.R+371-p.ca-2)%7&&R++,R)R==53&&(T=(p.R+371-p.ca)%7,T==4||T==3&&wn(p.da)||(R=1));else{R=52;var T=(p.R+7-p.ca-1)%7;(T==4||T==5&&wn(p.da%400-1))&&R++}return l(R,2)},"%w":p=>p.R,"%W":p=>l(Math.floor((p.ca+7-(p.R+6)%7)/7),2),"%y":p=>(p.da+1900).toString().substring(2),"%Y":p=>p.da+1900,"%z":p=>{p=p.uc;var R=0<=p;return p=Math.abs(p)/60,(R?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.xc,"%%":()=>"%"},n=n.replace(/%%/g,"\0\0");for(M in m)n.includes(M)&&(n=n.replace(new RegExp(M,"g"),m[M](o)));return n=n.replace(/\0\0/g,"%"),M=ai(n,!1),M.length>t?0:(_e.set(M,e),M.length-1)};function $i(e,t,n,o){e||(e=this),this.parent=e,this.U=e.U,this.wa=null,this.id=fr++,this.name=t,this.mode=n,this.l={},this.m={},this.za=o}Object.defineProperties($i.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(e){e?this.mode|=146:this.mode&=-147}}}),wi(),jt=Array(4096),yi(te,"/"),Je("/tmp",16895,0),Je("/home",16895,0),Je("/home/web_user",16895,0),(()=>{Je("/dev",16895,0),On(259,{read:()=>0,write:(o,a,l,f)=>f}),rn("/dev/null",259),li(1280,ur),li(1536,dr),rn("/dev/tty",1280),rn("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=ni(e).byteLength),e[--t]);Nt("random",n),Nt("urandom",n),Je("/dev/shm",16895,0),Je("/dev/shm/tmp",16895,0)})(),(()=>{Je("/proc",16895,0);var e=Je("/proc/self",16895,0);Je("/proc/self/fd",16895,0),yi({U:()=>{var t=pi(e,"fd",16895,73);return t.l={ka:(n,o)=>{var a=bt(+o);return n={parent:null,U:{mb:"fake"},l:{ma:()=>a.path}},n.parent=n}},t}},"/proc/self/fd")})(),Object.assign(_i.prototype,{get(e){return this.M[e]},has(e){return this.M[e]!==void 0},pa(e){var t=this.hb.pop()||this.M.length;return this.M[t]=e,t},Zb(e){this.M[e]=void 0,this.hb.push(e)}}),Mt=u.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},Ye.M.push({value:void 0},{value:null},{value:!0},{value:!1}),Ye.h=Ye.M.length,u.count_emval_handles=function(){for(var e=0,t=Ye.h;t<Ye.M.length;++t)Ye.M[t]!==void 0&&++e;return e},Ai=u.PureVirtualError=Si("PureVirtualError");for(var Ui=Array(256),Cn=0;256>Cn;++Cn)Ui[Cn]=String.fromCharCode(Cn);Li=Ui,u.getInheritedInstanceCount=function(){return Object.keys(dt).length},u.getLiveInheritedInstances=function(){var e=[],t;for(t in dt)dt.hasOwnProperty(t)&&e.push(dt[t]);return e},u.flushPendingDeletes=Dn,u.setDelayFunction=function(e){Ut=e,$t.length&&Ut&&Ut(Dn)},Ri=u.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},wt.prototype.isAliasOf=function(e){if(!(this instanceof wt&&e instanceof wt))return!1;var t=this.g.u.i,n=this.g.o,o=e.g.u.i;for(e=e.g.o;t.A;)n=t.na(n),t=t.A;for(;o.A;)e=o.na(e),o=o.A;return t===o&&n===e},wt.prototype.clone=function(){if(this.g.o||Wn(this),this.g.ia)return this.g.count.value+=1,this;var e=Ot,t=Object,n=t.create,o=Object.getPrototypeOf(this),a=this.g;return e=e(n.call(t,o,{g:{value:{count:a.count,fa:a.fa,ia:a.ia,o:a.o,u:a.u,G:a.G,L:a.L}}})),e.g.count.value+=1,e.g.fa=!1,e},wt.prototype.delete=function(){this.g.o||Wn(this),this.g.fa&&!this.g.ia&&q("Object already scheduled for deletion"),ln(this),Ii(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},wt.prototype.isDeleted=function(){return!this.g.o},wt.prototype.deleteLater=function(){return this.g.o||Wn(this),this.g.fa&&!this.g.ia&&q("Object already scheduled for deletion"),$t.push(this),$t.length===1&&Ut&&Ut(Dn),this.g.fa=!0,this},ht.prototype.Vb=function(e){return this.rb&&(e=this.rb(e)),e},ht.prototype.ab=function(e){this.W&&this.W(e)},ht.prototype.argPackAdvance=8,ht.prototype.readValueFromPointer=Xt,ht.prototype.deleteObject=function(e){e!==null&&e.delete()},ht.prototype.fromWireType=function(e){function t(){return this.ua?un(this.i.N,{u:this.nc,o:n,L:this,G:e}):un(this.i.N,{u:this,o:e})}var n=this.Vb(e);if(!n)return this.ab(e),null;var o=mr(this.i,n);if(o!==void 0)return o.g.count.value===0?(o.g.o=n,o.g.G=e,o.clone()):(o=o.clone(),this.ab(e),o);if(o=this.i.Ub(n),o=Ti[o],!o)return t.call(this);o=this.ta?o.Kb:o.pointerType;var a=Pi(n,this.i,o.i);return a===null?t.call(this):this.ua?un(o.i.N,{u:o,o:a,L:this,G:e}):un(o.i.N,{u:o,o:a})},ki=u.UnboundTypeError=Si("UnboundTypeError");var Hi={__syscall_fcntl64:function(e,t,n){Bt=n;try{var o=bt(e);switch(t){case 0:var a=ut();return 0>a?-28:mi(o,a).X;case 1:case 2:return 0;case 3:return o.flags;case 4:return a=ut(),o.flags|=a,0;case 5:return a=ut(),Ce[a+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Y[Vi()>>2]=28,-1;default:return-28}}catch(l){if(typeof _t>"u"||l.name!=="ErrnoError")throw l;return-l.aa}},__syscall_ioctl:function(e,t,n){Bt=n;try{var o=bt(e);switch(t){case 21509:return o.s?0:-59;case 21505:if(!o.s)return-59;if(o.s.V.bc){t=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var a=ut();Y[a>>2]=25856,Y[a+4>>2]=5,Y[a+8>>2]=191,Y[a+12>>2]=35387;for(var l=0;32>l;l++)_e[a+l+17>>0]=t[l]||0}return 0;case 21510:case 21511:case 21512:return o.s?0:-59;case 21506:case 21507:case 21508:if(!o.s)return-59;if(o.s.V.cc)for(a=ut(),t=[],l=0;32>l;l++)t.push(_e[a+l+17>>0]);return 0;case 21519:return o.s?(a=ut(),Y[a>>2]=0):-59;case 21520:return o.s?-28:-59;case 21531:if(a=ut(),!o.m.ac)throw new $(59);return o.m.ac(o,t,a);case 21523:return o.s?(o.s.V.dc&&(l=[24,80],a=ut(),Ce[a>>1]=l[0],Ce[a+2>>1]=l[1]),0):-59;case 21524:return o.s?0:-59;case 21515:return o.s?0:-59;default:return-28}}catch(f){if(typeof _t>"u"||f.name!=="ErrnoError")throw f;return-f.aa}},__syscall_openat:function(e,t,n,o){Bt=o;try{t=t?yt(ie,t):"";var a=t;if(a.charAt(0)==="/")t=a;else{var l=e===-100?"/":bt(e).path;if(a.length==0)throw new $(44);t=Xe(l+"/"+a)}var f=o?ut():0;return on(t,n,f).X}catch(y){if(typeof _t>"u"||y.name!=="ErrnoError")throw y;return-y.aa}},_embind_create_inheriting_constructor:function(e,t,n){e=Se(e),t=Ht(t,"wrapper"),n=Ke(n);var o=[].slice,a=t.i,l=a.N,f=a.A.N,y=a.A.constructor;e=sn(e,function(){a.A.qb.forEach((function(m){if(this[m]===f[m])throw new Ai(`Pure virtual function ${m} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:l}),this.__construct.apply(this,o.call(arguments))}),l.__construct=function(){this===l&&q("Pass correct 'this' to __construct");var m=y.implement.apply(void 0,[this].concat(o.call(arguments)));ln(m);var M=m.g;m.notifyOnDestruction(),M.ia=!0,Object.defineProperties(this,{g:{value:M}}),Ot(this),m=M.o,m=jn(a,m),dt.hasOwnProperty(m)?q(`Tried to register registered instance: ${m}`):dt[m]=this},l.__destruct=function(){this===l&&q("Pass correct 'this' to __destruct"),ln(this);var m=this.g.o;m=jn(a,m),dt.hasOwnProperty(m)?delete dt[m]:q(`Tried to unregister unregistered instance: ${m}`)},e.prototype=Object.create(l);for(var S in n)e.prototype[S]=n[S];return Qe(e)},_embind_finalize_value_object:function(e){var t=dn[e];delete dn[e];var n=t.Pa,o=t.W,a=t.eb,l=a.map(f=>f.Yb).concat(a.map(f=>f.rc));Be([e],l,f=>{var y={};return a.forEach((S,m)=>{var M=f[m],F=S.Wb,W=S.Xb,p=f[m+a.length],R=S.qc,T=S.sc;y[S.Sb]={read:J=>M.fromWireType(F(W,J)),write:(J,ee)=>{var j=[];R(T,J,p.toWireType(j,ee)),zt(j)}}}),[{name:t.name,fromWireType:function(S){var m={},M;for(M in y)m[M]=y[M].read(S);return o(S),m},toWireType:function(S,m){for(var M in y)if(!(M in m))throw new TypeError(`Missing field: "${M}"`);var F=n();for(M in y)y[M].write(F,m[M]);return S!==null&&S.push(o,F),F},argPackAdvance:8,readValueFromPointer:Xt,K:o}]})},_embind_register_bigint:function(){},_embind_register_bool:function(e,t,n,o,a){var l=fn(n);t=Se(t),et(e,{name:t,fromWireType:function(f){return!!f},toWireType:function(f,y){return y?o:a},argPackAdvance:8,readValueFromPointer:function(f){if(n===1)var y=_e;else if(n===2)y=Ce;else if(n===4)y=Y;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(y[f>>l])},K:null})},_embind_register_class:function(e,t,n,o,a,l,f,y,S,m,M,F,W){M=Se(M),l=Fe(a,l),y&&(y=Fe(f,y)),m&&(m=Fe(S,m)),W=Fe(F,W);var p=xi(M);$n(p,function(){ft(`Cannot construct ${M} due to unbound types`,[o])}),Be([e,t,n],o?[o]:[],function(R){if(R=R[0],o)var T=R.i,J=T.N;else J=wt.prototype;R=sn(p,function(){if(Object.getPrototypeOf(this)!==ee)throw new Mt("Use 'new' to construct "+M);if(j.$===void 0)throw new Mt(M+" has no accessible constructor");var Oe=j.$[arguments.length];if(Oe===void 0)throw new Mt(`Tried to invoke ctor of ${M} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(j.$).toString()}) parameters instead!`);return Oe.apply(this,arguments)});var ee=Object.create(J,{constructor:{value:R}});R.prototype=ee;var j=new br(M,R,ee,W,T,l,y,m);j.A&&(j.A.oa===void 0&&(j.A.oa=[]),j.A.oa.push(j)),T=new ht(M,j,!0,!1),J=new ht(M+"*",j,!1,!1);var xe=new ht(M+" const*",j,!1,!0);return Ti[e]={pointerType:J,Kb:xe},Mi(p,R),[T,J,xe]})},_embind_register_class_class_function:function(e,t,n,o,a,l,f){var y=mn(n,o);t=Se(t),l=Fe(a,l),Be([],[e],function(S){function m(){ft(`Cannot call ${M} due to unbound types`,y)}S=S[0];var M=`${S.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var F=S.i.constructor;return F[t]===void 0?(m.ea=n-1,F[t]=m):(Bn(F,t,M),F[t].B[n-1]=m),Be([],y,function(W){if(W=vn(M,[W[0],null].concat(W.slice(1)),null,l,f),F[t].B===void 0?(W.ea=n-1,F[t]=W):F[t].B[n-1]=W,S.i.oa)for(const p of S.i.oa)p.constructor.hasOwnProperty(t)||(p.constructor[t]=W);return[]}),[]})},_embind_register_class_class_property:function(e,t,n,o,a,l,f,y){t=Se(t),l=Fe(a,l),Be([],[e],function(S){S=S[0];var m=`${S.name}.${t}`,M={get(){ft(`Cannot access ${m} due to unbound types`,[n])},enumerable:!0,configurable:!0};return M.set=y?()=>{ft(`Cannot access ${m} due to unbound types`,[n])}:()=>{q(`${m} is a read-only property`)},Object.defineProperty(S.i.constructor,t,M),Be([],[n],function(F){F=F[0];var W={get(){return F.fromWireType(l(o))},enumerable:!0};return y&&(y=Fe(f,y),W.set=p=>{var R=[];y(o,F.toWireType(R,p)),zt(R)}),Object.defineProperty(S.i.constructor,t,W),[]}),[]})},_embind_register_class_constructor:function(e,t,n,o,a,l){var f=mn(t,n);a=Fe(o,a),Be([],[e],function(y){y=y[0];var S=`constructor ${y.name}`;if(y.i.$===void 0&&(y.i.$=[]),y.i.$[t-1]!==void 0)throw new Mt(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${y.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return y.i.$[t-1]=()=>{ft(`Cannot construct ${y.name} due to unbound types`,f)},Be([],f,function(m){return m.splice(1,0,null),y.i.$[t-1]=vn(S,m,null,a,l),[]}),[]})},_embind_register_class_function:function(e,t,n,o,a,l,f,y){var S=mn(n,o);t=Se(t),l=Fe(a,l),Be([],[e],function(m){function M(){ft(`Cannot call ${F} due to unbound types`,S)}m=m[0];var F=`${m.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),y&&m.i.qb.push(t);var W=m.i.N,p=W[t];return p===void 0||p.B===void 0&&p.className!==m.name&&p.ea===n-2?(M.ea=n-2,M.className=m.name,W[t]=M):(Bn(W,t,F),W[t].B[n-2]=M),Be([],S,function(R){return R=vn(F,R,m,l,f),W[t].B===void 0?(R.ea=n-2,W[t]=R):W[t].B[n-2]=R,[]}),[]})},_embind_register_class_property:function(e,t,n,o,a,l,f,y,S,m){t=Se(t),a=Fe(o,a),Be([],[e],function(M){M=M[0];var F=`${M.name}.${t}`,W={get(){ft(`Cannot access ${F} due to unbound types`,[n,f])},enumerable:!0,configurable:!0};return W.set=S?()=>{ft(`Cannot access ${F} due to unbound types`,[n,f])}:()=>{q(F+" is a read-only property")},Object.defineProperty(M.i.N,t,W),Be([],S?[n,f]:[n],function(p){var R=p[0],T={get(){var ee=Fi(this,M,F+" getter");return R.fromWireType(a(l,ee))},enumerable:!0};if(S){S=Fe(y,S);var J=p[1];T.set=function(ee){var j=Fi(this,M,F+" setter"),xe=[];S(m,j,J.toWireType(xe,ee)),zt(xe)}}return Object.defineProperty(M.i.N,t,T),[]}),[]})},_embind_register_emval:function(e,t){t=Se(t),et(e,{name:t,fromWireType:function(n){var o=Ke(n);return Un(n),o},toWireType:function(n,o){return Qe(o)},argPackAdvance:8,readValueFromPointer:Xt,K:null})},_embind_register_enum:function(e,t,n,o){function a(){}n=fn(n),t=Se(t),a.values={},et(e,{name:t,constructor:a,fromWireType:function(l){return this.constructor.values[l]},toWireType:function(l,f){return f.value},argPackAdvance:8,readValueFromPointer:Sr(t,n,o),K:null}),$n(t,a)},_embind_register_enum_value:function(e,t,n){var o=Ht(e,"enum");t=Se(t),e=o.constructor,o=Object.create(o.constructor.prototype,{value:{value:n},constructor:{value:sn(`${o.name}_${t}`,function(){})}}),e.values[n]=o,e[t]=o},_embind_register_float:function(e,t,n){n=fn(n),t=Se(t),et(e,{name:t,fromWireType:function(o){return o},toWireType:function(o,a){return a},argPackAdvance:8,readValueFromPointer:Ar(t,n),K:null})},_embind_register_function:function(e,t,n,o,a,l){var f=mn(t,n);e=Se(e),a=Fe(o,a),$n(e,function(){ft(`Cannot call ${e} due to unbound types`,f)},t-1),Be([],f,function(y){return Mi(e,vn(e,[y[0],null].concat(y.slice(1)),null,a,l),t-1),[]})},_embind_register_integer:function(e,t,n,o,a){t=Se(t),a===-1&&(a=4294967295),a=fn(n);var l=y=>y;if(o===0){var f=32-8*n;l=y=>y<<f>>>f}n=t.includes("unsigned")?function(y,S){return S>>>0}:function(y,S){return S},et(e,{name:t,fromWireType:l,toWireType:n,argPackAdvance:8,readValueFromPointer:Lr(t,a,o!==0),K:null})},_embind_register_memory_view:function(e,t,n){function o(l){l>>=2;var f=pe;return new a(f.buffer,f[l+1],f[l])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];n=Se(n),et(e,{name:n,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{$b:!0})},_embind_register_std_string:function(e,t){t=Se(t);var n=t==="std::string";et(e,{name:t,fromWireType:function(o){var a=pe[o>>2],l=o+4;if(n)for(var f=l,y=0;y<=a;++y){var S=l+y;if(y==a||ie[S]==0){if(f=f?yt(ie,f,S-f):"",m===void 0)var m=f;else m+="\0",m+=f;f=S+1}}else{for(m=Array(a),y=0;y<a;++y)m[y]=String.fromCharCode(ie[l+y]);m=m.join("")}return pt(o),m},toWireType:function(o,a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));var l=typeof a=="string";l||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int8Array||q("Cannot pass non-string to std::string");var f=n&&l?ri(a):a.length,y=Vn(4+f+1),S=y+4;if(pe[y>>2]=f,n&&l)oi(a,ie,S,f+1);else if(l)for(l=0;l<f;++l){var m=a.charCodeAt(l);255<m&&(pt(S),q("String has UTF-16 code units that do not fit in 8 bits")),ie[S+l]=m}else for(l=0;l<f;++l)ie[S+l]=a[l];return o!==null&&o.push(pt,y),y},argPackAdvance:8,readValueFromPointer:Xt,K:function(o){pt(o)}})},_embind_register_std_wstring:function(e,t,n){if(n=Se(n),t===2)var o=Er,a=Ir,l=Pr,f=()=>Ge,y=1;else t===4&&(o=Tr,a=Rr,l=Mr,f=()=>pe,y=2);et(e,{name:n,fromWireType:function(S){for(var m=pe[S>>2],M=f(),F,W=S+4,p=0;p<=m;++p){var R=S+4+p*t;(p==m||M[R>>y]==0)&&(W=o(W,R-W),F===void 0?F=W:(F+="\0",F+=W),W=R+t)}return pt(S),F},toWireType:function(S,m){typeof m!="string"&&q(`Cannot pass non-string to C++ string type ${n}`);var M=l(m),F=Vn(4+M+t);return pe[F>>2]=M>>y,a(m,F+4,M+t),S!==null&&S.push(pt,F),F},argPackAdvance:8,readValueFromPointer:Xt,K:function(S){pt(S)}})},_embind_register_value_object:function(e,t,n,o,a,l){dn[e]={name:Se(t),Pa:Fe(n,o),W:Fe(a,l),eb:[]}},_embind_register_value_object_field:function(e,t,n,o,a,l,f,y,S,m){dn[e].eb.push({Sb:Se(t),Yb:n,Wb:Fe(o,a),Xb:l,rc:f,qc:Fe(y,S),sc:m})},_embind_register_void:function(e,t){t=Se(t),et(e,{fc:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(e,t,n){e=Ke(e),t=Ht(t,"emval::as");var o=[],a=Qe(o);return pe[n>>2]=a,t.toWireType(o,e)},_emval_call_method:function(e,t,n,o,a){e=bn[e],t=Ke(t),n=yn(n);var l=[];return pe[o>>2]=Qe(l),e(t,n,l,a)},_emval_call_void_method:function(e,t,n,o){e=bn[e],t=Ke(t),n=yn(n),e(t,n,null,o)},_emval_decref:Un,_emval_get_method_caller:function(e,t){var n=Fr(e,t),o=n[0];t=o.name+"_$"+n.slice(1).map(function(f){return f.name}).join("_")+"$";var a=ji[t];if(a!==void 0)return a;var l=Array(e-1);return a=kr((f,y,S,m)=>{for(var M=0,F=0;F<e-1;++F)l[F]=n[F+1].readValueFromPointer(m+M),M+=n[F+1].argPackAdvance;for(f=f[y].apply(f,l),F=0;F<e-1;++F)n[F+1].Nb&&n[F+1].Nb(l[F]);if(!o.fc)return o.toWireType(S,f)}),ji[t]=a},_emval_get_module_property:function(e){return e=yn(e),Qe(u[e])},_emval_get_property:function(e,t){return e=Ke(e),t=Ke(t),Qe(e[t])},_emval_incref:function(e){4<e&&(Ye.get(e).tb+=1)},_emval_new_cstring:function(e){return Qe(yn(e))},_emval_new_object:function(){return Qe({})},_emval_run_destructors:function(e){var t=Ke(e);zt(t),Un(e)},_emval_set_property:function(e,t,n){e=Ke(e),t=Ke(t),n=Ke(n),e[t]=n},_emval_take_value:function(e,t){return e=Ht(e,"_emval_take_value"),e=e.readValueFromPointer(t),Qe(e)},abort:()=>{ge("")},emscripten_asm_const_int:(e,t,n)=>{zn.length=0;var o;for(n>>=2;o=ie[t++];)n+=o!=105&n,zn.push(o==105?Y[n]:r[n++>>1]),++n;return Dt[e].apply(null,zn)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(e,t,n)=>ie.copyWithin(e,t,t+n),emscripten_resize_heap:e=>{var t=ie.length;if(e>>>=0,2147483648<e)return!1;for(var n=1;4>=n;n*=2){var o=t*(1+.2/n);o=Math.min(o,e+100663296);var a=Math;o=Math.max(e,o);e:{a=a.min.call(a,2147483648,o+(65536-o%65536)%65536)-Ne.buffer.byteLength+65535>>>16;try{Ne.grow(a),s();var l=1;break e}catch{}l=void 0}if(l)return!0}return!1},environ_get:(e,t)=>{var n=0;return Ni().forEach(function(o,a){var l=t+n;for(a=pe[e+4*a>>2]=l,l=0;l<o.length;++l)_e[a++>>0]=o.charCodeAt(l);_e[a>>0]=0,n+=o.length+1}),0},environ_sizes_get:(e,t)=>{var n=Ni();pe[e>>2]=n.length;var o=0;return n.forEach(function(a){o+=a.length+1}),pe[t>>2]=o,0},fd_close:function(e){try{var t=bt(e);if(t.X===null)throw new $(8);t.Ma&&(t.Ma=null);try{t.m.close&&t.m.close(t)}catch(n){throw n}finally{en[t.X]=null}return t.X=null,0}catch(n){if(typeof _t>"u"||n.name!=="ErrnoError")throw n;return n.aa}},fd_read:function(e,t,n,o){try{e:{var a=bt(e);e=t;for(var l,f=t=0;f<n;f++){var y=pe[e>>2],S=pe[e+4>>2];e+=8;var m=a,M=y,F=S,W=l,p=_e;if(0>F||0>W)throw new $(28);if(m.X===null)throw new $(8);if((m.flags&2097155)===1)throw new $(8);if((m.node.mode&61440)===16384)throw new $(31);if(!m.m.read)throw new $(28);var R=typeof W<"u";if(!R)W=m.position;else if(!m.seekable)throw new $(70);var T=m.m.read(m,p,M,F,W);R||(m.position+=T);var J=T;if(0>J){var ee=-1;break e}if(t+=J,J<S)break;typeof l<"u"&&(l+=J)}ee=t}return pe[o>>2]=ee,0}catch(j){if(typeof _t>"u"||j.name!=="ErrnoError")throw j;return j.aa}},fd_seek:function(e,t,n,o,a){t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN;try{if(isNaN(t))return 61;var l=bt(e);return bi(l,t,o),Tt=[l.position>>>0,(lt=l.position,1<=+Math.abs(lt)?0<lt?+Math.floor(lt/4294967296)>>>0:~~+Math.ceil((lt-+(~~lt>>>0))/4294967296)>>>0:0)],Y[a>>2]=Tt[0],Y[a+4>>2]=Tt[1],l.Ma&&t===0&&o===0&&(l.Ma=null),0}catch(f){if(typeof _t>"u"||f.name!=="ErrnoError")throw f;return f.aa}},fd_write:function(e,t,n,o){try{e:{var a=bt(e);e=t;for(var l,f=t=0;f<n;f++){var y=pe[e>>2],S=pe[e+4>>2];e+=8;var m=a,M=y,F=S,W=l,p=_e;if(0>F||0>W)throw new $(28);if(m.X===null)throw new $(8);if((m.flags&2097155)===0)throw new $(8);if((m.node.mode&61440)===16384)throw new $(31);if(!m.m.write)throw new $(28);m.seekable&&m.flags&1024&&bi(m,0,2);var R=typeof W<"u";if(!R)W=m.position;else if(!m.seekable)throw new $(70);var T=m.m.write(m,p,M,F,W,void 0);R||(m.position+=T);var J=T;if(0>J){var ee=-1;break e}t+=J,typeof l<"u"&&(l+=J)}ee=t}return pe[o>>2]=ee,0}catch(j){if(typeof _t>"u"||j.name!=="ErrnoError")throw j;return j.aa}},strftime_l:(e,t,n,o)=>Dr(e,t,n,o)};(function(){function e(n){if(ne=n=n.exports,Ne=ne.memory,s(),v=ne.__indirect_function_table,I.unshift(ne.__wasm_call_ctors),Q--,u.monitorRunDependencies&&u.monitorRunDependencies(Q),Q==0&&z){var o=z;z=null,o()}return n}var t={env:Hi,wasi_snapshot_preview1:Hi};if(Q++,u.monitorRunDependencies&&u.monitorRunDependencies(Q),u.instantiateWasm)try{return u.instantiateWasm(t,e)}catch(n){Le("Module.instantiateWasm callback failed with error: "+n),re(n)}return Zt(t,function(n){e(n.instance)}).catch(re),{}})();var pt=e=>(pt=ne.free)(e),Vn=e=>(Vn=ne.malloc)(e),zi=u._ma_device__on_notification_unlocked=e=>(zi=u._ma_device__on_notification_unlocked=ne.ma_device__on_notification_unlocked)(e);u._ma_malloc_emscripten=(e,t)=>(u._ma_malloc_emscripten=ne.ma_malloc_emscripten)(e,t),u._ma_free_emscripten=(e,t)=>(u._ma_free_emscripten=ne.ma_free_emscripten)(e,t);var Xi=u._ma_device_process_pcm_frames_capture__webaudio=(e,t,n)=>(Xi=u._ma_device_process_pcm_frames_capture__webaudio=ne.ma_device_process_pcm_frames_capture__webaudio)(e,t,n),Yi=u._ma_device_process_pcm_frames_playback__webaudio=(e,t,n)=>(Yi=u._ma_device_process_pcm_frames_playback__webaudio=ne.ma_device_process_pcm_frames_playback__webaudio)(e,t,n),Vi=()=>(Vi=ne.__errno_location)(),Gi=e=>(Gi=ne.__getTypeName)(e);u.__embind_initialize_bindings=()=>(u.__embind_initialize_bindings=ne._embind_initialize_bindings)(),u.dynCall_iiji=(e,t,n,o,a)=>(u.dynCall_iiji=ne.dynCall_iiji)(e,t,n,o,a),u.dynCall_jiji=(e,t,n,o,a)=>(u.dynCall_jiji=ne.dynCall_jiji)(e,t,n,o,a),u.dynCall_iiiji=(e,t,n,o,a,l)=>(u.dynCall_iiiji=ne.dynCall_iiiji)(e,t,n,o,a,l),u.dynCall_iij=(e,t,n,o)=>(u.dynCall_iij=ne.dynCall_iij)(e,t,n,o),u.dynCall_jii=(e,t,n)=>(u.dynCall_jii=ne.dynCall_jii)(e,t,n),u.dynCall_viijii=(e,t,n,o,a,l,f)=>(u.dynCall_viijii=ne.dynCall_viijii)(e,t,n,o,a,l,f),u.dynCall_iiiiij=(e,t,n,o,a,l,f)=>(u.dynCall_iiiiij=ne.dynCall_iiiiij)(e,t,n,o,a,l,f),u.dynCall_iiiiijj=(e,t,n,o,a,l,f,y,S)=>(u.dynCall_iiiiijj=ne.dynCall_iiiiijj)(e,t,n,o,a,l,f,y,S),u.dynCall_iiiiiijj=(e,t,n,o,a,l,f,y,S,m)=>(u.dynCall_iiiiiijj=ne.dynCall_iiiiiijj)(e,t,n,o,a,l,f,y,S,m);var xn;z=function e(){xn||qi(),xn||(z=e)};function qi(){function e(){if(!xn&&(xn=!0,u.calledRun=!0,!ze)){if(u.noFSInit||Ci||(Ci=!0,wi(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?Nt("stdin",u.stdin):kn("/dev/tty","/dev/stdin"),u.stdout?Nt("stdout",null,u.stdout):kn("/dev/tty","/dev/stdout"),u.stderr?Nt("stderr",null,u.stderr):kn("/dev/tty1","/dev/stderr"),on("/dev/stdin",0),on("/dev/stdout",1),on("/dev/stderr",1)),di=!1,ct(I),U(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();O.unshift(t)}ct(O)}}if(!(0<Q)){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)X();ct(A),0<Q||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),e()},1)):e())}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return qi(),D.ready}})();const x=E},L=>{L.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"2.25.7","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(L,b,C)=>{C.r(b),C.d(b,{Animation:()=>E.Animation});var E=C(4)},(L,b,C)=>{C.r(b),C.d(b,{Animation:()=>E});var E=function(){function x(k,D,u,U){this.animation=k,this.artboard=D,this.playing=U,this.loopCount=0,this.scrubTo=null,this.instance=new u.LinearAnimationInstance(k,D)}return Object.defineProperty(x.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"time",{get:function(){return this.instance.time},set:function(k){this.instance.time=k},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),x.prototype.advance=function(k){this.scrubTo===null?this.instance.advance(k):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},x.prototype.apply=function(k){this.instance.apply(k)},x.prototype.cleanup=function(){this.instance.delete()},x}()},(L,b,C)=>{C.r(b),C.d(b,{BLANK_URL:()=>x.BLANK_URL,registerTouchInteractions:()=>E.registerTouchInteractions,sanitizeUrl:()=>x.sanitizeUrl});var E=C(6),x=C(7)},(L,b,C)=>{C.r(b),C.d(b,{registerTouchInteractions:()=>k});var E=void 0,x=function(D,u){var U,re;return["touchstart","touchmove"].indexOf(D.type)>-1&&(!((U=D.touches)===null||U===void 0)&&U.length)?(u||D.preventDefault(),{clientX:D.touches[0].clientX,clientY:D.touches[0].clientY}):D.type==="touchend"&&(!((re=D.changedTouches)===null||re===void 0)&&re.length)?{clientX:D.changedTouches[0].clientX,clientY:D.changedTouches[0].clientY}:{clientX:D.clientX,clientY:D.clientY}},k=function(D){var u=D.canvas,U=D.artboard,re=D.stateMachines,ue=re===void 0?[]:re,he=D.renderer,ye=D.rive,V=D.fit,H=D.alignment,we=D.isTouchScrollEnabled,N=we===void 0?!1:we,be=D.layoutScaleFactor,me=be===void 0?1:be;if(!u||!ue.length||!he||!ye||!U||typeof window>"u")return null;var Ae=null,fe=!1,Ze=function(Me){if(fe&&Me instanceof MouseEvent){Me.type=="mouseup"&&(fe=!1);return}fe=N&&Me.type==="touchend"&&Ae==="touchstart",Ae=Me.type;var Le=Me.currentTarget.getBoundingClientRect(),je=x(Me,N),Ne=je.clientX,ne=je.clientY;if(!(!Ne&&!ne)){var ze=Ne-Le.left,_e=ne-Le.top,ie=ye.computeAlignment(V,H,{minX:0,minY:0,maxX:Le.width,maxY:Le.height},U.bounds,me),Ce=new ye.Mat2D;ie.invert(Ce);var Ge=new ye.Vec2D(ze,_e),Y=ye.mapXY(Ce,Ge),pe=Y.x(),c=Y.y();switch(Y.delete(),Ce.delete(),Ge.delete(),ie.delete(),Me.type){case"mouseout":for(var r=0,s=ue;r<s.length;r++){var v=s[r];v.pointerMove(pe,c)}break;case"touchmove":case"mouseover":case"mousemove":{for(var A=0,I=ue;A<I.length;A++){var v=I[A];v.pointerMove(pe,c)}break}case"touchstart":case"mousedown":{for(var O=0,X=ue;O<X.length;O++){var v=X[O];v.pointerDown(pe,c)}break}case"touchend":case"mouseup":{for(var Q=0,z=ue;Q<z.length;Q++){var v=z[Q];v.pointerUp(pe,c)}break}}}},de=Ze.bind(E);return u.addEventListener("mouseover",de),u.addEventListener("mouseout",de),u.addEventListener("mousemove",de),u.addEventListener("mousedown",de),u.addEventListener("mouseup",de),u.addEventListener("touchmove",de,{passive:N}),u.addEventListener("touchstart",de,{passive:N}),u.addEventListener("touchend",de),function(){u.removeEventListener("mouseover",de),u.removeEventListener("mouseout",de),u.removeEventListener("mousemove",de),u.removeEventListener("mousedown",de),u.removeEventListener("mouseup",de),u.removeEventListener("touchmove",de),u.removeEventListener("touchstart",de),u.removeEventListener("touchend",de)}}},(L,b,C)=>{C.r(b),C.d(b,{BLANK_URL:()=>re,sanitizeUrl:()=>ye});var E=/^([^\w]*)(javascript|data|vbscript)/im,x=/&#(\w+)(^\w|;)?/g,k=/&(newline|tab);/gi,D=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,u=/^.+(:|&colon;)/gim,U=[".","/"],re="about:blank";function ue(V){return U.indexOf(V[0])>-1}function he(V){var H=V.replace(D,"");return H.replace(x,function(we,N){return String.fromCharCode(N)})}function ye(V){if(!V)return re;var H=he(V).replace(k,"").replace(D,"").trim();if(!H)return re;if(ue(H))return H;var we=H.match(u);if(!we)return H;var N=we[0];return E.test(N)?re:H}}],g={};function w(L){var b=g[L];if(b!==void 0)return b.exports;var C=g[L]={exports:{}};return h[L](C,C.exports,w),C.exports}w.d=(L,b)=>{for(var C in b)w.o(b,C)&&!w.o(L,C)&&Object.defineProperty(L,C,{enumerable:!0,get:b[C]})},w.o=(L,b)=>Object.prototype.hasOwnProperty.call(L,b),w.r=L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})};var _={};return(()=>{w.r(_),w.d(_,{Alignment:()=>U,EventType:()=>N,Fit:()=>u,Layout:()=>re,LoopType:()=>be,Rive:()=>ze,RiveEventType:()=>V,RiveFile:()=>ne,RuntimeLoader:()=>ue,StateMachineInput:()=>ye,StateMachineInputType:()=>he,Testing:()=>Ce,decodeAudio:()=>Ge,decodeFont:()=>pe,decodeImage:()=>Y});var L=w(1),b=w(2),C=w(3),E=w(5),x=function(){var c=function(r,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,A){v.__proto__=A}||function(v,A){for(var I in A)Object.prototype.hasOwnProperty.call(A,I)&&(v[I]=A[I])},c(r,s)};return function(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");c(r,s);function v(){this.constructor=r}r.prototype=s===null?Object.create(s):(v.prototype=s.prototype,new v)}}(),k=function(c,r,s,v){function A(I){return I instanceof s?I:new s(function(O){O(I)})}return new(s||(s=Promise))(function(I,O){function X(ge){try{z(v.next(ge))}catch(Ie){O(Ie)}}function Q(ge){try{z(v.throw(ge))}catch(Ie){O(Ie)}}function z(ge){ge.done?I(ge.value):A(ge.value).then(X,Q)}z((v=v.apply(c,[])).next())})},D=function(c,r){var s={label:0,sent:function(){if(I[0]&1)throw I[1];return I[1]},trys:[],ops:[]},v,A,I,O=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return O.next=X(0),O.throw=X(1),O.return=X(2),typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function X(z){return function(ge){return Q([z,ge])}}function Q(z){if(v)throw new TypeError("Generator is already executing.");for(;O&&(O=0,z[0]&&(s=0)),s;)try{if(v=1,A&&(I=z[0]&2?A.return:z[0]?A.throw||((I=A.return)&&I.call(A),0):A.next)&&!(I=I.call(A,z[1])).done)return I;switch(A=0,I&&(z=[z[0]&2,I.value]),z[0]){case 0:case 1:I=z;break;case 4:return s.label++,{value:z[1],done:!1};case 5:s.label++,A=z[1],z=[0];continue;case 7:z=s.ops.pop(),s.trys.pop();continue;default:if(I=s.trys,!(I=I.length>0&&I[I.length-1])&&(z[0]===6||z[0]===2)){s=0;continue}if(z[0]===3&&(!I||z[1]>I[0]&&z[1]<I[3])){s.label=z[1];break}if(z[0]===6&&s.label<I[1]){s.label=I[1],I=z;break}if(I&&s.label<I[2]){s.label=I[2],s.ops.push(z);break}I[2]&&s.ops.pop(),s.trys.pop();continue}z=r.call(c,s)}catch(ge){z=[6,ge],A=0}finally{v=I=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}},u;(function(c){c.Cover="cover",c.Contain="contain",c.Fill="fill",c.FitWidth="fitWidth",c.FitHeight="fitHeight",c.None="none",c.ScaleDown="scaleDown",c.Layout="layout"})(u||(u={}));var U;(function(c){c.Center="center",c.TopLeft="topLeft",c.TopCenter="topCenter",c.TopRight="topRight",c.CenterLeft="centerLeft",c.CenterRight="centerRight",c.BottomLeft="bottomLeft",c.BottomCenter="bottomCenter",c.BottomRight="bottomRight"})(U||(U={}));var re=function(){function c(r){var s,v,A,I,O,X,Q;this.fit=(s=r==null?void 0:r.fit)!==null&&s!==void 0?s:u.Contain,this.alignment=(v=r==null?void 0:r.alignment)!==null&&v!==void 0?v:U.Center,this.layoutScaleFactor=(A=r==null?void 0:r.layoutScaleFactor)!==null&&A!==void 0?A:1,this.minX=(I=r==null?void 0:r.minX)!==null&&I!==void 0?I:0,this.minY=(O=r==null?void 0:r.minY)!==null&&O!==void 0?O:0,this.maxX=(X=r==null?void 0:r.maxX)!==null&&X!==void 0?X:0,this.maxY=(Q=r==null?void 0:r.maxY)!==null&&Q!==void 0?Q:0}return c.new=function(r){var s=r.fit,v=r.alignment,A=r.minX,I=r.minY,O=r.maxX,X=r.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new c({fit:s,alignment:v,minX:A,minY:I,maxX:O,maxY:X})},c.prototype.copyWith=function(r){var s=r.fit,v=r.alignment,A=r.layoutScaleFactor,I=r.minX,O=r.minY,X=r.maxX,Q=r.maxY;return new c({fit:s??this.fit,alignment:v??this.alignment,layoutScaleFactor:A??this.layoutScaleFactor,minX:I??this.minX,minY:O??this.minY,maxX:X??this.maxX,maxY:Q??this.maxY})},c.prototype.runtimeFit=function(r){if(this.cachedRuntimeFit)return this.cachedRuntimeFit;var s;return this.fit===u.Cover?s=r.Fit.cover:this.fit===u.Contain?s=r.Fit.contain:this.fit===u.Fill?s=r.Fit.fill:this.fit===u.FitWidth?s=r.Fit.fitWidth:this.fit===u.FitHeight?s=r.Fit.fitHeight:this.fit===u.ScaleDown?s=r.Fit.scaleDown:this.fit===u.Layout?s=r.Fit.layout:s=r.Fit.none,this.cachedRuntimeFit=s,s},c.prototype.runtimeAlignment=function(r){if(this.cachedRuntimeAlignment)return this.cachedRuntimeAlignment;var s;return this.alignment===U.TopLeft?s=r.Alignment.topLeft:this.alignment===U.TopCenter?s=r.Alignment.topCenter:this.alignment===U.TopRight?s=r.Alignment.topRight:this.alignment===U.CenterLeft?s=r.Alignment.centerLeft:this.alignment===U.CenterRight?s=r.Alignment.centerRight:this.alignment===U.BottomLeft?s=r.Alignment.bottomLeft:this.alignment===U.BottomCenter?s=r.Alignment.bottomCenter:this.alignment===U.BottomRight?s=r.Alignment.bottomRight:s=r.Alignment.center,this.cachedRuntimeAlignment=s,s},c}(),ue=function(){function c(){}return c.loadRuntime=function(){L.default({locateFile:function(){return c.wasmURL}}).then(function(r){var s;for(c.runtime=r;c.callBackQueue.length>0;)(s=c.callBackQueue.shift())===null||s===void 0||s(c.runtime)}).catch(function(r){var s={message:(r==null?void 0:r.message)||"Unknown error",type:(r==null?void 0:r.name)||"Error",wasmError:r instanceof WebAssembly.CompileError||r instanceof WebAssembly.RuntimeError,originalError:r};console.debug("Rive WASM load error details:",s);var v="https://cdn.jsdelivr.net/npm/".concat(b.name,"@").concat(b.version,"/rive_fallback.wasm");if(c.wasmURL.toLowerCase()!==v)console.warn("Failed to load WASM from ".concat(c.wasmURL," (").concat(s.message,"), trying jsdelivr as a backup")),c.setWasmUrl(v),c.loadRuntime();else{var A=["Could not load Rive WASM file from ".concat(c.wasmURL," or ").concat(v,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible",`
Error details:`,"- Type: ".concat(s.type),"- Message: ".concat(s.message),"- WebAssembly-specific error: ".concat(s.wasmError),`
To resolve, you may need to:`,"1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join(`
`);console.error(A)}})},c.getInstance=function(r){c.isLoading||(c.isLoading=!0,c.loadRuntime()),c.runtime?r(c.runtime):c.callBackQueue.push(r)},c.awaitInstance=function(){return new Promise(function(r){return c.getInstance(function(s){return r(s)})})},c.setWasmUrl=function(r){c.wasmURL=r},c.getWasmUrl=function(){return c.wasmURL},c.isLoading=!1,c.callBackQueue=[],c.wasmURL="https://unpkg.com/".concat(b.name,"@").concat(b.version,"/rive.wasm"),c}(),he;(function(c){c[c.Number=56]="Number",c[c.Trigger=58]="Trigger",c[c.Boolean=59]="Boolean"})(he||(he={}));var ye=function(){function c(r,s){this.type=r,this.runtimeInput=s}return Object.defineProperty(c.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(r){this.runtimeInput.value=r},enumerable:!1,configurable:!0}),c.prototype.fire=function(){this.type===he.Trigger&&this.runtimeInput.fire()},c.prototype.delete=function(){this.runtimeInput=null},c}(),V;(function(c){c[c.General=128]="General",c[c.OpenUrl=131]="OpenUrl"})(V||(V={}));var H=function(){function c(r,s,v,A){this.stateMachine=r,this.playing=v,this.artboard=A,this.inputs=[],this.instance=new s.StateMachineInstance(r,A),this.initInputs(s)}return Object.defineProperty(c.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"statesChanged",{get:function(){for(var r=[],s=0;s<this.instance.stateChangedCount();s++)r.push(this.instance.stateChangedNameByIndex(s));return r},enumerable:!1,configurable:!0}),c.prototype.advance=function(r){this.instance.advance(r)},c.prototype.advanceAndApply=function(r){this.instance.advanceAndApply(r)},c.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},c.prototype.reportedEventAt=function(r){return this.instance.reportedEventAt(r)},c.prototype.initInputs=function(r){for(var s=0;s<this.instance.inputCount();s++){var v=this.instance.input(s);this.inputs.push(this.mapRuntimeInput(v,r))}},c.prototype.mapRuntimeInput=function(r,s){if(r.type===s.SMIInput.bool)return new ye(he.Boolean,r.asBool());if(r.type===s.SMIInput.number)return new ye(he.Number,r.asNumber());if(r.type===s.SMIInput.trigger)return new ye(he.Trigger,r.asTrigger())},c.prototype.cleanup=function(){this.inputs.forEach(function(r){r.delete()}),this.inputs.length=0,this.instance.delete()},c}(),we=function(){function c(r,s,v,A,I){A===void 0&&(A=[]),I===void 0&&(I=[]),this.runtime=r,this.artboard=s,this.eventManager=v,this.animations=A,this.stateMachines=I}return c.prototype.add=function(r,s,v){if(v===void 0&&(v=!0),r=ie(r),r.length===0)this.animations.forEach(function(Te){return Te.playing=s}),this.stateMachines.forEach(function(Te){return Te.playing=s});else for(var A=this.animations.map(function(Te){return Te.name}),I=this.stateMachines.map(function(Te){return Te.name}),O=0;O<r.length;O++){var X=A.indexOf(r[O]),Q=I.indexOf(r[O]);if(X>=0||Q>=0)X>=0?this.animations[X].playing=s:this.stateMachines[Q].playing=s;else{var z=this.artboard.animationByName(r[O]);if(z){var ge=new C.Animation(z,this.artboard,this.runtime,s);ge.advance(0),ge.apply(1),this.animations.push(ge)}else{var Ie=this.artboard.stateMachineByName(r[O]);if(Ie){var Pe=new H(Ie,this.runtime,s,this.artboard);this.stateMachines.push(Pe)}}}}return v&&(s?this.eventManager.fire({type:N.Play,data:this.playing}):this.eventManager.fire({type:N.Pause,data:this.paused})),s?this.playing:this.paused},c.prototype.initLinearAnimations=function(r,s){for(var v=this.animations.map(function(Q){return Q.name}),A=0;A<r.length;A++){var I=v.indexOf(r[A]);if(I>=0)this.animations[I].playing=s;else{var O=this.artboard.animationByName(r[A]);if(O){var X=new C.Animation(O,this.artboard,this.runtime,s);X.advance(0),X.apply(1),this.animations.push(X)}}}},c.prototype.initStateMachines=function(r,s){for(var v=this.stateMachines.map(function(Q){return Q.name}),A=0;A<r.length;A++){var I=v.indexOf(r[A]);if(I>=0)this.stateMachines[I].playing=s;else{var O=this.artboard.stateMachineByName(r[A]);if(O){var X=new H(O,this.runtime,s,this.artboard);this.stateMachines.push(X)}else this.initLinearAnimations([r[A]],s)}}},c.prototype.play=function(r){return this.add(r,!0)},c.prototype.pause=function(r){return this.add(r,!1)},c.prototype.scrub=function(r,s){var v=this.animations.filter(function(A){return r.includes(A.name)});return v.forEach(function(A){return A.scrubTo=s}),v.map(function(A){return A.name})},Object.defineProperty(c.prototype,"playing",{get:function(){return this.animations.filter(function(r){return r.playing}).map(function(r){return r.name}).concat(this.stateMachines.filter(function(r){return r.playing}).map(function(r){return r.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"paused",{get:function(){return this.animations.filter(function(r){return!r.playing}).map(function(r){return r.name}).concat(this.stateMachines.filter(function(r){return!r.playing}).map(function(r){return r.name}))},enumerable:!1,configurable:!0}),c.prototype.stop=function(r){var s=this;r=ie(r);var v=[];if(r.length===0)v=this.animations.map(function(O){return O.name}).concat(this.stateMachines.map(function(O){return O.name})),this.animations.forEach(function(O){return O.cleanup()}),this.stateMachines.forEach(function(O){return O.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var A=this.animations.filter(function(O){return r.includes(O.name)});A.forEach(function(O){O.cleanup(),s.animations.splice(s.animations.indexOf(O),1)});var I=this.stateMachines.filter(function(O){return r.includes(O.name)});I.forEach(function(O){O.cleanup(),s.stateMachines.splice(s.stateMachines.indexOf(O),1)}),v=A.map(function(O){return O.name}).concat(I.map(function(O){return O.name}))}return this.eventManager.fire({type:N.Stop,data:v}),v},Object.defineProperty(c.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(r,s){return r||s.playing},!1)||this.stateMachines.reduce(function(r,s){return r||s.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),c.prototype.atLeastOne=function(r,s){s===void 0&&(s=!0);var v;return this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([v=this.artboard.animationByIndex(0).name],r,s):this.artboard.stateMachineCount()>0&&this.add([v=this.artboard.stateMachineByIndex(0).name],r,s)),v},c.prototype.handleLooping=function(){for(var r=0,s=this.animations.filter(function(A){return A.playing});r<s.length;r++){var v=s[r];v.loopValue===0&&v.loopCount?(v.loopCount=0,this.stop(v.name)):v.loopValue===1&&v.loopCount?(this.eventManager.fire({type:N.Loop,data:{animation:v.name,type:be.Loop}}),v.loopCount=0):v.loopValue===2&&v.loopCount>1&&(this.eventManager.fire({type:N.Loop,data:{animation:v.name,type:be.PingPong}}),v.loopCount=0)}},c.prototype.handleStateChanges=function(){for(var r=[],s=0,v=this.stateMachines.filter(function(I){return I.playing});s<v.length;s++){var A=v[s];r.push.apply(r,A.statesChanged)}r.length>0&&this.eventManager.fire({type:N.StateChange,data:r})},c.prototype.handleAdvancing=function(r){this.eventManager.fire({type:N.Advance,data:r})},c}(),N;(function(c){c.Load="load",c.LoadError="loaderror",c.Play="play",c.Pause="pause",c.Stop="stop",c.Loop="loop",c.Draw="draw",c.Advance="advance",c.StateChange="statechange",c.RiveEvent="riveevent",c.AudioStatusChange="audiostatuschange"})(N||(N={}));var be;(function(c){c.OneShot="oneshot",c.Loop="loop",c.PingPong="pingpong"})(be||(be={}));var me=function(){function c(r){r===void 0&&(r=[]),this.listeners=r}return c.prototype.getListeners=function(r){return this.listeners.filter(function(s){return s.type===r})},c.prototype.add=function(r){this.listeners.includes(r)||this.listeners.push(r)},c.prototype.remove=function(r){for(var s=0;s<this.listeners.length;s++){var v=this.listeners[s];if(v.type===r.type&&v.callback===r.callback){this.listeners.splice(s,1);break}}},c.prototype.removeAll=function(r){var s=this;r?this.listeners.filter(function(v){return v.type===r}).forEach(function(v){return s.remove(v)}):this.listeners.splice(0,this.listeners.length)},c.prototype.fire=function(r){var s=this.getListeners(r.type);s.forEach(function(v){return v.callback(r)})},c}(),Ae=function(){function c(r){this.eventManager=r,this.queue=[]}return c.prototype.add=function(r){this.queue.push(r)},c.prototype.process=function(){for(;this.queue.length>0;){var r=this.queue.shift();r!=null&&r.action&&r.action(),r!=null&&r.event&&this.eventManager.fire(r.event)}},c}(),fe;(function(c){c[c.AVAILABLE=0]="AVAILABLE",c[c.UNAVAILABLE=1]="UNAVAILABLE"})(fe||(fe={}));var Ze=function(c){x(r,c);function r(){var s=c!==null&&c.apply(this,arguments)||this;return s._started=!1,s._enabled=!1,s._status=fe.UNAVAILABLE,s}return r.prototype.delay=function(s){return k(this,void 0,void 0,function(){return D(this,function(v){return[2,new Promise(function(A){return setTimeout(A,s)})]})})},r.prototype.timeout=function(){return k(this,void 0,void 0,function(){return D(this,function(s){return[2,new Promise(function(v,A){return setTimeout(A,50)})]})})},r.prototype.reportToListeners=function(){this.fire({type:N.AudioStatusChange}),this.removeAll()},r.prototype.enableAudio=function(){return k(this,void 0,void 0,function(){return D(this,function(s){return this._enabled||(this._enabled=!0,this._status=fe.AVAILABLE,this.reportToListeners()),[2]})})},r.prototype.testAudio=function(){return k(this,void 0,void 0,function(){return D(this,function(s){switch(s.label){case 0:if(!(this._status===fe.UNAVAILABLE&&this._audioContext!==null))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return s.sent(),this.enableAudio(),[3,4];case 3:return s.sent(),[3,4];case 4:return[2]}})})},r.prototype._establishAudio=function(){return k(this,void 0,void 0,function(){return D(this,function(s){switch(s.label){case 0:return this._started?[3,5]:(this._started=!0,typeof window>"u"?(this.enableAudio(),[3,5]):[3,1]);case 1:this._audioContext=new AudioContext,this.listenForUserAction(),s.label=2;case 2:return this._status!==fe.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return s.sent(),[4,this.delay(1e3)];case 4:return s.sent(),[3,2];case 5:return[2]}})})},r.prototype.listenForUserAction=function(){var s=this,v=function(){return k(s,void 0,void 0,function(){return D(this,function(A){return this.enableAudio(),[2]})})};document.addEventListener("pointerdown",v,{once:!0})},r.prototype.establishAudio=function(){return k(this,void 0,void 0,function(){return D(this,function(s){return this._establishAudio(),[2]})})},Object.defineProperty(r.prototype,"systemVolume",{get:function(){return this._status===fe.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),r}(me),de=new Ze,Me=function(){function c(){}return c.prototype.observe=function(){},c.prototype.unobserve=function(){},c.prototype.disconnect=function(){},c}(),Le=globalThis.ResizeObserver||Me,je=function(){function c(){var r=this;this._elementsMap=new Map,this._onObservedEntry=function(s){var v=r._elementsMap.get(s.target);v!==null?v.onResize(s.target.clientWidth==0||s.target.clientHeight==0):r._resizeObserver.unobserve(s.target)},this._onObserved=function(s){s.forEach(r._onObservedEntry)},this._resizeObserver=new Le(this._onObserved)}return c.prototype.add=function(r,s){var v={onResize:s,element:r};return this._elementsMap.set(r,v),this._resizeObserver.observe(r),v},c.prototype.remove=function(r){this._resizeObserver.unobserve(r.element),this._elementsMap.delete(r.element)},c}(),Ne=new je,ne=function(){function c(r){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.src=r.src,this.buffer=r.buffer,r.assetLoader&&(this.assetLoader=r.assetLoader),this.enableRiveAssetCDN=typeof r.enableRiveAssetCDN=="boolean"?r.enableRiveAssetCDN:!0,this.eventManager=new me,r.onLoad&&this.on(N.Load,r.onLoad),r.onLoadError&&this.on(N.LoadError,r.onLoadError)}return c.prototype.initData=function(){return k(this,void 0,void 0,function(){var r,s,v;return D(this,function(A){switch(A.label){case 0:return this.src?(r=this,[4,_e(this.src)]):[3,2];case 1:r.buffer=A.sent(),A.label=2;case 2:return this.assetLoader&&(s=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),v=this,[4,this.runtime.load(new Uint8Array(this.buffer),s,this.enableRiveAssetCDN)];case 3:if(v.file=A.sent(),this.file!==null)this.eventManager.fire({type:N.Load,data:this});else throw this.eventManager.fire({type:N.LoadError,data:null}),new Error(c.fileLoadErrorMessage);return[2]}})})},c.prototype.init=function(){return k(this,void 0,void 0,function(){var r;return D(this,function(s){switch(s.label){case 0:if(!this.src&&!this.buffer)throw new Error(c.missingErrorMessage);return r=this,[4,ue.awaitInstance()];case 1:return r.runtime=s.sent(),[4,this.initData()];case 2:return s.sent(),[2]}})})},c.prototype.on=function(r,s){this.eventManager.add({type:r,callback:s})},c.prototype.off=function(r,s){this.eventManager.remove({type:r,callback:s})},c.prototype.cleanup=function(){var r;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),(r=this.file)===null||r===void 0||r.delete())},c.prototype.removeAllRiveEventListeners=function(r){this.eventManager.removeAll(r)},c.prototype.getInstance=function(){if(this.file!==null)return this.referenceCount+=1,this.file},c.missingErrorMessage="Rive source file or data buffer required",c.fileLoadErrorMessage="The file failed to load",c}(),ze=function(){function c(r){var s=this,v;this.loaded=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(A){s._hasZeroSize=A,(!s._layout.maxX||!s._layout.maxY)&&s.resizeToCanvas()},this.renderSecondTimer=0,this.canvas=r.canvas,r.canvas.constructor===HTMLCanvasElement&&(this._observed=Ne.add(this.canvas,this.onCanvasResize)),this.src=r.src,this.buffer=r.buffer,this.riveFile=r.riveFile,this.layout=(v=r.layout)!==null&&v!==void 0?v:new re,this.shouldDisableRiveListeners=!!r.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!r.isTouchScrollEnabled,this.automaticallyHandleEvents=!!r.automaticallyHandleEvents,this.enableRiveAssetCDN=r.enableRiveAssetCDN===void 0?!0:r.enableRiveAssetCDN,this.eventManager=new me,r.onLoad&&this.on(N.Load,r.onLoad),r.onLoadError&&this.on(N.LoadError,r.onLoadError),r.onPlay&&this.on(N.Play,r.onPlay),r.onPause&&this.on(N.Pause,r.onPause),r.onStop&&this.on(N.Stop,r.onStop),r.onLoop&&this.on(N.Loop,r.onLoop),r.onStateChange&&this.on(N.StateChange,r.onStateChange),r.onAdvance&&this.on(N.Advance,r.onAdvance),r.onload&&!r.onLoad&&this.on(N.Load,r.onload),r.onloaderror&&!r.onLoadError&&this.on(N.LoadError,r.onloaderror),r.onplay&&!r.onPlay&&this.on(N.Play,r.onplay),r.onpause&&!r.onPause&&this.on(N.Pause,r.onpause),r.onstop&&!r.onStop&&this.on(N.Stop,r.onstop),r.onloop&&!r.onLoop&&this.on(N.Loop,r.onloop),r.onstatechange&&!r.onStateChange&&this.on(N.StateChange,r.onstatechange),r.assetLoader&&(this.assetLoader=r.assetLoader),this.taskQueue=new Ae(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:r.autoplay,animations:r.animations,stateMachines:r.stateMachines,artboard:r.artboard,useOffscreenRenderer:r.useOffscreenRenderer})}return c.new=function(r){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new c(r)},c.prototype.onSystemAudioChanged=function(){this.volume=this._volume},c.prototype.init=function(r){var s=this,v=r.src,A=r.buffer,I=r.riveFile,O=r.animations,X=r.stateMachines,Q=r.artboard,z=r.autoplay,ge=z===void 0?!1:z,Ie=r.useOffscreenRenderer,Pe=Ie===void 0?!1:Ie;if(this.src=v,this.buffer=A,this.riveFile=I,!this.src&&!this.buffer&&!this.riveFile)throw new Error(c.missingErrorMessage);var Te=ie(O),vt=ie(X);this.loaded=!1,this.readyForPlaying=!1,ue.awaitInstance().then(function(qe){s.runtime=qe,s.removeRiveListeners(),s.deleteRiveRenderer(),s.renderer=s.runtime.makeRenderer(s.canvas,Pe),s.canvas.width||s.canvas.height||s.resizeDrawingSurfaceToCanvas(),s.initData(Q,Te,vt,ge).then(function(){return s.setupRiveListeners()}).catch(function(mt){console.error(mt)})}).catch(function(qe){console.error(qe)})},c.prototype.setupRiveListeners=function(r){var s=this;if(this.eventCleanup&&this.eventCleanup(),!this.shouldDisableRiveListeners){var v=(this.animator.stateMachines||[]).filter(function(I){return I.playing&&s.runtime.hasListeners(I.instance)}).map(function(I){return I.instance}),A=this.isTouchScrollEnabled;r&&"isTouchScrollEnabled"in r&&(A=r.isTouchScrollEnabled),this.eventCleanup=(0,E.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:v,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:A,layoutScaleFactor:this._layout.layoutScaleFactor})}},c.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},c.prototype.initializeAudio=function(){var r=this,s;de.status==fe.UNAVAILABLE&&!((s=this.artboard)===null||s===void 0)&&s.hasAudio&&this._audioEventListener===null&&(this._audioEventListener={type:N.AudioStatusChange,callback:function(){return r.onSystemAudioChanged()}},de.add(this._audioEventListener),de.establishAudio())},c.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},c.prototype.initData=function(r,s,v,A){return k(this,void 0,void 0,function(){var I,O;return D(this,function(X){switch(X.label){case 0:return X.trys.push([0,3,,4]),this.riveFile!=null?[3,2]:(this.riveFile=new ne({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:X.sent(),X.label=2;case 2:return this.file=this.riveFile.getInstance(),this.initArtboard(r,s,v,A),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:N.Load,data:(O=this.src)!==null&&O!==void 0?O:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return X.sent(),I="Problem loading file; may be corrupt!",console.warn(I),this.eventManager.fire({type:N.LoadError,data:I}),[2,Promise.reject(I)];case 4:return[2]}})})},c.prototype.initArtboard=function(r,s,v,A){if(this.file){var I=r?this.file.artboardByName(r):this.file.defaultArtboard();if(!I){var O="Invalid artboard name or no default artboard";console.warn(O),this.eventManager.fire({type:N.LoadError,data:O});return}if(this.artboard=I,I.volume=this._volume*de.systemVolume,this.artboard.animationCount()<1){var O="Artboard has no animations";throw this.eventManager.fire({type:N.LoadError,data:O}),O}this.animator=new we(this.runtime,this.artboard,this.eventManager);var X;s.length>0||v.length>0?(X=s.concat(v),this.animator.initLinearAnimations(s,A),this.animator.initStateMachines(v,A)):X=[this.animator.atLeastOne(A,!1)],this.taskQueue.add({event:{type:A?N.Play:N.Pause,data:X}})}},c.prototype.drawFrame=function(){this.startRendering()},c.prototype.draw=function(r,s){this.frameRequestId=null;var v=performance.now();this.lastRenderTime||(this.lastRenderTime=r),this.renderSecondTimer+=r-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,s==null||s());var A=(r-this.lastRenderTime)/1e3;this.lastRenderTime=r;for(var I=this.animator.animations.filter(function(Xe){return Xe.playing||Xe.needsScrub}).sort(function(Xe){return Xe.needsScrub?-1:1}),O=0,X=I;O<X.length;O++){var Q=X[O];Q.advance(A),Q.instance.didLoop&&(Q.loopCount+=1),Q.apply(1)}for(var z=this.animator.stateMachines.filter(function(Xe){return Xe.playing}),ge=0,Ie=z;ge<Ie.length;ge++){var Pe=Ie[ge],Te=Pe.reportedEventCount();if(Te)for(var vt=0;vt<Te;vt++){var qe=Pe.reportedEventAt(vt);if(qe)if(qe.type===V.OpenUrl){if(this.eventManager.fire({type:N.RiveEvent,data:qe}),this.automaticallyHandleEvents){var mt=document.createElement("a"),Zt=qe,lt=Zt.url,Tt=Zt.target,Dt=(0,E.sanitizeUrl)(lt);lt&&mt.setAttribute("href",Dt),Tt&&mt.setAttribute("target",Tt),Dt&&Dt!==E.BLANK_URL&&mt.click()}}else this.eventManager.fire({type:N.RiveEvent,data:qe})}Pe.advanceAndApply(A)}this.animator.stateMachines.length==0&&this.artboard.advance(A);var ct=this.renderer;ct.clear(),ct.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(ct),ct.restore(),ct.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(A),this.frameCount++;var Rt=performance.now();for(this.frameTimes.push(Rt),this.durations.push(Rt-v);this.frameTimes[0]<=Rt-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():this.animator.isPaused?this.lastRenderTime=0:this.animator.isStopped&&(this.lastRenderTime=0)},c.prototype.alignRenderer=function(){var r=this,s=r.renderer,v=r.runtime,A=r._layout,I=r.artboard;s.align(A.runtimeFit(v),A.runtimeAlignment(v),{minX:A.minX,minY:A.minY,maxX:A.maxX,maxY:A.maxY},I.bounds,this._devicePixelRatioUsed*A.layoutScaleFactor)},Object.defineProperty(c.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(r,s){return r+s},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),c.prototype.cleanup=function(){var r;this.stopRendering(),this.cleanupInstances(),this._observed!==null&&Ne.remove(this._observed),this.removeRiveListeners(),(r=this.riveFile)===null||r===void 0||r.cleanup(),this.riveFile=null,this.file=null,this.deleteRiveRenderer(),this._audioEventListener!==null&&(de.remove(this._audioEventListener),this._audioEventListener=null)},c.prototype.deleteRiveRenderer=function(){var r;(r=this.renderer)===null||r===void 0||r.delete(),this.renderer=null},c.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},c.prototype.retrieveTextRun=function(r){var s;if(!r){console.warn("No text run name provided");return}if(!this.artboard){console.warn("Tried to access text run, but the Artboard is null");return}var v=this.artboard.textRun(r);if(!v){console.warn("Could not access a text run with name '".concat(r,"' in the '").concat((s=this.artboard)===null||s===void 0?void 0:s.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."));return}return v},c.prototype.getTextRunValue=function(r){var s=this.retrieveTextRun(r);return s?s.text:void 0},c.prototype.setTextRunValue=function(r,s){var v=this.retrieveTextRun(r);v&&(v.text=s)},c.prototype.play=function(r,s){var v=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return v.play(r,s)}});return}this.animator.play(r),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()},c.prototype.pause=function(r){var s=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return s.pause(r)}});return}this.eventCleanup&&this.eventCleanup(),this.animator.pause(r)},c.prototype.scrub=function(r,s){var v=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return v.scrub(r,s)}});return}this.animator.scrub(r,s||0),this.drawFrame()},c.prototype.stop=function(r){var s=this;if(r=ie(r),!this.readyForPlaying){this.taskQueue.add({action:function(){return s.stop(r)}});return}this.animator&&this.animator.stop(r),this.eventCleanup&&this.eventCleanup()},c.prototype.reset=function(r){var s,v=r==null?void 0:r.artboard,A=ie(r==null?void 0:r.animations),I=ie(r==null?void 0:r.stateMachines),O=(s=r==null?void 0:r.autoplay)!==null&&s!==void 0?s:!1;this.cleanupInstances(),this.initArtboard(v,A,I,O),this.taskQueue.process()},c.prototype.load=function(r){this.file=null,this.stop(),this.init(r)},Object.defineProperty(c.prototype,"layout",{get:function(){return this._layout},set:function(r){this._layout=r,(!r.maxX||!r.maxY)&&this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),c.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},c.prototype.resizeDrawingSurfaceToCanvas=function(r){if(this.canvas instanceof HTMLCanvasElement&&window){var s=this.canvas.getBoundingClientRect(),v=s.width,A=s.height,I=r||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=I,this.canvas.width=I*v,this.canvas.height=I*A,this.startRendering(),this.resizeToCanvas(),this.layout.fit===u.Layout){var O=this._layout.layoutScaleFactor;this.artboard.width=v/O,this.artboard.height=A/O}}},Object.defineProperty(c.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var r=[],s=0;s<this.artboard.animationCount();s++)r.push(this.artboard.animationByIndex(s).name);return r},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var r=[],s=0;s<this.artboard.stateMachineCount();s++)r.push(this.artboard.stateMachineByIndex(s).name);return r},enumerable:!1,configurable:!0}),c.prototype.stateMachineInputs=function(r){if(this.loaded){var s=this.animator.stateMachines.find(function(v){return v.name===r});return s==null?void 0:s.inputs}},c.prototype.retrieveInputAtPath=function(r,s){if(!r){console.warn("No input name provided for path '".concat(s,"'"));return}if(!this.artboard){console.warn("Tried to access input: '".concat(r,"', at path: '").concat(s,"', but the Artboard is null"));return}var v=this.artboard.inputByPath(r,s);if(!v){console.warn("Could not access an input with name: '".concat(r,"', at path:'").concat(s,"'"));return}return v},c.prototype.setBooleanStateAtPath=function(r,s,v){var A=this.retrieveInputAtPath(r,v);A&&(A.type===he.Boolean?A.asBool().value=s:console.warn("Input with name: '".concat(r,"', at path:'").concat(v,"' is not a boolean")))},c.prototype.setNumberStateAtPath=function(r,s,v){var A=this.retrieveInputAtPath(r,v);A&&(A.type===he.Number?A.asNumber().value=s:console.warn("Input with name: '".concat(r,"', at path:'").concat(v,"' is not a number")))},c.prototype.fireStateAtPath=function(r,s){var v=this.retrieveInputAtPath(r,s);v&&(v.type===he.Trigger?v.asTrigger().fire():console.warn("Input with name: '".concat(r,"', at path:'").concat(s,"' is not a trigger")))},c.prototype.retrieveTextAtPath=function(r,s){if(!r){console.warn("No text name provided for path '".concat(s,"'"));return}if(!s){console.warn("No path provided for text '".concat(r,"'"));return}if(!this.artboard){console.warn("Tried to access text: '".concat(r,"', at path: '").concat(s,"', but the Artboard is null"));return}var v=this.artboard.textByPath(r,s);if(!v){console.warn("Could not access text with name: '".concat(r,"', at path:'").concat(s,"'"));return}return v},c.prototype.getTextRunValueAtPath=function(r,s){var v=this.retrieveTextAtPath(r,s);if(!v){console.warn("Could not get text with name: '".concat(r,"', at path:'").concat(s,"'"));return}return v.text},c.prototype.setTextRunValueAtPath=function(r,s,v){var A=this.retrieveTextAtPath(r,v);if(!A){console.warn("Could not set text with name: '".concat(r,"', at path:'").concat(v,"'"));return}A.text=s},Object.defineProperty(c.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(r){return r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(r){return r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(r){return!r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(r){return!r.playing}).map(function(r){return r.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),c.prototype.on=function(r,s){this.eventManager.add({type:r,callback:s})},c.prototype.off=function(r,s){this.eventManager.remove({type:r,callback:s})},c.prototype.unsubscribe=function(r,s){console.warn("This function is deprecated: please use `off()` instead."),this.off(r,s)},c.prototype.removeAllRiveEventListeners=function(r){this.eventManager.removeAll(r)},c.prototype.unsubscribeAll=function(r){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(r)},c.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},c.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},c.prototype.enableFPSCounter=function(r){this.runtime.enableFPSCounter(r)},c.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(c.prototype,"contents",{get:function(){if(this.loaded){for(var r={artboards:[]},s=0;s<this.file.artboardCount();s++){for(var v=this.file.artboardByIndex(s),A={name:v.name,animations:[],stateMachines:[]},I=0;I<v.animationCount();I++){var O=v.animationByIndex(I);A.animations.push(O.name)}for(var X=0;X<v.stateMachineCount();X++){for(var Q=v.stateMachineByIndex(X),z=Q.name,ge=new this.runtime.StateMachineInstance(Q,v),Ie=[],Pe=0;Pe<ge.inputCount();Pe++){var Te=ge.input(Pe);Ie.push({name:Te.name,type:Te.type})}A.stateMachines.push({name:z,inputs:Ie})}r.artboards.push(A)}return r}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(r){this._volume=r,this.artboard&&(this.artboard.volume=r*de.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"artboardWidth",{get:function(){var r;return this.artboard?this.artboard.width:(r=this._artboardWidth)!==null&&r!==void 0?r:0},set:function(r){this._artboardWidth=r,this.artboard&&(this.artboard.width=r)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"artboardHeight",{get:function(){var r;return this.artboard?this.artboard.height:(r=this._artboardHeight)!==null&&r!==void 0?r:0},set:function(r){this._artboardHeight=r,this.artboard&&(this.artboard.height=r)},enumerable:!1,configurable:!0}),c.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(c.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(r){this._devicePixelRatioUsed=r},enumerable:!1,configurable:!0}),c.missingErrorMessage="Rive source file or data buffer required",c}(),_e=function(c){return k(void 0,void 0,void 0,function(){var r,s,v;return D(this,function(A){switch(A.label){case 0:return r=new Request(c),[4,fetch(r)];case 1:return s=A.sent(),[4,s.arrayBuffer()];case 2:return v=A.sent(),[2,v]}})})},ie=function(c){return typeof c=="string"?[c]:c instanceof Array?c:[]},Ce={EventManager:me,TaskQueueManager:Ae},Ge=function(c){return new Promise(function(r){return ue.getInstance(function(s){s.decodeAudio(c,r)})})},Y=function(c){return new Promise(function(r){return ue.getInstance(function(s){s.decodeImage(c,r)})})},pe=function(c){return new Promise(function(r){return ue.getInstance(function(s){s.decodeFont(c,r)})})}})(),_})())})(ar);const uo=".lido-canvas{height:100%;width:100%}",ho=uo,fo=class{constructor(i){He(this,i),this.initializeRive=d=>{const h=It.getInstance(),g=this.el.querySelector("canvas");this.riveInstance=new ar.exports.Rive({src:d,canvas:g,stateMachines:"Idle",autoplay:!0,onLoad:()=>{this.riveInstance.resizeDrawingSurfaceToCanvas(),h.setRiveInstance(this.riveInstance)}})},this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.src=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0}async componentDidLoad(){gt(this.el,this.type),this.initializeRive(Ct(this.src))}render(){const i={height:this.height,width:this.width,backgroundColor:this.bgColor,top:this.y,left:this.x,display:this.visible?"flex":"none",zIndex:this.z};return K(Ue,{key:"7cbafd15e6ffab907fb5ce58446971a5681de60c",id:this.id,type:this.type,tabindex:this.tabIndex,value:this.value,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("canvas",{key:"e4809a9cbe812db6aace7dc00dd21f748d0170b5",class:"lido-canvas"}))}get el(){return st(this)}};fo.style=ho;const po=".lido-col{top:var(--y, 0);left:var(--x, 0);height:var(--height, 100%);width:var(--width, 100%);background-color:var(--bgColor, #eeeeee);padding:15px;border-radius:10px;display:flex;justify-content:space-around;flex-direction:column;align-items:center}.lido-col>*{}",go=po,vo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.childElementsLength=void 0,this.minLength=void 0,this.maxLength=void 0,this.direction=void 0,this.borderImage=void 0,this.style={}}componentDidLoad(){gt(this.el,this.type),Qn(this.el,this.minLength,this.maxLength,this.childElementsLength,"flex")}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=this.borderImage?Ct(this.borderImage):"",d=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,d),width:Z(this.width,d),backgroundColor:Z(this.bgColor,d),top:Z(this.y,d),left:Z(this.x,d),zIndex:this.z,display:this.visible?"flex":"none",flexDirection:this.direction?Z(this.direction,d):"column",borderImage:`url(${i})`,borderImageSlice:i?"0 fill":""}}render(){return K(Ue,{key:"4afb56b6335599cfda9ec1da478ddc429d9f367a",id:this.id,class:"lido-col",type:this.type,tabindex:this.tabIndex,value:this.value,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"b7484d56a201ee81911cbd7a2e658bf0af44a7ef"}))}get el(){return st(this)}};vo.style=go;const mo=".lido-container{position:relative;height:100%;width:100%;background-color:var(--bgColor, #ffffff);display:flex;flex-direction:column;justify-content:center;align-items:center}",yo=mo,bo=class{constructor(i){He(this,i),this.id=void 0,this.objective=void 0,this.customStyle=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.bgImage=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.canplay=!0,this.showCheck=!1,this.isContinueOnCorrect=!1,this.isAllowOnlyCorrect=!1,this.baseUrl=""}convertToPixels(i,d=document.body){if(!i)return 0;if(i.endsWith("px"))return parseFloat(i);const h=document.createElement("div");h.style.position="absolute",h.style.visibility="hidden",h.style.height=i,d.appendChild(h);const g=h.offsetHeight;return d.removeChild(h),g}scaleContainer(i){var d;const h=[window.innerWidth],g=[window.innerHeight];!((d=window.screen)===null||d===void 0)&&d.width&&(h.push(window.screen.width),g.push(window.screen.height));const w=Math.min(...h),_=Math.min(...g),L=_>w;let b,C;L?(b=w/900,C=_/1600):(b=w/1600,C=_/900);const E=Math.min(b,C);i.style.transform=`translate(-50%, -50%) scale(${E})`,i.style.left="50%",i.style.top="50%",i.style.position="absolute",this.screenOrientation()}screenOrientation(){window.innerHeight>window.innerWidth?(this.el.style.height="1600px",this.el.style.width="900px"):(this.el.style.height="900px",this.el.style.width="1600px")}componentDidLoad(){this.scaleContainer(this.el);const i=this.bgImage?Ct(this.bgImage):"";if(document.body.style.backgroundColor=this.bgColor,document.body.style.backgroundImage=`url(${i})`,window.addEventListener("resize",()=>this.scaleContainer(this.el)),window.addEventListener("load",()=>this.scaleContainer(this.el)),gt(this.el,this.type),this.customStyle){const d=document.createElement("style");d.innerHTML=this.customStyle,document.head.appendChild(d)}}disconnectedCallback(){window.removeEventListener("resize",()=>this.scaleContainer(this.el)),window.removeEventListener("load",()=>this.scaleContainer(this.el)),document.body.style.backgroundColor="",document.body.style.backgroundImage=""}render(){const i={backgroundColor:this.bgColor,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return console.log("ðŸš€ ~ LidoContainer ~ canplay:",this.canplay),K(Ue,{key:"1405439fb38afbedb8c29062766d9fb8358fe72a",id:"lido-container",tabindex:0,class:"lido-container",objective:this.objective,baseUrl:this.baseUrl,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,onTouch:this.onTouch,onInCorrect:this.onInCorrect,onCorrect:this.onCorrect,onEntry:this.onEntry,showCheck:`${this.showCheck}`,isContinueOnCorrect:`${this.isContinueOnCorrect}`,isAllowOnlyCorrect:`${this.isAllowOnlyCorrect}`,canplay:`${this.canplay}`},K("slot",{key:"eeb15e63789bff68b699893793dd4e59e3f96678"}))}get el(){return st(this)}};bo.style=yo;const wo="@import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap'); @import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400..800&display=swap'); body{overflow:hidden;background-position:center;background-size:cover;background-repeat:no-repeat;height:100vh}.lido-disable-check-button{pointer-events:none;background-color:#9393935c !important;color:white}.lido-element-selected{border:2px solid;background-color:#ffdf7d !important}.diagonal-target,.diagonal-drop lido-image{transform:scale(0.7) !important;opacity:1 !important}.cloned-element{display:flex !important;position:absolute !important;filter:grayscale(100%);pointer-events:none}",Co=wo,xo="@keyframes rightToPlace{from{transform:translateX(2000px)}to{transform:translateX(0)}}@keyframes topToPlace{from{transform:translateY(-1000px)}to{transform:translateY(0)}}@keyframes bottomToPlace{from{transform:translateY(1000px)}to{transform:translateY(0)}}@keyframes placeToLeft{from{}to{transform:translateX(-2000px)}}@keyframes leftToPlace{from{transform:translateX(-2000px)}to{transform:translateX(0)}}@keyframes shake{0%{transform:translateX(0)}10%{transform:translateX(-5px)}20%{transform:translateX(5px)}30%{transform:translateX(-5px)}40%{transform:translateX(5px)}50%{transform:translateX(-5px)}60%{transform:translateX(5px)}70%{transform:translateX(-5px)}80%{transform:translateX(5px)}90%{transform:translateX(-5px)}100%{transform:translateX(0)}}@keyframes fallAndBounce{0%{transform:translateY(-1000px)}25%{transform:translateY(0px)}50%{transform:translateY(-200px)}75%{transform:translateY(0)}90%{transform:translateY(-100px)}100%{transform:translateY(0)}}@keyframes placeToDown{0%{transform:translateY(0)}100%{transform:translateY(1000px)}}",_o=xo,So=".lido-snackbar{visibility:visible;min-width:250px;background-color:#333;color:#fff;text-align:center;border-radius:2px;padding:16px;position:fixed;z-index:1;bottom:30px;left:50%;transform:translateX(-50%);font-size:17px}.lido-dot-container{text-align:center;position:fixed;z-index:1;width:fit-content;top:1%;left:50%;transform:translate(-50%)}.lido-dot{height:15px;width:15px;margin:0 4px;background-color:#bbb;border-radius:50%;display:inline-block;transition:background-color 0.3s;cursor:pointer}.lido-dot.completed{background-color:grey}.lido-dot.current{background-color:green}.lido-dot:not(.completed):not(.current){background-color:#bbb}",Ao=So,Lo=class{constructor(i){He(this,i),this.NextContainerKey=d=>{d!=null&&d==this.currentContainerIndex||(localStorage.removeItem(We),localStorage.removeItem(ke),localStorage.removeItem(Gt),localStorage.removeItem(rt),d!=null&&d<this.containers.length?(this.currentContainerIndex=d,tr(this.currentContainerIndex)):this.currentContainerIndex<this.containers.length-1?(this.currentContainerIndex++,tr(this.currentContainerIndex)):this.currentContainerIndex>=this.containers.length-1&&(this.showCompletionMessage=!0,qr(),this.currentContainerIndex=0,setTimeout(()=>{this.showCompletionMessage=!1},3e3)),this.containers=[...this.containers])},this.xmlData=void 0,this.initialIndex=0,this.canplay=!0,this.baseUrl="",this.height="",this.currentContainerIndex=this.initialIndex,this.showCompletionMessage=!1,this.containers=[]}componentWillLoad(){window.addEventListener(Jn,()=>{this.NextContainerKey()}),window.addEventListener("changeContainer",i=>{this.NextContainerKey(i.detail.index)}),this.parseXMLData(this.xmlData),window.addEventListener("beforeunload",()=>{localStorage.removeItem(We),localStorage.removeItem(ke),localStorage.removeItem(Gt),localStorage.removeItem(rt)})}disconnectedCallback(){window.removeEventListener(Jn,()=>{this.NextContainerKey()}),window.removeEventListener("changeContainer",i=>{this.NextContainerKey(i.detail.index)})}parseXMLData(i){if(i){const g=new DOMParser().parseFromString(i,"text/xml").documentElement;this.parseContainers(g)}}onXmlDataChange(i){this.parseXMLData(i)}parseElement(i){const d=i.nodeName.toLowerCase(),h={};Array.from(i.attributes).forEach(_=>{h[_.name]=_.value});const g=Array.from(i.childNodes).map(_=>_.nodeType===1?this.parseElement(_):_.nodeType===3&&_.textContent.trim()!==""?_.textContent:null).filter(Boolean),w={"lido-container":K("lido-container",Object.assign({},h,{canplay:this.canplay,baseUrl:this.baseUrl,height:this.height}),g),"lido-col":K("lido-col",Object.assign({},h),g),"lido-trace":K("lido-trace",Object.assign({},h),g),"lido-image":K("lido-image",Object.assign({},h),g),"lido-row":K("lido-row",Object.assign({},h),g),"lido-text":K("lido-text",Object.assign({},h),g),"lido-pos":K("lido-pos",Object.assign({},h),g),"lido-shape":K("lido-shape",Object.assign({},h),g),"lido-wrap":K("lido-wrap",Object.assign({},h),g),"lido-random":K("lido-random",Object.assign({},h),g),"lido-avatar":K("lido-avatar",Object.assign({},h),g)};return w[d]?w[d]:(console.warn(`Unknown tag: ${d}`),null)}parseContainers(i){const d=[];i.querySelectorAll("lido-container").forEach(g=>{const w=this.parseElement(g);w&&d.push(w)}),this.containers=d}renderDots(){const i={pointerEvents:this.canplay?"none":""};return K("div",{id:"lido-dot-indicator",class:"lido-dot-container",style:i},this.containers.map((d,h)=>K("span",{class:`lido-dot ${h<this.currentContainerIndex?"completed":h===this.currentContainerIndex?"current":""}`,onClick:()=>this.jumpToContainer(h)})))}jumpToContainer(i){this.NextContainerKey(i)}render(){return console.log("ðŸš€ ~ LidoHome ~ render ~ this.containers:",this),this.xmlData?K(Ue,{index:this.currentContainerIndex,totalIndex:this.containers.length},K("div",{key:this.currentContainerIndex},this.containers[this.currentContainerIndex]),this.renderDots(),this.showCompletionMessage&&K("div",{class:"lido-snackbar"},"All containers have been displayed!")):K("div",null,"Please provide XML data.")}static get watchers(){return{xmlData:["onXmlDataChange"]}}};Lo.style=Co+(_o+Ao);const Eo=".lido-image{user-select:none;-webkit-user-drag:none;object-fit:contain;max-width:100%;max-height:100%;aspect-ratio:1 / 1;}.slice{background-repeat:no-repeat;background-position:center;background-size:100% 100%}",Io=Eo,Po=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.src=void 0,this.isSlice=void 0,this.sliceWidth="30px",this.style=void 0}componentDidLoad(){gt(this.el,this.type)}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:JSON.parse(Z(`${this.visible}`,i))?"flex":"none",alignItems:"center",justifyContent:"center",borderImageSource:this.isSlice==="true"?`url(${Ct(this.src)})`:"none",borderImageSlice:this.isSlice==="true"?`${parseInt(this.sliceWidth)} fill`:"unset",borderImageRepeat:this.isSlice==="true"?"round":"unset",borderImageWidth:this.isSlice==="true"?`${this.sliceWidth}`:"unset",backgroundImage:this.isSlice==="true"?`url(${Ct(this.src)})`:"none"}}render(){return this.isSlice==="true"?K(Ue,{class:"slice",id:this.id,type:this.type,tabIndex:this.tabIndex,onEntry:this.onEntry,style:this.style}):K(Ue,{type:this.type,tabindex:this.tabIndex,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,value:this.value,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("img",{class:"lido-image",src:Ct(this.src),alt:"",style:this.style}))}get el(){return st(this)}};Po.style=Io;const To=".lido-pos{top:var(--y, 0);left:var(--x, 0);height:var(--height, 100%);width:var(--width, 100%);background-color:var(--bgColor, #eeeeee);display:flex;justify-content:space-around;flex-direction:column;position:fixed}.lido-pos>*{position:absolute}",Ro=To,Mo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.style=void 0}componentDidLoad(){gt(this.el,this.type)}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:JSON.parse(Z(`${this.visible}`,i))?"block":"none"}}render(){return K(Ue,{key:"971edca73664a1bc06917ea4e07d559ffb2ead66",id:this.id,class:"lido-pos",type:this.type,tabindex:this.tabIndex,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,value:this.value,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"7c7de2dc271a6fd10c7b828c73afdbc397e35a75"}))}get el(){return st(this)}};Mo.style=Ro;const Oo=".lido-random{display:flex;justify-content:space-between;align-items:center;position:absolute;}.lido-random>*{position:absolute}",ko=Oo,Fo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0}componentDidLoad(){this.el.querySelectorAll(".lido-random > *").forEach(d=>{const h=Math.random()*100,g=Math.random()*100;d.style.top=`${h}%`,d.style.left=`${g}%`})}render(){const i={height:this.height,width:this.width,top:this.y,left:this.x,display:this.visible?"block":"none",zIndex:this.z,backgroundColor:this.bgColor};return K(Ue,{key:"0611246d6b0091eebcad0ec0f2999d2b8e98c854",class:"lido-random",type:this.type,tabindex:this.tabIndex,value:this.value,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"b03397724ad9e902d82eecde3d2981b01e49b3b0"}))}get el(){return st(this)}};Fo.style=ko;const Qo=class{constructor(i){He(this,i),this.xmlPath=void 0,this.initialIndex=0,this.canplay=!0,this.baseUrl="",this.xmlData=void 0}async componentWillLoad(){var i;const d=(i=this.xmlPath)!==null&&i!==void 0?i:this.baseUrl+"/index.xml";console.log("ðŸš€ ~ LidoRoot ~ componentWillLoad ~ this.baseUrl:",this.baseUrl),console.log("ðŸš€ ~ LidoRoot ~ componentWillLoad ~ this.xmlPath:",this.xmlPath),console.log("ðŸš€ ~ LidoRoot ~ componentWillLoad ~ xmlPath:",d);try{const h=d.startsWith("http")?d:rr(d),g=await fetch(h);if(!g.ok)throw new Error(`Failed to fetch XML data: ${g.statusText}`);const w=await g.text();this.xmlData=w}catch(h){console.error("Error fetching XML data:",h),this.xmlData=null}}render(){return this.xmlData===void 0?K("div",null,"Loading..."):this.xmlData===null?K("div",null,"Error loading XML data. Please check the path or URL."):K("lido-home",{initialIndex:this.initialIndex,canplay:this.canplay,xmlData:this.xmlData,baseUrl:this.baseUrl})}static get assetsDirs(){return["assets"]}},Do=".lido-row{display:flex;justify-content:space-around;align-items:center;}.lido-row>*{}",jo=Do,No=class{constructor(i){He(this,i),this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.childElementsLength=void 0,this.minLength=void 0,this.maxLength=void 0,this.direction=void 0,this.style={},this.display=void 0}componentDidLoad(){gt(this.el,this.type),Qn(this.el,this.minLength,this.maxLength,this.childElementsLength,"flex")}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:this.visible?this.display?Z(this.display,i):"flex":"none",flexDirection:this.direction?Z(this.direction,i):"row",gridTemplateColumns:this.display&&Z(this.display,i)==="grid"?"repeat(auto-fill, minmax(186px, auto))":void 0,gap:this.display&&Z(this.display,i)==="grid"?"20px":void 0}}render(){return K(Ue,{key:"ac41b0c6ed571e205f8d73297c3274343c8b91bb",class:"lido-row",type:this.type,tabindex:this.tabIndex,value:this.value,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"9c29e7ec9014fea4e647af2ce06bf1b9a17d3d0b"}))}get el(){return st(this)}};No.style=jo;const Wo=".lido-shape{position:absolute;top:var(--y);left:var(--x);display:var(--display);z-index:var(--z)}.lido-rectangle{border-radius:0}.lido-circle{width:var(--width);height:var(--width);border-radius:50%;background-color:var(--bgColor)}.lido-ellipse{width:var(--width);height:var(--height);border-radius:50%;background-color:var(--bgColor)}.lido-triangle{width:var(--triangleWidth);height:var(--triangleHeight);background-color:var(--bgColor);clip-path:polygon(50% 0%, 100% 100%, 0% 100%)}.lido-rightTriangle{width:var(--triangleWidth);height:var(--triangleHeight);background-color:var(--bgColor);clip-path:polygon(100% 0%, 100% 100%, 0% 100%)}.lido-leftTriangle{width:var(--triangleWidth);height:var(--triangleHeight);background-color:var(--triangleBgColor);clip-path:polygon(0% 0%, 100% 100%, 0% 100%)}.lido-parallelogram{width:var(--paralleWidth);height:var(--paralleHeight);transform:skew(20deg)}.lido-star{width:var(--starWidth);height:var(--starHeight);background-color:var(--starBgColor);clip-path:polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)}.lido-pentagon{width:var(--pentagonWidth);height:var(--pentagonHeight);background-color:var(--pentagonBgColor);clip-path:polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%)}.lido-heptagon{width:var(--heptagonWidth);height:var(--heptagonHeight);background-color:var(--heptagonBgColor);clip-path:polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)}.lido-octagon{width:var(--octagonWidth);height:var(--octagonHeight);background-color:var(--octagonBgColor);clip-path:polygon(25% 0%, 75% 0%, 100% 25%, 100% 75%, 75% 100%, 25% 100%, 0% 75%, 0% 25%)}.lido-rhombus{width:var(--rhombusWidth);height:var(--rhombusHeight);background-color:var(--rhombusBgColor);clip-path:polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)}.lido-heart{height:var(--heartHeight);width:var(--heartWidth);border-image:radial-gradient(var(--heartBgColor) 69%, #0000 70%) 84.5%/50%;clip-path:polygon(-41% 0, 50% 91%, 141% 0)}",Bo=Wo,$o=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.shapeType=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0}componentDidLoad(){gt(this.el,this.type)}render(){const i={height:this.shapeType!=="polygon"?this.height:void 0,width:this.shapeType!=="polygon"?this.width:void 0,top:this.y,left:this.x,display:this.visible?"block":"none",zIndex:this.z,backgroundColor:this.shapeType!=="polygon"?this.bgColor:"transparent"};return K(Ue,{key:"b82bed547952d36b52d9f94f609aed1f7e7ab4cf",class:`lido-shape ${this.shapeType}`,value:this.value,type:this.type,tabindex:this.tabIndex,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry})}get el(){return st(this)}};$o.style=Bo;const Uo=".lido-text{background-color:#fff;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);transition:background-color 0.3s ease;user-select:none;align-items:center;justify-content:center;text-align:center;border-radius:8px;color:#333;cursor:pointer}.lido-text:hover{background-color:#f0f0f0}",Ho=Uo,zo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.string=void 0,this.font=void 0,this.fontSize=void 0,this.fontColor=void 0,this.highlightWhileSpeaking=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.borderImage=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.style={}}componentDidLoad(){gt(this.el,this.type)}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=this.borderImage?Ct(this.borderImage):"",d=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,d),width:Z(this.width,d),backgroundColor:Z(this.bgColor,d),top:Z(this.y,d),left:Z(this.x,d),zIndex:this.z,fontSize:Z(this.fontSize,d),fontFamily:this.font,color:Z(this.fontColor,d),display:JSON.parse(Z(`${this.visible}`,d))?"flex":"none",borderImage:`url(${i})`,borderImageSlice:i?"0 fill":""}}render(){return K(Ue,{key:"93f1191ac947e2f3de0e4bf33c3f0829e2c3b792",class:"lido-text",value:this.value,type:this.type,tabindex:this.tabIndex,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry,id:this.id,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden},this.string)}get el(){return st(this)}};zo.style=Ho;const Xo=":host{display:block;position:relative}#lido-svgContainer{position:absolute;top:0;left:0;right:0;bottom:50px;display:flex;justify-content:center;align-items:center;overflow:hidden}svg{width:100%;height:100%;max-height:calc(100vh - 50px);touch-action:none}#lido-draggableCircle{cursor:pointer;fill:red;transition:fill 0.2s, r 0.2s}.lido-blindTracing{stroke:none !important}.lido-blindFreeTrace{stroke:none !important}.lido-hovered{cursor:grab;fill:darkred}#lido-controls{position:fixed;bottom:0;left:0;right:0;display:flex;justify-content:space-between;padding:10px;background-color:#f0f0f0;border-top:1px solid #ccc}button{padding:10px;font-size:16px}@media (max-width: 600px){button{padding:8px;font-size:14px}}.lido-trace-path-green{}",Yo=Xo,Vo=class{constructor(i){He(this,i),this.id=void 0,this.svgSource=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.tabIndex=void 0,this.mode=De.ShowFlow,this.fileIndex=-1,this.isDragging=!1,this.activePointerId=null}async initializeSVG(){let i={fileIndex:-1,currentPathIndex:0,lastLength:0,totalPathLength:0,isDragging:!1,circle:null,paths:[],svg:null,proximityThreshold:100,freeTraceProximityThreshold:50,rafId:null,pointerMoveEvent:null,activePointerId:null,mode:this.mode,flowMarkers:[],freeTraceLines:[]};await this.loadAnotherSVG(i,!0)}componentWillLoad(){this.initializeSVG()}async fetchSVG(i){const d=await fetch(i);if(!d.ok)throw new Error(`Failed to fetch SVG (${i}): ${d.statusText}`);return await d.text()}calculateBoundingBox(i,d=22){let h=1/0,g=1/0,w=-1/0,_=-1/0;return i.forEach(L=>{const b=L.getTotalLength(),C=100;for(let E=0;E<=C;E++){const x=L.getPointAtLength(E/C*b);x.x<h&&(h=x.x),x.y<g&&(g=x.y),x.x>w&&(w=x.x),x.y>_&&(_=x.y)}}),h-=d,g-=d,w+=d,_+=d,{minX:h,minY:g,maxX:w,maxY:_}}insertSVG(i){const d=document.getElementById("lido-svgContainer");d.innerHTML=i;const h=d.querySelector("svg");h.removeAttribute("width"),h.removeAttribute("height");const g=h.querySelectorAll("path, line"),w=this.calculateBoundingBox(Array.from(g)),_=w.maxX-w.minX,L=w.maxY-w.minY;h.setAttribute("viewBox",`${w.minX} ${w.minY} ${_} ${L}`)}getSVGElement(){return document.getElementById("lido-svgContainer").querySelector("svg")}getPaths(i){return Array.from(i.querySelectorAll("path, line"))}createFlowMarkersForPath(i,d=10){var h;const w=i.getTotalLength()/(d+1),_=[];for(let L=1;L<=d;L++){const b=i.getPointAtLength(L*w),C=i.getPointAtLength((L+.5)*w),E=Math.atan2(C.y-b.y,C.x-b.x),x=document.createElementNS("http://www.w3.org/2000/svg","polygon");x.setAttribute("points","-5,-5 0,0 -5,5"),x.setAttribute("fill","blue"),x.setAttribute("transform",`translate(${b.x},${b.y}) rotate(${E*180/Math.PI})`),x.setAttribute("class","lido-flow-indicator"),_.push(x),(h=i.parentNode)===null||h===void 0||h.appendChild(x)}return _}updateFlowIndicators(i){i.svg.querySelectorAll(".lido-flow-indicator").forEach(h=>{i.mode===De.NoFlow?h.style.display="none":i.mode===De.ShowFlow&&(h.style.display="block")})}setupDrawingPath(i){i.paths.forEach((d,h)=>{const g=d.getTotalLength(),w=d.cloneNode();w.style.opacity="100",w.style["stroke-opacity"]="100",w.setAttribute("stroke-width","13"),w.setAttribute("stroke-dasharray",g.toString()),w.setAttribute("stroke-dashoffset",g.toString()),d.parentNode.appendChild(w,d),d.setAttribute("class","lido-trace-path"),w.setAttribute("class","lido-trace-path-green"),d.greenPath=w,d.classList.add(i.mode),i.mode===De.BlindTracing||i.mode===De.BlindFreeTrace?d.setAttribute("stroke","none"):(d.setAttribute("stroke","#000"),d.setAttribute("stroke-width","10"),d.setAttribute("fill","none"),d.setAttribute("stroke-dasharray",g.toString()),d.setAttribute("stroke-dashoffset","0")),h===i.currentPathIndex&&i.mode===De.ShowFlow&&(i.flowMarkers=this.createFlowMarkersForPath(d))}),i.totalPathLength=i.paths[i.currentPathIndex].getTotalLength()}setupDraggableCircle(i){var d,h;const g=i.paths[0].getPointAtLength(0),w=document.createElementNS("http://www.w3.org/2000/svg","circle");w.setAttribute("id","lido-draggableCircle"),w.setAttribute("cx",g.x.toString()),w.setAttribute("cy",g.y.toString()),w.setAttribute("r",`calc(${(d=i.paths[0].style["stroke-width"])!==null&&d!==void 0?d:10} / 2)`),w.setAttribute("fill","red"),(h=i.svg)===null||h===void 0||h.appendChild(w),i.circle=w}addEventListeners(i){var d,h,g,w;!i.circle||!i.paths||i.paths.length===0||(i.circle.addEventListener("pointerdown",_=>{_.preventDefault();const L=this.getPointerPosition(_,i.svg),b={x:parseFloat(i.circle.getAttribute("cx")),y:parseFloat(i.circle.getAttribute("cy"))};this.getDistanceSquared(L,b)<=i.proximityThreshold*i.proximityThreshold&&(i.isDragging=!0,i.activePointerId=_.pointerId,i.circle.setPointerCapture(_.pointerId))}),(d=i.svg)===null||d===void 0||d.addEventListener("pointermove",_=>{!i.isDragging||_.pointerId!==i.activePointerId||(i.pointerMoveEvent=_,i.rafId||(i.rafId=requestAnimationFrame(()=>{this.handlePointerMove(i),i.rafId=null})))}),(h=i.svg)===null||h===void 0||h.addEventListener("pointerup",_=>{_.pointerId===i.activePointerId&&(i.isDragging=!1,i.activePointerId=null)}),(g=i.svg)===null||g===void 0||g.addEventListener("pointercancel",_=>{_.pointerId===i.activePointerId&&(i.isDragging=!1,i.activePointerId=null)}),(w=i.svg)===null||w===void 0||w.addEventListener("contextmenu",_=>{_.preventDefault()}))}handlePointerMove(i){var d,h,g,w;if(!i.isDragging||!i.circle||!i.paths||i.paths.length===0)return;const _=i.pointerMoveEvent,L=this.getPointerPosition(_,i.svg),b={x:parseFloat(i.circle.getAttribute("cx")),y:parseFloat(i.circle.getAttribute("cy"))},C=i.paths[i.currentPathIndex];if(!C){console.error("No valid path found at the current index");return}let E;if(i.mode===De.FreeTrace||i.mode===De.BlindFreeTrace?E=i.freeTraceProximityThreshold*i.freeTraceProximityThreshold:E=i.proximityThreshold*i.proximityThreshold,this.getDistanceSquared(L,b)>E)return;const k=this.getClosestPointOnPath(C,L);if(!(this.getDistanceSquared(L,k)>E)){if(i.mode===De.FreeTrace||i.mode===De.BlindFreeTrace){if(i.currentFreePath||(i.currentFreePath=[]),!i.currentFreePath[i.currentPathIndex]){const H=document.createElementNS("http://www.w3.org/2000/svg","path");H.setAttribute("stroke-width",i.paths[0].style["stroke-width"]),H.setAttribute("fill","none"),H.setAttribute("stroke-linecap","round"),H.setAttribute("stroke","lightgreen"),H.setAttribute("d",`M${L.x},${L.y}`),(d=i.svg)===null||d===void 0||d.appendChild(H),i.currentFreePath[i.currentPathIndex]=H,i.lastPointerPos=L}const u=i.lastPointerPos||L,U=i.currentFreePath[i.currentPathIndex].getAttribute("d"),re=(u.x+L.x)/2,ue=(u.y+L.y)/2,he=`${U} Q ${u.x},${u.y} ${re},${ue}`;i.currentFreePath[i.currentPathIndex].setAttribute("d",he),i.circle.setAttribute("cx",L.x.toString()),i.circle.setAttribute("cy",L.y.toString()),(h=i.svg)===null||h===void 0||h.appendChild(i.circle),i.lastPointerPos=L,C.getTotalLength()-k.length<5&&(this.moveToNextPath(i),i.currentFreePath[i.currentPathIndex]=null);return}i.isDragging&&k.length>=i.lastLength&&(i.lastLength=k.length,i.circle.setAttribute("cx",k.x.toString()),i.circle.setAttribute("cy",k.y.toString()),(g=i.svg)===null||g===void 0||g.appendChild(i.circle),(w=C.greenPath)===null||w===void 0||w.setAttribute("stroke-dashoffset",(i.totalPathLength-i.lastLength).toString())),i.totalPathLength-1-i.lastLength<5&&i.currentPathIndex<i.paths.length-1?this.moveToNextPath(i):i.totalPathLength-1-i.lastLength<5&&i.currentPathIndex===i.paths.length-1&&En()}}getPointerPosition(i,d){var h;const g=d.createSVGPoint();g.x=i.clientX,g.y=i.clientY;const w=(h=d.getScreenCTM())===null||h===void 0?void 0:h.inverse();return w?g.matrixTransform(w):{x:i.clientX,y:i.clientY}}getDistanceSquared(i,d){const h=i.x-d.x,g=i.y-d.y;return h*h+g*g}getClosestPointOnPath(i,d){const h=i.getTotalLength();let g={x:0,y:0,length:0},w=1/0;const _=20;let L={length:0},b=1/0;for(let k=0;k<=h;k+=_){const D=i.getPointAtLength(k),u=this.getDistanceSquared(d,D);u<b&&(b=u,L={x:D.x,y:D.y,length:k})}const C=2,E=Math.max(L.length-_,0),x=Math.min(L.length+_,h);for(let k=E;k<=x;k+=C){const D=i.getPointAtLength(k),u=this.getDistanceSquared(d,D);u<w&&(w=u,g={x:D.x,y:D.y,length:k})}return g}async loadAnotherSVG(i,d){i.isDragging=!1;try{i.svg&&this.cleanupPreviousSVG(i);const h=await this.fetchSVG(this.svgSource);this.insertSVG(h),i.svg=this.getSVGElement(),(this.mode===De.BlindTracing||this.mode===De.BlindFreeTrace)&&i.svg.querySelectorAll("image").forEach(g=>{g.style.display="none"}),i.paths=this.getPaths(i.svg),this.setupDrawingPath(i),this.setupDraggableCircle(i),this.addEventListeners(i)}catch(h){console.error(`Error loading SVG (${this.svgSource}):`,h)}}cleanupPreviousSVG(i){var d,h;i.circle&&((d=i.svg)===null||d===void 0||d.removeChild(i.circle),i.circle=null),((h=i.svg)===null||h===void 0?void 0:h.querySelectorAll(".lido-flow-indicator")).forEach(w=>{w.remove()}),i.currentPathIndex=0,i.lastLength=0,i.totalPathLength=i.paths[0].getTotalLength()}moveToNextPath(i){var d,h;if(i.isDragging=!1,i.currentPathIndex++,i.lastLength=0,i.currentPathIndex>=i.paths.length){En();return}const g=i.paths[i.currentPathIndex];if(!g){console.error("No valid path found at the next index");return}i.totalPathLength=g.getTotalLength();const w=g.getPointAtLength(0);(d=i.circle)===null||d===void 0||d.setAttribute("cx",w.x.toString()),(h=i.circle)===null||h===void 0||h.setAttribute("cy",w.y.toString()),i.mode===De.ShowFlow&&(i.flowMarkers=this.createFlowMarkersForPath(g))}render(){const i={height:this.height,width:this.width,top:this.y,left:this.x,zIndex:this.z,position:"absolute"};return K(Ue,{key:"075ad58051458f8dd7d98e046b34a382cde9936e",class:"lido-trace",id:this.id,style:i,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,tabindex:this.tabIndex},K("div",{key:"62eabe49c11611905c518b15c80ff33951a7ebdf",id:"lido-svgContainer"}))}static get assetsDirs(){return["svg"]}};Vo.style=Yo;const Go=".lido-wrap{display:grid;grid-gap:10px;grid-template-columns:repeat(auto-fill, minmax(186px, auto))}.lido-wrap>*{padding:10px;background-color:var(--child-bg-color, #f0f0f0);box-sizing:border-box}",qo=Go,Jo=class{constructor(i){He(this,i),this.id=void 0,this.value=void 0,this.height=void 0,this.width=void 0,this.ariaLabel=void 0,this.ariaHidden=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.bgColor=void 0,this.type=void 0,this.tabIndex=void 0,this.visible=void 0,this.audio=void 0,this.onTouch=void 0,this.onInCorrect=void 0,this.onCorrect=void 0,this.onEntry=void 0,this.childElementsLength=void 0,this.minLength=void 0,this.maxLength=void 0,this.style=void 0}componentDidLoad(){gt(this.el,this.type),Qn(this.el,this.minLength,this.maxLength,this.childElementsLength,"grid")}componentWillLoad(){this.updateStyles(),window.addEventListener("resize",this.updateStyles.bind(this)),window.addEventListener("load",this.updateStyles.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.updateStyles.bind(this)),window.removeEventListener("load",this.updateStyles.bind(this))}updateStyles(){const i=window.innerHeight>window.innerWidth?"portrait":"landscape";this.style={height:Z(this.height,i),width:Z(this.width,i),backgroundColor:Z(this.bgColor,i),top:Z(this.y,i),left:Z(this.x,i),zIndex:this.z,display:JSON.parse(Z(`${this.visible}`,i))?"grid":"none"}}render(){return K(Ue,{key:"c4e66e5d75e598fd237a1829b2153090ba34993b",class:"lido-wrap",value:this.value,type:this.type,tabindex:this.tabIndex,style:this.style,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,audio:this.audio,onTouch:this.onTouch,onCorrect:this.onCorrect,onInCorrect:this.onInCorrect,onEntry:this.onEntry},K("slot",{key:"60a3c125bb0ab2ad8279968d8ef3579c9d2a8a89"}))}get el(){return st(this)}};Jo.style=qo;export{fo as lido_avatar,vo as lido_col,bo as lido_container,Lo as lido_home,Po as lido_image,Mo as lido_pos,Fo as lido_random,Qo as lido_root,No as lido_row,$o as lido_shape,zo as lido_text,Vo as lido_trace,Jo as lido_wrap};
