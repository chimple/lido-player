import{g as t}from"./p-938de246.js";const e="lidoDragSelectedMap",o="lidoSelectedValues",n="lidoActivityScore",a="lidoNextContainer",r="lidoElementDrop",c="dropLength",i="dropHasDrag";var l,s;function d(t,e){const o=new CustomEvent(t,{detail:e});window.dispatchEvent(o)}function u(){d("lidoGameCompleted",{})}function f(t){d("lidoActivityChange",{index:t})}function m(t,e){d("lidoElementClick",{element:t,isCorrect:e,createdAt:(new Date).toISOString()})}!function(t){t.NoFlow="lido-noFlow",t.ShowFlow="lido-showFlow",t.FreeTrace="lido-freeTrace",t.BlindTracing="lido-blindTracing",t.BlindFreeTrace="lido-blindFreeTrace"}(l||(l={})),function(t){t.Diagonal="diagonal"}(s||(s={}));class p{constructor(){}static getInstance(){return p.instance||(p.instance=new p),p.instance}setRiveInstance(t){this.riveInstance=t}getRiveInstance(){return this.riveInstance}}class g{constructor(){this.audioElement=document.createElement("audio"),this.audioElement.id="audio",document.body.appendChild(this.audioElement)}static getI(){return g.instance||(g.instance=new g),g.instance}stop(){(null===window||void 0===window?void 0:window.speechSynthesis)&&window.speechSynthesis.cancel(),this.audioElement.pause(),this.audioElement.currentTime=0,this.audioElement.src="",document.querySelectorAll(".speaking-highlight").forEach((t=>F(t)));const t=document.querySelector("#play"),e=document.querySelector("#pause");t&&e&&(t.style.visibility="visible",e.style.visibility="hidden")}async play(t){let e=t.getAttribute("audio")||"";if(!e){const o=t.children;for(let t=0;t<o.length;t++){const n=o[t].getAttribute("audio");n&&(e=n)}}if(e){e=T(e),this.audioElement.src=e,console.log("ðŸš€ Playing audio:",this.audioElement.src);try{await this.audioElement.play(),A(t),await new Promise((e=>{this.audioElement.onended=()=>{F(t),e()}}))}catch(t){console.log("ðŸš€ Audio play error:",t)}}else if(t.textContent)try{A(t),await async function(t){return new Promise(((e,o)=>{if(!("speechSynthesis"in window))return void o(new Error("Speech synthesis is not supported in this browser."));const n=window.speechSynthesis;setTimeout((()=>{const o=new SpeechSynthesisUtterance(t);o.onend=()=>{e(!0)},n.speak(o)}),50)}))}(t.textContent),F(t)}catch(t){console.log("ðŸš€ TTS Error:",t)}}}const h=new class{constructor(){this.rightMoves=0,this.wrongMoves=0,this.finalScore=0}};function b(t,e,o){return(t||"")+(e?` ${e}`:"")+(o?` ${o}`:"")}const S=t=>{t.style.animation="unset";const e=window.getComputedStyle(t).transform;if("none"===e)return 1;{const t=e.match(/matrix\(([^)]+)\)/);if(t){const e=t[1].split(", ");return parseFloat(e[0])}}return 1},w=(t,e)=>{const o=t.getBoundingClientRect(),n=document.querySelectorAll(`[type="${e}"]`);let a=null,r=0;return n.forEach((n=>{if(n===t)return;const c=n.getBoundingClientRect(),i=Math.max(0,Math.min(o.right,c.right)-Math.max(o.left,c.left))*Math.max(0,Math.min(o.bottom,c.bottom)-Math.max(o.top,c.top));0!==i&&("slide"===e?i>=.8*Math.min(o.width*o.height,c.width*c.height)&&i>r&&(r=i,a=n):i>r&&(r=i,a=n))})),a};async function v(t,n){const a=localStorage.getItem(o)||"",l=localStorage.getItem(e);let s=JSON.parse(localStorage.getItem(i)||" {}");if(n&&("true"===n.getAttribute("isAllowOnlyOneDrop")||!n.getAttribute("isAllowOnlyOneDrop"))){const o=Object.values(s).find((t=>document.getElementById(t.drop)===n));if(o?o.isFull=!0:console.warn("No matching drop item found for",n),localStorage.setItem(i,JSON.stringify(s)),w(t,"drag")){if(t.style.transform="translate(0,0)",t.style.transition="transform 0.5s ease",l){let o=JSON.parse(l);for(const e in o)o[e].includes(t.value)&&delete o[e];localStorage.setItem(e,JSON.stringify(o))}return void document.querySelectorAll("[type='drop']").forEach((t=>{const o=JSON.parse(localStorage.getItem(e))||{};Object.keys(o).map(Number).includes(t.tabIndex)?("lido-text"===t.tagName.toLowerCase()&&(t.style.border="",t.style.backgroundColor="transparent"),"lido-image"===t.tagName.toLowerCase()&&(t.style.opacity="0")):("lido-text"===t.tagName.toLowerCase()&&(t.style.border="",t.style.backgroundColor=""),"lido-image"===t.tagName.toLowerCase()&&(t.style.opacity="1"))}))}}if(!n){t.style.transform="translate(0,0)",t.style.transition="transform 0.5s ease";let n=j.get(t);if(n){let e=Object.values(s).find((t=>document.getElementById(t.drop)===n));e&&(e.isFull=!1,localStorage.setItem(i,JSON.stringify(s))),j.delete(t)}if(a){let e=JSON.parse(a);e=e.filter((e=>e!=t.value)),localStorage.setItem(o,JSON.stringify(e))}if(l){let o=JSON.parse(l);for(const e in o)o[e].includes(t.value)&&delete o[e];localStorage.setItem(e,JSON.stringify(o))}return document.querySelectorAll("[type='drop']").forEach((t=>{const o=JSON.parse(localStorage.getItem(e))||{};Object.keys(o).map(Number).includes(t.tabIndex)?("lido-text"===t.tagName.toLowerCase()&&(t.style.border="",t.style.backgroundColor="transparent"),"lido-image"===t.tagName.toLowerCase()&&(t.style.opacity="0")):("lido-text"===t.tagName.toLowerCase()&&(t.style.border="",t.style.backgroundColor=""),"lido-image"===t.tagName.toLowerCase()&&(t.style.opacity="1"))})),void J()}if(l){let o=j.get(t);if(o){let t=Object.values(s).find((t=>document.getElementById(t.drop)===o));t&&(t.isFull=!1,localStorage.setItem(i,JSON.stringify(s)))}let n=JSON.parse(l);for(const e in n)n[e].includes(t.value)&&delete n[e];localStorage.setItem(e,JSON.stringify(n))}let u=JSON.parse(localStorage.getItem(c))||0;if(u+=1,localStorage.setItem(c,JSON.stringify(u)),u===N(n.value)){const t=Object.values(s).find((t=>document.getElementById(t.drop)===n));t?t.isFull=!0:console.warn("No matching drop item found for",n),localStorage.setItem(i,JSON.stringify(s)),u=0,localStorage.setItem(c,JSON.stringify(u))}j.set(t,n);const f=n.value.includes(t.value);if(function(t,e,o){d(r,{dragElement:t,dropElement:e,isCorrect:o,createdAt:(new Date).toISOString()})}(t,n,f),f){const e=n.getAttribute("onCorrect");e&&await x(e,n,t)}else{const e=n.getAttribute("onInCorrect");await x(e,n,t)}k(f),t.style.opacity="1",await async function(t,n){var a;const r=document.querySelector("#lido-container");if(!r)return;if("true"===r.getAttribute("isAllowOnlyCorrect")&&!n.value.includes(t.value))return void(t.style.transform="translate(0,0)");await x("this.alignMatch='true'",n,t);let c=JSON.parse(null!==(a=localStorage.getItem(e))&&void 0!==a?a:"{}");const i=n.getAttribute("tabindex");c[i]||(c[i]=[]),c[i].push(t.value),localStorage.setItem(e,JSON.stringify(c));const l=Object.keys(c).sort(((t,e)=>parseInt(t)-parseInt(e))).reduce(((t,e)=>{const o=c[e];return t.push(o.length>1?`(${o.join("|")})`:o[0]),t}),[]);localStorage.setItem(o,JSON.stringify(l)),document.querySelectorAll("[type='drop']").forEach((t=>{const o=JSON.parse(localStorage.getItem(e))||{};Object.keys(o).map(Number).includes(t.tabIndex)?("lido-text"===t.tagName.toLowerCase()&&(t.style.border="",t.style.backgroundColor="transparent"),"lido-image"===t.tagName.toLowerCase()&&(t.style.opacity="0")):("lido-text"===t.tagName.toLowerCase()&&(t.style.border="",t.style.backgroundColor=""),"lido-image"===t.tagName.toLowerCase()&&(t.style.opacity="1"))})),J()}(t,n)}const x=async(t,e,o)=>{var n;const a=O(t);for(let t=0;t<a.length;t++){const r=a[t],c=document.querySelector(r.actor),i="this"===r.actor?e:"element"===r.actor?o:c||document.getElementById(r.actor);if(i)switch(r.action){case"transform":{const t=window.getComputedStyle(i).transform;i.style.transform="none"!==t?`${t} ${r.value}`:r.value;break}case"alignMatch":{const t=i,e=o,a=document.querySelector("#lido-container"),r=S(a);e.style.transform="translate(0,0)";const c=t.getBoundingClientRect(),l=e.getBoundingClientRect(),d=(c.left+c.width/2-(l.left+l.width/2))/r,u=(c.top+c.height/2-(l.top+l.height/2))/r;e.style.transform=(null===(n=o.getAttribute("dropAttr"))||void 0===n?void 0:n.toLowerCase())===s.Diagonal?`translate(${d-90}px, ${u-90}px)`:`translate(${d}px, ${u}px)`;break}case"removeClone":document.querySelectorAll(r.value).forEach((t=>t.remove()));break;case"addClass":i.classList.add(r.value);break;case"speak":await g.getI().play(i);break;case"stop":await g.getI().stop();break;case"sleep":!isNaN(Number(r.value))&&await new Promise((t=>setTimeout(t,Number(r.value))));break;case"avatarAnimate":{const t=p.getInstance().getRiveInstance();t&&r.value&&t.play(r.value);break}default:i.style[r.action]=r.value}}},O=t=>{var e;const o=[];return t?((null===(e=t.split(";"))||void 0===e?void 0:e.map((t=>t.trim()))).forEach((t=>{if(t){const[e,n]=t.split("=").map((t=>t.trim())),a=e.lastIndexOf(".");if(-1!==a){const t=e.substring(0,a).trim(),r=e.substring(a+1).trim();o.push({actor:t,action:r,value:n.replace(/['"]/g,"")})}}})),o):o},y=(t,e)=>{const o=t.split(",").map((t=>t.trim()));let n=0,a=new Set;for(const t of o)if(t.startsWith("(")&&t.endsWith(")")){const o=t.slice(1,-1).split("|").map((t=>t.trim())),a=e[n].slice(1,-1).split("|").map((t=>t.trim()));if(n>=a.length)return!1;for(let t=0;t<o.length;t++)if(!o.includes(a[t]))return!1;n++}else if(t.includes("|")){const e=t.split("|").map((t=>t.trim()));for(const t of e)a.add(t)}else{if(n>=e.length||e[n]!==t)return!1;n++}for(;n<e.length;){if(!a.has(e[n]))return!1;a.delete(e[n]),n++}return n===e.length},N=t=>{const e=t.split(",").map((t=>t.trim()));let o=0;for(const t of e)t.startsWith("(")&&t.endsWith(")")?t.includes("|")?o+=t.split("|").length:o+=1:o+=t.split("|").length;return o},k=t=>{t?h.rightMoves+=1:h.wrongMoves+=1,console.log("Right Moves : ",h.rightMoves),console.log("Wrong Moves : ",h.wrongMoves)},J=()=>{var t;const e=document.querySelector("#lido-container"),n=e.objective,a=null!==(t=localStorage.getItem(o))&&void 0!==t?t:"",r=document.querySelector("#lido-checkButton");a&&N(a)===N(n)?"true"==e.getAttribute("showCheck")?r.classList.remove("lido-disable-check-button"):M():x("this.addClass='lido-disable-check-button'",r)},M=async()=>{var t;const e=document.querySelector("#lido-container");if(!e)return;const a=e.objective,r=null!==(t=JSON.parse(localStorage.getItem(o)))&&void 0!==t?t:[];if(y(a,r)){const t=e.getAttribute("onCorrect");t&&await x(t,e),C()}else{const t=e.getAttribute("onInCorrect");await x(t,e),"true"===e.getAttribute("isContinueOnCorrect")||C()}await(()=>{const t=h.rightMoves;(t=>{var e,o,a;const r=document.querySelector("lido-home");if(!r)return;const c=Number(null!==(e=r.getAttribute("index"))&&void 0!==e?e:0),i=Number(null!==(o=r.getAttribute("totalIndex"))&&void 0!==o?o:0),l=JSON.parse(null!==(a=localStorage.getItem(n))&&void 0!==a?a:"{}");if(l[c.toString()]=t,function(t,e,o){d("lidoActivityEnd",{index:t,totalIndex:e,score:o})}(c,i,t),localStorage.setItem(n,JSON.stringify(l)),i-1==c){const t=Object.values(l),e=t.reduce(((t,e)=>t+e),0)/t.length;h.finalScore=Math.floor(e),console.log("Total Score : ",h.finalScore),function(t){d("lidoLessonEnd",{score:t})}(e),localStorage.removeItem(n)}})(Math.floor(t/(t+h.wrongMoves)*100)),h.rightMoves=0,h.wrongMoves=0})()},C=()=>{g.getI().stop(),console.log("ðŸš€ ~ triggerNextContainer ~ event:",event),d(a,{})},$=async(t,n)=>{const a=document.querySelector("#lido-container");if(!a)return;const r=t.getAttribute("onEntry");await x(r,t);const c=a.getAttribute("canplay");if(null==c||"false"!==c){switch(n){case"drag":!function(t){let o=!1,n=!1,a=0,r=0,c=0,i=0,l=null;const d=document.querySelector("#lido-container");if(!d)return void console.error('Container with ID "container" not found.');let u,f;P(t,"drag");const m=e=>{var d;if(g.getI().stop(),I(t),o=!0,n=!0,e instanceof MouseEvent?(a=e.clientX,r=e.clientY):(a=e.touches[0].clientX,r=e.touches[0].clientY),t.style.opacity="0.8",t.style.cursor="grabbing",(null===(d=t.getAttribute("dropAttr"))||void 0===d?void 0:d.toLowerCase())===s.Diagonal){const e=window.getComputedStyle(t),o=t.getBoundingClientRect();l||(l=t.cloneNode(!0),l.style.left=`${o.left}px`,l.style.top=`${o.top}px`,l.style.width=`${o.width}px`,l.style.height=`${o.height}px`,l.style.transform=e.transform,l.style.zIndex="0",l.setAttribute("visible","true"),l.classList.add("cloned-element"),document.body.appendChild(l))}const u=window.getComputedStyle(t).transform;if("none"!==u){const t=u.match(/matrix\(([^)]+)\)/);if(t){const e=t[1].split(", ");c=parseFloat(e[4]),i=parseFloat(e[5])}}else c=0,i=0;document.addEventListener("mousemove",x),document.addEventListener("mouseup",y),document.addEventListener("touchmove",x),document.addEventListener("touchend",y)},p=d.getBoundingClientRect(),h=t.getBoundingClientRect();u=p.top-h.top,f=p.left-h.left;const b=new MutationObserver((e=>{for(const o of e)if("attributes"===o.type&&"style"===o.attributeName){const e=d.getBoundingClientRect(),o=t.getBoundingClientRect();u=e.top-o.top,f=e.left-o.left}}));b.observe(d,{attributes:!0,attributeFilter:["style"]});const x=l=>{if(!o)return;n=!1,t.style.transition="none";const s=S(d);let m=0,p=0;l instanceof MouseEvent?(m=(l.clientX-a)/s,p=(l.clientY-r)/s):(m=(l.touches[0].clientX-a)/s,p=(l.touches[0].clientY-r)/s);const g=c+m,h=i+p,b=d.getBoundingClientRect(),v=t.getBoundingClientRect(),x=t.style.transform.match(/-?\d+(\.\d+)?/g).map(Number),O=v.left/s-x[0],y=v.top-x[1],N=b.width/s-Math.abs(f/s)-v.width/s,k=b.left-O,J=b.top-y,M=b.height/s-Math.abs(u/s)-v.height/s,C=g+O<=b.left?k:Math.min(g,N),$=h+y<=b.top?J:Math.min(h,M);t.style.transform=`translate(${C}px, ${$}px)`;let E=w(t,"drop");document.querySelectorAll("[type='drop']").forEach((t=>{const o=JSON.parse(localStorage.getItem(e))||{};Object.keys(o).map(Number).includes(t.tabIndex)?("lido-text"===t.tagName.toLowerCase()&&(t.style.border="",t.style.backgroundColor="transparent"),"lido-image"===t.tagName.toLowerCase()&&(t.style.opacity="0")):("lido-text"===t.tagName.toLowerCase()&&(t.style.border="",t.style.backgroundColor=""),"lido-image"===t.tagName.toLowerCase()&&(t.style.opacity="1"))})),E&&("lido-text"===E.tagName.toLowerCase()?(E.style.border="2px dashed #ff0000",E.style.backgroundColor="rgba(255, 0, 0, 0.1)"):E.style.opacity="0.3")};let O=null;const y=()=>{var a;if(o=!1,n)return;document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",y),t.style.opacity="",t.style.cursor="move";const r=document.querySelectorAll("[type='drop']");r.forEach((()=>{r.forEach((t=>{const o=JSON.parse(localStorage.getItem(e))||{};Object.keys(o).map(Number).includes(t.tabIndex)?("lido-text"===t.tagName.toLowerCase()&&(t.style.border="",t.style.backgroundColor="transparent"),"lido-image"===t.tagName.toLowerCase()&&(t.style.opacity="0")):("lido-text"===t.tagName.toLowerCase()&&(t.style.border="",t.style.backgroundColor=""),"lido-image"===t.tagName.toLowerCase()&&(t.style.opacity="1"))}))}));let c=w(t,"drop");v(t,c),(null===(a=t.getAttribute("dropAttr"))||void 0===a?void 0:a.toLowerCase())===s.Diagonal&&(c?t&&(t.classList.add("diagonal-drop"),c.classList.add("diagonal-target"),O=c):(O&&(O.classList.remove("diagonal-target"),O=null),null==t||t.classList.remove("diagonal-drop"),t.style.transform="translate(0, 0)",l&&(l.remove(),l=null)))};t.style.cursor="move",t.style.transform="translate(0, 0)",t.addEventListener("mousedown",m),t.addEventListener("touchstart",m),t.addEventListener("click",(()=>{n&&E(t,"drag")}))}(t);break;case"click":!function(t){if(P(t,"click"),t.style.cursor="pointer",!t)return void console.error("No element provided.");t.addEventListener("click",(async()=>{g.getI().stop();const n=document.querySelector("#lido-container"),a=n.objective.split(","),r=document.querySelector("#lido-checkButton"),c="true"===n.getAttribute("showCheck");if("lido-checkButton"==t.getAttribute("id"))return r.classList.add("lido-disable-check-button"),void await M();const i=t.classList.contains("lido-element-selected");let l=JSON.parse(localStorage.getItem(o))||[];if(1===a.length){localStorage.setItem(o,JSON.stringify([t.value]));const e=a.includes(t.value);if(m(t,e),e){const e=t.getAttribute("onCorrect");t.style.pointerEvents="none",await x(e,t)}else{const e=t.getAttribute("onInCorrect");await x(e,t)}return k(e),void J()}if(c&&r.classList.remove("lido-disable-check-button"),i){t.classList.remove("lido-element-selected"),x(t.getAttribute("onEntry"),t),l=l.filter((e=>e!=t.value)),localStorage.setItem(o,JSON.stringify(l));let n=JSON.parse(localStorage.getItem(e))||{};const a=t.value,i=Object.keys(n).find((t=>n[t].includes(a)));if(i){n[i]=n[i].filter((t=>t!==a)),0===n[i].length&&delete n[i],localStorage.setItem(e,JSON.stringify(n));const t=Object.keys(n).sort(((t,e)=>parseInt(t)-parseInt(e))).reduce(((t,e)=>t.concat(n[e])),[]);localStorage.setItem(o,JSON.stringify(t))}c&&0===l.length&&r.classList.add("lido-disable-check-button")}else{{t.classList.add("lido-element-selected");const n=t.value,r=Object.keys(a).find((t=>a[t]===n));let c=JSON.parse(localStorage.getItem(e))||{};r?c[r]=[n]:c[a.length+l.length]=[n],localStorage.setItem(e,JSON.stringify(c));const i=Object.keys(c).sort(((t,e)=>parseInt(t)-parseInt(e))).reduce(((t,e)=>t.concat(c[e])),[]);localStorage.setItem(o,JSON.stringify(i));const s=a.includes(t.value);if(m(t,s),s){const e=t.getAttribute("onCorrect");await x(e,t)}else{const e=t.getAttribute("onInCorrect");await x(e,t)}k(s)}c||N(a)!==N(l)||M()}})),t.addEventListener("pointerdown",(()=>{"clickable"===t.getAttribute("animation")&&(t.classList.add("removeShadow"),t.style.top="40px",t.style.position="relative")})),t.addEventListener("pointerup",(()=>{"clickable"===t.getAttribute("animation")&&setTimeout((()=>{t.classList.remove("removeShadow"),t.style.top="0px",t.style.position="relative"}),50)}))}(t);break;case"drop":!function(t){let e=JSON.parse(localStorage.getItem(i)||"{}");const o=t.getAttribute("tabIndex");"object"==typeof e&&null!==e||(e={}),e[o]||(e[o]={drop:t.id,isFull:!1},localStorage.setItem(i,JSON.stringify(e))),t.onclick=()=>{E(t,"drop")},P(t,"drop")}(t);break;case"slide":!function(t){let e=!1,n=!1,a=0,r=0,c=0,i=0;const l=t.parentElement;if(!l)return void console.error("Parent element not found.");const s=e=>{I(t),n=!0,e instanceof MouseEvent?(a=e.clientX,r=e.clientY):(a=e.touches[0].clientX,r=e.touches[0].clientY),t.style.opacity="0.8",t.style.cursor="grabbing";const o=window.getComputedStyle(t).transform;if("none"!==o){const t=o.match(/matrix\(([^)]+)\)/);if(t){const e=t[1].split(", ");c=parseFloat(e[4]),i=parseFloat(e[5])}}else c=0,i=0;l.getBoundingClientRect(),t.getBoundingClientRect(),document.addEventListener("mousemove",d),document.addEventListener("mouseup",u),document.addEventListener("touchmove",d),document.addEventListener("touchend",u)};new MutationObserver((e=>{for(const o of e)"attributes"===o.type&&"style"===o.attributeName&&(l.getBoundingClientRect(),t.getBoundingClientRect())})).observe(l,{attributes:!0,attributeFilter:["style"]});const d=o=>{if(!n)return;const s=S(l);let d=0,u=0;o instanceof MouseEvent?(d=(o.clientX-a)/s,u=(o.clientY-r)/s):(d=(o.touches[0].clientX-a)/s,u=(o.touches[0].clientY-r)/s);const f=c+d,m=i+u,p=l.getBoundingClientRect(),g=t.getBoundingClientRect(),h=t.style.transform.match(/-?\d+(\.\d+)?/g).map(Number),b=g.left/s-h[0],v=g.top-h[1],x=p.top-v,O=p.bottom-(g.bottom-h[1]),y=f+b<=p.left?p.left-b:Math.min(f,p.right-(g.right/s-h[0])),N=m+v<=p.top?x:Math.min(m,O);t.style.transform=`translate(${y}px, ${N}px)`;let k=w(t,"slide");if(k&&k!=t){const n=t.parentElement,l=k.parentElement;if(n&&l){const s=document.createComment("element-placeholder"),d=document.createComment("overlapped-placeholder");n.replaceChild(s,t),l.replaceChild(d,k),n.replaceChild(k,s),l.replaceChild(t,d),t.style.transform="translate(0, 0)",a=o instanceof MouseEvent?o.clientX:o.touches[0].clientX,r=o instanceof MouseEvent?o.clientY:o.touches[0].clientY,c=0,i=0,e=!0}}},u=()=>{n=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",u),t.style.opacity="",t.style.cursor="move",t.style.transform="translate(0, 0)",e&&((t=>{const e=JSON.parse(localStorage.getItem(o))||[],n=document.querySelectorAll("[type='slide']");let a=0;n.forEach((t=>{e[a++]=t.value})),localStorage.setItem(o,JSON.stringify(e));const r=document.querySelector("#lido-container").objective.split(","),c=e.indexOf(t.value),i=y(t.value,[r[c].trim()]);k(i),J()})(t),e=!1)};t.style.cursor="move",t.style.transform="translate(0, 0)",t.addEventListener("mousedown",s),t.addEventListener("touchstart",s),t.addEventListener("click",(()=>{E(t,"drag")}))}(t)}!function(t){if(!t)return;const e=t.getAttribute("onTouch");e&&(t.onclick=async()=>{console.log("ðŸš€ ~ element.onclick= ~ onTouch:",e),e&&await x(e,t)})}(t)}};async function E(t,e){if(document.querySelectorAll(`[type='${e}']`).forEach((t=>{I(t)})),!document.querySelector("#dynamic-highlight-style")){const t=document.createElement("style");t.id="dynamic-highlight-style",t.innerHTML="\n      .highlight {\n        // border: 4px solid #e74c3c; /* Thicker red border for more visibility */\n        // border-radius: 12px; /* Larger rounded corners */\n        // background-color: rgba(231, 76, 60, 0.3); /* Stronger, more noticeable background */\n        // box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2), 0 12px 40px rgba(0, 0, 0, 0.2); /* Stronger shadow */\n        // outline: 4px solid rgba(231, 76, 60, 0.6); /* Glow effect */\n      }\n    ",document.head.appendChild(t)}null==t||t.classList.add("highlight"),t.ariaPressed="true";const o="drop"===e?t:document.querySelector("[type='drop'].highlight"),n="drag"===e?t:document.querySelector("[type='drag'].highlight");if(o||async function(t){const e=JSON.parse(localStorage.getItem(i)||"{}"),o=t;if(!o)return void console.error("Element not found");const n=getComputedStyle(o).transform;if(I(t),n&&"none"!==n&&"matrix(1, 0, 0, 1, 0, 0)"!==n)return o.style.transition="transform 0.5s ease",o.style.transform="translate(0px, 0px)",void v(o,null);let a=Object.values(e).find((t=>!t.isFull));if(a){const t=document.querySelector(`#${a.drop}`);o.style.transition="transform 0.5s ease",v(o,t)}}(t),o&&n){n.style.transition="transform 0.5s ease",n.style.transform="";const t=document.querySelector("#lido-container"),e=S(t);console.log("ðŸš€ ~ onClickDropOrDragElement ~ containerScale:",e);const a=o.getBoundingClientRect(),r=n.getBoundingClientRect();n.style.transform=`translate(${(a.left-r.left)/e}px, ${(a.top-r.top)/e}px)`,document.querySelectorAll("*").forEach((t=>{I(t)})),await v(n,o)}}const j=new Map;function I(t){t.classList.remove("highlight"),t.ariaPressed="false"}function A(t){if(!t)return;t.classList.add("speaking-highlight");const e="#speaking-highlight-style";if(!document.querySelector(e)){const o=document.createElement("style");o.id=e,o.innerHTML=`\n      .speaking-highlight {\n        --base-transform: ${t.style.transform};\n        box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9) !important; /* Stronger orange glow effect */\n        // border: 3px solid green !important;\n        transition: box-shadow 0.5s ease-in-out, transform 0.5s ease-in-out;\n        transform: scale(1.05); /* Subtle scale effect to pop the element */\n        animation: pulseEffect 1.5s infinite; /* Pulsing animation */\n      }\n\n      @keyframes pulseEffect {\n        0% {\n          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);\n          transform: var(--base-transform) scale(1.05);\n        }\n        50% {\n          box-shadow: 0 0 30px 15px rgba(255, 165, 0, 1);\n          transform: var(--base-transform) scale(1.1);\n        }\n        100% {\n          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);\n          transform: var(--base-transform) scale(1.05);\n        }\n      }\n    `,document.head.appendChild(o)}}function F(t){t&&t.classList.remove("speaking-highlight")}function T(e){const o=document.querySelector("#lido-container").getAttribute("baseUrl");return(null==e?void 0:e.startsWith("http"))?e:o?o+e:t(e)}function D(t,e,o,n,a){if(void 0===n)return;const r=Array.from(t.children);let c=n;e&&n<e&&(c=e),o&&n>o&&(c=o),r.forEach(((t,e)=>{t.style.display=e<c?a:"none"}))}const W=(t,e)=>t&&t.includes(",")?t.split(",").reduce(((t,e)=>{const[o,n]=e.split(".");return t[o.trim()]=n.trim(),t}),{})[e]||"":t,P=(t,e)=>{const o=document.querySelectorAll("[type='drag']"),n=document.querySelectorAll("[type='drop']"),a=document.querySelectorAll("[type='click']");let r=0;if("click"===e)return a.forEach((t=>{const e=t;let o=null;if(e.getAttribute("flexibleWidth"))o=e;else{const t=e.children;for(let e=0;e<t.length;e++){const n=t[e];if(n.getAttribute("flexibleWidth")){o=n;break}}}if(o){const t=o.style.width,e=o.style.padding;o.style.width="auto",o.style.padding="0 20px";const n=o.offsetWidth;o.style.width=t,o.style.padding=e,n>r&&(r=n)}})),void a.forEach((t=>{const e=t;if(e.getAttribute("flexibleWidth")){if("true"===e.getAttribute("flexibleWidth"))return;e.style.width=`${r}px`}else{const t=e.children;for(let e=0;e<t.length;e++){const o=t[e];if(o.getAttribute("flexibleWidth")){if("true"===o.getAttribute("flexibleWidth"))return;o.style.width=`${r}px`;break}}}}));o.forEach((t=>{const e=t,o=e.style.width,n=e.style.padding;e.style.width="auto",e.style.padding="0 20px";const a=e.offsetWidth;e.style.width=o,e.style.padding=n,a>r&&(r=a)})),o.forEach((t=>{const o=t,n=o.getAttribute("flexibleWidth");"false"===n?o.style.width=`${r}px`:"true"===n&&"drag"===e&&(o.style.width="auto",o.style.padding="0 20px")})),n.forEach((t=>{const o=t,n=o.getAttribute("flexibleWidth");if("false"===n){const t=parseFloat(getComputedStyle(o).borderWidth);if("number"==typeof t){const e=r-2*t,n=parseFloat(o.style.height)-2*t;return o.style.height=`${n}px`,void(o.style.width=`${e}px`)}}else"true"===n&&"drag"===e&&(o.style.width="auto",o.style.padding="0 20px")}))};export{e as D,a as N,p as R,o as S,l as T,c as a,i as b,T as c,f as d,u as e,b as f,D as h,$ as i,W as p,C as t}