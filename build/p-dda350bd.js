import{g as t}from"./p-37351245.js";const e="lidoDragSelectedMap";const o="lidoSelectedValues";const n="lidoActivityScore";const c="lidoActivityEnd";const s="lidoLessonEnd";const i="lidoNextContainer";const r="lidoActivityChange";const a="lidoGameCompleted";const l="lidoElementDrop";const u="lidoElementClick";const d="dropLength";const f="dropHasDrag";var m;(function(t){t["NoFlow"]="lido-noFlow";t["ShowFlow"]="lido-showFlow";t["FreeTrace"]="lido-freeTrace";t["BlindTracing"]="lido-blindTracing";t["BlindFreeTrace"]="lido-blindFreeTrace"})(m||(m={}));class p{constructor(){this.rightMoves=0;this.wrongMoves=0;this.finalScore=0}}function g(t,e){const o=new CustomEvent(t,{detail:e});window.dispatchEvent(o)}function h(t,e,o){g(c,{index:t,totalIndex:e,score:o})}function b(t){g(s,{score:t})}function S(){g(i,{})}function w(){g(a,{})}function x(t){g(r,{index:t})}function O(t,e,o){g(l,{dragElement:t,dropElement:e,isCorrect:o,createdAt:(new Date).toISOString()})}function y(t,e){g(u,{element:t,isCorrect:e,createdAt:(new Date).toISOString()})}class v{constructor(){}static getInstance(){if(!v.instance){v.instance=new v}return v.instance}setRiveInstance(t){this.riveInstance=t}getRiveInstance(){return this.riveInstance}}class N{constructor(){this.audioElement=document.createElement("audio");this.audioElement.id="audio";document.body.appendChild(this.audioElement)}static getI(){if(!N.instance){N.instance=new N}return N.instance}stop(){if(window===null||window===void 0?void 0:window.speechSynthesis){window.speechSynthesis.cancel()}this.audioElement.pause();this.audioElement.currentTime=0;this.audioElement.src="";const t=document.querySelectorAll(".speaking-highlight");t.forEach((t=>tt(t)));const e=document.querySelector("#play");const o=document.querySelector("#pause");if(e&&o){e.style.visibility="visible";o.style.visibility="hidden"}}async play(t){let e=t.getAttribute("audio")||"";if(!e){const o=t.children;for(let t=0;t<o.length;t++){const n=o[t].getAttribute("audio");if(n){e=n}}}if(e){e=et(e);this.audioElement.src=e;console.log("ðŸš€ Playing audio:",this.audioElement.src);try{await this.audioElement.play();_(t);await new Promise((e=>{this.audioElement.onended=()=>{tt(t);e()}}))}catch(t){console.log("ðŸš€ Audio play error:",t)}}else if(t.textContent){try{_(t);await ot(t.textContent);tt(t)}catch(t){console.log("ðŸš€ TTS Error:",t)}}}}const k=new p;function J(t,e,o){return(t||"")+(e?` ${e}`:"")+(o?` ${o}`:"")}const M=t=>{t.style.animation="unset";const e=window.getComputedStyle(t).transform;if(e==="none"){return 1}else{const t=e.match(/matrix\(([^)]+)\)/);if(t){const e=t[1].split(", ");const o=parseFloat(e[0]);return o}}return 1};function C(t){let e=false;let o=false;let n=0;let c=0;let s=0;let i=0;const r=t.parentElement;if(!r){console.error(`Parent element not found.`);return}const a=e=>{Z(t);o=true;if(e instanceof MouseEvent){n=e.clientX;c=e.clientY}else{n=e.touches[0].clientX;c=e.touches[0].clientY}t.style.opacity="0.8";t.style.cursor="grabbing";const a=window.getComputedStyle(t).transform;if(a!=="none"){const t=a.match(/matrix\(([^)]+)\)/);if(t){const e=t[1].split(", ");s=parseFloat(e[4]);i=parseFloat(e[5])}}else{s=0;i=0}r.getBoundingClientRect();t.getBoundingClientRect();document.addEventListener("mousemove",d);document.addEventListener("mouseup",f);document.addEventListener("touchmove",d);document.addEventListener("touchend",f)};const l=new MutationObserver((e=>{for(const o of e){if(o.type==="attributes"&&o.attributeName==="style"){r.getBoundingClientRect();t.getBoundingClientRect()}}}));const u={attributes:true,attributeFilter:["style"]};l.observe(r,u);const d=a=>{if(!o)return;const l=M(r);let u=0;let d=0;if(a instanceof MouseEvent){u=(a.clientX-n)/l;d=(a.clientY-c)/l}else{u=(a.touches[0].clientX-n)/l;d=(a.touches[0].clientY-c)/l}const f=s+u;const m=i+d;const p=r.getBoundingClientRect();const g=t.getBoundingClientRect();const h=t.style.transform.match(/-?\d+(\.\d+)?/g);const b=h.map(Number);const S=g.left/l-b[0];const w=g.top-b[1];const x=g.right/l-b[0];const O=g.bottom-b[1];const y=p.right-x;const v=p.left-S;const N=p.top-w;const k=p.bottom-O;const J=f+S<=p.left?v:Math.min(f,y);const C=m+w<=p.top?N:Math.min(m,k);t.style.transform=`translate(${J}px, ${C}px)`;let $=j(t,"slide");if($){if($!=t){const o=t.parentElement;const r=$.parentElement;if(o&&r){const l=document.createComment("element-placeholder");const u=document.createComment("overlapped-placeholder");o.replaceChild(l,t);r.replaceChild(u,$);o.replaceChild($,l);r.replaceChild(t,u);t.style.transform="translate(0, 0)";n=a instanceof MouseEvent?a.clientX:a.touches[0].clientX;c=a instanceof MouseEvent?a.clientY:a.touches[0].clientY;s=0;i=0;e=true}}}};const f=n=>{o=false;document.removeEventListener("mousemove",d);document.removeEventListener("mouseup",f);document.removeEventListener("touchmove",d);document.removeEventListener("touchend",f);t.style.opacity="";t.style.cursor="move";t.style.transform="translate(0, 0)";if(e){$(t);e=false}};t.style.cursor="move";t.style.transform="translate(0, 0)";t.addEventListener("mousedown",a);t.addEventListener("touchstart",a);t.addEventListener("click",(e=>{Q(t,"drag")}))}const $=t=>{const e=JSON.parse(localStorage.getItem(o))||[];const n=document.querySelectorAll("[type='slide']");let c=0;n.forEach((t=>{e[c++]=t["value"]}));localStorage.setItem(o,JSON.stringify(e));const s=document.querySelector("#lido-container")["objective"];const i=s.split(",");const r=e.indexOf(t["value"]);const a=A(t["value"],[i[r].trim()]);P(a);L()};function E(t){let o=false;let n=true;let c=0;let s=0;let i=0;let r=0;const a=document.querySelector("#lido-container");if(!a){console.error(`Container with ID "container" not found.`);return}st(t,"drag");let l;let u;const d=e=>{N.getI().stop();Z(t);o=true;if(e instanceof MouseEvent){c=e.clientX;s=e.clientY}else{c=e.touches[0].clientX;s=e.touches[0].clientY}t.style.opacity="0.8";t.style.cursor="grabbing";const n=window.getComputedStyle(t).transform;if(n!=="none"){const t=n.match(/matrix\(([^)]+)\)/);if(t){const e=t[1].split(", ");i=parseFloat(e[4]);r=parseFloat(e[5])}}else{i=0;r=0}document.addEventListener("mousemove",h);document.addEventListener("mouseup",b);document.addEventListener("touchmove",h);document.addEventListener("touchend",b)};const f=a.getBoundingClientRect();const m=t.getBoundingClientRect();l=f.top-m.top;u=f.left-m.left;const p=new MutationObserver((e=>{for(const o of e){if(o.type==="attributes"&&o.attributeName==="style"){const e=a.getBoundingClientRect();const o=t.getBoundingClientRect();l=e.top-o.top;u=e.left-o.left}}}));const g={attributes:true,attributeFilter:["style"]};p.observe(a,g);const h=d=>{if(!o)return;n=false;t.style.transition="none";const f=M(a);let m=0;let p=0;if(d instanceof MouseEvent){m=(d.clientX-c)/f;p=(d.clientY-s)/f}else{m=(d.touches[0].clientX-c)/f;p=(d.touches[0].clientY-s)/f}const g=i+m;const h=r+p;const b=a.getBoundingClientRect();const S=t.getBoundingClientRect();const w=t.style.transform.match(/-?\d+(\.\d+)?/g);const x=w.map(Number);const O=S.left/f-x[0];const y=S.top-x[1];const v=b.width/f-Math.abs(u/f)-S.width/f;const N=b.left-O;const k=b.top-y;const J=b.height/f-Math.abs(l/f)-S.height/f;const C=g+O<=b.left?N:Math.min(g,v);const $=h+y<=b.top?k:Math.min(h,J);t.style.transform=`translate(${C}px, ${$}px)`;let E=j(t,"drop");const I=document.querySelectorAll("[type='drop']");I.forEach((t=>{const o=JSON.parse(localStorage.getItem(e))||{};const n=Object.keys(o).map(Number);if(n.includes(t["tabIndex"])){if(t.tagName.toLowerCase()==="lido-text"){t.style.border="";t.style.backgroundColor="transparent"}if(t.tagName.toLowerCase()==="lido-image"){t.style.visibility="hidden"}}else{if(t.tagName.toLowerCase()==="lido-text"){t.style.border="";t.style.backgroundColor=""}if(t.tagName.toLowerCase()==="lido-image"){t.style.visibility="visible";t.style.opacity="1"}}}));if(E){if(E.tagName.toLowerCase()==="lido-text"){E.style.border="2px dashed #ff0000";E.style.backgroundColor="rgba(255, 0, 0, 0.1)"}else{E.style.opacity="0.3"}}};const b=c=>{o=false;if(n)return;n=true;document.removeEventListener("mousemove",h);document.removeEventListener("mouseup",b);document.removeEventListener("touchmove",h);document.removeEventListener("touchend",b);t.style.opacity="";t.style.cursor="move";const s=document.querySelectorAll("[type='drop']");s.forEach((t=>{s.forEach((t=>{const o=JSON.parse(localStorage.getItem(e))||{};const n=Object.keys(o).map(Number);if(n.includes(t["tabIndex"])){if(t.tagName.toLowerCase()==="lido-text"){t.style.border="";t.style.backgroundColor="transparent"}if(t.tagName.toLowerCase()==="lido-image"){t.style.opacity="0"}}else{if(t.tagName.toLowerCase()==="lido-text"){t.style.border="";t.style.backgroundColor=""}if(t.tagName.toLowerCase()==="lido-image"){t.style.opacity="1"}}}))}));let i=j(t,"drop");I(t,i)};t.style.cursor="move";t.style.transform="translate(0, 0)";t.addEventListener("mousedown",d);t.addEventListener("touchstart",d);t.addEventListener("click",(e=>{Q(t,"drag")}))}const j=(t,e)=>{const o=t.getBoundingClientRect();const n=document.querySelectorAll(`[type="${e}"]`);let c=null;let s=0;n.forEach((n=>{if(n===t)return;const i=n.getBoundingClientRect();const r=Math.max(0,Math.min(o.right,i.right)-Math.max(o.left,i.left));const a=Math.max(0,Math.min(o.bottom,i.bottom)-Math.max(o.top,i.top));const l=r*a;if(l===0)return;if(e==="slide"){const t=o.width*o.height;const e=i.width*i.height;const r=Math.min(t,e)*.8;if(l>=r&&l>s){s=l;c=n}}else if(l>s){s=l;c=n}}));return c};async function I(t,n){const c=localStorage.getItem(o)||"";const s=localStorage.getItem(e);let i=JSON.parse(localStorage.getItem(f)||" {}");if(n){if(n.getAttribute("isAllowOnlyOneDrop")==="true"||!n.getAttribute("isAllowOnlyOneDrop")){const o=Object.values(i).find((t=>document.getElementById(t.drop)===n));o.isFull=true;localStorage.setItem(f,JSON.stringify(i));let c=j(t,"drag");if(c){t.style.transform="translate(0,0)";if(s){let o=JSON.parse(s);for(const e in o){if(o[e].includes(t["value"])){delete o[e]}}localStorage.setItem(e,JSON.stringify(o))}const o=document.querySelectorAll("[type='drop']");o.forEach((t=>{const o=JSON.parse(localStorage.getItem(e))||{};const n=Object.keys(o).map(Number);if(n.includes(t["tabIndex"])){if(t.tagName.toLowerCase()==="lido-text"){t.style.border="";t.style.backgroundColor="transparent"}if(t.tagName.toLowerCase()==="lido-image"){t.style.opacity="0"}}else{if(t.tagName.toLowerCase()==="lido-text"){t.style.border="";t.style.backgroundColor=""}if(t.tagName.toLowerCase()==="lido-image"){t.style.opacity="1"}}}));return}}}if(!n){let n=X.get(t);if(n){let t=Object.values(i).find((t=>document.getElementById(t.drop)===n));if(t){t.isFull=false;localStorage.setItem(f,JSON.stringify(i))}}if(c){let e=JSON.parse(c);e=e.filter((e=>e!=t["value"]));localStorage.setItem(o,JSON.stringify(e))}if(s){let o=JSON.parse(s);for(const e in o){if(o[e].includes(t["value"])){delete o[e]}}localStorage.setItem(e,JSON.stringify(o))}const r=document.querySelectorAll("[type='drop']");r.forEach((t=>{const o=JSON.parse(localStorage.getItem(e))||{};const n=Object.keys(o).map(Number);if(n.includes(t["tabIndex"])){if(t.tagName.toLowerCase()==="lido-text"){t.style.border="";t.style.backgroundColor="transparent"}if(t.tagName.toLowerCase()==="lido-image"){t.style.opacity="0"}}else{if(t.tagName.toLowerCase()==="lido-text"){t.style.border="";t.style.backgroundColor=""}if(t.tagName.toLowerCase()==="lido-image"){t.style.opacity="1"}}}));L();return}if(s){let o=X.get(t);if(o){let t=Object.values(i).find((t=>document.getElementById(t.drop)===o));if(t){t.isFull=false;localStorage.setItem(f,JSON.stringify(i))}}let n=JSON.parse(s);for(const e in n){if(n[e].includes(t["value"])){delete n[e]}}localStorage.setItem(e,JSON.stringify(n))}let r=JSON.parse(localStorage.getItem(d))||0;r+=1;localStorage.setItem(d,JSON.stringify(r));if(r===D(n["value"])){const t=Object.values(i).find((t=>document.getElementById(t.drop)===n));t.isFull=true;localStorage.setItem(f,JSON.stringify(i));r=0;localStorage.setItem(d,JSON.stringify(r))}X.set(t,n);const a=n["value"].includes(t["value"]);O(t,n,a);if(a){const e=n.getAttribute("onCorrect");if(e){await F(e,n,t)}}else{const e=n.getAttribute("onInCorrect");await F(e,n,t)}P(a);await W(t,n)}const F=async(t,e,o)=>{const n=T(t);for(let t=0;t<n.length;t++){const c=n[t];const s=document.querySelector(c.actor);const i=c.actor==="this"?e:c.actor==="element"?o:s?s:document.getElementById(c.actor);if(i){switch(c.action){case"transform":{const t=window.getComputedStyle(i).transform;i.style.transform=t!=="none"?`${t} ${c.value}`:c.value;break}case"alignMatch":{const t=i;const e=o;const n=document.querySelector("#lido-container");const c=M(n);e.style.transform="translate(0,0)";const s=t.getBoundingClientRect();const r=e.getBoundingClientRect();const a=s.left+s.width/2;const l=s.top+s.height/2;const u=r.left+r.width/2;const d=r.top+r.height/2;const f=(a-u)/c;const m=(l-d)/c;e.style.transform=`translate(${f}px, ${m}px)`;break}case"addClass":{i.classList.add(c.value);break}case"speak":{await N.getI().play(i);break}case"stop":{await N.getI().stop();break}case"sleep":{const t=!isNaN(Number(c.value));if(t){await new Promise((t=>setTimeout(t,Number(c.value))))}break}case"avatarAnimate":{const t=v.getInstance();const e=t.getRiveInstance();if(e&&c.value){e.play(c.value)}break}default:{i.style[c.action]=c.value;break}}}}};const T=t=>{var e;const o=[];if(!t)return o;const n=(e=t.split(";"))===null||e===void 0?void 0:e.map((t=>t.trim()));n.forEach((t=>{if(t){const[e,n]=t.split("=").map((t=>t.trim()));const c=e.lastIndexOf(".");if(c!==-1){const t=e.substring(0,c).trim();const s=e.substring(c+1).trim();o.push({actor:t,action:s,value:n.replace(/['"]/g,"")})}}}));return o};const A=(t,e)=>{const o=t.split(",").map((t=>t.trim()));let n=0;let c=new Set;for(const t of o){if(t.startsWith("(")&&t.endsWith(")")){const o=t.slice(1,-1).split("|").map((t=>t.trim()));const c=e[n].slice(1,-1).split("|").map((t=>t.trim()));if(n>=c.length)return false;for(let t=0;t<o.length;t++){if(!o.includes(c[t]))return false}n++}else if(t.includes("|")){const e=t.split("|").map((t=>t.trim()));for(const t of e){c.add(t)}}else{if(n>=e.length||e[n]!==t)return false;n++}}while(n<e.length){if(!c.has(e[n])){return false}c.delete(e[n]);n++}return n===e.length};const D=t=>{const e=t.split(",").map((t=>t.trim()));let o=0;for(const t of e){if(t.startsWith("(")&&t.endsWith(")")){if(t.includes("|")){o+=t.split("|").length}else{o+=1}}else{o+=t.split("|").length}}return o};async function W(t,n){var c;const s=document.querySelector("#lido-container");if(!s)return;const i=s.getAttribute("isAllowOnlyCorrect")==="true";if(i){const e=n["value"].includes(t["value"]);if(!e){t.style.transform="translate(0,0)";return}}await F("this.alignMatch='true'",n,t);let r=JSON.parse((c=localStorage.getItem(e))!==null&&c!==void 0?c:"{}");const a=n.getAttribute("tabindex");if(!r[a]){r[a]=[]}r[a].push(t["value"]);localStorage.setItem(e,JSON.stringify(r));const l=Object.keys(r).sort(((t,e)=>parseInt(t)-parseInt(e)));const u=l.reduce(((t,e)=>{const o=r[e];if(o.length>1){t.push(`(${o.join("|")})`)}else{t.push(o[0])}return t}),[]);localStorage.setItem(o,JSON.stringify(u));const d=document.querySelectorAll("[type='drop']");d.forEach((t=>{const o=JSON.parse(localStorage.getItem(e))||{};const n=Object.keys(o).map(Number);if(n.includes(t["tabIndex"])){if(t.tagName.toLowerCase()==="lido-text"){t.style.border="";t.style.backgroundColor="transparent"}if(t.tagName.toLowerCase()==="lido-image"){t.style.opacity="0"}}else{if(t.tagName.toLowerCase()==="lido-text"){t.style.border="";t.style.backgroundColor=""}if(t.tagName.toLowerCase()==="lido-image"){t.style.opacity="1"}}}));L()}const P=t=>{if(t){k.rightMoves+=1}else{k.wrongMoves+=1}console.log("Right Moves : ",k.rightMoves);console.log("Wrong Moves : ",k.wrongMoves)};const R=()=>{const t=k.rightMoves;const e=k.wrongMoves;let o=Math.floor(t/(t+e)*100);B(o);k.rightMoves=0;k.wrongMoves=0};const B=t=>{var e,o,c;const s=document.querySelector("lido-home");if(!s)return;const i=Number((e=s.getAttribute("index"))!==null&&e!==void 0?e:0);const r=Number((o=s.getAttribute("totalIndex"))!==null&&o!==void 0?o:0);const a=JSON.parse((c=localStorage.getItem(n))!==null&&c!==void 0?c:"{}");const l=i.toString();a[l]=t;h(i,r,t);localStorage.setItem(n,JSON.stringify(a));if(r-1==i){const t=Object.values(a);const e=t.reduce(((t,e)=>t+e),0)/t.length;k.finalScore=Math.floor(e);console.log("Total Score : ",k.finalScore);b(e);localStorage.removeItem(n)}};const L=()=>{var t;const e=document.querySelector("#lido-container");const n=e["objective"];const c=(t=localStorage.getItem(o))!==null&&t!==void 0?t:"";const s=document.querySelector("#lido-checkButton");if(!c||D(c)!==D(n)){F("this.addClass='lido-disable-check-button'",s);return}const i=e.getAttribute("showCheck")=="true";if(i){s.classList.remove("lido-disable-check-button")}else{G()}};const G=async()=>{var t;const e=document.querySelector("#lido-container");if(!e)return;const n=e["objective"];const c=(t=JSON.parse(localStorage.getItem(o)))!==null&&t!==void 0?t:[];const s=A(n,c);if(s){U();const t=e.getAttribute("onCorrect");if(t){await F(t,e)}H()}else{const t=e.getAttribute("onInCorrect");await F(t,e);const o=e.getAttribute("isContinueOnCorrect")==="true";if(!o){H()}}await R()};const U=()=>{const t=document.querySelectorAll("[type='drag']");const e=document.querySelectorAll("[type='drop']");if(!t||!e)return;e.forEach((e=>{const o=e;o.style.opacity="1";t.forEach((t=>{const o=t;if(e["value"].includes(o["value"])){o.style.transform="translate(0,0)";e.appendChild(o)}}))}))};const H=()=>{N.getI().stop();console.log("ðŸš€ ~ triggerNextContainer ~ event:",event);S()};const V=async(t,e)=>{const o=document.querySelector("#lido-container");if(!o)return;const n=t.getAttribute("onEntry");await F(n,t);const c=o.getAttribute("canplay");if(c!=null&&c==="false")return;switch(e){case"drag":{E(t);break}case"click":{z(t);break}case"drop":{K(t);break}case"slide":{C(t);break}}q(t)};function q(t){if(!t)return;const e=t.getAttribute("onTouch");if(!e)return;t.onclick=async()=>{console.log("ðŸš€ ~ element.onclick= ~ onTouch:",e);if(!e)return;await F(e,t)}}function z(t){st(t,"click");t.style.cursor="pointer";if(!t){console.error("No element provided.");return}const n=async()=>{N.getI().stop();const n=document.querySelector("#lido-container");const c=n["objective"].split(",");const s=document.querySelector("#lido-checkButton");const i=n.getAttribute("showCheck")==="true";if(t.getAttribute("id")=="lido-checkButton"){s.classList.add("lido-disable-check-button");await G();return}const r=t.classList.contains("lido-element-selected");let a=JSON.parse(localStorage.getItem(o))||[];if(c.length===1){localStorage.setItem(o,JSON.stringify([t["value"]]));const e=c.includes(t["value"]);y(t,e);if(e){const e=t.getAttribute("onCorrect");t.style.pointerEvents="none";await F(e,t)}else{const e=t.getAttribute("onInCorrect");await F(e,t)}P(e);L();return}if(i){s.classList.remove("lido-disable-check-button")}if(r){t.classList.remove("lido-element-selected");F(t.getAttribute("onEntry"),t);a=a.filter((e=>e!=t["value"]));localStorage.setItem(o,JSON.stringify(a));let n=JSON.parse(localStorage.getItem(e))||{};const c=t["value"];const r=Object.keys(n).find((t=>n[t].includes(c)));if(r){n[r]=n[r].filter((t=>t!==c));if(n[r].length===0){delete n[r]}localStorage.setItem(e,JSON.stringify(n));const t=Object.keys(n).sort(((t,e)=>parseInt(t)-parseInt(e)));const s=t.reduce(((t,e)=>t.concat(n[e])),[]);localStorage.setItem(o,JSON.stringify(s))}if(i&&a.length===0){s.classList.add("lido-disable-check-button")}return}else{t.classList.add("lido-element-selected");const n=t["value"];const s=Object.keys(c).find((t=>c[t]===n));let i=JSON.parse(localStorage.getItem(e))||{};if(!s){i[c.length+a.length]=[n]}else{i[s]=[n]}localStorage.setItem(e,JSON.stringify(i));const r=Object.keys(i).sort(((t,e)=>parseInt(t)-parseInt(e)));const l=r.reduce(((t,e)=>t.concat(i[e])),[]);localStorage.setItem(o,JSON.stringify(l));const u=c.includes(t["value"]);y(t,u);if(u){const e=t.getAttribute("onCorrect");await F(e,t)}else{const e=t.getAttribute("onInCorrect");await F(e,t)}P(u)}if(!i&&D(c)===D(a)){G()}};t.addEventListener("click",n)}function K(t){let e=JSON.parse(localStorage.getItem(f)||"{}");const o=t.getAttribute("tabIndex");if(typeof e!=="object"||e===null){e={}}if(!e[o]){e[o]={drop:t.id,isFull:false};localStorage.setItem(f,JSON.stringify(e))}t.onclick=()=>{Q(t,"drop")};st(t,"drop")}async function Q(t,e){const o=document.querySelectorAll(`[type='${e}']`);o.forEach((t=>{Z(t)}));if(!document.querySelector("#dynamic-highlight-style")){const t=document.createElement("style");t.id="dynamic-highlight-style";t.innerHTML=`\n      .highlight {\n        // border: 4px solid #e74c3c; /* Thicker red border for more visibility */\n        // border-radius: 12px; /* Larger rounded corners */\n        background-color: rgba(231, 76, 60, 0.3); /* Stronger, more noticeable background */\n        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2), 0 12px 40px rgba(0, 0, 0, 0.2); /* Stronger shadow */\n        outline: 4px solid rgba(231, 76, 60, 0.6); /* Glow effect */\n      }\n    `;document.head.appendChild(t)}t===null||t===void 0?void 0:t.classList.add("highlight");t.ariaPressed="true";const n=e==="drop"?t:document.querySelector("[type='drop'].highlight");const c=e==="drag"?t:document.querySelector("[type='drag'].highlight");if(!n){Y(t)}if(n&&c){c.style.transition="transform 0.5s ease";c.style.transform="";const t=document.querySelector("#lido-container");const e=M(t);console.log("ðŸš€ ~ onClickDropOrDragElement ~ containerScale:",e);const o=n.getBoundingClientRect();const s=c.getBoundingClientRect();const i=(o.left-s.left)/e;const r=(o.top-s.top)/e;c.style.transform=`translate(${i}px, ${r}px)`;const a=document.querySelectorAll(`*`);a.forEach((t=>{Z(t)}));await I(c,n)}}const X=new Map;async function Y(t){const e=JSON.parse(localStorage.getItem(f)||"{}");const o=t;if(!o){console.error("Element not found");return}const n=getComputedStyle(o).transform;Z(t);if(n&&n!=="none"&&n!=="matrix(1, 0, 0, 1, 0, 0)"){o.style.transition="transform 0.5s ease";o.style.transform="translate(0px, 0px)";I(o,null);return}let c=Object.values(e).find((t=>!t.isFull));if(c){const t=document.querySelector(`#${c.drop}`);o.style.transition="transform 0.5s ease";I(o,t)}}function Z(t){t.classList.remove("highlight");t.ariaPressed="false"}function _(t){if(!t)return;t.classList.add("speaking-highlight");const e="#speaking-highlight-style";if(!document.querySelector(e)){const o=document.createElement("style");o.id=e;o.innerHTML=`\n      .speaking-highlight {\n        --base-transform: ${t.style.transform};\n        box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9) !important; /* Stronger orange glow effect */\n        // border: 3px solid green !important;\n        transition: box-shadow 0.5s ease-in-out, transform 0.5s ease-in-out;\n        transform: scale(1.05); /* Subtle scale effect to pop the element */\n        animation: pulseEffect 1.5s infinite; /* Pulsing animation */\n      }\n\n      @keyframes pulseEffect {\n        0% {\n          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);\n          transform: var(--base-transform) scale(1.05);\n        }\n        50% {\n          box-shadow: 0 0 30px 15px rgba(255, 165, 0, 1);\n          transform: var(--base-transform) scale(1.1);\n        }\n        100% {\n          box-shadow: 0 0 20px 10px rgba(255, 165, 0, 0.9);\n          transform: var(--base-transform) scale(1.05);\n        }\n      }\n    `;document.head.appendChild(o)}}function tt(t){if(!t)return;t.classList.remove("speaking-highlight")}function et(e){const o=document.querySelector("#lido-container");const n=o.getAttribute("baseUrl");if(e.startsWith("http")){return e}else if(n){return n+e}else{return t(e)}}async function ot(t,e){return new Promise(((e,o)=>{if(!("speechSynthesis"in window)){o(new Error("Speech synthesis is not supported in this browser."));return}const n=window.speechSynthesis;setTimeout((()=>{const o=new SpeechSynthesisUtterance(t);o.onend=()=>{e(true)};n.speak(o)}),50)}))}function nt(t,e,o,n,c){if(n===undefined)return;const s=Array.from(t.children);let i=n;if(e&&n<e){i=e}if(o&&n>o){i=o}s.forEach(((t,e)=>{t.style.display=e<i?c:"none"}))}const ct=(t,e)=>{if(!t||!t.includes(",")){return t}const o=t.split(",").reduce(((t,e)=>{const[o,n]=e.split(".");t[o.trim()]=n.trim();return t}),{});return o[e]||""};const st=(t,e)=>{const o=document.querySelectorAll("[type='drag']");const n=document.querySelectorAll("[type='drop']");const c=document.querySelectorAll("[type='click']");let s=0;if(e==="click"){c.forEach((t=>{const e=t;let o=null;if(e.getAttribute("flexibleWidth")){o=e}else{const t=e.children;for(let e=0;e<t.length;e++){const n=t[e];if(n.getAttribute("flexibleWidth")){o=n;break}}}if(o){const t=o.style.width;const e=o.style.padding;o.style.width="auto";o.style.padding="0 20px";const n=o.offsetWidth;o.style.width=t;o.style.padding=e;if(n>s){s=n}}}));c.forEach((t=>{const e=t;if(e.getAttribute("flexibleWidth")){if(e.getAttribute("flexibleWidth")==="true")return;e.style.width=`${s}px`}else{const t=e.children;for(let e=0;e<t.length;e++){const o=t[e];if(o.getAttribute("flexibleWidth")){if(o.getAttribute("flexibleWidth")==="true")return;o.style.width=`${s}px`;break}}}}));return}o.forEach((t=>{const e=t;const o=e.style.width;const n=e.style.padding;e.style.width="auto";e.style.padding="0 20px";const c=e.offsetWidth;e.style.width=o;e.style.padding=n;if(c>s){s=c}}));o.forEach((t=>{const o=t;const n=o.getAttribute("flexibleWidth");if(n==="false"){o.style.width=`${s}px`}else if(n==="true"&&e==="drag"){o.style.width="auto";o.style.padding="0 20px"}}));n.forEach((t=>{const o=t;const n=o.getAttribute("flexibleWidth");if(n==="false"){const t=parseFloat(getComputedStyle(o).borderWidth);if(typeof t==="number"){const e=s-t*2;const n=parseFloat(o.style.height)-t*2;o.style.height=`${n}px`;o.style.width=`${e}px`;return}}else if(n==="true"&&e==="drag"){o.style.width="auto";o.style.padding="0 20px"}}))};export{e as D,i as N,v as R,o as S,m as T,d as a,f as b,et as c,x as d,w as e,J as f,nt as h,V as i,ct as p,H as t};
//# sourceMappingURL=p-dda350bd.js.map